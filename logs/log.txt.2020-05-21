2020-05-20 11:09:01,387 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 11:09:01,389 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 11:09:01,400 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 11:09:22,479 mydb.py[line: 30] ERROR: 初始化数据连接失败：2003: Can't connect to MySQL server on '192.168.1.100:3306' (10060 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。)
2020-05-20 11:10:07,651 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 11:10:07,652 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 11:10:07,663 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 11:10:07,666 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 11:10:08,249 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 11:10:08,250 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 11:10:08,253 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 11:10:08,254 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 11:10:08,257 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 11:10:08,259 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 11:10:08,260 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 11:10:08,260 main.py[line: 94] INFO: 运行所有项目
2020-05-20 11:10:08,530 global_function.py[line: 81] INFO: 正在读取测项目[project：pj_wechatno]的协议，host，端口配置...
2020-05-20 11:10:08,532 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 11:10:08,533 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 11:10:08,534 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：pj_wechatno]
2020-05-20 11:10:08,535 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：pj_wechatno]对应对应的测试计划名称列表
2020-05-20 11:10:08,655 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wechatno']]
2020-05-20 11:10:08,784 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wechatno，testplan：plan1_of_wechatno]
2020-05-20 11:10:08,786 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例
2020-05-20 11:10:08,908 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例id：dict_keys(['6'])
2020-05-20 11:10:09,043 testplan.py[line: 46] INFO: 获取测试用例信息 [{'author_id': '1', 'updater_login': 'admin', 'active': '1', 'author_last_name': 'Administrator', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'full_tc_external_id': 'pi-1', 'layout': '1', 'author_login': 'admin', 'updater_last_name': 'Administrator', 'importance': '2', 'is_open': '1', 'updater_id': '1', 'modification_ts': '2020-05-15 12:02:07', 'tc_external_id': '1', 'testcase_id': '6', 'preconditions': '', 'steps': [{'execution_type': '1', 'active': '1', 'expected_results': '', 'step_number': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '8'}], 'author_first_name': 'Testlink', 'creation_ts': '2020-05-15 08:13:20', 'execution_type': '1', 'node_order': '1', 'version': '1', 'updater_first_name': 'Testlink', 'id': '7', 'estimated_exec_duration': '', 'status': '1', 'testsuite_id': '5', 'name': 'case1'}]
2020-05-20 11:10:09,172 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 11:10:09,173 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520111007', 6, 'case1', 'testsuit1', 'plan1_of_wechatno', 'pj_wechatno', 'Block', '0000-00-00 00:00:00', 'pi-1')
2020-05-20 11:10:09,176 mydb.py[line: 66] ERROR: 执行数据库插入操作失败：1054 (42S22): Unknown column 'tc_external_id' in 'field list'
2020-05-20 11:11:04,614 global_var.py[line: 26] INFO: 已选择运行环境：预发布环境
2020-05-20 11:11:04,616 global_var.py[line: 27] INFO: 正在初始化数据库[名称：SAOFUDB2]对象
2020-05-20 11:11:33,673 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 11:11:33,675 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 11:11:33,686 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 11:11:33,690 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 11:11:34,134 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 11:11:34,135 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 11:11:34,141 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 11:11:34,142 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 11:11:34,149 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 11:11:34,151 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 11:11:34,152 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 11:11:34,153 main.py[line: 94] INFO: 运行所有项目
2020-05-20 11:11:34,402 global_function.py[line: 81] INFO: 正在读取测项目[project：pj_wechatno]的协议，host，端口配置...
2020-05-20 11:11:34,405 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 11:11:34,406 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 11:11:34,407 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：pj_wechatno]
2020-05-20 11:11:34,409 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：pj_wechatno]对应对应的测试计划名称列表
2020-05-20 11:11:34,530 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wechatno']]
2020-05-20 11:11:34,651 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wechatno，testplan：plan1_of_wechatno]
2020-05-20 11:11:34,653 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例
2020-05-20 11:11:34,799 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例id：dict_keys(['6'])
2020-05-20 11:11:34,924 testplan.py[line: 46] INFO: 获取测试用例信息 [{'preconditions': '', 'version': '1', 'status': '1', 'estimated_exec_duration': '', 'tc_external_id': '1', 'creation_ts': '2020-05-15 08:13:20', 'is_open': '1', 'author_login': 'admin', 'author_id': '1', 'full_tc_external_id': 'pi-1', 'active': '1', 'updater_login': 'admin', 'node_order': '1', 'testsuite_id': '5', 'author_last_name': 'Administrator', 'id': '7', 'steps': [{'id': '8', 'expected_results': '', 'execution_type': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'active': '1', 'step_number': '1'}], 'updater_last_name': 'Administrator', 'name': 'case1', 'execution_type': '1', 'layout': '1', 'modification_ts': '2020-05-15 12:02:07', 'updater_id': '1', 'updater_first_name': 'Testlink', 'testcase_id': '6', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'author_first_name': 'Testlink', 'importance': '2'}]
2020-05-20 11:11:35,068 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 11:11:35,069 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520111133', 6, 'case1', 'testsuit1', 'plan1_of_wechatno', 'pj_wechatno', 'Block', '0000-00-00 00:00:00', 'pi-1')
2020-05-20 11:11:35,073 mydb.py[line: 66] ERROR: 执行数据库插入操作失败：1054 (42S22): Unknown column 'tc_external_id' in 'field list'
2020-05-20 11:14:39,737 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 11:14:39,740 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 11:14:39,754 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 11:14:39,760 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 11:14:40,210 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 11:14:40,213 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 11:14:40,426 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 11:14:40,429 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 11:14:40,580 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 11:14:40,584 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 11:14:40,586 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 11:14:40,588 main.py[line: 94] INFO: 运行所有项目
2020-05-20 11:14:40,858 global_function.py[line: 81] INFO: 正在读取测项目[project：pj_wechatno]的协议，host，端口配置...
2020-05-20 11:14:40,863 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 11:14:40,867 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 11:14:40,871 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：pj_wechatno]
2020-05-20 11:14:40,876 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：pj_wechatno]对应对应的测试计划名称列表
2020-05-20 11:14:41,012 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['plan1_of_wechatno']]
2020-05-20 11:14:41,147 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：pj_wechatno，testplan：plan1_of_wechatno]
2020-05-20 11:14:41,151 testplan.py[line: 29] INFO: 正在获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例
2020-05-20 11:14:41,281 testplan.py[line: 35] INFO: 成功获取测试计划[project=pj_wechatno，name=plan1_of_wechatno]的测试用例id：dict_keys(['6'])
2020-05-20 11:14:41,420 testplan.py[line: 46] INFO: 获取测试用例信息 [{'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'active': '1', 'id': '8', 'execution_type': '1'}], 'version': '1', 'importance': '2', 'full_tc_external_id': 'pi-1', 'status': '1', 'creation_ts': '2020-05-15 08:13:20', 'author_login': 'admin', 'updater_login': 'admin', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-15 12:02:07', 'preconditions': '', 'author_first_name': 'Testlink', 'node_order': '1', 'updater_first_name': 'Testlink', 'name': 'case1', 'author_last_name': 'Administrator', 'is_open': '1', 'active': '1', 'execution_type': '1', 'testcase_id': '6', 'author_id': '1', 'updater_id': '1', 'tc_external_id': '1', 'testsuite_id': '5', 'id': '7', 'layout': '1', 'estimated_exec_duration': '', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n'}]
2020-05-20 11:14:41,621 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 11:14:41,624 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520111439', 6, 'case1', 'testsuit1', 'plan1_of_wechatno', 'pj_wechatno', 'Block', '0000-00-00 00:00:00', 'pi-1')
2020-05-20 11:14:41,666 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=case1]
2020-05-20 11:14:41,670 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 11:14:41,677 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 11:14:41,688 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 11:14:41,693 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520111441', 6, 'case1', 'plan1_of_wechatno', 'pj_wechatno', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 11:14:41,729 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 11:14:41,732 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 11:14:41,736 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 11:14:41,739 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 11:14:41,741 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 11:14:41,744 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 11:14:41,749 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 11:14:41,753 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 11:14:42,129 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 11:14:42,148 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-26-2yqWId6JmiVJiWV4YvFWZFvkfTiaKT-passport.51gxc.com" />
            <input type="hidden" name="execution" value="a9ed7a80-ea4e-45b4-90cb-3b984f20928f_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuZVc4dlV6WnpTMkZXTmpOUVZETTVhRXBvTTFGNk4wSjBLMFYwYnpSQ1ZGVllRVFJaZEZFdk5YZFpWbmhCYVZnMmR6QlJMMVpMV25OYWQxaFpiR1ZVV1VrMmJWcFJZVzFrVFhnd1RHSlVTRXN4Wm5aa1FpOW9jRzFaYmpkeGNGWlBVekZHVkhwU09USmplREZSVTJwMk4xQlRUazFNT1hCRFVFVTNiM0JqU0V4elpDdEtPVTVPZUcxd1VUQjFlVzVxYmtNck9HUkZkVGxaU1hGT2VWSjZSV2xFVWpoaU0wSmxWemt3YzJrM05XSnBWMFZ1UkdJd2JVRjBMelZpWXpkT1ZtSmlNbnBHWWpWUVRreGlPVWx0YVdkSWQyVlNhVE5hYW1OaFpHNVlTRkZ6VTJsaVYwMUtUMHhRYVVGMk1HUkdkR1JsVjJOU0wwaFlNR0l6Y0habGNqQjRWR1pZUkRodU9Wb3lkVzlUTmtsNFExVndUa1V6VjBGWldIYzRiMVZOSzFCak1ETkJNRmR5VjFrMmIxTllSR0YwWld0MU55dDBUblZ2ZG5wMmJYQm9aRUp6YXpsbVFXdE9UaXRLT0VkT1VHZ3ZTRmR1Ym1SYVoxZFNPVW8wTkVsSGNYQkhZa1l3Ynpkd0wwTnNZekJXTDJ0U09VeHhZamxCV2l0Wk5IcDRXR3RNYVU5YU0zZDJWM1pxUW5velJqRkdUR0ZKV2xKTVdIcEdZV1JpY2l0T2VsSXdPRWxZVUVOSFVsRkZNelIwVjI1UlJtZzJWV05tYVZVNGVrMDROelp2TWtkclJXdERSbE5HWjBkaE1GQjRNV3hMVkhOMFlqTXphWFZLV2pONUsybzJhVE5VUVU5V2VGcFhheXRWZFV0bFpDdGFWMDVRWjB0aUswdHdVeTltUkhOUWN6RjZjR0ZoTDJGaGJtbFNURzFtZUVSaU4yZGthMHhuYURKS09HZG9iR280ZGk4M1EzaDBhV0ZZVWt0d01tUmhNV0Z3WlZBeWFqWlhhRmhXYm1wM1EzWm5lQ3N3YlhKM2NWVndPRGhQYzFGdlNYUjFRekZaYm1GdloxWndXbGh0VmpaMlQwNUpaWEJaYm5OU1ZtUlFkVWRaV2k5a0swbHJhbWczUVd4M01VUk5URTlpT1ZWRVZHOTVjMGRHT0Vrd1VtNU1UbGRRTjJKdU9VODFUbUkxVEdrM1dGSlllRXRxT0RKNVNHaFdTbFIxY0dKTldVazBRMFJUV1RCak9VRnZPSGN4UzJGWlVEbFVWbWQxYVhsTmQwVjZhREJEVTJKd05VeDNZMmR1V1M5c05FZHVjVkJCU1UxT1FtTlNUV2Q2Y1RCT1IyNWpWMHRpZGk5bGRrbE9jbTA0Wm5jMk0zaFVjMllyZUd0VFNFbFdRM2w1Vm1SQk5IZEljbWhCYWxkMkwzaEVTbVJIWnpoSWR6ZFhObFpoVVZOWlRrWkJaMkpIY1hsQ2VuUlJUVUptVlRJM1RYSlJhRXhxYUZJclV5dFFSR1ZZY0c5bVZFb3piMnBXWW0xblJIRTJkVGczWWxBMGEyUllLME01UjBKRk5VbHRTWFpaTjNablpuTTFibU0yTWtaNVJqUlJZV3hFUlU5SWQyNDFTMHRoTkVzM2RIaENiRUZQZGk5RGVVZExPSGxYV0RscWFXMW9ibGd6VW1WS1ZEWllaRGM0UVZSTVpsSjJTbU5sSzNKd05pdExLMlpVZUVobVEyMXNTVVIzY1dWVWNGY3lkV2xqUjFGT1UxZDZVblZOUnpaM04zTklPRGRrV0UxTVkzVk5jM3BoWWpremRqazNTV2RaZGpOUVkydGphMDVxVUhZd1FuWm1MMXBLWlRVdmR6UnhVamQxWVc5RmIybFJTVVZ6U1RJclYzRjJURU5yYzA1Qk5XWk5UVEZEUkc5MGRqaHlTWE4wWVcwMGRTOHJjVVZCTTNkaFZXWmpZMUZqY2tOTVIzVkhNMEZ1THpSd2MxSlRiRnB0UlZGRlYxUm5OamhLZFZnNVV6TlhjRFZDVEd0d05EZHFUV3BPTkRGMU5GbHpaME51VG05c09YVmllVGxaYVZKRE4yWlhTbVozY21KVWJEUjZjVW94VWtrd09YWXlUaXRsVDNsNVMwRk1Xa1pGU1hKeVF6VkVVRFV3TDIxUk5IbzRMMmxRWjI1dFpsaG5UWGx5V2sxbVVYUmtSR1ExTjBKRksyWk1OWFJZT1RGa1ZYTTVZVXBCYlhsVlZYVjNTRGszZFU5emFYVTRRU3RRTkV0M1kxbFlXR2xZVDBkcWFGUXhWalpKV1Rrd1lYazNRak5NZWtoamFXbE5NRm9yTmpSSFJHZFliVXhFYTFkNVowTTJVWHB2TW14cE0weFNaa04xVUV0a1RFZExUa3hIYlVKMmFXbFpWRWgwSzJ4cmFIaGtSRFk0VW14ME56aDJaMW93THpjMGJrVlFMMEYyZUZwQ2NreDFVM2RGVjJkRWVsUkJaVzVuWkU5Q2IxaFphRVozYkhaVlIxRXlWV1JYYm1NcldHWTVNVk0zVlhWQ1JDOXBPVk42TVdwdFRGbDBiVGxCY2pSUmVYVnJXVVo1TUZvMVozSllhVVpxTW5aNmEzbEJTSFpZWkdkM1FYRnhXbkEzYVZRckt6aHRiRFY2UkhneE16bHFjM001Y0ZkM1dUTmlkVVZqYm1WdGMySnBNRVVyY0d0NlpHSm1XRmsyTDNwc2NrRnhabWRIZVVoRmRsbExUMGgxTDNCQ1N6WnlURWMxZURKWlkxVkxVakp0VGpkSFIzUmliM2RRSzI5eFREa3lOVUpEZG5WNWF6UlhPVzlYTVRreFFtVmlMMXBaTHpoSk9VVnFjRVZwZVRJeWJIUnhWMmxEYUZoTFFUUnhibXREWm5oa2RqQkhUelI2YUhwSlZXMTRhamRVWmtJNWJEVmhjbXd2YTFoTVNuQnVTbGRPWVVwNU5WbFliV2RvYTNaaWMwcEhlbTF5YzFaRGQzRkdiVXBuYlVFeFJtMXVkR3RUU1dsYU5FdEtTRGRuYjNVNGRtaHJablpRZVRoS2QySkRTV1J1V1V4UFdURmpWalZtVldaeE1YRnpOblZuTW1acE5HbzRhbXRQZFc5UVJ6RmlWV1F3VURWaFozUTVVRFp4WVdaUFNqTTFiVVZzZVZCRlN6ZFZaSEZ3YTI1RGFtVkJVblp5TUd0c2QyMUNlbkEwYlhkUmNEQkZhREF6T1ZoWFdWSTFURkZwV0VwUGVESlNlVmRDYUc5TEwzSlhNV3RUWVdoSVlUWm5SMFF3ZWpKMFNteDZNSHB1YjNkM1QwbHNlVVl6U1Vkd2NrZFJUREk0ZFdNeFZIcEdSekJYUkZBNVkxSnBNVFJEVUZrMmJsTkhUMncwVkZOQ1EyMVlXQ3Q2ZUM5clkyRnRPRVpMTmpSV2VFUnVjV05hVlRSU2VrZzVlVzl0Y3pSc2RFZDVTVm81VmpodFRGRjNSalEyZDJwaU4waDNTWFl3TUVaSFNsTnlNekpRVTB4U1puVlZjbkpqTkdWcWJrMWxjV0ZDUjA4d1IwNHhOVWhxY25sSVR6RnliRXhWU1ZnME1YZE1WVmhPSzJsblZ6UkpXVE5FU1c0MVMycHZMeXN2VmtkQ1ozUkNOSEZDUlVOdVNuSm1kRWxDYUZCR2FYUkRlbHBqTW1KeFRsTXhNMDUwVkU5VFZVbDBRbVJsZEZaTWREZE9WaXN2YVV0S1NGVlNjVlJKYjBsc056UmhVRk5rYzJaYWRIWm5ibWxxTW5JeVptbzFPVGh5TlZnNU1qUnpiMlE0TVhoWVZXc3JNME5zZGxodmVtTlpiR05TVkVwWlExbG9jRTlXTVdscFQwNXNUbUYzVkhWbVlVdFBkMHQ1ZVRGV1NrdDZNSHAzZWxKM1luQk5kakUxVEdjM2Qxa3JWbTFKUkV4MVIzVkViR0pSZUZwSk9FVk1jak5USzFWaWVGQmxNV1ZOV2toWFJWRmpVVTFTTUZOeVkycHNhelpRZERnMWRWbFZTVVZFVkU5Uk5FRkVWbFl6Wkd0dU9ITjJhRW8zVlZOeUt6RmphR0ZLWkVwRFZWaEVZMlkzVjBobWFEVnNZMnhvYUc5VU5sQm5jblJuZUZSWVIzZE9lV05OUlRablREYzBRemMyYnpCM09FUjNaRzVxWVcweVNuRlBhMWN6WVZCRFVrSlRkR05CWjJjMmEwTmFhWGRSZVZWUmFtbE5kVGgwWlRFd1pFUlhZa0ZpV2sxcFprSkRVa3R2TUdWb1FuTkhlRlptU2pGVlJrWjVPRm93U0hBclZHWnJTRE5uT1RKSlduaGxSR2hPY0d4TFJtSTBRVzgzZFhOdk1XWXpRbmxFZUVwUmJGTTJkRXRUVVZwdFVtODFSMVl5VTI1S1J5OTRiR05MUjIxMlFtTXdZbG93TkhsQ1YyVklkR1puWlVzNFlYVnZia05CVWs1eWVuTktNRWh5Y0VoeFVIcE1kbWhGUkd0QmFXTkxSMDE1UTIxSmExWTBhbWswTmtobmJGRlRZakpwTDBkRFZrTk9SMUZaWlZWWE5EZEJTVk54VERNcmREZHBhRXd6Um1Wa1JUa3paMVYwVTJ4UU16Rk1jVWhrVkZodlRYaHFWRzFLZUVkTmIzaFlibkJVVVVaUEt6SkZZbWczV1hVMGNqaHdNa3d6UTJ0cU1VaHhWRmRhY0haNVNWcEhWMmhaUlZCNk16VjNhM1pKTUdoS2VHbzVPRFJyYm5OQ2Ezb3JOR3hLUmtGc1kwUnFOa1kyWVdKMGF6VkhZWFZZT0hvM2MyZFNia0V5T0d4bWVHRTFaRTQxVkhObFZrSlRXRTA1Wm1WM2MyUlVjbEpSVG5oU1V6QkhNMmhJWVdFM1ltRTRjRlJQSzJwaVNGSnhVV1EzYzJwdmF6aEtWMWhJUkVNMlYyVkhXRkZvYXpOaFJWWXdSRk0xUzFKaFltNTFjaTkxUWpsdFRuVlRUSGhrYlVoS01tRTNWbTB6U0UxWk5rOXpNRWt4WkdkS1ZtMHlUelpMWW1WcFltZHFjeXMxZEVaV1FXaFpORThyY2swMVVFTjBLMlZaYjJKNGRVSXZUa3g2SzNaS0swb3hiWFIzUlVOMlJFZERWRTl4WWpsTGRpdDBSMDFtS3pWaUsxUlhWM1pQZVV4S2JXdFdPSGRFTUZSa1IyazRTSEEyU3pCQ1VWSmlhR3B1V1daeUx6QktlbTF2TDFwVk9ITnpNMkp3VTFsaFQxUnJhRmRWVTFwa1lrUTRjRlZxY1UxcGVXbFdNSFkxWVZOS1kzUkhaVUpLTURsbFpFaEhjMFY0VTB4WFZIZFZMM0JxZUhSdlVuaGhUMnRWU1RSV1dXMUtZblJTWjAxVVVtOHZZU3Q2YXpGSVIyeHJWaXRWVWpkRlJ6ZHZaalp2UFEudllMOGpPQmxfVXlOR1JoTDQ4Yi1kNFN1QWZ6ZF9OemMxWEtPWkYzOFVhNVhGS29xUnlLRFQ4MzNtMzNaaG5HdkZEMWZHdHRqVjZLRUtpVkJ3QnkwQ1E=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p></p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										<img class="success-close" src="/themes/cqsh/images/login/close.png"/>
										
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							console.log("获取字典项失败！")
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name").bind("input propertychange", function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
								console.log("注册失败！");
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 11:14:44,060 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 03:15:52 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 03:15:52 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 03:15:52 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=4B5F40EECF973ED38B62A3D506637353; Path=/; HttpOnly')]
2020-05-20 11:14:44,079 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 11:14:44,102 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 11:14:44,104 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 11:14:41",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520111441 AND testcase_id = 6 AND step_id = 8 AND project='pj_wechatno' AND testplan='plan1_of_wechatno'  AND runtime='0000-00-00 00:00:00'
2020-05-20 11:14:44,274 testcase.py[line: 205] INFO: 测试用例[id=6, name=case1]执行成功
2020-05-20 11:14:44,279 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 11:14:44,283 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 11:14:41", case_exec_history_id="20200520111441" WHERE executed_history_id = 20200520111439 AND testcase_id = 6 AND project='pj_wechatno' AND testplan='plan1_of_wechatno' AND runtime='0000-00-00 00:00:00'
2020-05-20 11:14:44,506 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 11:14:44,700 testplan.py[line: 104] INFO: 测试计划[project=pj_wechatno ,testplan=plan1_of_wechatno]已执行完
2020-05-20 11:14:44,704 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 11:14:44,709 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 11:14:44,712 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520111439',)
2020-05-20 11:14:44,719 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 11:14:44,724 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520111439')
2020-05-20 11:14:44,732 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 11:14:44,736 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520111439')
2020-05-20 11:14:44,744 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 11:14:44,748 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520111439')
2020-05-20 11:14:44,756 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 11:14:44,758 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520111439')
2020-05-20 11:14:44,766 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 11:14:44,769 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520111439',)
2020-05-20 11:14:44,776 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：pj_wechatno, testplan：plan1_of_wechatno]的测试用例执行结果
2020-05-20 11:14:44,781 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('pj_wechatno', 'plan1_of_wechatno', '20200520111439')
2020-05-20 11:14:44,793 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：pj_wechatno, testplan：plan1_of_wechatno]的测试用例运行结果到测试报告
2020-05-20 11:14:44,798 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 11:14:44,801 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520111439',)
2020-05-20 11:14:44,808 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：pj_wechatno, testplan：plan1_of_wechatno]已运行的测试用例
2020-05-20 11:14:44,813 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('pj_wechatno', 'plan1_of_wechatno', '20200520111439')
2020-05-20 11:14:44,825 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 11:14:44,830 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('pj_wechatno', 'plan1_of_wechatno', 6, '20200520111441')
2020-05-20 11:14:44,842 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 11:14:44,847 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520111439.html
2020-05-20 11:14:44,851 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 11:14:44,855 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 11:14:46,358 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520111439.html
2020-05-20 11:14:46,362 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 11:14:47,044 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:17:05,864 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:17:05,865 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:17:05,876 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:17:05,880 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:17:06,332 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:17:06,333 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:17:06,340 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:17:06,342 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:17:06,350 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:17:06,352 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:17:06,354 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:17:06,355 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:17:06,636 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:17:06,638 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:17:06,640 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:17:06,641 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:17:06,643 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:17:06,777 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:17:06,909 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:17:06,911 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:17:07,300 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['6'])
2020-05-20 15:17:07,438 testplan.py[line: 46] INFO: 获取测试用例信息 [{'full_tc_external_id': 'cq-1', 'steps': [{'step_number': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'expected_results': '', 'execution_type': '1', 'active': '1', 'id': '8'}], 'importance': '2', 'creation_ts': '2020-05-15 08:13:20', 'modification_ts': '2020-05-20 09:06:57', 'updater_last_name': 'Administrator', 'version': '1', 'preconditions': '', 'author_login': 'admin', 'layout': '1', 'updater_login': 'admin', 'updater_id': '1', 'updater_first_name': 'Testlink', 'estimated_exec_duration': '', 'testsuite_id': '5', 'is_open': '1', 'node_order': '1', 'name': '作业配置', 'execution_type': '1', 'author_last_name': 'Administrator', 'author_first_name': 'Testlink', 'status': '1', 'testcase_id': '6', 'author_id': '1', 'id': '7', 'tc_external_id': '1', 'active': '1', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n'}]
2020-05-20 15:17:07,590 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:17:07,591 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520151705', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:17:07,649 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:17:07,651 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:17:07,654 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:17:07,658 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:17:07,660 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520151707', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:17:07,746 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:17:07,747 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:17:07,750 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:17:07,751 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:17:07,753 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:17:07,754 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:17:07,756 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:17:07,758 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:17:08,154 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:17:08,549 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx/1.12.2'), ('Date', 'Wed, 20 May 2020 07:19:26 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=hd; Expires=Thu, 20-May-2021 07:18:18 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:18:18 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=ACC794CFD52BDCCC903BD3B3EEDF2D7A; Path=/; HttpOnly')]
2020-05-20 15:17:08,555 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:17:08,562 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:17:08,563 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:17:07",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520151707 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:17:08,598 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:17:08,600 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:17:08,602 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:17:07", case_exec_history_id="20200520151707" WHERE executed_history_id = 20200520151705 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:17:08,784 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:17:08,974 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:17:08,976 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:17:08,979 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:17:08,980 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520151705',)
2020-05-20 15:17:08,984 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:17:08,986 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520151705')
2020-05-20 15:17:08,990 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:17:08,992 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520151705')
2020-05-20 15:17:08,995 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:17:08,997 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520151705')
2020-05-20 15:17:09,000 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:17:09,002 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520151705')
2020-05-20 15:17:09,005 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:17:09,006 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520151705',)
2020-05-20 15:17:09,010 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:17:09,012 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520151705')
2020-05-20 15:17:09,017 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:17:09,019 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:17:09,021 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520151705',)
2020-05-20 15:17:09,024 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:17:09,026 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520151705')
2020-05-20 15:17:09,031 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:17:09,033 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520151707')
2020-05-20 15:17:09,038 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:17:09,040 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520151705.html
2020-05-20 15:17:09,042 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:17:09,045 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:17:09,304 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520151705.html
2020-05-20 15:17:09,306 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:17:09,386 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:26:08,991 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:26:08,992 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:26:09,004 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:26:09,008 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:26:09,450 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:26:09,451 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:26:09,459 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:26:09,460 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:26:09,469 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:26:09,471 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:26:09,473 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:26:09,474 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:26:09,727 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:26:09,728 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:26:09,730 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:26:09,732 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:26:09,734 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:26:09,859 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:26:09,981 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:26:09,983 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:26:10,108 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['6'])
2020-05-20 15:26:10,246 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'steps': [{'execution_type': '1', 'id': '8', 'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'active': '1', 'step_number': '1'}], 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'updater_last_name': 'Administrator', 'name': '作业配置', 'execution_type': '1', 'id': '7', 'version': '1', 'testcase_id': '6', 'updater_first_name': 'Testlink', 'author_id': '1', 'modification_ts': '2020-05-20 09:06:57', 'testsuite_id': '5', 'full_tc_external_id': 'cq-1', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'author_last_name': 'Administrator', 'active': '1', 'updater_login': 'admin', 'node_order': '1', 'preconditions': '', 'updater_id': '1', 'layout': '1', 'creation_ts': '2020-05-15 08:13:20', 'is_open': '1', 'author_login': 'admin', 'status': '1', 'tc_external_id': '1'}]
2020-05-20 15:26:10,389 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:26:10,390 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520152609', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:26:10,459 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:26:10,461 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:26:10,464 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:26:10,469 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:26:10,471 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520152610', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:26:10,508 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:26:10,509 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:26:10,511 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:26:10,512 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:26:10,514 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:26:10,516 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:26:10,518 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:26:10,520 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:26:10,935 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:26:10,939 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-4-tfrY11meTPEn3vPEpal60lxdG74Q2f-passport.51gxc.com" />
            <input type="hidden" name="execution" value="16851639-5964-42f0-a79f-26bcb897b8e4_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuT0dReWRtUktibkZZUVZOeFdYazRhR1JxVGxvdlNrMXBkMnRNYjNwQ1duQmxUelZHWkdKWVkyTjJWblJuWTNZdlZqZDRVM1JvUW1weFJVUjVRemxIYWxFelVHTjFSMUZ1TUd3NE5IZE9OR2cxWm5vNGIwbE5jeTlpV0hORGJDOXBUSGhPTkRBd2FDOVphMll4VFZGTVFtTTNSbUZhUkU5R1UwSmliamx0WjI5VVoyNXJlSEJTVXpGMU5sSm9RekFyUWtWeUwyNXdWVUpxTWswdmVFbHJNVmsyYkZsc0wzWTNiRFo0U1RNcmJ6Sm9VRTAyTWswcmJGcFpSMmRYVkRSRVVUYzBlRVp2UVU1eGJrNDJTVmRDV21WNVJYQkllRU55WVZBeFpIUXJWMEpXTm5kV2RFOU1kVXBUVEdKU01uZDJVRGh4SzNCRU9EZEhNelZLVkVFNFVGbDFNa05CWnpCVk1qQjBiSGhyY1hZd1ZXUnBSRWRoZWtFM1NEVkJWVWhZUzAxSFZrcEZlRmRDU1U5TldYcHdZM2x2V0VWbFJsTTNhak53VFdWemN6RjZhekY0UkhORVNIcEhXa04yU0ZwTFVrbFBTRFZoU214dVVrcE9hbTk1YTFGMVVXdHlaSEpwVWpGR1lYSkZPWGN6TjJ4cllVRkRTV0ZHTUVjMlNUSkpRbWxhT1RGNldIVm5ZVzE0YkZVelR6WmhTbUpDYm14blIxTXdZbnBXY2tscFkzRnhhRWRIVjBOellrbHZObFF6YlVzeFdUQTVRM1pIV2xkWE1UQmthVkpMWkZGaVQxZE1lbWt5VEVkWFQwbEtTRnAwTlVGU1ZUUktPRmhNWmk5eVpFdENiM1JSZEVOUWQyZFFkV1pEUld0MEsxZGhZWHB2YzBsa2RtMXdNRTl2T0ZocFNrRkZOQzlNZURFeFpVWmxWaXRaWVZSS2RGVnVWRGxZWlVRdk1IbFpXRTVrUVdsdVFYY3lORFZDT1d0b05uSmxaVEYyVVVSRWIzSjBlVWRrTDI1cVNtNUlNVnBJTldSQ2FXeHliazFMVkRKRE5uSjRiMG92VWl0Q1JVaFJabUkyZUUxd1dYaHhRa0ZGU1hveWJ6UklPV05GWTNWMUx6bEpTM0U1V1hWWWJsZHZZMkZwVEhBMlYyZHRUR2hFUjI4d1IzWnVLM2hWTUdJM1dscGxibTU0U1VzMVREZE1OVUZDU2xGS1pXNHZVV2hEVW5BNWEwZFVNRlo2T0dOREwweHZlRTVIU1hsMGVuUkViRmxLTUZsclUwaGFjalJpU2pKMFltOVNaazFNVFhSak1UZFNZMDR5TVRGc1NWaHJVVFZSUjA4dmNGUldUMkZaYkZOR1VraFpUa2RQTUdsbVJHNXFiMWQyTlZsSldWaFpibXhtYm5WSmRYWlNRMjVOV1dsR1FYbFFZa0ZoUm1KWFIzaHJiRlI2VUVsWlpTOVJkemcyZW1KS2NGSmpURXN6U25aMVYwVklWVUV2YWsxR1NHWjFTM2hRVTAxb2FqWk5aWGs1T0cxS0wzYzRPRVpFWjBsbGFIbE1TRVZHUm1Obk5YVmpiblkxUmtGV0t5dEhZVXgxVFV3clVHczVRVloyWTBSM2F6YzFRMVZHYVZoS1FubFlkRGx3Ym5VelNtSlZRekJPVmxWa00wdDJObEpSU0hsQ2VWcDFWVE5aUlhZclIyTkNZMDB2T1M5SlVsVkhLMHh4VGtWS2RVUjNhVFJoVlRKSFJUVlhlRlJhTmtvdlVVNUpkSFZTTUVoT2VtTjVZM3BYTVdkME5TOTZaWHBCWkhNeWRtUnVlRTgxTkRsaVRYbHBXV3RtV0UweE1qQnNja2c0UVROTFFUQlZOakZKZFdsUVNrVnpjbTFYV210SGRIcFRiMXBXVmpnMmJVdE5aREpyYUdKYVRYRnNSMVJaTTFscGFGa3ZRVkJyV21SNlpscEVOMk5KUVU5VVNVWXpUekZUU2xVeFJrSlBlVkp4V21GRE1uTk5lVWQ2V0c5cVdHMXFkMkU0Y0VkclZuRXlaM0pTV0dWWE1qUXhOekpGV25keE1IbFBUV1E0V0RkRVNtcEhkRk5TVEhjeU1XMTJiMGRoZGxCSVQyeFNaeXM0VUhKbVNEaEtlVlJFV20xa0x6TndSRUo1TDFjMWEyaFlVQzlUZGtaTVlsbFpaMDFxWjJ0NlVUSkJNRXRxUzIxNFNYcDVaa1pZVms5M00wZHRUblJRVkdocFlWcFRZV2xyTWtsWWMzbDJlbkJwVW5OWGJHZE9ZWHBOU0hSS09VdDZZbmc1Um1WNFpIVk5NRWhvZHpoNFEwaDBSVzh3WW5ab05sVlhLMlEzVGxGcVkzZFZOVVJSU1ZOR1QycHliWHBxWVVWcFRXeHZNa1pMU0ZrME1qWlRLMnRKWjJrMlVHVjJXSFJ0UjJreU0wRnRNR3RrZEVJdmNXRjBTRVptVW1SYVN6YzVkRUYwUzI1RVFscDBTVWxzZVVsSk1HbzJVa1l2YXpsSkwydHdSMFZuWTBWQ1MxWlVPSEF2UjNoVGRGZE5jbVFyVkdRd1kyeDRLMmhHTm5sWlRGUkxXa2d6YUdzMlYxUnFZM0ZGY1ZGVlZGcGxSRXM0YTI5Tk5uTjBNRlJxTlVWUU1FcE1WelZzVkhkR1IyTjZiRzVYYlZWMU5uRkVNMHBGTUU5UWJGQjVOMlJtWjNBd09XZFZaVEJ4SzA5M09EVkZiVGRaU3pOeGNuTk5hamM1VDNoaVRHeE5OMFJXTWpZdlprVldTa3gzZFRCYVVHTTFOa3hxYlhaMVJWaFZNVUZqZDJSa1RrUXhORXBzS3pWaFJXVlZXa3RtSzIxTGVYWXlha1kwVmpaQlZGZGhVbXRIUkdvclpGQXdaazVqYVVaUGMwbzVUazV3WVVWV1RYQnNSRGhyVW0wMmRqWnlSRkpuU0ZOblRIVk1kR1Y2VFRrcmNsRXhhSEZrV1ZKYVRIcFRORU41T0UxTlJFTnhUbWREV2xrNWRub3hVWFJrWkd4UldrY3daelJ2UzNWeVkxSlBVRXh0V2tGVlRXNDNkalIxUWxCc1ZUWXZTRFJFVDBOUFdVbEtUMjVUZFZBd2RrdHlSbkV3ZUhWTmFtb3JVVEJGU210QlJteFNWRkJ4VUVOU1lXOVVTVmgzYXpoVmRHUldjRmN6WnpORlJpdENhMjFLUmpGeWVuYzRWekJaVWpjMFlubHRjVzVVVW1oRFMyeFlkazFvVTBWd1kzWllWRUpHYjJsTGJ6QjBjRFUwYmpZM2JGTjJhak5VWm5KbmVrZHNVa2xYZWpkSlFVVjVNbkkxUkZOdmJETlVVREZIVTI0eGJFSjBiRUpSTDJFMFFrRlJNRUowVVRSbGEwUXJXRk5hWjI1U2JEZzVMMnRVYVVSbGVIUkhXbVpOY1VSaVNtVklXVXRTWjAxRlVtMTJNWFpHYmsxcFUwdDZMMDVKWWtNd2IyNXFXRWxLVm1KS1JrVkpNemxDZVhaSEsza3JSMUJRUkZORWEwOWpZblZXUmxWdE1EWkdjV3B4TlVKUlEyVXpkemMwVUZFemVWSkdVRGR4WmtwRVZWUXJaV2MyTUdGRWR6QldiWFpwUldJeU5YTmpiMnR4Wm5wT1owRTFjbEZLVDFWVWMyOUNNazlpTldoV2FFdHhRbGhSVGtsU016QmtkWFZHUkUxdGFrVnZSREJsUzIxVGFuQTBjRFZPVVUxc2R6QjZaR1pXVjNsUWVFaHFWME5ETVZGbmVqY3ZNM1Y0ZEVGa2JuazVXVmt4UVd0b2VIbGxiVEV2ZW1SVlJFMDJURkZtTjJ4U2FESjBka1ZCVERsUE1rVlFjVWgzUTFSV2VuQXdlRGRpTWt0eFMyTjBUMjEzV0hCT1JsUlBRemxZVXpSVGVTOHpXVkozYjAwdmFVTnVOM2N2UzBOV1MyYzROWEpOV1UxaWVXcHpVblJyZWxkUmJVVmlWbXQ1UzBwb0sxZEhOVFZIVTA1TFMycENhVWc0V1hCSFUwaE1RVmwyVEVGV05qSnFVVEZQY0ZWMk1tNDVTakI2YzJ4VFJsZFdXazFCWmxFMVZrNXZOSGxtUjJSS05FRjRUMEZEYXlzelMzcHpXVk1yUTJGeFVrWnNZMU5VYVU1cWNDOTVjbGN4YTJZMVpqSkhUREJFTkU5cE9YTndaemx6WVUwdmVHdHZTSGRIVVhKTU5VMVFZMGxvVFRaQ1NWaE9jREJZT0ZKdGJWa3ZObG95WnpnNVIxZFJRbXhqVTFoVk1IVTRhREZZU1V4U1V6RkhiR1JhVkU1eEsyWnFZa2hwVXl0cmJ6aHBjbmt2TkN0QmVFVjVRV0ZxUjBSaGRta3JOemhLTmtwa05rc3ZObWR6VURNeVdsTnVWVE12Y0doV1ZqRldXRmRrWlV4R1RIZzViR3N3WTJrMGQzVmhXazVqYW0xQmJWWmpZVzB3V0ZadVZXa3liMk5rZW1selozQmtiR3d4T0RWeVZGUXhNMGxOVWxKTE1VUlJjMEp3VGtJMVlUWm1kMnhXWVdob2VXNUNNVFJDU0ROU2VscGthbWw2TVVwR01DdDZXV3R2VlVKcVRtRmhSVkYzTjJacVMyTjRiWGd3TTFOWlRWZzBLM0ZIYm1SRWRGSnllSE00VEhoVVMyUlVWVGxHY2toWlVtUXlkbGRyZUhCQ1lqVlFjemhrVmpRelZXTk9VRWN4WmpsaVkxSTRXREJwU3pSVmRITnZZV3d6VTJ4dlFuVmhVRTlTTmt4VllYVlZjRlJEVVhFMU5XSjNVQzh2VERaV1RsWnRRM2R0VkRoemNVNXZlR3hwUzNnMU9GUXZTekY1Y0RkdGNubEtiMDVEWTNGTWF6RjZTa3hITVdkSlptOUhTWEpzV0hoc1JISktaMkl4TVdoWVFUVTRVMFJ6UVVwSFRVMVBSbWRSYVVKc2F6bExlV2Q1TkZselVGRlVTVzltTVVGS1MxVnBZbFI1V0RoRWEyWnVaM1pxYlZnMlNHZEhOak56TDJ4ak5YVTFVR1p4YWt4Q05HNXpTekpxWWxRNVYzaFlkVVYxVFRWd2JFcE9abmhUWjBKdlFuVnVVbW94VGpJMGRWcFFWWFZCZFV0V1RsaExPWG8xU1hCc1dWRm1RMHAzTmtkVFRUUkNRbTlyZHpSbWJHZGlVRGxMUW1zclp6RjJlR05YYjJrNWVXeGtlVWs1Wld0cGEzWXpRa0pqVVhncmQxaFZVa2MyZVRObk5uQmpNbm93UkdwRlVEZ3dUWHBLY1ZjeFIybDJVMWRvY25abFFUWklRamhhZFRscFJqVXpaemRRVm1GdmVscE5kaXQxZEVNdlptbzJUQzl5T0V0V1kxYzNWVU54UkhjM1YxcEJQVDAuQjVJc0NiZVB3enAtSzFKeFExNDFkc0o0eVhjamNGUU9uVUpJLW1wMFBBTnplR0dMaDE1ZEpaUE1ucGY4dThRcjh6ZC1GbmZwNEhfU3dhZjFzSVhKTGc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:26:11,322 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:27:21 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:27:21 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:27:21 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=8BB49CAAE72E9E936C215D274C11B397; Path=/; HttpOnly')]
2020-05-20 15:26:11,327 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:26:11,334 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:26:11,336 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:26:10",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520152610 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:26:11,503 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:26:11,505 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:26:11,507 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:26:10", case_exec_history_id="20200520152610" WHERE executed_history_id = 20200520152609 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:26:11,689 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:26:11,838 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:26:11,840 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:26:11,842 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:26:11,844 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520152609',)
2020-05-20 15:26:11,848 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:26:11,850 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520152609')
2020-05-20 15:26:11,853 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:26:11,855 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520152609')
2020-05-20 15:26:11,858 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:26:11,860 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520152609')
2020-05-20 15:26:11,864 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:26:11,865 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520152609')
2020-05-20 15:26:11,868 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:26:11,870 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520152609',)
2020-05-20 15:26:11,874 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:26:11,876 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520152609')
2020-05-20 15:26:11,880 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:26:11,883 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:26:11,884 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520152609',)
2020-05-20 15:26:11,888 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:26:11,890 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520152609')
2020-05-20 15:26:11,895 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:26:11,897 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520152610')
2020-05-20 15:26:11,903 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:26:11,905 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520152609.html
2020-05-20 15:26:11,906 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:26:11,909 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:26:12,038 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520152609.html
2020-05-20 15:26:12,039 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:26:12,117 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:28:22,545 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:28:22,547 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:28:22,558 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:28:22,562 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:28:23,002 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:28:23,003 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:28:23,010 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:28:23,011 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:28:23,020 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:28:23,022 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:28:23,024 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:28:23,025 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:28:23,292 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:28:23,294 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:28:23,297 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:28:23,298 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:28:23,300 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:28:23,436 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:28:23,569 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:28:23,571 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:28:23,708 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['6'])
2020-05-20 15:28:23,846 testplan.py[line: 46] INFO: 获取测试用例信息 [{'execution_type': '1', 'testsuite_id': '5', 'version': '1', 'is_open': '1', 'tc_external_id': '1', 'preconditions': '', 'creation_ts': '2020-05-15 08:13:20', 'updater_id': '1', 'updater_login': 'admin', 'author_last_name': 'Administrator', 'node_order': '1', 'layout': '1', 'testcase_id': '6', 'updater_first_name': 'Testlink', 'name': '作业配置', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'id': '7', 'author_login': 'admin', 'importance': '2', 'steps': [{'step_number': '1', 'expected_results': '', 'id': '8', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'active': '1', 'execution_type': '1'}], 'modification_ts': '2020-05-20 09:06:57', 'status': '1', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'active': '1', 'author_id': '1', 'full_tc_external_id': 'cq-1', 'updater_last_name': 'Administrator'}]
2020-05-20 15:28:23,999 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:28:24,001 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520152822', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:28:24,039 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:28:24,041 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:28:24,044 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:28:24,049 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:28:24,051 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520152824', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:28:24,081 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:28:24,083 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:28:24,085 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:28:24,086 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:28:24,088 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:28:24,089 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:28:24,091 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:28:24,093 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:28:24,530 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:28:24,535 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-5-HzRQWHzuYSJNbaCmRqHLEIYRaD0ECQ-passport.51gxc.com" />
            <input type="hidden" name="execution" value="032a0ed8-03ac-41ae-a128-4020061cde50_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWm5NMFpUZEVTVWh3V0haMWJsUkJkR1pYSzBGWFZXOVllalpNUnpoamFHUmxPRTAyYlVweVdERlNOMGh2TVVKSFRGcFJUbVZUVEdKbVNUaFNLMDFHZFRSM1YzTndOMnhXVTB0cVpqQlJSMGhJUVRKaVZucEhkbWwzYTJwd2RFVmlibXR5ZEhwalR6ZFBNRmgwV1V0R1J5czVUV2xUVVRSaVlrUlpiekpZTTBOc2FFRjJkRVV5VTFkcVlsaHJha3hYYWxKTmQyMU1WMmxwZW5ST1ZIQmFlREZFYm1GU04waFRNa3hyYlZGdlZWQmxlRUZMVlZneVpEWkdORXAzY1dONU56VnBUSFZFZWxWelMxQkROSGRxVUdORmJGcHdaRFZDSzJGMVNHZHpiR0pDT0VJMWJIUm5XbG81YkZkU09HVlNNVlkyVVdwTU1HNTZOMVppU1hrd2EybEphVkZUVldkT1RXNUlRbEpCSzNvemVHUkVlaTkxY1ZndmRIVnFLM1kxWWtSaWJGUnVZbmt4TlhkeE5qWlBOR3d5VlhwNlVUbENTMDh5WW5kMlMweFdSMGxQTTNCdWIxUnRkVE5pTjFGWU1XbFFhRFJpYm0xUmMydFpVaTlXTUU5dGJFdDZSVVUzV21aelZUVlFjMU4wY2k5Q2FHNVRiVUZETjJ0blowTlBabk5CY2xONGFFaG1WR0o0WTBwRVJWSnpOazQ0TVdwalRHTnpSWGxLTDFkUk1FMU9TRTloU2xkWWNrNVdhVk0xZG14MmNHaGpTRXRTVlVoNmFIbGpRMk5TVWxwVFVWRnRXbUoxVkdkVGIzQkxiRUpQTVhOM2EyZFhZa2RFZG1sTldHZENhWEZ5ZDNWWkwwMXFjRk5SUVZkVk5VSjRjVVpDY20xUk4wdG1hRmxsUzJKd1VXZFRVRllyVTFwQ1dtaGlkSGRrWnpSalZtUlljRzlMWm01TlFrWnVORTl3ZVhSdFJXSlJabEY1YjFGc1QzbEdhMFZuVWk5aGRuTk5lRmsxTURCdlMwOUdRMk41Vmtkc1UwVjVUMWQyTm5kWk4wbE9TR05MWVc0NVowOWxaa05IY1RrMGVqWXJVakZtT1VSUmRWWTBSMnB6YTBoSVVYUmxNRGRLUzFveVdERjBjMnBRVkhOemVsbFZXRUZMU1hoRU9GbDBkVmQxUW1oR2NGcHFkeXMyUTBvNFIxRk1USEpHSzJ4U2FVTmlTbmh0YkZGVFZGUldjRVZwY1VWMGJrc3pPSEYzZFhWSlRUWk9XRk51TUdOMGRuTTBaWGd2VUdGWFRucGFURGhwVkdSTU1HRjNjMmwyUkZsellVVnpjMUZKYW5aak5VOWhjVTVZUlVFM2MzRklkbE5MVWpkR2MzbFhRWHBzZFhGRWVXTjJSMlJaZWtSNmRsSjVVVVZEUzBRM2F6bFZObG8zZGpNNWIzTlRjMmRYYTJSeE9ITnZTRGR2T1ZKcWMwazNXamRwTTJsU1FWaHdTMVZITjA5WlJXeHhSV055YlhseWFtVXlkVkF2TnpodFVuUnhRMlozVGl0UVZHTlBjV2xxTUhsaVNXeHNVbGxaZFcxeGJFOXpOazE0V1cxTkwwTnhiR1ozTjFrNWJYWmljU3RDV1ZGTlRGSkZSR2REUVRsMmVFeDJWRmxrZW5CMlYwdzNaM1JFT1dWMGJWWnNablV3Tm5sRVJIWkJSbmhYYjJoWU1IZFdUMDlaWmt0RVpFNWpiV1pQYVZOSlFWaDVTekZaZGtoVVRURTJjRUZXTkU1WVJTOHdWbTltVVZaVk4xSm9aVXAwY0hSS1QzTklPVkV4ZWtOeGFEVnRNekV3UTJKS2NFd3hOVEYyYVhFeVZHOHlXbFZWSzBOM1pHaHBUbTFtU1RGRWF6WjNZM2h4UXprMWJYWlBkblZHVDNOdVQxZEtPVGt4TjBvclRVbE1LeXRTWmt0NmF6RlBWM0pEZEhBeWFYQmhVM0ZuUXpZeFFYaGlaM1p4YUhwNmRqRjJkMkZEWkhCWWRuTkxiU3ROYURoeFpqTnNZbmgxVTBSUllXRlhURTloUkRodVFuWndTeXMxSzI1SVNWWlpTRU4xTkVsMmNuaE5hSEJsWXpRMmFtcHVkVGRTWjBwc1RtVkljV3cwTUZocVdUZHpNRVpOYlRGalRVOUZkbEZzVUN0SE9EQlJPR3BxUnpoMWRscGhZV2xPUTJrdlVsTmlUbGRtUWk5NlJsUXdOeTh3V2xWdGVWTXJlR3gyWTJNMGRFSjJia3R4T0V4WU9FVnZkMHhNWkZKSE1GVllVMDAzZGxGcVdIVnVSbEV5WWpOaFVqaDZNR3hCT1VGU1FVeFZaR0k0TWsxWGQxQnhUVXB5TlRoQlFpczJSRE16U2xWYVEweHdjazlCY3lzcmNWUnBUalJrUkRGdFVYRmpVbk5TVjAxU1RXUlBRVmRYYlUxQlMwUXZkaTlzVnl0S00yeHZaVTk2WW5wUk9URTRlVmsxT0dOUWEwMW1NbmxIZUZKRFMzWjNhRWd5VXpZeE5tSTJkRzEzUzBwcWExQllPSEI0UVd4U04xcHZVbWhtVVdGaWJHOXhTRE5VVFRsMVRpOUZOVkZFTTA0MUwzZFJjVmg0WkhVclZVcE9ZMUJGTldadmRqY3lSMmhEVVVoQlNrWTJaMmh5Wm1OcWJEUnZaMGw2VURsSEx6UlJRVUpZTkZGaFdGVjNOVk0zVWxacFIyeGtSakZFVGxkak1uWjVlVzUzYjBNd1l6TmFWbHBrYjI1RGRGSm9ZVlZsVEM5UVpuWTJRMGhzYVZKcVFsQlhhM1pNUlRKaFMxZHpNWE5PV1dGMVVrOWtVVVpYYTBGWVJrZGFjWE5VYm5wSk4xUk1hRmwwV0hCaWNXZFZXSEJFYzJSU1p5OXRaRlU1Y3l0M2VESnlSVnBpVUhoRVRESnhaME1yT1djMk5UWkJSMWR4YjBOcmFFMTJOMEkzYTJ4eGNqWndiMHRHZFVJell6bFZaVEp5Tkhwb2JtRnBia1ZDVGtkU1dXWnhOM1pCYUdJMldIRkVVWFk0TTFrNVVDdFZkVFJ5VTBjMVpWWmhRMU5MU25Sb01rVk1SV0ZIUVVaUWJYVkJkSFJQVmxaTFRqSjNiSGxRYmxVNE56bEVOMjFOTVRsSU1VaEphbVZQTTJ4NVoxVnRORXN6Ym5SbWQzVm5LeXRHUWpkVmNGYzRXQzgwYkdsMmJuaERNMUZ0TW13NWNIazBXWEZzVWxoM2JGTjBiSFZOTm0xbGRVbHBORWtyUlRKcmREWXpTM0JzYmpGQk0ydHhObWxZVHpSb1VGb3ZRVkZ2VTA5NVozZzJSRTlzUmt4Q2VtTXpTSHBaSzNKVlMwMXJiUzlhZVZOalJFSlpOVXN5ZUVONFptSTBWR1JNTlhCa2IxUmpVR1pyUlhkSmVXNUpPQ3RHVG5VelJ5OUJhR0o0WjJ0VFFUTXhlamxSWmpKWVMyWk1lbGxuTVhCcFMxb3liMWRzWjJJclFUaDJVVUkwV0d4aE5uQkhhMFZ1WVhGT1VqY3pNMnRzU2xweE1ETTNiV1ZGYnpoR2VFaE5ObHBuTjB3MVoxTkdlRk51VVdwYVpscFVWbUpHYVVOVGQxTk9VVkJxYzBkc2RIbHJha2xDWlRkUGRXRlZSVmRGTXpWNFRpOU1iMU5yYjNoV1VtZHFRMVp1Y0hZeVdIWTJPRkZYZG1wMmFtOWxjRE51WWs1Tk4wVm9aMmhKYkV0cGNFbGhaQzlxTWt4NGRYWnFkMk51UmtRMWFHSkxRV1kxZWtKNlRWcE9kREoxVkZGSVMwMU1OMkpTZHpoVlVtbHljbVJFTW5GNE1VTjVTM3BVYm5obVpETmhlQ3RhYTJRNGVuTkpZakJDVGxFd01sbFFaSGhDUTJaWk9GVnpabUZZUnk5dFNsWllObUprTjNGUU9ETktRVGRLUldzeE5WcEVkMDh4V0hFMFVHSkpRa1Z3VkVjcmFITndVbXRoTml0WU1TODJjRkFyY3pGcGRra3pkM1p6Y3pSbFp6VjRkM2hQTlhoclJEZzNNMjh3YlhwRVJ6azBkRXhoTTFGd1duZE9WSEV3WmxOMldHUlJOM2RUU1RKeWIwdFlWRzVZV25GaVZHaEpZMkp2VjI5WWFuSnJOVUZPZEU4MWNWUlhhbEZKZDBoSFdHMXlNWE5EWlZWdGFFVkdSV1VyVjIxU1lTdEdaMjFQTlhaYU5VdHNXbkZDVDNFMWNHdFlWMDlYTnpKMU5UaGlaMnBwTjFsSE5rNXNlSGQzUW0xbmNqUjRSQzlWVG5veGFWUm5MMnQ0VHpsTk1qZEJaVmcyWkUxa1ozUXhVbmRwZFhka1pHaDZjRGhNTldWQmNIbG1OVlJHZFhSamIyUXdXbTlvUTBocU5TOTZNVkozYVVsUWRqbHlOMmhyVFhaTVZYVlpkRmt2U2tsRlZWWXpWa0ZKWjJWamNYSlZWVFl3U1ZwV1RVRjRlVk5WYVhwRGIwdEZObk55YmxCR0x6QktNM2tyYzJFMk4waDVXbnBhWlVSRlMyUXhTWFp1VEcxMk5YVmxWRkZHTjBONE5qSjZXV3N4T1ZnNWMzb3dUWGRDUVhOTVMwd3lUakp1YUdkdkt6TnRNRGREUWpjNFlsUlBaWFZGWkdkU1JUQTFVV3RUZVRaa1FXWlJWREpKV0ZVeEwzTTFTa3Q2TUdjeFVrbE9aRXBOVFU5RVVIaHdSR3cyYVUxM00yRjVURnBuTUhVME5uaEdjRmRFTURSaVdsRnFhRFJTT1VKM09DOVBZVloxUTJ4WGMyRXpVMkUzSzFkRVdFRlFURGxWUm10blVYcExORll4ZUhKS0wzWnlNRWRSYnpnMGRtMUNTMmxTZEVoNVRVUlRSV0o0T0VWdlMwaFdhbmRtTVZVcmRIQmllVElyU3poTllXSkZjekJzUjJGVFIyd3dSbTVaWkdKRWIxZHdaak5HV2l0dmJ5dFdha0pvUTFWVlJqaFRSV1YwU2xaNFpEaFRWVGhRWW5sRFZHSTBjWFl2WW1RelIySnlOVkI0YmtwblFqSm9UVWxZY0N0WGQwbDBjM0l2YmxsQlkzZDBWbVZrZDNnM1VFWlZXREpaTURRd1JtWmtkV3BIU2s5d1JIQnVabmhwUmtOU05YRXlWamxSTWtsdGJWSlFPVlF3WW1kdGMybDZkWGRtZEhkelJqRjBVV2t4VkhOSGNUSjRPVXREVUVGVldHVndhbGt5VFdOMVpYcHJOMmxMTmt0b05XOUdOVFp3ZUN0MlFXNDRjVWhhT1VobGIzTllRa2xWWW1JMlQxRnlXV3BvVW1OTVRsbFFRVEpMWlUxYUwwUkpaVXBsVVZneVkxRjVlRmRYTTFwblVrVjBibGxuUlRoNmNqa3liekoyWjNoRVMxTXlUekpKUFEucGE3Ukx5VTFsVFYxeHVRaGdYUEJIMXdCWEpjdHV0UGNBNG4xeGtuZE04MHVpVGU3aFJfd0JTNnBicFlOMENvTHMxTjF3NjBJRjJiSUdxbDdwdlBDMXc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:28:25,319 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:29:35 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:29:35 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:29:35 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=6D3A23EC672421638101AE4B834854C4; Path=/; HttpOnly')]
2020-05-20 15:28:25,329 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:28:25,340 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:28:25,342 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:28:24",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520152824 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:28:25,376 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:28:25,378 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:28:25,380 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:28:24", case_exec_history_id="20200520152824" WHERE executed_history_id = 20200520152822 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:28:25,530 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:28:25,668 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:28:25,671 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:28:25,674 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:28:25,676 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520152822',)
2020-05-20 15:28:25,681 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:28:25,683 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520152822')
2020-05-20 15:28:25,688 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:28:25,690 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520152822')
2020-05-20 15:28:25,695 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:28:25,697 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520152822')
2020-05-20 15:28:25,702 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:28:25,704 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520152822')
2020-05-20 15:28:25,708 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:28:25,710 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520152822',)
2020-05-20 15:28:25,715 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:28:25,718 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520152822')
2020-05-20 15:28:25,724 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:28:25,727 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:28:25,729 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520152822',)
2020-05-20 15:28:25,734 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:28:25,737 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520152822')
2020-05-20 15:28:25,743 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:28:25,746 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520152824')
2020-05-20 15:28:25,753 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:28:25,756 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520152822.html
2020-05-20 15:28:25,758 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:28:25,761 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:28:25,850 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520152822.html
2020-05-20 15:28:25,850 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:28:25,914 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:32:46,440 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:32:46,441 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:32:46,453 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:32:46,457 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:32:46,901 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:32:46,903 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:32:46,910 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:32:46,911 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:32:46,920 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:32:46,922 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:32:46,923 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:32:46,924 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:32:47,258 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:32:47,260 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:32:47,262 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:32:47,264 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:32:47,266 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:32:47,400 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:32:47,533 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:32:47,535 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:32:47,735 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['6'])
2020-05-20 15:32:47,874 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '8', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'modification_ts': '2020-05-20 09:06:57', 'author_first_name': 'Testlink', 'updater_first_name': 'Testlink', 'id': '7', 'author_login': 'admin', 'active': '1', 'author_id': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-1', 'status': '1', 'estimated_exec_duration': '', 'is_open': '1', 'execution_type': '1', 'preconditions': '', 'testsuite_id': '5', 'version': '1', 'layout': '1', 'testcase_id': '6', 'name': '作业配置', 'tc_external_id': '1', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'updater_id': '1', 'creation_ts': '2020-05-15 08:13:20', 'updater_login': 'admin', 'node_order': '1', 'author_last_name': 'Administrator'}]
2020-05-20 15:32:48,020 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:32:48,021 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153246', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:32:48,066 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:32:48,068 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:32:48,071 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:32:48,076 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:32:48,078 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153248', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:32:48,124 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:32:48,125 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:32:48,128 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:32:48,129 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:32:48,131 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:32:48,132 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:32:48,134 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:32:48,136 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:32:48,518 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:32:48,523 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-6-9c1bMd1BfcKhmOKLmrqTQMcMy1AnRx-passport.51gxc.com" />
            <input type="hidden" name="execution" value="3b6d9a18-d0ab-4beb-8bd5-392f6df0ab20_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTjJGRFMweFJNaXRTVVc5U2QzUlFVbmhOVWpSVVJXWjRiR1UxZDJ0UmRtWkpSV05ZWVhCa2QyUjRhbEZtZUdZeUx6QTBUams0TDFGWWRqZDZWbXRVTkdoeEwxZFZWRU1yWm1ONFltdHNaM1J5VFdZd1RGQldjSFpXTm5wUGJHaDBlRFZuV1d0M2RqbEZXa2RqVEdKek9GcHNNbk5aTkhvcmQzTmhPV1ZrYjBSU2VXdERaSEY0Y1ZaVEx6Vm9PRXA1ZVdRdmVuUnVRMDlDTkVjMFdVeFNRbUUwTjNWQ04wWnZUbEYxWlRVNFpXTkdjRVl6VG5Sd1VHbzVRM2d5UkZZMVZWWlVZMGxSY0d4WFVrTkViM1pRVkcwcldYSmhaV3BuVlhwNFJHdGxkVGx1UkV0VGMyWnNOblpIUlVzeWExWjJOMk4yV1hsQ2FESjNVV3BKY1dONVdtOXJUREYxZUdaVFpsWnljUzlMSzJSMlFVSkVTbkpqY2tkUU1FeGtNR0ZrV1ZGcllYTXhlbTlFYkdaRlNsVmpWWEpoUzBSU0swZHpjRVJFUmpGRFlVWjJaa2x2TkRWWlEzZDBLMkZxTWsxbVltZ3pVME5xVTBkU2RpdDJkR1F3VGpsWFFVNTVWMlJMVFU5NmExRTRjV3hXTmxWNFZXZzVka0ZCVlVadGJXRndNbk5ETjJ4Uk4wdENaVWxST0hFMVpXa3ZMME5NT1U5R1MxaFNVMmRrZUdWa1NGcFBabGhMWldWeGRrb3pNSEpoU1M5MFpEaFhiV3hoWW5KU1NqVmlZVVJpUmxGWlJVZFVOWEZpVXl0cVZtRXdXVzhyUm1oaEszQkxOVlU0V0ZaS1V6SlRNRkl2U1dNMVpHdFpXakZ5WmpSSFdUWmxaR1YyVG04MGJVeE5ObGhNY1hoRk9VUTVaM1JZWlZveU1tOUliM2R2YTFaclFrbGtPRGd5WjNvMGFWcFBaMncxY21SQmFrVk9hMjFUVFVwV1pVczRjM0ZKVlVGWVRISkxPVXAxY1c5TFVtcDJNRnBpZVRSVVowMVlZaXRVU0dkcmIyWkxVMkZZTW1GUVNGaEVWR29yYmxKUGRVTlZMMnd4TDA1VmVYRk9jMEV6YlVSeGRsUklZVko2YkZGQ05EaHVjWFY2U21jck1IbHRXVGcxTjFSSWRFUkdkU3Q0Um1FeVREUmxWVmcwUjFVeGJGQTFjbVZHYkc5cWRYVm5UM2x5ZW5nNWIwZHlTMVpIUzFGTmRHZERZMjVZYkhwaWJXbzRXVTlpY0ZoUU5HeG9VRGxEY3pWS1ZYTXlNelJ5WVdoM1QyaHVWWHBtZGxadlJEZFZRVGhQV25BeGFHMW5jVEZzZVNzeVZpOVVkMjFIV0VobE5VOVBNV1ZtTm1GeFJXMDVUa3BKTmxRNE5VOXdjblVyTjJKSU1IVmtUak5JT1RGNVV6QXJjV3h5TldFMGNuRTJZMVl3UTBsTVVXSmFNekZrVlZVMGVreEdiVTlJYzFwMVdscG5NbUVyUlRkM0wwTkdWekZUU25GTllXY3hlVFl5YjNsc1pXbERXVFozY1VOTFRHWjVjM1I1UTJGU1lraFVlR296UVZWeFVHbzFPSGRGUm1ObllYUm9iVGg1Unl0dVQzRmtZM2xLUms5MWEyTXJaekZFT0VnNVJqVXJURlZwTHpWT1VVaFFPVUp2ZERKRldFSkdXV3BoVTFCVk1qTlZNME5TTjAxbVdYZDVaMnB2TVRSMFlVNVliVlY1UlRSUk9WSkNSemhhVFU5SU5GUnFjVVJGZDBWc1YzQXdUWEpaTWtsT2NERnBkblZpYzJ0a1ZFTm5iMWx2U0hKWVZEbEJMeloxY3pFNVkyMTVVV3BTTTNCRVFqRXdSMmQyU21OTmJuSmpjMUppVjJnMldYUXhjRXhaVVdWaVEyNTRRVmxsWVdSdVRYQmxPR2RsTlc1bGNuZFVRVmNyYzFSbUsyaDRXV1JPUlVkRVYxVjNNbTVyTVVGTEwxVkJTMEp1ZUZvMmRIbFlUVEJYYjFGMVJ6aFpjSEl2UzFwVlJWVjBVMUZVWkdoTWVGQmFZMEZSS3k5VU5uZDZOVzFESzJGbFFXZE9hRTFDWjNaNFVEa3ZPR2xvSzJ4cVNGTlJOV2xSU2xOeGFtd3dWMFkwY1dzemF6UlZPV3R5Yms1cFZtdzJlRlJEYkVzelJrdGhNVzlYTmxZNVpUUkJkbVpWVXpoMVMzTTBVV016Ym5aSWJuWkxWVzlTZW1zeE9HeDRVVTFJVEhkR1dWWkNTbmwzVm5OcWIyZDFlWFYyWkdGTVRrRm5ZMEZNSzAxVWVUVnlNSFp1ZEN0TlUyc3hRbU00WTFsNmRYZDVUbTVWU1VkSEwzaFRWV2M1Yml0SFRIVXZUa2xDZEZoTFZUSldWRlpHYkZsV1RqTmFOVzkwUVZsU1MwRlFiVWxRUld0T2QzYzNOMWRQU1ZkUmFFcFhRbEEzZGpBMFRFOHZRa2xETlVwSFQxZHROemszWXpOc1lWZDNTMlZVYmpadE0ycDRXRXNyYlhOQkszcHFhVVZ2VUM5TmVUQkNVREl3TlhwV1YxTXhlR0Y0VmxSaVNuQkVNbVF3TmpjelMxWXhjR3hYU1ROcU9XMW5NMUpLV21ZcmVIaHFPSG81WW5kSGRETXZjeTk1TVhCTE1VdDRjM1p5TlhVME0xQjNZelE1YjJ4SmJDdEpPV2R2YjB0ek0weE9aVlZyTDFaUlkyTmpUWGR3Y2psTWEwSmlVekp6V2xob1EyRlpaRFl2TTJaTmRXNTRhVkp4TmpVemJFbHRkV28xZG5CdGRFMWthemsxVldKRlZYUTVlR1JsT1dORVpHbzBSMVZGWjFWb1VtOVBabFF5UTFweFRtcDRNa055UjJWcGMyaE1MMmxxT1VRd05FZDNSMk42Y1RWR0szVkhkVVpOUm5SS1VDdENUREp3UlRrclVrYzRhV3RoVDA5UE0yZDJMekEzUjNoaUwwdzNaMU5zUWtsek1VcEJRMFZoZUhoUFpERkNNV3RWTjNSNVpHaFlkbmgwU0VVMFlUZHhXV2RNVFVGa01rWlFZemhTYm1kdFUzVXpXVWxMVFROdGMwSmhhMUEyU2toa2FHUldTekJNYlVsbE5rMUlOVkYyWlVSd2MzSkNhMWxTV0ZaMFdXaE1ja1EwVUVWNFpIVkdOSE50UjJreFVtWlliakZrTkZaSGVHdFZRVTgxZWxacGMwWnRSV2x4VVdkS1ZrTmFiMWhaV0RFd1pERjZielUwZEVGNE5UWldWMWMwTDBONlJDOVJTRVpNTVhoYVZHb3diMWRYUmxGRVdHeG1jbmx5ZGxOdlVUUlhWekZCTHpndllqWktaRVJUUVNzcmFuUnlTemxxVERoeWJuQlVhVEoxWVhNeFFXSnFWVGhyUmpkTFVWVk9aa05uU1V0WGRXVnNkWFJtVmpkTGQwMVlSMUEyTlhWS1ZsSXdWWGhDWkhjeGEwNVhha3R6TUZCd1EyUXdNMjB4VVdWc1pGTkJkbGN4V0V4RVpEQnVZMU5OVnpSU1ZIRnVjR1ZKTmxGMGJUZGpiREpXTTFSc1EyRmxSSGQ1UWtVeVFuQkxLMjlzVTFNeVFTdDBXSHByZW05Rk4zcG1RV1ZYTnpkamIzTktVbTl4VHpreGFUUXZhWHBKVTB0bE4wOHpZMWxQUWpBNFRtaGtUSGgwYTJwMVlrNWpaMVpIWlZkM1ZIUmtSRVkxV0dWVGJ5dERSMjVoVkUxdVZIUm9ZVXhNZUhwMFUyOXlSM1l2WjFGYU5FaFpVRTlJT1RoeE5EaHZZeXMwZDBWek9WbHRkVWh4UkhoT04yRTVOMHNyUVdwdk9IZ3laa0l3U1VaTVRrdHZRMnQ1ZHpsdllrUlJZVUkxUTBST2VHbFpXbkF5VlROSFNHeFhOMkpxVW1KNVNERmhPRU01U2pSMmVUZGpOaTlpYVZwRVdrRjFNa1ZvZGswNGVWSjBUVkJtTkhOSlRrdHFjamQxTWtOeGNDOXNTSFkxZEVoNUwydzNVV0paTm5odWRXMHJVVVo1UVdzNVpTdGxXVGxFYmtVNGRXNXlTMEpvTUVkeE0xUkNkVEkwYUdkTldtTkZVMmROTnpCT1JVTnFiMWhOTkhFd2RHNU5WbFZVZWxOd2VtWmlWMU5ZYlZkemNuaGFRWFZ0UlhWclZYZG9OWEZTVGxCYVdEWlpURmRsZW1WV2VFMWlTRWszYldaTldHY3llazR2UkhST2R5OW1OWGd4UldSNVdtTXZSbTB5WVU1aFVDOU1lVWd6ZVVGMlYyWXhjVXQxVjFKcGFUSkJWR0U0Vkd3emFVSkNaMDVZYmtWVkswbDBUREpQT0RGQ05HVkNTbk53YWpsM1NsWTRWMmx0VkVKbFpraEtiRTUwYVdRNVYzVTNialo2WkU1Q1JEQXpiamxJUzIxeU0wSnZjMU5CVWtGcVEybGhPR0kyVUZJMVNsRmlTMmhwT1ZKcmMzWk1iM2RaV0d0c1JHRnFjVk15ZVhsdFZsaHFhVXhhUm5aNGVtMDVjbXcxZHpaeWNFSXZXVllyY25aQmJGY3lNWEJIUm5WRFdrMU1SeTk2YTBONU1DdDRjREJYWmxsd2FrdEVWazVtTDJKRVJFbHJabTUzTVVGdFRtZEZjVEJqVEcxUGQwRXdUMWhyZFZwbVN6TkZjR1l2TVRKclpXUjBZMUJYYlZOWmNYbE5iamRPTURZMlNtUjBlRzlUYlZaV1JFMWFTMUZMWTJ0SlduaExSM0p3VDBrMVJ6WnNPV0poVFRVell6SmlheTk2VldRM1pDOTFkRVZpUkdjMlJVMTRUamRGTW5GVGNtRkJWa05xWkhscmNVVjZRMDVSUjBoUFRXUTVUVmhhWTNSak1tVkRUMVY0TURWclNtMVpkV2hMU1ZoR2FDdGhZbVpSYjJWRlEyUnZOMmxVUjFWaVFWQkZhSFpZYTI4dloyOUxTMVZEV0ZKc1NITlFNbVEwUWpVMEwwWlJUMmxSVTBaTGFqWkJWRmM1WnpaMWNHb3lUMU5FV2xaaWVta3hMeXROWjA5WVpGbzVOemgxUzNkQ2NuSnRTR0ZIZW1KcVlVVkdZblJ3WWtKeFFqZE5NVzVYZVhBdllubG5hRnA1WmtoUFUxYzRPVmhPVFdwbWFqUkdWVVJuVlZaeVdYUjVORXh1WXpoaVl6aHpjbmRoWW1keFduTjRORXhLYTJaVGFsaFVTU3MzYnk5VlpucHVTRVJLYzFGcUwxaFRiMVZOVVhoelpVcFVTbXhETUdRMlNrdE5ZVTlQWlRJeE9XWlplSFZvUXpBMGRrOW1URnAwTm1sdWMwa3ZVRVUyVXpOQ1RsVTBlVEZKTVdoeE9UUjRSWEZJVjJOd2QydFRaalJVYVRCV1MwUkZlRUZSUFEuTEU0SHp4STRlaExyUW9KMGNMMG1TcWQ3TkxIS0JjMTF1RXNFSGRmcWkzbXYtS1NFZDZJa21pUUFkTE90U09fZlp2ZmVzcUJjXzh4WXY1M1FCUlV2Tnc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:32:48,914 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:33:59 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:33:59 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:33:59 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=EE0F50E0C9A75411E7AEE07DFA35A418; Path=/; HttpOnly')]
2020-05-20 15:32:48,920 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:32:48,927 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:32:48,928 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:32:48",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153248 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:32:48,996 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:32:48,999 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:32:49,000 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:32:48", case_exec_history_id="20200520153248" WHERE executed_history_id = 20200520153246 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:32:49,171 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:32:49,355 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:32:49,357 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:32:49,361 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:32:49,362 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520153246',)
2020-05-20 15:32:49,367 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:32:49,369 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520153246')
2020-05-20 15:32:49,373 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:32:49,376 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520153246')
2020-05-20 15:32:49,383 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:32:49,385 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520153246')
2020-05-20 15:32:49,390 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:32:49,391 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520153246')
2020-05-20 15:32:49,396 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:32:49,398 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153246',)
2020-05-20 15:32:49,402 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:32:49,406 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153246')
2020-05-20 15:32:49,413 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:32:49,416 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:32:49,417 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153246',)
2020-05-20 15:32:49,422 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:32:49,425 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153246')
2020-05-20 15:32:49,432 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:32:49,434 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520153248')
2020-05-20 15:32:49,441 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:32:49,444 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520153246.html
2020-05-20 15:32:49,446 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:32:49,449 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:32:49,710 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520153246.html
2020-05-20 15:32:49,711 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:32:49,990 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:34:12,764 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:34:12,766 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:34:12,778 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:34:12,782 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:34:13,227 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:34:13,228 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:34:13,235 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:34:13,236 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:34:13,245 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:34:13,248 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:34:13,249 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:34:13,250 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:34:13,506 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:34:13,508 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:34:13,510 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:34:13,511 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:34:13,513 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:34:13,658 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:34:13,780 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:34:13,782 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:34:13,918 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['6'])
2020-05-20 15:34:14,058 testplan.py[line: 46] INFO: 获取测试用例信息 [{'status': '1', 'author_login': 'admin', 'testcase_id': '6', 'modification_ts': '2020-05-20 09:06:57', 'is_open': '1', 'active': '1', 'importance': '2', 'author_first_name': 'Testlink', 'testsuite_id': '5', 'updater_id': '1', 'estimated_exec_duration': '', 'name': '作业配置', 'updater_login': 'admin', 'updater_last_name': 'Administrator', 'author_id': '1', 'author_last_name': 'Administrator', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'full_tc_external_id': 'cq-1', 'layout': '1', 'execution_type': '1', 'creation_ts': '2020-05-15 08:13:20', 'tc_external_id': '1', 'steps': [{'step_number': '1', 'active': '1', 'id': '8', 'execution_type': '1', 'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'version': '1', 'updater_first_name': 'Testlink', 'node_order': '1', 'id': '7', 'preconditions': ''}]
2020-05-20 15:34:14,214 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:34:14,215 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153412', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:34:14,266 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:34:14,268 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:34:14,271 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:34:14,276 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:34:14,278 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153414', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:34:14,311 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:34:14,312 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:34:14,314 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:34:14,315 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:34:14,317 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:34:14,318 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:34:14,320 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:34:14,321 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:34:14,628 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:34:14,633 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-8-ssv0tdOWbcBrHmvXH6lwFTUBgjP60q-passport.51gxc.com" />
            <input type="hidden" name="execution" value="fb242125-1e6f-4e87-b343-69445b92c708_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuYzA1M2EyOUNaRUZrTmtWMGFtbGtTMWxoV0RjeVpXbENlbGhIVld4VUwxZDFTbXhIWkhkd2VrWjNkMDVSTlV4eFJHdGliRVZKVWxCRlVVdEJOREEyVDJsUmVHcEpMMmRhV1hSNVZtTk1XVkZIWW1jeWNGUlRiVk5xTURKRE1IVmhOM1pYVURoT1NuZHVXbXRzV0VKT1EwSkxORlJvUzBJeUwxQTVjWHAyTUZoblFWVnVjQ3RIUkdwb1FrYzJVRmRXUlhCTWNHSmtjRzVOVldsbmQxWkNTM050T1VsMFpHRXdXV051T0RCRWNrZE5RbG8zVG1kT00zaFBjRzFNZEdVck0yWXpiR3A0Tm5OSmRpOTBZbGxYU1hwMVVYTk5VSFJKUVUxaU1scHdhVWhxT1hOcE9EVnFVazR5ZVdwbmFVaDJNbTVWV0ZWMWQxWm9UVEpTSzNBeVdYQkRZakZCWlZvdlJVNXZTbmxsY2xCeWN5dHljVmRMWTNaTFdHTm9VRkJMYURCeVRHZDBiWFZsYmxwMGJVUTFWR1JaWWtKT2NUTXZPVkJpWlZoeFFrcDFPWGxWTlZCcVdqRnBkbTlXYVU5S1JXcHRSV1ppTTAxRGVqVkpXREZaZVhKVE1EQnJTbWhsWW01TVNVWkxNRkZNVTFSTldWWkZiM0F6Y2t4RVREQmtWWGc1V2treFZXRkxTSE5CZFdOdlUxYzNSWE1yYlZSTGRrVmpNMmxQTDBveGJISnNObVpRUlhaU1ZuSk9WME55YWxoeFNUWnRaR1o1VGxjMGNscDZXSFUyTm00eE9XTktTV0pLVFZGVU1rcGpXa1JDZFhWRlJUazFjM1pCTVhOeU16QjVkVXN3TkRoVFVsTkJZa2h6U21JMk9DdHRjWGsyZWtRclREVXliRVZOWlV0RlNYVjJjMWhCWm1KMlUyNVlTekJNYmpkRmRVZ3JaMDA1VmpocWJHZGlXRVJxZEdJNWRUY3hVSFZhYmtvM1RrNHpSa1EzVXpCMk5WUnhTVVJwSzJ4eFJqZG9OR0U1ZVVkT1lrOHZhVk15VVVOcmJWQnFNV00yYkdWd2MzRk5SSGh4YkdWVlJYbDZjSFJOVERRME0zUm5jRkUxZDFWM05tZFdNbWh5YWpSbFlWTlVOM1ZQU0ZSdGVrWmlaMFJYTm5OVWJERkdaVEZxVm10RlFqVmtkR2hZVkdoUGJsWnVUMlJXY1hZMmRtdzBWbEJGVjJsR1NtWXJibFV6TlVGVFYzaDBPR0pwVnpCUVRtTlRiWE5rZGxGdmJ6WlJlRVZSYmpod01HSmpZME5MT1VsNE5tUTNkMXBJYmpkNGNrTmxNM0V5TDFVMFRXbENZazFHT0ZCd2JEYzVha2xZVWpRNWVIbDVlbFphY1RKeWMyODJUSE16ZWpRNWJ6RTBXVzVRYkhwMGVGbzBNelo2Y1c0eVFVMW1jVko0TkZCemJsaE1URTVWTjJadWNVczJWemxYUzJKSVRYZHFZVE5yV2pSS1ZYZFZNRXQ0ZDBobFVsbEtRMlpVYUV4M1lWRXpMMU5sVUZOaE0wdERjVTVLTjI1eVRtRmlhMGx3Y2xwME5HMDFTMHQ2YzFFdmEwTlVSbEZ6TDI4eGJITjJNVFZoWVZJM05qTndSWGs0ZDB0bmJEVjRUMWRHUTBndlowUmtRbHB5SzFSck1VMHdlVFJzYmpNMkt6RnNaVUZRYVZCU01UTXhSMk4wTDFWd2RqRTJiSFZ4Y1U1VWRVTk5WVUZrTVZscE5sZzJMM0Y0YUdKYU5qbDBRV0YzZUc5alZpdHFMM3BrTVRWQ1lsVklVMngwTnlzNVVtTjJZVVV6VlV0emJIZG1hRFpZVERoaGVUTlFXa3MxVWpkSFJHWmpiRU5TUlVSaU5VcG9SWGhPU25oVmVHbDJTWEZCWm1KcVdrZFBZVGhaU21wSlEydHFTV2QwTWpGbVpYZFFOVkJGVFhCMlRrbFFhemxEUkVwTmNqZGliV1p3ZWtwbVRsRm5Wa0UxVEVObGVFRkZhRFZSVlhaUGVWZHZVRkk0UVVGVllVTnZkbkoyUmpGRmVrMXdkMmRuY1VwUGRraE9USEZLZFhwNEt6UnhXV3BDYjNGWloxQTBUMmhZYkRkeVUzQldValp0V0dOMldtb3lhVk0zUjJFeVptbHJkVFZKVFZOR1NHcHFlalZsVUhVM1EydHZVRzFhVDAxWFMybDNhMnBHTTNCaWFTdEtiakpGVFRCeU1tMUJjalZTYzJGT2VUY3JUMDFWYTNacFdYazBaR1pSUTFkclRHbHVTR0UyZWpCVWJrVlRhblpYY1ROSU1tTmFOVmN6TDI5cVZHcEdWM05zUTBkWU5TdDBlWHBMVlhobWEwRlFTVlkwU2pBelkyMVlPV05UU204NVExVjRVQ3RyT0hkUGRVaERkM1JRYVZScU4wcGpXQzl1U0ZKNk1FbFdPV2tyUmxaYVpFWlhWWGhYTm5WWU1tbGxOVkF6WjNaeE1HUkVhVVl5ZGpoVmIwSnhSU3RhZEZZMFEwVTVVR1ZOUmtOTVowMW9ZaXRyZFVWbWNXRmljVkpCYUZsTmJVc3JiVFJQZGpoa1RUZHlNRE5WTW0xYVYydEtMMGhuVEhsTFEyeFBRbEJqUlN0SlNFOTViWGhtVVVwMVJtZEJObGh6ZFZwUGVsSjNla3RsUm5oaVIyNHJSbWxtZG1aTk1YQXdSMWRtUWpFMFJWUk5iRFUyYzFsb1V6bG5lSGxHYzBweWJWQlZPSEZ1U1ZobGMyUktTV1pzWTFjNE56QjRWbVZIY1VjeUx6QnFRVXAyU0Raa1JraDJaRWN5WmpkQ1UyZGFZVzh4VUVwVU1GQXhTa1pwVVROT09UZGpkWE5PYzBkMVJVVlRNekkzT0ZsRGQwMWlibmcwY0d0Vk0wTTJhMlkwTTI1dGIxbGFTRzl3WTBrcmRVTTBNRFJ4U0hkSFdGRTFSRGRTYkROUFVGUjFkUzlaTUVsbGNsWlZURlpyUjJGMlYzVnViM1pTTjNZM1JXZExPVmwyUjAxcWNsVnJPR1YzVEVsb2JqSmFPVnB4TjI1bmIwSkVXbVZNTVhoV0syOWliMjFLZG5sQ2FXZEhNbEZJZW1ObVQwRndTMmhOYkRZemNGbG9kM0ptYlZaM1UwRllLMlUxUld4NlVVVm9TREJFUVZJMVVuSkNTMFExUTJGQ2REVk9RbGhOUVd0VlIxVlFaVk5KT0ZWaWRGWkdSMnNyUVUxTlRtcE1jbUYzWWtKTWFYYzVSVlJYWXpORlJtdHpaMEpOV2t4NFIwcFdlVkZyYzBsT04zTXdhbTEyVkV0VGFWUTBPRFJuZDBoaFR5dFBLek5ZVkd0RGFGZG9NRGxCVVRaR1R5OUNXRUYyTW1JMFUzWkJhR2RxYzFCUk5sZEdjVkJ2UTA1dFpVTkdWVWhKTW1STU56QnlRbEZPZVZGV2R6bFBUM1J5VTJGcGJVUnRaazFGVUZOT2VIZDBlVFJZVkVKWVVuRjNOSEZqUnpSWE1IQnhRVEJtYTNoVk1XaFNUVGRGUWtkd2RuVlhSMEZVTDBGS1RGWjVPREUwV1RaM1EyWTFURVJaY1VsTFExTXlPR3RPWkdKWmFEUjJXa3BrYW1wVWExTktiRTVNTHpFNWNUSjNLMjFhZDNoREwwc3lSVzVXT0daeWJrNHZaVmRYWldkclFUaEJSazFvV1haNmRWWlRhMnRTWVdJeFJGbDRiRlZJVURSRU5VSXhUWGxYYlhsNGJGVktVM1oxZVRSNU1YVnhSSEpHVDJnelZGSm5OMGh3V25aR1QxZHhTemhRT1ZsM1lqZFlabFF4TTJOMFlYVmpiR2xOUzFNMVMwTTNka3RPY2xORFZuWTFRa3BsUWpoME4yRkJSMWxaWlZGVmFGVTJTRXBpWTA1VFVFZFdRVmRuYlZkQ2R6ZE9aV3hSVVVGUlJVOXBjVzFOY1hSSVlYZ3lkek5qVmpWS04zbFZjVWx3Y0VndmQyTkhVbk5sZWtKUFlqRnpjMDFYZGpVM01HaDZTbFF3U2tweGNubG9TMVo2WW5CRmFDdDRLM1EwU1dWUFZuWklObmRMVUUxWGFVWkVRbUppT1hOV2JYaEhka2xZWlc5RldsRXZabXBRTHpGRlpHRk1ORXRCYzNjM01HRjVOMEZIVGpaUE9EVmhRbkZsWjBVMlNIYzFRVWhtV21WT2RVSjRMMDkyV1RRMU9XTlZSRVpYVkRSbU5Ga3lZa2hpT0hCdE5IZHhiSGd3VjIxV05FcFVXWFZKVUVWU1pEQktTMnRhV0RBeWJVY3dZMjlrUmtOdFYySlFaVk5OYUhwMVN5OVpXSGgxTmtsa1IxRlRNazVzY1V4M01XeGFjbTEwU3k5NGJIRkRRVmxwVmtGTWRWb3dObnBzYlM5U05HOUlUMmczVVdSS1JpdDBLeTl1WmxWQlN6aFNNbTR4VlRNMlNEbG9WRVJYU0hCRk56WlNSa3d6Wmt4cVVGcGFUU3RLUkdaRU1sUnFUVmhrVlRGVlpEWkhVMHRhZWt0TVVuTlhZMUIzV1d0V2FTOW9ZVU52UjAxRlFVUlZXRGxpVEVOQlZVNVBWMGRUU0ZSM05XOUpla2xhWTNWb2RWQkJjRlZTTlVwQ1ZEVnVabGxFTTBwcVNuUjNXRGxWYmtSMVkxSktTR01yZEd0NGMyNDRjSFZNUzBkNFNqUnVTV05tZFhneFRqbFRWSEp2WVdrdmJpdEVOQzk0TkhGTE9IUlFTMms1YVdSTk9FOVFaa1p1UW1sMk1FSmtMemx5WlVKeWQzUlFPREI2SzNOU2QyNWhiRVJuZVcxNlRFSmxhMDF6YUhsQlduQmhiRmREWTNsVFUzZHZURlJEY2s5U1UwWklVbnBVYVVKNWNYZHZjaXN4Wm1sQ1ZYUjVOemdyVVdod1JERjNObGgwVW1wemRsUllUSG96YkZCVFEwZzFaSHA1Vm10YWFWWkpXVkV5WXpOSFQwOUZZMFYzVGxsWU5ubDBMMlZIUjBkWFNtcFFhM2gzYzJSaWVXdFdXVU5OV0ZsRk1XdHFZMjlrT1hCSVEzWXJNa1ZSZGs1R1pHZ3JkWFl2YlZoekt6YzNWRmxhUXpkbWIwRXlVbmhwVTI5TVZsVndZU3RZTUVORFRYQk1jMnQxVTBZcmMyVm1NVFp6YjAxbk1tVXhhekJSVlZCcGVHcGtWRlI0ZEhoVk0zUlVhRzB4YjJzeWNYbGtjbFZGVEc1elNWZEpjMHB2Y1c5cmFIZDVSRWRFV21Gb2JWaFZRekp6U3l0U1lURTFUMmtyZDJweE5HaHhaWGRLWmsxTWRYRXJhbU5ETTI5bGRrUjZha3hKS3pGeldqSlBVemh2VlhNMmJrZEdTRTExSzJ4RE9HazNTaXR6VUZCSFF6QlBZblJyUFEucGI1WnVMLXE0eDFWaWROUWw0cE92amkwZXl6RHFfdTlmR2w0WnB5ajVXRHY4M0RtSThhRHdldUxTNkY2a3VxMm4zZFVnVmoyUm51Zy1uMHJyZDRYaFE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:34:15,019 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:35:25 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:35:25 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:35:25 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=63F3CC91C6112C2675F820C52F6B58AD; Path=/; HttpOnly')]
2020-05-20 15:34:15,025 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:34:15,032 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:34:15,033 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:34:14",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153414 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:34:15,060 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:34:15,062 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:34:15,063 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:34:14", case_exec_history_id="20200520153414" WHERE executed_history_id = 20200520153412 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:34:15,214 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:34:15,362 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:34:15,364 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:34:15,367 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:34:15,368 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520153412',)
2020-05-20 15:34:15,372 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:34:15,374 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520153412')
2020-05-20 15:34:15,377 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:34:15,379 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520153412')
2020-05-20 15:34:15,382 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:34:15,384 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520153412')
2020-05-20 15:34:15,387 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:34:15,389 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520153412')
2020-05-20 15:34:15,392 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:34:15,394 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153412',)
2020-05-20 15:34:15,398 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:34:15,400 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153412')
2020-05-20 15:34:15,405 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:34:15,407 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:34:15,409 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153412',)
2020-05-20 15:34:15,412 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:34:15,414 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153412')
2020-05-20 15:34:15,419 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:34:15,421 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520153414')
2020-05-20 15:34:15,427 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:34:15,429 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520153412.html
2020-05-20 15:34:15,431 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:34:15,433 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:34:15,519 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520153412.html
2020-05-20 15:34:15,521 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:34:15,582 main.py[line: 249] INFO: 发送邮件成功
2020-05-20 15:37:38,336 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-20 15:37:38,337 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-20 15:37:38,349 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-20 15:37:38,353 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-20 15:37:38,794 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-20 15:37:38,796 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-20 15:37:38,803 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-20 15:37:38,805 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-20 15:37:38,813 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-20 15:37:38,815 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-20 15:37:38,817 main.py[line: 90] INFO: 按项目运行测试
2020-05-20 15:37:38,818 main.py[line: 94] INFO: 运行所有项目
2020-05-20 15:37:39,068 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-20 15:37:39,070 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-20 15:37:39,072 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-20 15:37:39,074 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-20 15:37:39,076 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-20 15:37:39,202 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-20 15:37:39,328 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-20 15:37:39,330 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-20 15:37:39,478 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['11', '19', '13', '15', '17', '6', '9'])
2020-05-20 15:37:39,625 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:09:57', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '22', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '3', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '12', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '11', 'updater_first_name': 'Testlink', 'name': '气体检测录入', 'status': '1', 'full_tc_external_id': 'cq-3', 'creation_ts': '2020-05-20 09:07:32', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '3'}]
2020-05-20 15:37:39,792 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:39,794 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 11, '气体检测录入', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-3')
2020-05-20 15:37:39,980 testplan.py[line: 76] INFO: 开始执行测试用例[id=11，name=气体检测录入]
2020-05-20 15:37:39,984 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:39,989 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:39,996 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:40,000 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153739', 11, '气体检测录入', 'pan1_of_cq', '长庆项目演示', 22, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:40,022 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:40,024 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:40,026 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:40,028 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:40,029 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:40,031 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:40,033 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:40,035 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:40,426 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:40,431 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-10-wJZ0CMacYDsH9KqqTcLVHID4oNCuL7-passport.51gxc.com" />
            <input type="hidden" name="execution" value="1c3761b5-dade-455e-a3fc-6b4c5235b4ac_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWm0xa2EyeFRhRkZSUmsxU2JISlNXREZXVkZWMlRsaFJSVTB5WW5GQkt6Sm5TMnAzV0dOMFppOUhVR1E0YW1WUE5ERkZSWGw0VkdkTGNqRjRZVTFxYlVFNVRGUmpRVU5PYkc0cmVtODVXSEZUTWpsRGJUVllja3B3THpSRWJESTBWa1p0VlVaWE4yUkdNVnBFVXpVeGVYSldXa05TUTNCdlZGZElTVXhCZG1Kd2NHOVRTREpTZDFOb016RlJiWEpHZUdsc1FtbFZhVTVPTm5oNGRFRTRTV2xZYWt4Q1VWZGlibmRaU2poblpUaFVTamRwVTJOV1pHcHNSR3hDVTBwRE1YaEZVelZIYlVaeFVYUXlWVnBuUTI1cmRHUXJaRVJVWmk5UU4wRllWV1YxZVV4MVJWcEZLMU5GVkU5WFVuVldOV1p1WjJaR1ZUTm9OV1k0Y1VwNk9HeHNhMVEzWm1kWmFtMDJUVEo2TkhWMmFGTlJWRlJMWlVRNVVFVlBiMEZHTVZCRVlVbHRSRlYxU3pZd2JEVklOeTgxYW1aaWRUVkRlRFpOUTBod1pqZDFZMlJIVUZwd1dsbHlUSEl2Um5aSWNqVTJUVll5TW1kQ09VeHJWWEV4V0RVeGNVOUdZMGgzY2xWcFYxcEdhbEEzT1VkSFRITm5WbkZQVlZaV01GSldPWGR3T1ZoclpIWm1NMVJtY21GbU1GVkdVRlZuV0VrNWIybHFUR1pOTldaUVoxZEZUMW9yYkRCc01XbEJOM2RRTjNSTlpqaDBPRXBPZDNaRVZrWTFZbmd2VEd0eVRVZG5TaTh5TTFZNWJsWlJWMmhHUXpCMllYUkVZbTlQY1d4TU5qVkpVR3B3YkVNNWJqTTJVRnBUVmxZeVNWTTFNRFJETURaRFRsVjNSbWw2ZERremFHOUpPRk1yYkhsbVpXcHlkMkpsTVdka1lsQm9hVnBVUjJ0TFNXdEJha0ZUZGtSalNWSmpOMVozTDFKeFNsbE9aRXBhZGsxNGFUaFdhV2xQWTBWb1ZUZ3ZPRkZZYWtSVFZGUlFWME5UWjJsamVGYzRZMGRhWW1oNFNVSm1kMVZIU0RadFl6QlVXWFJYYmpkMVlVWk1UM3ByWVhCNE9FbEZWWG95VFdKSllYSlRTWFJ4VEZwbFlUaHBRa1ZKYldwTk5FcFdWa292Vm1kVFEwaEJZWGhGUjBONFZrSnpUbXhCTnpCdmIwRmFRemxCVEdWV1NUaDBXVmxIVlZkMVZsVXhSM1JvYkV4TFQzQm1iQ3Q1UjNWeFpGTXlkamxwYlM5a1dGQk1Ra2N4UlM5RU5sbE5WRzFYT1VadVFsWnlNR2x0Y1dKVVMyZFNkV05LYlRaUU9Fa3JSR2hMU0ZJd1pHMXdVM2RsY1M5eE5HdzFORUpqWVVsVWJHczFVMmhHVUdsNk5XcGlaVWhPUXpjclpEbDRjMVkzUTBWdlJXOXhRbFZUZUhWeGNUbGliVFpZTmtOWVEwSjFjVFl2U3pFMVJXODRXV2xNT1V4elVHdDVaVEZNU1hoaGIzUnRlR1pHTUVSa2JqZEdhbEp1TVhSc1VsbGFkVFpCVEhac2VITkJPRGQ0UldaNE9YVkVMemROY1hGRk5GRmpkbGhRYmtobWVTOUpXR3R6YkV4d01GcDZaMHRwTm5aNGRqUnVXRU5DVkd0RGJYY3JUREZxUms5clQxa3ZjV2gyYUU0d2FXZHJiWEkxVDJnMVFrMVhiVVJFZG1sS1NWZHplVVpOWXpKbWJFbHpibmhRVmtneWFYVllTSE5DTDJ4R2NYcEhkSGxQU2tGcGVqUjZlRGw1VEhOak5GZGxVaTlWV2tOME56UmlVekp1V1dsTU5FWmthRlkxVEc1aWRHdFhhbWhqVldsa2FFWjVVMUJvYldnMGVIQnhVMHhuVEM5aGVHMDRlR2RVY0Vsa1VFMHliak5DVFhNM1QyMHpkM0V2U1RJMWJrVnpiR2w0V1Vwa0wxZ3hjMUU0VEdwTVJrRmpiMFp2VmpOdloydFpSbmcxUTJod1QycE9lVkpXWVRSaWNUUmlWSFUxZVROM1VHc3ZRMjFJYUZBdlRXa3JTR2RETTAxWGVYbHlUSFJ3TVVwR2JIQXZiQzg1WW1WQ2VDOXdaalZzTVhGWGJFVjBTalpSVUROU1kwOVBUM1UwU21SSVRXWlpVbU5KTTJJeWNGTktNa3RNVFhoUE1rTnJSMlJ0VG5CbVNqWkZVU3RsYVc1SVRWUktjR2w0VDNkdGNHUmxSa0pYVldnMlkyTnhNVkZCY1RJeWJVSkJPR0UxVkRsdlFsUXdMM05KVW0wM1JFZFJSRWh0TjJoWFpGRlJabFZvZDB0QmVrTlNSMHgwVG01M1RubGFZMlo0VFdNMmFIaEliM2M1YTFGTWIzWjBXRmhhUm10T2VUSlBkbE42T1hjclkwTnNSM2xaVURab05FMXhNbmxZTXl0VmEzTjJXbGRoY1ZWcllYSTRPR2h2ZGtvek5GWTFWa3AzVW1zd1RVZE9VMWxIVUhwYVRreExTRTVxYUZKSmFUTm9kMmQyYjFObmRFZGFla3BNUVdaUVptUnBOelZ4VHl0VVRsRm1OMEprU1dGT1kyZERVMjVsVW05blV5OXBSM0p2YTFCNUwwaFlVa05SVkVSTk1rNHplRTVGVTNkcGVHSTFaU3RTUVZNd1RXUldZVFJOZFdFdmNHTlBWbmR0YmtsQmJsSXhjbmxNVUZKc2VXWlhTRkZyZUhOdE9YWlVZVlY2Y2xSTlJuUnNUM2RCUmpWUVZEaFdUMEZST0ZVNVFuWnRSbUU1ZHpCeFFXZDRWREp1ZWk5dVJETXhiM0ZTVVdOelZIUmlXR0p2UlZBd2NtOUlXWEJSTTFSNldFZzRWamxLYlVGYVVWaHBkVlprY0doeVZFcFVVMjFLWVc1M2FYRTRXRFZPVGxFMk16Z3ZZbkJzYTFFM0syWlRjbkpuVG10Nk0xQmhhVUp4WW1SdVRWTlVORkV6VVd0RFltTlFOR1F5UjJnME1FMVdMMDlNZHpCYWJVOTFlbmRNZFRjeGEwc3JSMjFNZEVSR1RqRXJaVnBtV0V0VWJtVlFUbmRJVVRZNU1FcGlVa280TnpaYUwzZHRjblJPYzJ3MFUxYzVjelV6YzJ0Q0t6RklZV2hDTVU5TmRHa3JlQ3RtT0hsNWEwaFBVV1pOWTFGUVJHVkNTalZJT1ZCNlVFbFFSVTF4ZVUxQk1tVkxUMHBDUzBsdU9UVjVLMnhHV2paUWRuazRSa3BxZUU5Uk5rSjFhV2hSUm0xeE56WlJhM00yYTFCc2EwazNlV1ZOUmxGa2VrRldVbTg1WmpkTWVrOHlaazk2TlhSRlJYRlFSemhKZFRWSGVtWktTall4WldJME5FVlpVa0pGZUhONU1rOWlWRGc1YkZoRGVERjBTbTlFVTI5WWNVZFlNMHAxS3l0MmRtaEVTVGhaYUVoUmFHWllWemR5VkZWRE5qRXdibWhFT1ZaMGEzWjNZMUF6U3k4MFNVTjBXWGxzWldWcGJFbERPSFppU1ROdGFrOW9PSFp5TW1GMFFUVndVMHRMVmtGRlFraDFXbE5NWm5sWWFVOHdSWFp5UVdFM1YyTTBTbXB3TmpWeEt6aFlXbW94VjBWaE4wcFhlSGR3VGtSR1N6TTRTMUE1YTNFM05IcEliRVJqWmpsNWQwUm5Oek5GTTBwWmNtbEVRVGhXV1hGMmN5dENObmh0TURSVFdsazBiWFk0UTBJMGJrcFJORVJKY1dwbVozSlhhRlJFUjFGb016QlFWM1FyVUhWeU1tMUhRMUk1UmxwemVFeE5VRGRyZUhKek1taG1WRmhVU1dWdU0wVllPWHB3Umxsc1NIbGlkV2xhVUdkSWFVNHpZM05MVm5GUlUyMUhOR2xtTDJKb09VbFVTbVJ2TVdoRGRXUmtRMEpKWkVkb2EzTmhlRkJQU1VJd2NreDZTMjlpT0VjMlduVm5SMWczV25aMWF6aGlkR2RqTlhvM04zQklaaloyTW5KSGMyeHZSR1J4YXpGelRGcDBTV040VjNKRk5FNDFkMVZXYkZWeFJERnVhMEZYWXpCQmNFOVVTR0ZPTkRsMlpHMUlOaTlLVUM5TllqbDVlWFZMVDNwbk5IVndlV3hQSzJoUWVVSTNVVGN4WVRKNlZtdFNXSEpoWm5sbFpubElWbFF6YVZaclVEZFdLekEwU1VwRk9YUmxUa1JJZGpCYU1sSXpTSG92SzJSeVF5OU1hRFp0YzNGdlNrNHhjMVV5TW14WldUTm1WREJFV1U1RlpVRXJTa1JYY21SRVVIRmFVVnBDTVhZM1ExWlhNRzlwTXpWSWFXWTVOV3RFV2xkc04xWTFablZPZDJWNlNXaG9kak4zTmt0aU5GZHNUbU5MZFcxRGIzcFJUMlI0VWtkaU5taE1ORVUxVWtGNk1WTlFPV2NyUVdWbmFtWjFLMHc1WlN0bVFVUlVUbGRSVEVkNk5UaGtjVE5ZVERkQ2VrdDROR3BVYm10MlkyVmxUbFpLVkdwWVFXWTJlVGRNYjJkNlp5OWlOM280TDI0NFozWnVRbmhUUnpGaVZETndNbk5NUTBVd0t6QlhhMUp3VlZSV01IZERlSGxhTkV3MFNuaDJOM2MxZURKWVZHdDViMFZPUVhsNVZIaG5lWGQ1U0VJNE5YWlhja042T1d3MFNXdHFaVzFTTVVGQ1ZFUkdVbmwwU25sUVNtaFlhMWxEY3paRGMwTTNNMDVhVFZWSVEwTklWWGhFYzBzMlVETkNURTF5ZDNOcFNqRmhSRlJOV1VvdlNqUlVZWGw2WW1GYVVGcDJNVGxsVTIxemMwZGxUVVl3YzBrd2NFaFRTM05FYTAxbVlqbFFSamhhZUc5ck9Ua3JMemR6VUdVcmFWQnRRMWhZYTJKaVZtVkRSVlZFTTNaSWMwTm9abVprVFVzeWNIZ3ZTbFJtWVZjNGMwNWtVamRJYlhWUU4xTnlWSEp4WkdKSWJHZG5WM3B6YlV4dVJrbFdaVVV6WkZaSlJuRXZWVzVvWlVZMGRIZEZOazVuV21OWWRUZE9SRzk2VVZCeWRGZHJNemRSVTFBeWJGaHNRM0ppY0ZaV2RtWXlRMUJGWkZwelFsRktkRXBuYTJONE1HNDNPVXNyTUVwbVIyWlJhbGR1V2tSRmNFbHNOVEpMZVd4WlFVVkJRVEV3UlM5aE9FaHlTbGhzVFZjelRsUjRjMFZLYkhGR0syeHRSMFJUUTFnNVUwbEpOVmhCTDJkbFZHSmxSRWRSTlcxcVoybE9hemhqVVRoRWNVeFBZemsyYVVKSFdtcENNa3RzUjIxSldpOUtOa05pVVRBMWRreG1lWGg1VUdwcVZVOW9kRlJyYVRGSlZYTlpLMDFYV1VORVJUUkdVa0Z6UFEudy1ISjhRQjYwLUczWHJFZnpZbEh2MllGeUI4am9EcU1OaThUeWJlb3ZtU0N5WEJjTWNBWlRFVmYzdmowOUdKQ09RNWJYcmtqSWJCU3hfN19UNXpYX1E=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:40,807 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:51 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:51 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:51 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=90FF61E7901B3A9858FD3A77BF3E2F2E; Path=/; HttpOnly')]
2020-05-20 15:37:40,812 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:40,819 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:40,820 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:40",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153739 AND testcase_id = 11 AND step_id = 22 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:40,916 testcase.py[line: 205] INFO: 测试用例[id=11, name=气体检测录入]执行成功
2020-05-20 15:37:40,920 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:40,922 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:39", case_exec_history_id="20200520153739" WHERE executed_history_id = 20200520153738 AND testcase_id = 11 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:41,076 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=11]的执行结果
2020-05-20 15:37:41,358 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:12:43', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '<div>\n\t{</div>\n<div>\n\t&quot;检查&quot;:&quot;body&quot;,</div>\n<div>\n\t&quot;匹配规则&quot;:&quot;包含成员&quot;,</div>\n<div>\n\t&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;success\\&quot;&quot;}]</div>\n<div>\n\t}</div>\n', 'id': '26', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '7', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '20', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '19', 'updater_first_name': 'Testlink', 'name': '盲板管理', 'status': '1', 'full_tc_external_id': 'cq-7', 'creation_ts': '2020-05-20 09:08:47', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '7'}]
2020-05-20 15:37:41,496 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:41,497 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 19, '盲板管理', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-7')
2020-05-20 15:37:41,535 testplan.py[line: 76] INFO: 开始执行测试用例[id=19，name=盲板管理]
2020-05-20 15:37:41,538 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:41,540 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\"success\""}]}
2020-05-20 15:37:41,545 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:41,547 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153741', 19, '盲板管理', 'pan1_of_cq', '长庆项目演示', 26, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\\"success\\""}]}', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:41,606 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:41,607 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:41,609 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:41,610 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:41,613 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:41,614 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:41,615 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:41,617 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:41,618 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:42,005 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:42,007 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-11-3pnhjMQCbl2RKYcuz9Q6ohsIH90vGz-passport.51gxc.com" />
            <input type="hidden" name="execution" value="04b2efed-7f81-4a00-9e94-a93f7feab1ff_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVEZZM01WQnJZM0prY21OdWNHTkJlQzlqY1dFeWRFTkNka3BFUkVoTmJsRlBlV0pGU2k4M1dscFBNVUpoWjAxelJIaHlPV01yVlV0elpFcEVWRlpUVWtGM1RFaDBSMW8xUVROcFMxbE9lbkF2VG5Gd00wWnBaSEZGWXk5bEwzaEhXVVpGYkdsd1UyUnhRMUZsSzFCcGNtTmpNV05SU1ZNdlJ5OWtaR2syZDNoQmNsZHdVSEp1WTJkNmMxWmhUMmRLVUZRdlJ6aENXbXRRY0RCYWNXczNkMngyTkZORWVFOTZjbU5HUnpVeFkzQk9OakkxTlhoWVJXa3JkbWRTTTBVNGRYTXJTalpOUTJ4M1VIbDRXV2h2V2twblIyWjZiR0ozV1V3clJYZEdNVU5wWWtodVYxb3dlV052YVdsbEszWlpiRWh4ZWtKV1lVUlRSbE5hZEhOM1EzSmlNbmRFTUM4d1FXSkZkRlpIZWt0dlVVTk5NSFZuV1hvMGJHdFFSbFkxYlV0QlFWUk1ObXc0Wm1JMU16WlFSVko2Vml0SlN6UmpkVkZxWlVSSU5qaFBURlpOTkROTFVHRnNhMmRqUkdwYWRXTkliME4yVURKUU1WaDVORTFTYmpOc2FXWTFVMGxFYUVOeWExVjRVMkpUY2tGTU5UazJSVzV6ZVdGSWRHVllkVlJFY21FMFFXSnRRelpSVUhoM2EzQjVObTlWY0dSWGFWRlJTSFZoVEU0NFl6aDNUQ3RtT1dsVFNsTnhlWEZvVkdoaFN6RndXVmhKT0dORmJqZ3JaRWRaY1RrelNUQlVOMWwxV0M5R1EwRlNNV0pCY0ZaV2FHcDBSMHBrUVZVelpFcDNkR0Z3VFhaV056SmxiMDVEYlVkMVFtVnRWRGgxUmk5cVdUUnhObEV4ZFdSVk5VOVhiRFpGWm0xU1VqbG5UMEpCVWpJNFJVbFJURkZMUzNObWRsVkhhR05aU3l0Rk1sQlJTbWMzZG05WVozZzRMeTlhTHpsaFRraGtXRlZCVWpkVWIxWnFTWGhvVjJ4Nk5tdzJWQ3MxWjFaQlZVd3hPV1F5Ym5WTVJYRjFTVVZKU0dsaFZXRkVObmx4UW5GVVNrMHhUVVJrWldWRmNFdFFabmxITW1kSmVWVnlZMkUyTUhSVlpYb3pRMDlPUlZSTWRrcFFRMWc0VkdVM1dubHZRMUJ6V0RaVmNtaFJiakJNV20welMyZFlUbVZrTUhWRVJFaEhTbEpyVFRSdllXTk1RME5zUlRkTFRGRmhSV0YzY0dWS1duaExOME5PV0VwUldFdHVkamxsZDNOR1N6bE5RMVJGWVVNemRXMDNiWGRxWlZWQ2NWaGpWMFk1ZW5ScU1sUm9OamhSSzFWVk9YTmtWR1JLTWtWTFMydzNkelJuVW1SMWJEUlZaR2RsY1dsSWRsWnBVekZuTUhobmVUZDBlVGhqV0dSVlFuUlFOMnBOVWsxWUwwUlhVRVI1UkZCNE1EZE9WV3RxWW5Od1MxRjNORUo0UVdsSVozRlZWRnB6TjBadkswWjFOemhtYkVNcmJGVjZWVlV2UTBKR1NYSjRlRmRPVVhBd1QwY3JSMW95WkROc2NYRjNaRTFKU0dsUVdEVk1VV3RIWlhvMVoxZGlSa05DVEdjMGNFNUtTRUkxUkdaT1JtRlpMM3BQTTB0UFNrdFZkbFJuVEZkelJHVTNRVlEzTjFkWEswcG1SMlp3YUZWSGIwOXVZMjAzVkdoSlQycFVXV1ZVV0VsSlJIUmlOMjEwVXpCbldrOTZaRE5MYXk5TFdVNVdZV1pyZDFaWWMzaGplRk4yYjNWWFIwWm5hblI2YlZKT1NVSllWbmN5ZFhZM1JqWmFWbVp6VGsxaVNqQmlaMU5rU2xsM2FTOUZkbHAzVTFsSVQweFlURlpTWkZSdFF6azFkbUY0TldkbWQzSXZSM2wwYm5KVmFsRkZNRkJZYkVGUVEyRlhabTh4UTBrM1ZrNVRWSEU1Y1UxTlJrcGtWa05hVWtOclRWUXZXV3BhUlZaTU1GcFVNVFoyVTBoT1YxSjBaSGN2UWxOWFozTXJiMXBhTTJwa2JIYzVTRXhQU1VGNFNYbE9MMk5XUkU4dlREQmFjMUF6SzBsbU1rOVNZaXRUYkhkdFlqWkRhbU40TVcxS2NrbFpNMlFyTUhNelVUaHpWbXRKUW05R09WSlhhemxqUmtaSE5VTlZZWE5tUjBwQlVVZExlamQzY2s1SlptWTVWMU40VEdsV2QzbzVNa3RYWTFFMk9XZHNNa0YzU0hZeVIxZE1UREZRVDBvNU1FTnFjVzlEZGt0SWRGZzBjR0kzWTNoNlkxbHRZMEpIYUdSVlFrazVSa2hvTkdjM00yRjRkakJhVEVsRGJERTJNelU1SzJjdlMxbEpOakk0TjNaNFVqUTNUSFZOZG5obVluWmhWVU5JZVdGRmQyTkNTWGR6Y0ZZeWIweHJZbVJZZWtseGMwTnhSMVJCZUhKYWNGcFBRbGwyVGpCdlYxTXdVWHBIYlV3d2VHbEdiV2h4V2xCRVMwSjZOVzlGZFdrelUwNXNaRmxoWW5aQ09VYzFPVFpIU21KemIwMU9hbUZpY21WVlptaE1PVWhSUjNaeVJFVjRja3BJT0hoNmRVcFJWRlpOU2twQmNVeDBUa2d3VWxCWFVucElUVXd5UlVGSWNESTVabEE0UTNaRGVrUlRlSGt3Y2xCS1dteE9OM1kxU1RsVUwyRlZUMmxpU1hkWFJrd3hXWEprTTFaNlVWTlpPR04yTWt3NVMxVkJMelFyWkZWdldGbGFWWGxHWVdWRU9VMTNlak4xTVRSVmFtTjJhRmh3TlVsVWEyZzNWekZwZW5SRGFreHNNVmhsYTJGeVlsQkpWRTgzUlVsRWEwOXBLMkozTUVFM2NWRmxPVFF4T0c5c2VrMUxUVGRDTlhObVJYZzNkREp5VFV3MWRYWmhSRzQ1S3pObVUxcERWbmRUYlVGV2VtVTNWRUpwTkdVMmJUQkxlRTg1ZVhVclJFTlRWV0oxVjNGWmFETm1SRkY0UWxsbWNqZElXRmxqVTA5VmJEUkdaRkJOUzNKSWNrbFBlVGs1YUVKSk5WTlBUMWxEV1hrMFVXeGxNM0JpWkRBelZsTndSVTl3WkdkVmNsSm1jbmxJVlU5dlJHeFFOa3dyVldvME5YZDBVMm95VjNONk0waHhRMk5OZUhwSGRHNUJiM0J4Y0U1bU1XRk1VelZhTlZoTFdVSjVibVZ1U1dSbmNFSlhkazUwTm1ZME1pdERSbFZSYjBOb1Z6RllZbmRWYW04d1IzRlpiRTB6T0RaNGMzTm5hamgxVVhwTk1qUk5RbkJwUlcxNFZsVXJlVEZuUjFCd04ybERaWHAzYTJvd2FqSlNNRFJxYkRNM1JuSnFTeXRHU1M5TWRsbHJNVGhqY1ZaTFp6ZDJXVmRUWlRaTmQzWTVVMk5JZDJGaWJISmtSbUpWZDFoQ1RFSjZVbXBwZFc1ak9UWk1XRTFNVFhWTlkwOVROSGN4TWpGWFoxRm9XbHBQV0ZkV2NYSnZlVWhPVFRkdlpDc3JhR05WV0ZreFVYa3ZjVEV4TlVsM1FtcEdNWGM0YjNwak1VZFNhR1I1VFM4MlR6SnVkMmd3YmxSV1dUTjFjRTR5YjBvclNVdEdTVTlQTUdwemRrNXZORzVPZGxCVlIwbDBObFZtUmpscVVWb3dRelkwTkdkelpUaFNOVTl0TURrdmVFMWphaTl0SzBwYWQzVjBVWFV6WjJGNmMxUkxaMlJpUVhOcFUyMTJZV3ByWVdoSVdWVlpSSFp5TVU5a1IwRndSREJtTWxsbVJqaGlXblpwVTJ4ME5TdEJXV1JwUXpoelVrZHRaRWRIYlZCMmFrTXdUV1lyUm5RMmEyWlpkWFpwTUM5Nk5ERjFUV1pXTDBaeGNWaHRUM05JYkVwaVJEQTViR3RXZGxOV1pEbFJZM2xWZFVKQ1p5dHdUbU5LWVdKTFZqSm9VMjA0YW01U2VVMUJNMnhCTldJNU1GZGhLelIwYlVobFExRkdNREpvV1RKdFlsWjBOR0pTVm5oWE5qZDZLM1J6ZVdod1FpOUxkVXBOTHpGVFNHOTBaR1ZDU3pBM01ISjBabTVNVVRCbVZWRnpiVVpsZUVVeWRXVlFWMHg0WVVOVmJuVjBkWGgxTlVkSmREZElSSFUzT0RsbWFIVkJVVFUzY1Rack1YbFdUVTVRWjNFM01FY3JXRFJIZDBRemNIRlFhbG80T1N0SFVGWm1XVzlFTDFkRFZGZEJNRVpEVTB4WVdqaDRkMjlJUXpWRVpVSkhOVWxUUlhJM1ExWlVUaXR4ZWtsVVRrWjRZbEp5VUVkTldXZzRiWG8xZG10clJYWkNRM1IxUmt4M05teGtaMGhFUjB4U2FreFlUMnRCU0VwdlFrVm5abEpGSzFScEsyWmFVWGhwWTJkbGNHSkJjbTFaYjBWTVZVbEZaR2RxVGpWc00xcFlPVUZyU0Zsa00xb3hLM1YxZUhOU2FsVlVLMFp5Ym1WbllUaDNUR2Q1VlhrME1YUnhiamxtVFZaRVVHRmxWR0pNYUZoQlozUlBVU3RDVGxZMlQzRktZVXd2ZDJZemNGaHpZa0l2VVVwdVZYWnJXQ3Q0U2pGdmFVeGhiSHBJTjBSMVExZEtZbk5uVnpWR1kzbFJaR1UwTDNwU1kxazNia1pSYTJ0UlFYWktWVEZVZUU4MWFqQnRjRTA1V21adGVqTkxVRWhKTTFoWmMxVlhUMEpDYjB4NVFrMXZhVEU0YVZFcldrRm9ia3RrZWpoaVpuWnpZV2g1TTFSVllrZEdVbmxqUXpaV2FWaDJWM1p5VEZsR1ZTOXdaa3RoVjJreWNHOVBlbWhNVW10elZWUkRiRWx0Y0hGaFRYQkVOMGw1V1cxcFVrTXpRMmhtWW05V2VIWlFaVVp2UlU5emNuazFhRkpEZGpKdGJteDJSU3REVFdsNVJsUmlNekZsTVhOWWIwTXhNRmRDZFUxek9TOVBUa05WTm5oUEx6RXhXQ3RUYzFjM1UzaDRWRFV6TTNWcFRucDJVazFzZGxkUE4wbHdiR1ZGTmpoTU1YbDBPV0Z0Y3k5b2MwMU1SbnBRTlZWUVJqTlhVbVJhYjJWV1pVOTVaREp5UjIwek5GSTRkSFJSY2k4MGMyNVJMM0Z6WWtSeVQwNTZRMmhsVmtabVZFVlFMek56TVhrMU4wZDBkMGxzTkhGcGIycERZbnBIUjNaSU1GTkthMmxWYUhwemRrVk1OSGQzUzNSV2VFcG5kM0p4UkdkS2VGUllTa3hOV2paNmFXWm1lV2hDZVZOa1dFVnZlbmh4YlVJME5XdFpNa281WVdoMVpuZFhOalV6TVhsSlVXNVlXSEZHVkdGWVVGTXZOMFk0UFEuazZxYnpoTkoxV1RnOFVpUThnS3A0dGNsSnl0aFRvRDJuckE1ZzNveFpBaXdMbk14TXcwLWlGN05EQS04MkpLVHNlMk5pcTUyZGNOOUNFQm54Ykp5d3c=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:42,378 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:52 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:52 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:52 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=AC1E3353759BFDB14F41A4E0B2E3998D; Path=/; HttpOnly')]
2020-05-20 15:37:42,384 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:42,386 unittesttestcase.py[line: 46] INFO: 要匹配的模式（成员）为："success"
2020-05-20 15:37:42,404 testcase.py[line: 158] ERROR: 步骤[1]执行出错,停止执行用例[id=19, name=盲板管理]
2020-05-20 15:37:42,406 testcase.py[line: 165] INFO: 正在更新步骤执行结果
2020-05-20 15:37:42,407 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\project\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 74, in test_interface_of_urlencode    self.assert_result(body)  File E:\project\interface_project_for_dev\unittesttestcase.py, line 47, in assert_result    self.assertIn (member, response_to_check,msg=item[消息])KeyError: 消息", protocol_method="get", runtime="2020-05-20 15:37:41",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="{'检查': 'body', '条件': [{'模式': ''success''}], '匹配规则': '包含成员'}" WHERE executed_history_id = 20200520153741 AND testcase_id = 19 AND step_id = 26 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00' 
2020-05-20 15:37:42,472 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:42,473 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2020-05-20 15:37:41", case_exec_history_id="20200520153741" WHERE executed_history_id = 20200520153738 AND testcase_id = 19 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:42,638 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=19]的执行结果
2020-05-20 15:37:42,921 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:10:03', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '23', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '4', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '14', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '13', 'updater_first_name': 'Testlink', 'name': '作业票授权', 'status': '1', 'full_tc_external_id': 'cq-4', 'creation_ts': '2020-05-20 09:08:03', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '4'}]
2020-05-20 15:37:43,065 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:43,066 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 13, '作业票授权', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-4')
2020-05-20 15:37:43,080 testplan.py[line: 76] INFO: 开始执行测试用例[id=13，name=作业票授权]
2020-05-20 15:37:43,082 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:43,085 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:43,089 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:43,091 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153743', 13, '作业票授权', 'pan1_of_cq', '长庆项目演示', 23, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:43,110 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:43,111 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:43,113 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:43,114 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:43,115 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:43,117 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:43,119 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:43,121 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:43,404 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:43,406 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-12-MCVqbLDfwdYgew9NiFovxLQSgYVhaf-passport.51gxc.com" />
            <input type="hidden" name="execution" value="53526f79-1509-4bef-9cd6-f567b63e709d_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWjIxaVNsaE1PVVkwVldoRVRESlRXV1U1SzJOeFlreHFWMDR6VFdocWIzb3pkMFlyWVdKS0syVkdWbVZSV0dzMVVUQTJTV3RNVFVGVmFFbFNRMUowWmtwa1RrMXFVakJyTnpsT1lWcGtUa3AwUkcxaVNXOXBLM2RKZFVOMmEzQllkVnA0YjBWRlZGWjRSR3czUm1ka2NscG5jRll6VTNaRVJ6TlVLMHRvT1ZWR05tTnhOVlZ3Y21ZeWQyWTJkU3R0VkVaWVdWRm9MMkp2YUcxaGVrSmFaSFp5YVd0WFRVUTFVRzlSTVdVMGJFVjJXRkUzYmtGSGQzbHlUVmd3T1hoaWNFNXRhRmRMUTA5VlZFZEZkMU0wU0c5R1QzbGhWRUl2TTIxQlFUSjNNbkZTYVN0d1pEWk5LMk5rTjJ4MWNtMUlXV2szU0hOc1ExcHJTVEI1ZFhSNlVWQkhOekZZYzB0bWVFUjFkRmczUmtkbFdrMVNaRGM0V2l0MlNsZEJjSGs1WWt0RGF5OUpVelUzUXprd1ZGUmpPVXN4TWpKdVNHUTNlblpHV2pOR1UzWlBha3QxV2pWMFp6TjBTVzlXSzFSaUwwMW5OWGQ0Tkc1dWNuRktSRGd4YUZaWWFVcFphbkExTkdzMk1FVldZMWgwYmpkU1l6QlZOMDh3TlV4Q2RWRjZWMFpJVUVod1IxTlBWV2szU21aUU1sQlNRalkyUzNsTWMwMUhZakZ2YkZGQldYQnpTbUphT0RWRFZHWXZXRzg0WVZoNk16UkdRems1VFdkU05qUmxVMHN4Um1SUldGcFZNSGRqWVZVeVQzSXdVRlZYWXpWMWRpdHJiM05MUlZBMWJWaElkMFUxTWpoclNsVlJVMFZKTmxoMVpHbDJNRFpMUzFwNFRIQk9WV1ZrTTBOaFRrOHlNa05STWxkSGVGWXJNbE5yTm5CNmVFOU5PVXRWSzFCYVVscExTRGgwVjBGTk0xcG5VVUUxTWs1VlluSlRkRlZrTkdSNE1UWlJjVEZSUkdaTVlWcDJXWFJwY1VWd2QxTTNUamxXYW10a1lrVktSMkpTZDB0RmVuUjRlRUZhU2tkR2QybHNaV0l6VlZGU1ZWRXhObmRST1U1SlN6WkpWbWt5YWtKdU5YTkdWRkpzUlZOdGNUVm1lVEl2Y1hkblNqZERZM1pLTTNOTFYxRjZUSHBZVHpFeFQxUk1UV2xuVGs1Q2IydFZSWEpoVWxWMFZHMTVaSEEyWVhVM1ZXRXhiMGRyWmsxUFpHSllibFVyUmpWV1kwWkxTV3REVFZkTVVISkJjM2xoVlVoMWMxQTNOakJUV25KQ1RsSmxhVVJWU1RCMFp6RjVZbk00YUM5cmNqWmtPV3hIVTB4NVdFZDZjV0pwT0VKVFpFWnFXbHBPYTJFM2NIUm9UWEphVlVSbFNUUkdVamcyVEZCaVFUTTVVMWxaZEVkdE1ucGtka2t6U0RkS00zQk5SMlJWVm14U2VtaHhXVFJ6UmxoRk1GQlpabTB4TW1Ga2Ewb3JPRmR1VURkM1JFZ3JUVU5SVmpSNE4wVnNUalpzY1VkaFFVcFNjMmhXVFV0eFF5OTFMMlpuVjNOVFVVZzFTa1pTYVhCWGRHMHdVVGh2UjBJMmIwRndZVEY2V2tseVNUVk5hR2RhV1hKUU0wNVBOVTVaWTFKdGNXbHdSSEJFWWpCTVpsVkVXbTFVY0hoSlJXeDVXSGQzV1RWalkzUlFVVmN6V0VkbWNGa3hjMmwxTldSUVlTczRkMDFRV1V4aFJXWTFiblZJZWxGaE9XcE1VR2Q0TVRBNFdVSlVTRmRYWTJneVZERXdabE5sVVZoQlFWSnhVM0JGTUd4VlZXcExjamxPZVZabVJESktVVzlRVFd4TlNVeHRNVEoxSzIxTFkxbG1lV3BCUlZOTlJIbHRTbk52ZEVOMk1FWnpLMFpJWjJkSlJqZE5Va0oyVkZOMk1VZExSRGxuVjBwdVJXVkNjbFZHV0VnNEwxTTVhRFZKY0U1eFVuWXdUV3h1UkRKMk9YUlVNMHBLYkZsd2VGWkpiMjFFUW5KcFIzbE9SVUZpYTJKV1dURkpSa0ozTXpkbFNrZDNiR0pyUVdWdFowdzRZbkZ1Tnl0TFVFZFRibFoxZG1wMGRFRTNRa2hQVmxaa1NrUXJVV3cxZWxZMk9HTm9WVGN6WnpWd1Myd3lNbEJ6VEVGSFRERk1jMnhuU21KV2VVOW1NbkZyT1Rsc1dEVlhjM2xOV0djMGMxWjBOSEp3Wlc5MVoweFBabTAxTkdsR09TOWFSMnhNWkhWQ09XcDJlREZpUmxsV2JYQTVMMDVuZUUxWWRUZHRkVzR3Y25GelFVOTNPWEJqTkVsaEswSnpVVk5ZVEhsV2VHMXdSRUlyYzBNd2EwTXpPRTh4Y21SSVNWQkVXRGRFYXl0a2J6bDBXa0UxWTNJMloybEdXbVZrWm10WFYwUlZkek5UY1UxcFV5OVhja2NyU0cxM1RYcExWelp1WjNCelpsQm9hMEZKYlVOclZqZDRVMGR3V1VoRVZUWTRTbXBLYTJoa1NEQnlkSE5YY1habE5ITnlia2dyYTFWdWJtMUpVVGxpU1ZOWU5sVkxaQ3RrWldST1NHdEtNamQ0ZVVOeFduTjRhRTR6Wms1NFRsaEhkbUpIZFhJNVREVnpTakZ6VGxwQmFVSlhkR0UwZVVSd1kwOUJSME5YTm14NmJtWnBOMlZHU25oWVNpOUxXbGhuTWpKalZESmxlRXN2Y1hWT1FVVkZUVXhwVDBKbE5GSmFVQ3RIUkVWSlkxcE9TekpCUjBWbGRrdElVMjR2TlRsS0x6Wk9NbXhuU25wQ2NVbERXRWczVVc0MGVtbDVWWFl2Y1hoRlJuaHhaVkJEZVU5RGFITTVaWGR1VTJwMU5uSnBLMU41UVdoUk9EYzVWMFJIU0hWWWNUaDJjMmN4TDI1UGFYZDRhVkZRWVdGclMwNVRjbkU0VEdKalQyNVdUVE5yVVVOdFdIbGtjR2hoUlVJemNuTXhabFZzTDNSSFUySnBkbk0wUTBjMlZ6RkNPR1ZVZFZoaU5XbDJaMXB5VWtWM1JIcG9PWGxrVG1OYVUzZFNlV2RWVUhsNk5EZEhaVlZNZGxwVFl6ZFFiR000VWxkV1UweEdSVmxqTUN0blJsUlZZMDgxTldaalVtbDJkV1JaY1VwWGQzSlZNMjlhZW5wb05qWjJURUZxWm1kNU9FUktaRmxFYUVoSU1IVlFURmh4VTNaeWJWcDBia3RWZVdZd2MzWjBialoxWlN0TGJVUm1RakZ0VjNwMVpWaE1jVzVEV0U1aFJXbE5PRmd5VGpBdldYRnpPVU5ST0RkaVRVdHljV1pVYVZwalZpczJiVEZDTURWa1RqZDZlRzF6TW5JeloyVkZSM1ZwTXpBMWMyZFdhVWhKZGpaQmMyTnNkbVEwUW5aYVZYRkpiM293ZG5SV1oySXlSMVp0WWs1dWEwZDRSMkZJWVhsUUsyZHVka2hEZUhBeWNqVnJPVzFMZDI0NFJHVmhVV0VyWlV4SksxZzROV0pWTWtWSk55dERUekV2TlUxT1dtMUxaSFpuTUdsWFowOTNiRGRzYzNwMmIxaHdSbkowY1M5SVJrWk9ka1p4Ym10WFNURlllRUYzU0VaNFowMTVibXB1WTNCVFJtbEJaa3RxTW5KQlMwMUJhMlpVZUZoWllYVkpRVTl6ZVhBMFZrWjRSemREYVVKcmRtaEZXbGwyUm5SNFkweGhUbTlwVkZKSlJrNDJUbkpFV25oUWFVRXhTa1JOVlRZM01HZE5WbmhaTHpKQk5ETlZiM2R0Y205VFJsUkZXSGhJVVZSSGRrOU5XVTAxVkRWUFlsVkNUVk5tYjNRNE9UZEpRbUlyUXpkclNVRmhSV2RZVEhCYVREbDVSVk16VFdKbU5tZFFSMVp4V21GVVNXNWpZMFZ5TTBSdlNHeGlNVUpCYkROcVVYcGlkbXRzV2s1SWJYZFBNSFE1TXpWRGRGUjZTMjl5YzNsdFFYUkllVkZ3ZFVaTFR6QjNWMGMwY0hCcFpFOHhibE50YVVKUlVtSldibTFETkM5YWVtNUVXV2xRSzFZelVTOW9aMjF1U1RsU0sxZFdPSEZJZFZJM1R6RklkMjlPZG5Ka1kwUmplblI2UVU4eFFUQm1MeXRHYXpneFMwSlJhMlZRU1haeFVsUlRjamxVSzNkWmIxVnFjbXRVTnl0b1pYbFZTMHhHVUdadVZHTlljbEZuWXpGdmNsZG5PVmx3UkRadllVVnhjVUpsVTNoMlUxWjVhbXBETkVKUFIySTNjM0phUkVaQ2R6VkJWR1V6VTNKVGNsWndSMFJQVWpoVVkwaFVaek5sUjA5aFZFWjZka3hUTjI1UmF6UkphblJsTTFGaksybFJjemMzV2xOTlVVRXlVRXQzVFVsb1dHbGFhMnhxUVRsWllXOVZNM1JvZVZWU2VsaGlWVGQ2ZUV0QlVIbHNkRk40Y1M5RGFEVXdiMXBTYlhVeFlWTjJOVGw0U0haUVVuQnNVMHMxTW1WbWEzUllUSE5IVVVWaGVFbDJaSGxMTW5wVVQwSkRUR1pOVFVWWFdHMWthWGx5WlVkeWJUUTRXVmxaYVV4SFYxRTRWbXBWZW10d1dXMTRLM2hNVGpkM1FXOW5UamsxVTBOUVZGTXhjMHRGWkhWVE5ERlROR2RpVjI5c2FWSXlZM0ZXZEVZelVXWlNTVVUyTkVKbE5taHRkbWRwWkdKUllqVm5ZWFpZTVVnMFNFRk1XRFpZY0Rka2R6RmpWblZPVDNCaFZsQm1VSFpPZVRGc1IzaDFZMjVJYWt0NFNrdHNSRUppTlRGRVlXaHlaV05TZHpaTllqUXdlVzlQZFU5WmNXd3hZM0ZDZWpoT2FVTkNia1pIYTFCbWFYRkxRMWhMUlZsV1RuUkNWRzVYU2xoM2RYVk5aelZzY25KNWMxQlVlRmhSUjI4d01VSkNiWFpGYkhsa01XbGxRbmw0VFhkdFkwRkdRalJoT1dWdlNFdElhM0V2ZHpCcFYwYzNXSEZuTmxaQ1owMXJhRlptYTI5NFFuVTFWbXhGVDAxM1NUSk5hRWxyTUc0clYwRnhTakpKYTJsSVVqTnBhRTUxZUdkelkzaFBjbEpyYm1wVk1UaDRiVU56UjIwNWIyWjNhMkYwZFRneU5FSTVZMDR2YUVSemRFOVFOREp4V1hGUE1WZzFSVkJaTkdSTVpsaFJVR015UVUxTVNWVlFPRkZDVkRSQ1lYUjNSbkJrUW1JMldtSXJTVFpUYW5VM1RuZEhlRmt6WjNWT2VHbzNhbkV4VWpKblZUbEdWM1JsU1c1WVUwcG9SbWxWWlZwcU9GbGhhRlJ1VFVsdGNuZHRaaXQ2U2twa1pYSTNOV2swUFEuZkJvTEtPSWFmOWtFN2c4UWJBU21mTm10MG5zRDEzLXAzT0k3RHF2MjJSTnZmRWEydWhubTR3UmtvdjlFSlIyOFl6ZnZybXd6OGJwckl3Qy15MnlRclE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:43,835 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:54 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:54 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:54 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=D3CB3E143F8A7B55FA9496B56707CC3A; Path=/; HttpOnly')]
2020-05-20 15:37:43,841 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:43,849 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:43,850 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:43",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153743 AND testcase_id = 13 AND step_id = 23 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:43,955 testcase.py[line: 205] INFO: 测试用例[id=13, name=作业票授权]执行成功
2020-05-20 15:37:43,957 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:43,959 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:43", case_exec_history_id="20200520153743" WHERE executed_history_id = 20200520153738 AND testcase_id = 13 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:44,184 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=13]的执行结果
2020-05-20 15:37:44,485 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:10:10', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '24', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '5', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '16', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '15', 'updater_first_name': 'Testlink', 'name': '作业统计', 'status': '1', 'full_tc_external_id': 'cq-5', 'creation_ts': '2020-05-20 09:08:17', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '5'}]
2020-05-20 15:37:44,622 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:44,623 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 15, '作业统计', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-5')
2020-05-20 15:37:44,638 testplan.py[line: 76] INFO: 开始执行测试用例[id=15，name=作业统计]
2020-05-20 15:37:44,640 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:44,643 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:44,647 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:44,649 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153744', 15, '作业统计', 'pan1_of_cq', '长庆项目演示', 24, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:44,668 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:44,669 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:44,672 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:44,673 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:44,675 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:44,676 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:44,678 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:44,680 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:44,962 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:44,964 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-13-a1WRaLbT6r4wKX2pBbDe9JWFWlkdOH-passport.51gxc.com" />
            <input type="hidden" name="execution" value="cef25d91-1235-4ef8-b633-5a7caba96815_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVTJ0RFlrTkRNbTk2TVVSUkt5dHZiRE5rZFhabVdGcEdXWE13WlZkRE5VbFVVRUowVW5ORFpqWmpNSGQwU0RkRk9FUnNWWFl5UmxCdWFWUTFhMkpJTDBWM2RFNW1jVGhUZGxOTE5rcGlNa2N3YkdwaGFFMHZkM0Y1ZGxkYWJXZHdlVVF3UkhoWFJIZFhSRFZDYzBRelYwWmxlVk5rZEhJeFJYcG9TbUV6T1hWVk5XdFBUamxtV0dsd1pUZFFjVEI1V1Zwa2QzcHZRMDlNV1hkbll5czRhR1JRVm5jeGFVeExibXhzUzFwR1YwY3ZWREpEVEdWSk5qUnVMME50V1UwdlVtMHlla2sxTjNkV2VHZHBNREJsYW5Fdk1IaE9SM0pCY2tKQmRVa3pRV2hzWW01UVJWSk5lRmhWZGxaa1p6VTNiMWRtTDIxSWNsTXdSR3RsWWxoMFpVMWtZWFU1TmpNM1JYUm5jbGxEYlU0elJrNTBjQzlRY2t0VGFHVk5jemcxV1RscE9XeHlZVlpoZVhaSVJXWlBWVTFQTld4aU1YTjBlblZFV0dKUVRIaFpUamhuYWtOV0wzUjZhak0wVlRsbVkwOW9iMmw0TWxrNWFWRXpZVmxyTUhOMlRtNU9SRUpRWWxOWFYzYzFXa1Z4Y21wQlVGb3ZVRUl4V0dsM1dWTk1iMjFuVnpGS1pIRnFLMmxsTVhCcFJFWmhOMFJVTTFKNFEwNUpUaTgxUW5GS1dFWk5kbUZZUzNvcmFXRkZXVmhNYUhaYWRtWlFWMUoxVEhkNVRXUk9hR3huT1cweVVFRTJSbEpsZEZOWU1teE1jSEZGUVZKQmVFdHNaWGN5U2xOS01HbENabVpQYVhvMU5FcEphMVl2VFVsU2IyNHZMMkUzWnpFd1JWTklPU3RDU0hGVFVIRTFVVEUzWTBaVlZuUkhWblJrWkVabk0zWTJhUzgwUWxGR2NuaHRaRVZ6UzFCeU9FOTNkbVJGU1ZWbE5FMWxPSEJJYUdjMWJEQTFPR1pSUkdWNGRIZzJOMlkzYXk4MGNWcFFhbVUxUmtOeGF5OTRZVWxEY1RaclRFSnBSMFZEWTBsamVXWmFWekp3TjJoTFZrdFdhbUpaYTNJeEswa3hTV3RqVWtOeVUyNHpNVWh1VURBcmVUVmpWREJwYTBzcmIyRXJTVUpWZFRZNU9WUXhUMmxsWmpsNU5HdDRWeXQyU2k4d09HUmpkMjVuVjBWemNUSXhZMlV6YVVodVZsWkhlbXRXVVVSS1dVVnVUSEYwY1UxYVJUQTNRa3R2VXpCamNWbEdhRE5RWkV4NVkwRjFXbmxEV2pWaGRETnlWelJMZGk5eWNuaFFNelV2YVZGWFpqWjZUVFI0Vkc1WFVXTmlZelZyVERkU1NEWkZOVEJUT1V3ck5UTXlNMVprY21OeEsySkRORUU1VDNWNVdFZGpkbmMxVVhsMlkyY3hSRTV6U1V0RWJrRkhjMEpSV25WVVJHeGlUako0UVRWcFNFSjZWV3ROUm05WFVUTlBVelJFWVVaaWRreG1TRUZ2Y1dGWVdXVTBkSFozUkVONFFuWXljV2wwV1M5NWVEVkllVUZWV21GRFVGTlZiVFZxTUU5RFR6bEtXbGwzTUdGYVQwUTVVMDFyVGxONWNUQXZhRnBhVkdjNGRuVkNLMDlzUkRRMmFUVllVbTlRUm5rM1lXcDBSVEZKV1ZkbmRHZEVTV2d3YUhwWVIydHNVR0pHYUdsSWRFeFdhVmhJY1VKalFVVlZiVkJQZEZFek5IQkhOMG92UW05RlNtWXZRM05zVG1walFrdGtUMGxWWldOdFVIaHpNa1ZJZWtkd0wyOVdTa0ZJV21wV1JFTTJRMjB2YkVONUwxQXlkbVJIZDNWRWIwMHpLMmhvSzI0MGFrUjJiVFpyVUU5dVpUSjFjSGhOTVRkWVMwcDROMHA2YlZWNFpEVnZRVUV3Wmk5cmFFZ3daVVJyVG10cmJHaENLMVJFY0dsWmQzWkRhREpYV0RsTE9IVnZSbU55TVZvcllUaFNTMFF6V0dWTmFtaDNWVzVxVFdGWWJuRjZSMFZNYVROeGMzZGxLM1pTZUhaMU9FWTBWVkExUTNaS05qUjJXWGgwTUZVeE5uRkdNM1pqWm5FMGNEVk9WamR3WW14QmEyaHFkMG96TmpKdlFrSlhiWGh0VkdWUGFFeEljMEpIUTBKVlJFOXNZbmwyTjFsalRqRlZUV3Q1VW5Od2NXeDFNMDVZYUdoV2JtbG5kMXBUU0cxd1VVWlViRkpvWW04MGN6ZFpSR1JwUTNkT1ZEQkNlRFF3TjJsTWFUUTNXRGxNVmtscFRtSlFkMlJTUTNCeE1WTk9hbVZwVTNvM2JsQkVNRFZGUW5KQ00wNXFWRE0yUzFsV1VqRXJOMWN3ZDBSU1NGRkJNWHBPT0ZFNVVIZFFlWG93U0RaSlUwNWlTMUJQYUhZMEsyZzVVRVI2TjNScFoweHplVk5YV0V0bFZHeEdZbE42Y0ZKUWVuVkllbWxaTWxGUVdVUXJTa1U1UVZWdFRFSjZZekF5TTNCVFl6SkpZMVowZG5KUGVuVnVhR1JzTTNCVVIydHBaWEpOUVdaTVFqQXhRVXh4TWxCeVEyYzFWMGxyZW01bmVtVkVOSEJNTjNSNFUyNXNMM2RJYzBWVE1uWndRblZxTjJsWFkybFVNRk5hUkRaNWR6QkJaVkZRUkZWWlRuTmpSazFvTlVWUmEwNWFkVkJVUmtkdVVFTlJVRVJ0Tm1SMFkxUkRVMEZaVGtFM1RUUmhUakF3T0ZFMWEwTTNPVVp4TDNsWGFUVjZaWEJ1YVN0dU4xZzFhU3N4WlVSdFZXdFdiME5vZVRCSlpVVXpXSEprTnk5UFRFSlNhbGwzUlU4elExa3dNeko2VkZScFRsTnNTR1pTUzNOS01FZG5UMnhQVVV4RGRqbHFaV05oVTFKVWFrZDZRbWRCT0hGQ1EydENiMFpGUlhjNUwyWndkbGhzVUVGRlJVdEdOSEF6V1ZsRGJEQXZObmRRUlN0cWJFOVBVMDlWTjFoNGJXWkVaSGxKUzJFM1RXbEdhSGhqVW01bVMyWk9aamh2UlhOdGFqRkdSamRsUkZoWlVYSjJOVXBFVXk5VVlsQTRUVFpZYUdOM1VrMXJVRWRhYlhCUlJFTXJUbFYzWkVOdFVtODFXamN5YUc5cFRrUkNjbmRDYlhoVGFrdDNka1JSVlRaRmVFVkJXakZ2TUV0R1VFbExOV0Y2YzBoa04yTnRNVWRvVDNBdmRHMXVaVVJtUjB4MlVFRkJSelExYm5Sb1YwaEpaVVJDVlVaQ2EzRnhOa2RuVm10elZYWkhUVU4wTTB4bVIycExLMWhoVWpseFQzUnRNakJrWkUxWE1VcDViRFp6ZGxBMFZISkhUemt3YjNKd2VHVnJWV3BTU0daR2VqSXZXRmx6UlZWQ1REWklkMlZpUkROR1NGbGlZbUphU0VoNldESTBlbmxhUlV4dFJGRjJRMmt5YW1WRFpUUkJPRWxIU25oUGJGcFRWMmw1TWxGcUszTktaR2xEWkhCdU5XbzBlVm8wTkdFcmRXODFNMmRHVTFsbk5UaHplRGg1VDJSWGRUTjBlbWh6V1dWS05tYzJSV3RtYVZoaVFWaFBlbWhKYW5nNFFsTkVaazE1UjFjMlV6TlhUeTkwUm1SaE5VRlVlR0V4ZVdKWFZFSmxlbEExYVM5WVRucE1WVk5FTlRObFVrMTBhVlZJVTFack1XMDRSVVZ1TUdZM056YzBTSFZEV1haRWFXSjFaMHB1VmpKUFluWm1WMVEyUTBkbGMyMUdjbGx1Y1hGdlVWVnhOVWN2YlhFelZuYzVOV05SWW14d1oyUXZNMHMyYzFCbWFFaElXaXRSUXpFMFVGQnlaR2hFV1U5R01EVnpMMFJuZGxNeldsZzVlWGMyU0RGNldGSXZVVEY0YVZSbFZqWTNhMmhWYzJSUmJXWk1SMDVCVHpsbWVrdHRTRTlzZEVkVmVuYzBhVnB1ZGpOdlJEWllZMWhDYW10TU1HVnVlSEZZUVZBd0wwdzJObWRMTDI4NVRraHBUemxzTWtRdldYWlRjMmhETmxsRmVHcHNlamxFTVhCUEwyZ3lRVkZ0ZEdSbGVXVk5TSFpYY0RVMFNXNU5ieTl5V2pOVGRuaDRhRTB3ZFRkSUt5OXNka05wZGtsNVpIZE5lVUZXU1VKd2JqSjFVRVF3UVhsV1prZHRRME5UYmpOR1FqSkJaR3gyYkdoeVoxaEphRk5qUlRCWlQyeEJMMUZhTlVFNWVWVldSa2d5V0hRdkwyZDVTRTlsUzNCSlkzQXZObU5aUkZRd2RqWjRiMDVKYWpoUksyOVVjWEIyYldoaGRWazRSSEZTVjNkQ1ptbDFiM1paVVZkQmJFNUlURUlyVFVrd1NHcFROalY2WmpSTmRqTnVNM2xqUzJ4eU5rRkpWU3NyUWpaVVZuazJOM1l4VURVNFoxbDNSR2swZGtwM1RrdG1abEJMVXpkak5GZzVka1ZuVlV4RmRtTnBRM2x4ZG5WRWVFNWpTbkpMVjNSNWRUWk1ORVJKVGpGdlVYUmhaMUpUU0c1T1RGRnlTbkpRZDBOeE1USTNNVk5WWWpKSmJsTkVNVzh6ZG1KM0sxaHdSRWhCY2xKdlRrbG5lRVZ5ZWpsSlFqaDJaVmxuVkRRM1RHcFZjRWwyTnpkTFZYSm9kR0ZoYkhsMlptdElUVmRRZWpacllrWXJjRXBuTmpFMFRXbGxObVJvT1VWcU5tcHdiSGxtY2t0R1ZVOHljR05tWTFwdk0ySjFSV1Z2YjJkaFoxVjJZV3hJVjFoR1RFbFhia0p6Y21WdVIwRXplbTlCYlVaRU9HNVlPSGxvY0dobWNUUllOR2g1VGxwRU9EZFNlbkp2ZUZCYVNta3JjbEJvTWxKU1ZXMTBhRGhVZDNKcVJEbHJkbFpJTm0xSVNHeFJUVFYyWWtwWmVVaFliVTV1Ylc5VWVEZ3lNemNyYnk5a2EyWktSU3RKYUhaTGRuQk9TRUpFUTFCNU9ITkhWRzVZUzBkRlptWTBOMUZJVG14a1JuZHlVa0pQTm1kd1ZFNVFVVmxrUzNWdU9HRnlUbnB6YVdGM1JrZHlabEJwY21STmNsQm9VbWhsUXpaR1VFNWlNalJKT1RKSWEyWlpWMlZvYldKVFZTdHlRV05MWlZKQ2JWWnRiRkJ5VFdGcWIwbFdlRXBhVkZCdVRXOUdhVU5vVkd0S05VNDBhelZFTTJaalRFeHFiWEI1UzB4a2QxRk1hazAxUm5wcmNXRTVUSFZUY0c4d2FuaHdjVlp5Ym1KWVVWaFNOMEl5VW1GS1JFNXdZMUYxU1RVME9HRjBORGsyVm1WNlJtTmFSbXBqYW1oYVF6WnhRMGhyUFEudWR2eHRQQUNuNVR6cll5NjBVZ24wdlB4d2dxNzBmX3pGR0dZWFlaRnViaTFvejlWNFV3TkRQQndFME9pMURWYVhHOV9jQnp2TTVTVnp0TFN6QlpYR3c=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:45,330 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:55 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:55 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:55 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=77157A1E0DD5A67A707DCE0AF06CE180; Path=/; HttpOnly')]
2020-05-20 15:37:45,335 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:45,342 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:45,343 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:44",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153744 AND testcase_id = 15 AND step_id = 24 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:45,418 testcase.py[line: 205] INFO: 测试用例[id=15, name=作业统计]执行成功
2020-05-20 15:37:45,420 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:45,421 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:44", case_exec_history_id="20200520153744" WHERE executed_history_id = 20200520153738 AND testcase_id = 15 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:45,586 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=15]的执行结果
2020-05-20 15:37:45,860 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:10:17', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '25', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '6', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '18', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '17', 'updater_first_name': 'Testlink', 'name': '安全分析', 'status': '1', 'full_tc_external_id': 'cq-6', 'creation_ts': '2020-05-20 09:08:30', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '6'}]
2020-05-20 15:37:46,007 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:46,008 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 17, '安全分析', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-6')
2020-05-20 15:37:46,031 testplan.py[line: 76] INFO: 开始执行测试用例[id=17，name=安全分析]
2020-05-20 15:37:46,033 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:46,035 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:46,040 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:46,041 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153746', 17, '安全分析', 'pan1_of_cq', '长庆项目演示', 25, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:46,059 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:46,060 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:46,062 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:46,064 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:46,065 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:46,066 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:46,068 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:46,070 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:46,407 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:46,410 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-14-45YYKgtyFP3QcMYPUmyIIkS56TDY0b-passport.51gxc.com" />
            <input type="hidden" name="execution" value="c06a0f14-ff1b-4d34-bb12-3a97b4e0921d_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuY1RkcE9GSlFaMmg0VUdSUU9YUlhWVWxSWjNWdmVqbHlWRWhqUVdGUE1ISldNekZFVTJsWU4yMUJkbEUyZEhkaFFXcEpjRWxxYTB4d2JEbHJNVkZyYkRCRlNGbzRkV05uWkRCbll6ZGpVM2hLU2l0RWQwVXlTR0kyU0ZWUFJYcFFiMVkxYkRGd1FUSm9TV2xRVDJNMmFYcEpWa1UyYTA5UFYzVndMeXRMTlhOc1lVZENkVzVCYW1WMEszb3lVblZQUm5KRmFHRXdXalJHTkhSTGVEZEZUMkZQYWpCdmFUVlJTbEpXZFhkUlMySnNaMnhRVmxSb1FXdDFSRlJqVkVkblFrbG9TbTVHYkc1d1lVTk5ORGM0VVVwMlJXSmFUVGxMZVRSSVRFNUNOMFI1TmxwVk9IbGpXa3RyY0dkaE5VUnpjVkl4ZFM5V1VXSnpkSEkwV2xSVGMwaG9jaTlVTVhRclVVWnlaVVFyWW1OcGJVeFZNMXBEVTNsblkwSllVR0ZVVlRoVk5tZE5aRUZGWlhSUldHNURka3NyUTNRNGMwRnJNWFZvV21OaFpHcHdWalJFTWpkd2VEbFJaRGxzTkRSV1VucEJjRmR1ZHpoVE1rZEhNMjVEYkRKQ2EzRkdabTh6ZERnMFFYVnVaRkpFTlZBMFluUjNTM2hTUTFSemQwMTJhWGh0VkZoV1NUbERXbEZZTmxkak1VeDVkV1p4VVRKcUswZEdSMHd6VlVaMFlrcDBNM1ZySzNNNFYxY3lWVlJwUlVOeWIyWk9SRkpqYUdaSGJYbGxZVVl6TUhoR2NXUmxOMWhPT1c5dFl6VlFiemxsTDFoWlJVSlBOM3AzTVcxT1lrWTRjek5rUjBnMmJsSTBOVFpLZVdSNE0yWTRXWEUxYUZoSmVYVTBVbFEwV1hCbWMxcE9ZM2xrVm1kNWJsaEhOa05JUmsxTVpsVTJRbFowVW01RU5WaHhRbmxTYjI1bGFWZE1SM05SWlZSaWVWVnpaSFE1Um5aYWFGVmhUa2xRVGxWb1EyOVdkMjFQVm5vd1JFSldSR1p0V2xGb1pEWlRiRmhyU2taWVZWSkpTVUZJUkZNeU9WZGlPRzkzU0ZSTU1ESkthVUZqZW1OaVRqWk9kRlo2Y0VkWVVXUmpWVVpOUlRNd1VIbDJlVlppVjFGYWQxbzBOV1JETkUxWlVGcGtkRzlGZDFaTFZ6RkVSVkpSTTNWSGJXb3dTVmx6VDFJNGRUZHNWVGRvVURKNmFrdDFTRXBTVld0RFlYTTBWVGszYlVWUVlXWTNTRzlrSzJReWRVWnNXa1ZGZDNOQlRUVTVXVUp6WmxGQmVISldiMnRKWkZZNEswOXFSeXRsT1hoaFVEYzFTWFo0U2s5eFZtdEdXVGgyY3paWVpHWnFVakJCVFc5alUwWlRabnBTYkZOSlduUnRORE5TU0dGcFZEQkpjVWRtYlhCU05tMVdkSGxvV0dJM1IzSkZkMlExYUU4NFNGSjVWSG8zY3poWFRYTlhjWGxvUm5sT1MwNUJNbXd3UVZSa1NsbFVaRWxhY1VOM2RVWjRVMUo0ZW1OTU4yUkNjVGhWU2tScGFXWm1OQ3N3UXpWbk0yZ3lObk51YTJoQlFTdDZTREpsVGtGV04zZHVkVXBEYzBKRGRVSlVRVTlqYzNOQlNIUnFNMGwzZEhWYVNETnVabGRVVTI4NU56TjBPRmxDTjNVek1rVm5XSFV3TVU1c01rVTVjMEo1U1RKTWRtdHBjemREVFNzMk1rSkZOM1ZyWjNCNE0xbHpNME5aVmtZeVpWcE5LekpRV2pob1JrUjRiME53WTFWbVFqVk9RVEp4Tm1ONk1WQlJka1F6VjBSdFRVMDVVM1lyYzB0bFFqSlJhREpxU0c1aE1XNXZVSGxMWTJwdFVFSnRTM0J1UjJZeGNqbGFhbTVSZUVONGN6aE1ZVEZyY2pneVNFUldUVEZDZWpaeE4wMDJhVXcyWlVoS1JEaFFaMEpvY1hsWFNGSmFhMDQ1YUVoelZIa3laQ3QxTlRSRU5IRmFhR1F6T1VKTlpFeGthRXhQYWxwMlpXaDRVMFV3T1dOWFNHd3JiRkpKYWk5RWFrcFRkbEZ6WXpNNGJIRktRbkV4UTJrNVMySXJkRE12Y2t0U1JWVnBTa2hTZHpVeVpVTlhUV0kzZFdFelExTlZia2N2Tms1TlMyZDNiVmxLYjFCRGRFOUhTV1F4YjBKRGRWVkxVVlZTVld3MU0xTjBZMGhWUXpVMFJHdHlSRXRtVFVsemVWWmlaRWhSVTFSeU1WaFBVbnB6VmtsUlduSmlXVWhwVmpWd1lWbEtUMU5JV2tSRVVHbEZSVGhFUW0xbE1EZFVXWE5VUVhSU1JVWnphRFk0UW5WdU1Fc3hXVFE1Um1ORmQzWnpLMnQ2ZVZGTlREQmFjWE52UXpsRmVXOWtWME0wZFV0dVRscEZLMGRQYzFKcFowSldSRTV3WnpORE1rUXZjMDRyTjBwR2EzUnlVRWMzU1c5RU1VMHZNV0pQTVdJeU5rRXdaRTk0YkhoR1VrUnJlbXBoVW5CUldtczViVWRLUm5oWE56UnNaMWhxTUZkVlR6UXhZM015TW01ek5XdFpkSHB0V25GTFZtUlhZemhoUjBkaGJGZERNa05yYUZwU2FEWnRPR2hhZDJwdFlUSnNNemd5VDIwclpUSlBNeXRpU2tKb1FtWm5TelY0V2pKSmRqSmxVR0V6WTNvd2NHMXFkMjl1UWtaMmNFZENZME5GYWpSVWQzVjVaVkU0ZFhOV2RWZ3JSbFZaVVU1SGFWcHdPR2hMUVVaa1MwMXRaa3R2Um5oa1NUbFlZaTh6VUhJelowOVFVRTB6TTB4V1RXMHZiR2RyVTBSMmQyWXhSaXR3UzIxMVlWcHRVWEZDT0ROR1ozTmtTV1EzTjNKWEwydDRkMkZuT0hsNWFrYzRXWEZ3VDBaaE5GZzBSVWwyVmxSV2QwVnBSWFpVYmsweVQwdDVOakF5Y1VnM1N6RjVhbm92YVd4bFdURlBZVWRDUm10bFExZENNWFpSY0dWUWIwVTRZa2hFTmpVMVVDOTBPRTV4YUd0RlJrTnNOWFpQWkhwYU1GTkZValJaWkZkSFltWm9PRXBIT1ZoS05HVXdPR2hTVVRCMVV6SlVSMnRpYkRoMFZrMXlNM2N4S3pFcldqa3ljMEl3V1VKYVYwaGpSM295V25wdVlWcGtOalZuUkM5TGRsa3ZOWGxtWkdobWMxTkJTVE5XUkVzd1N6VjJaV01yY1RRM00xbHpkVkEzUWtKblZtaFZjbE5MWTNoM1RtWm5kMnR1Ym5OcFlUTjRlSEJuTHpkamNETlBVMjVCYVV4WWF6Sm1Sa2t6Um5kWFZucDZkREYwTVVSMmIxWnZMMVJEZUVWaGNTOU1UVmhOUmxGMlVHTTBlVU55UVdaNVYyNW5hamxwSzFkQ1NITm5ia1U0ZVNzMFJHOUlaMFJ5VDBoSFVVUmhLMVJJVVc0M2VUaENOelZrUTB4bmR6Wlpka3hTTTBsTE9IQk1PWFZFYlhCQ1YybFhSVmwxUjNab1QyNTJlQ3RNWlRsSE9UTlJlRVpFU1hkcVJFVlJVVTFpYkVacFNpOVhkMlZ2Y214MWQzSnFUell3YXpRMVZ5OU1XVUp1WkVkWVJEUk9TMU5OVWpOaWN6RmtPSE5uVGpGaWFGQmxhR0YxVEVReVZFSktiRXBCTjJNNGFtaGtkRzFLYzFkWFJqUjJVRVJRWjNKb2EyTlZlRVJCYjJWUU4zZE5SalZDY2paeVRXMVlNRkIzTUZaV1MyaHFWME5YTkhvcmRFWm9hRzlXTm1sM1YxcE5jV1JyV0RKQmVHbEJSSE5OUVRreVdXNVhaemgyTTFKeFJFTjJUQzh3T0hGVGVHSjNOMlZNVVVoaWRrczVhMlJyWlVndk9HZFVUVGhyU3pFMVlUbFFiMkUxTlhwM1J5ODNVMjVRYW5WNEwyOTRNR3hvVlRSRWNUbFdNamhYVW1kRU9YWk9TMHBYU2pZNEswZElZM2RaTUV0VVUwVlpOMkZEUjJ0eGVWUjNkMVpYWVRKSGMyWldUWFZoV0VKbWNuazVlSEp0T0drM1NYb3hSVlU1Vmk5dlNGQklNVk4zYVhGQlIyRmhWSEZ6Y1ZOSlNERm9NVEVyU0hKaWNFUXhSbmN2TlZGV1l6aFFTR281TVV4emRsaFNXRVZqVFU5WWNrWjVaMVo2U1hsUU1sTlFlRkEyYlRCSWVtMWxWR3c0UW1sbFV5ODRaQzkyUW5oUFRXVmpOekpaY1hrMWMySTFRWEpGSzFsamJVMUJORlV6Wld4aVR6ZHpPRmszV0RObmJWTm5VMWd2VVZwelpYaG9UbXBCY2xCUGJVdFNWbmN4T0hKeVNTdDNTbnBTZGtkRksxWjJkMFJwV2tsVlkwaFhaSFpqYnpZck1XMVdhV2h4VDFNMU9HZzJkbEJpTDFwek5URkpWMW8zVkVaMFdqVjJjRmxGUVhRNWFFTkNhRWxpU1RSMlNsbFNkbWhXVERabWRGYzRhelU1Y0RjeUwzTlBlSGRIV1ZkSlZIZ3dWVTFpZDJST1VEYzJNVFU0ZFRoWWJteERPVTFETjNGblNWbzBUVmhGYXpZcmVuZG9jMmhQUTFWaVVUVkpNWGwwTm1SV0x6WnFNVXRIYlRoaFp6SlhkSGxSZUc1NFdWazRhMjE2VEVWMEsyZFNhMlUwUzNsdVlYQTFLekZtVkhCQll5dDJkVWRyTlVOSmVVRkZNWEF5WldaVlRXSmtTM2N2YWpSNk5HMXpSR1pwVFhoWU1FUlRNMGgwTDFkS01tdE5XVk12U1hkQ1JHRkxORUpSVlhoc09YQlZUemxEY2tWcmNXMXlSV05MVlUxdFNHTTJTRmw0VFVFMlVqbEhXbFV3Y3pocVpXbHJXbWhFUTFkSloybHdSMWh6Y0hkYWFERTRla0p4V0ROck1GaHJUVmRYVVdKblVFVm9XWFJwU3poTllqSTRVM0pRZGpKWGNVOTFlbkZvVkZKbVdVVnVPV0ZZYWtwQ1QxQlJVMmhSS3l0VlRXTnRkbTB5WkVWWGVHSnVXVE5YYW1SdVl5dHpVR2xsVERGS2RrMVpOVEYyV1N0VVV6QlZiVXhKYUhOaWFtRTVRaTlTVlVzd1NHdHJhbVZ0VTNWaE1XMUhVVUl5YlhWME9UUjRkMU5QVVcxYWVUQnljaXR1VmxGdlVHbFpWR1I1VGxCSk5YaFFjREJ6WVhwVU1qSmFlRUlyWjFOdmFtNXViV3A1VUdkVWEwY3dSRmN4ZWxkVlNuVjNjVXA2V1RCRFRYQk5PVmhzZFdseWJIVXhPRzVZVDNaU2FFNWlWbU5ST1RWdVNYVjNWak0wSzBJMmVXUmhSRWxCV25odU0xQTNXbVJuUFEuendtZDk1NDQyR2YyQlltcGFYZ1g1UFFPdTZtYUlnN2JkZXd5QWtDUTVyWElXZWtnVXhiSEZ6N0NGVVk3Uy1nZlpfVDhjUG5mSy1GeVdtYjhjc0xlRHc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:46,786 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:57 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:57 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:57 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=355B418509028C6378466B81C3BCC1C8; Path=/; HttpOnly')]
2020-05-20 15:37:46,792 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:46,798 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:46,800 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:46",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153746 AND testcase_id = 17 AND step_id = 25 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:47,155 testcase.py[line: 205] INFO: 测试用例[id=17, name=安全分析]执行成功
2020-05-20 15:37:47,157 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:47,158 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:46", case_exec_history_id="20200520153746" WHERE executed_history_id = 20200520153738 AND testcase_id = 17 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:47,372 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=17]的执行结果
2020-05-20 15:37:47,659 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:06:57', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '8', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'updater_id': '1', 'node_order': '1', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '7', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '6', 'updater_first_name': 'Testlink', 'name': '作业配置', 'status': '1', 'full_tc_external_id': 'cq-1', 'creation_ts': '2020-05-15 08:13:20', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '1'}]
2020-05-20 15:37:47,803 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:47,805 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-20 15:37:47,822 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-20 15:37:47,824 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:47,829 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:47,838 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:47,841 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153747', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:47,873 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:47,875 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:47,878 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:47,880 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:47,882 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:47,884 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:47,887 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:47,890 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:48,307 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:48,309 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-15-42cuxttyyLJlrgvjpjAOvzzUQmbYXg-passport.51gxc.com" />
            <input type="hidden" name="execution" value="b969dd00-c630-4300-9adc-7ffaa6632678_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTnpGNU0yaE9NR0p4Y25GcVJXRjViRzFsTTNkSmJHaHVUVVZUU205dlRtb3pTRTVNUVM5aWFGTjRPRTlZTm10RmMxRkllRVVyTjJsa1RYVkROazlhWWtSRVNuTm9XRzByVDBscmRETlBhUzlpVmprMFpHSmhUbGRyVkUxNWRuRktOWG92YWtsM1kydHFPV053TVhsUFVWVXJPWG8zU0RaMmEzZHJPVEZ5WjFKQmVUSmtXRzFvUWtkSldGUmtSVWhFY1hRME5rTnpTVTlIVURGMlIzaFBSbmhhYkd4aVJ6WlRhMFl4VFROeldYTTRVbXN2VjB4TGFEWmtSMGx3YjI1dlRXdEtaMlEwYnpabk4xUXhaREk1YzBsSFRtMTVPQzlpUVcwMlowbGhUekpaTHpGUFIxQmtVSEJCZWpkR2NqaHJORGhHV1daRmQwODVWSFZPYm5oSGJuVkxNSEZqZERKWU9XbEhZMU5SUTFoRE9FVkhLMUJhZUd3cmEyeFBNMDVtUWxKblVYazFhMEVySzJ0UE5uUXlUVkpaU1dOeGNtTnVaR2xvUm5nNVNVd3ljek5HUWtSS1VuQjFVRWxFY2tGSFZHd3hlSFJ2YldrNU1USlljMUJyZVRsSVJuUlVkMmh4WlVORFlXNWFRMWt4YURWQ1ZUQlpOMmxtUldGNUswNDJRVTR3UWpRMVFUSkpVbE5aV25sc2NYQm5VaXR0TkRCbVlYRkJlbVpMWXpONmRWSXZhVkI2VTBaelJFbzRNRkZGVlVkR09GTnBSaThyYTJOVFRuZG1kbXA0Y1VVMk0waDJSVXRDTTFKU2FuVkZkbFZ5WVRoRmNYZFdNVkp1ZVV4U1VIaFphVlJZTDNWeVJEUjNOMDFXVWtGT2FqSkJWMDkxYzFCNmJWRmpiU3R2ZDI5RWJGRk9UREJMYnpZM1JGbFBOV1ZIV1VkM2Iya3lPRTlPV0VWUmVuUjZRblV6ZEZkcGIxcG1RbmRzWTFKd1EwUlZiWE5EVTJkTGIwVkplREF3WlhCeVpXWlBaR2RFTWpoSlFXeExUV3hIVm5aUVIxbEpRa0U1VEc1emIwaGpZbFJ5V1hWWlZEVnhNek5qYW14dlNYZFRXR2xKUm5OcEswTkRXa1ZMT0ZZMVdtVkZOV2xCV2tFeGVEVm5OSHBwWW5aM1lsVk9kbmMxYUVWSFl5OWhXbFY2YTFreVpYQkNORUkwUzA5T1ZHVTJSa05CUW1wWkwySlBaVlYwYzBWSFpIQmFWVWR4VmpaWWVsZFBVR2hpZFRCMlQxSnRUV2hFWlUwck5sVlBhRFUzTUdGMVoyRndTRWd4TlVWQ2VGaG1jSFZEV1ZoaU1qbE5WRWh1ZGtoWlVqSjJVR3d4TTNSdmJGQlZOSFJCYWtGWVVXMTRTRUYwZFRGdFdHUjNUMk5MUVhkV0wzUjNNRWhXYmpkR05USktNRGhCTmtWaWNVZFRNVW92Y1ZST2QyMVhVbmwyTVN0WFRsQnRWWEZKTWxCak9VTm5lVFIwVDJzd01pdDJOMk55TkcxWmMybzJVVWhzZVRScE5FaGFXVFI2YjB3MWFYaGpSVXd5V1hsMk4waEtNMnAzUmtoc1lYWm9UVGQwTTI4ckx5OU9Na1Y1VVM5dVltMWtSazA1TVhGUk5WWlNaV00wUlcwdllXRkRNMWhXWjJWdFNtaFJkMGwwY1dkT1JISmpkVVZVYmtJeFdUY3dXVEJVTkRKcFNFdHZNbWh3VVVaSFVuVlpVemxyYm1WTGNrbEhkMGgzVXpSUmRqUjNLM0pwTW5OT05tNTJlbWxsUkZSNGRGQnNTMUk1TDJ4Wk5VWktXRUpyYVVkd1IxbHpWM2QxTVZKS1IyZFJNbmh2TW1KUWQzWjVhbmhNVUROUVVrOUVSbEJKV1VscldESm5UbTl0V2tOdFkxbFlZMlZGZUcxRVkwSnFTRzVzUjJKUFZXRlJOV3cwYXpaQ0swbHhTbVpNT0RsbFZXMVRXREEyWVhNdlUxTkpZV0oxV0dsRWRVbzBRV1ZWYTJoNldqUjJRbVZyYzNZMmJWcEtVazVrZGtWU05Fd3laMlV5V1V0VFpuazRUVWxwZW1KaE9FYzNjazk0WVhsTVVUZEdSWEUwUkZsM1JqQmFkaTlaUTJsclpUQXlNbUZMVFZSSWF6TlNURnB3TkhjMGJFeERVbmxhT1V4T04zTjFSa2hRWW5CWVRWSlJRMnQwYVRKR2RUQkpZWEpsVjFSeVMwRnRVMk40Ym14MlZYcExVSGxWWnpWSllYZHpMMnhKTjJwM2FIVllhSG81WmtkSmJsWmxZakowYWt0bE5rWXJRMFpJYWpCWlF6UXhiWFJrYm5CSVNqUnhLMHBhY25kME1FTkVOa1ZKVDFrdlRUWklWVWhEZG5nemQyeFVkVkJhUTBaMVZIVkpNRzVRZDFkVlNrOVJOa0ZvT1RGd2FVaFBVblEyUjB4SU16WkpkV1l2UkVKMGRIQlJOWGhzY3paRGFHTnhVMloyYzA5MVQyd3dkRTlqYTFsVk5EbFpSekJFVldwTk5pdFphWHA1VVc5YVNVVTJUMjFZUm1WT00wZHNObU5ZYVRCNlJYWk1jMVI0UWxnelVHaGtVa2g1ZFd4MFUzbHBRMFZXV1RNNFJFY3dSM1YxVWxoa1kwUk9hVnBYZDFoT1ZsY3dPR3BCWmxWSlJYTkdVVEJVVm5obVYyTjRjMncxTldSelZtSnNUa2RRYmtaeVlYTnpXbWxvSzB4QlUzcHpaMnRZVkVaVFpXTkNlRGh3ZW1oNFUwVkJkWE5TY0dod1pXTk5RblZhZEVOaVRIZEZZMlV5UkdwVU1YZE1Rbll2YjFGbmRVRnRZMjF4VmxOTlNXbGFUVWxCV1hsTmEwMXBNemxMV0hreEwwRlRZbVpvT0ZwdUwzZ3ZhSGh5VkRGRVQxUnFkbmxxSzNCdmVYRkxOVWRhUkdzNVFXRlRkeXRoZUUxaEswTk9abTV6UVRCTmRHazBkVkpJWlZrdldGWmtObGx2U1hWNFVsQTJhU3RyWTJSamVFMWhiVXB4ZUdGdWRGcHZNMDFSUlZKdVdIUkxXbHAyYVVWa2QwcDJTVGRrWjNsUU5HZHJiMVpsZEc5TmMzcDFkVk0yY0V0RlRFcFRhV2xYWjJwNE5IaGlVQ3N4Vm5WV05FZGtNbFZWUkc4dmVITnhhRE5XVlVJemN5c3lORlpVVDJwMGRHeE1hR2h0UzJwcmFHdFFSRXRKV0RVNVprZHhlRFYxYkdWNWNYUkxOVWxSZWt0S1JFaHNZV2hSYkRWTFltMXBaM0JSVEZWbmRHc3haVEE1ZG10bFRXWTFlbTl2VWtaak5HUkplVmgxY0VSQ2JEUnFURU0yVWpaTWREUjVWa2h0YUhWUEswSlRUazVMTTNWTkwyMTNNR3BhWTBsQmNGUnJaVWh3YkhNeVpTdE5VMHBZZGxKRk5sRjNjbWhxZEcxd1owWklSMVJZZW01Rk5IbE5SVUpzTVcxeFExbDFTbWhPZERack1VSlZWMEpYTms4NE5HSTRkR3RSVTBOSlZIZ3lVVXBCUVVGalJVRm1NRVZ5THpkUGNEbFhRVVF3UVRGTWMxSlFPVUpKTW5wbVIzcERTV292WVRJcmNGVlpNbTVMUnpaSmRFTXpNRWcwVTA5cWRsaHRORmhpWldwdGFIbHZWMHhLYnpGWVRtMW5SSFZ3TVd4MlpucE5VMjFoWm1GYVJrZzNjVU12TWxkR1dXTkpUWEEwZEVOb1ZEZHNkMVprV21sa01WSTFLekV5T0VGRGVGUkZWVk5SY1ZnM1JXUTJaek5DVTBobUswUlJlVFYzWW10YVRuZHBURmR3ZGs1dlR6SmtaWHBZVjBGU2RVcFZSR0ZTWmpJelNUTmpielJFSzFacFFYQXJLMWsxU0ROWVoyRndRVlpYWjNwc0sweDNWVm80WldaSVdYVk5aSGd3TUdob1p6ZHROemxPTlhGMk1GVjZTM0kzVlRZeWEyOUlRVk4zUkhGMmVVbE5OVWhFZW1wSFQySlZSeXQxY2xBME56TlNWVkpXZFdaWlltRkVWa3RyUmxKMU5FZEVZM2RKTUU5WVRtSmFjRTkyTTJOclltMXNjVlJJVmpWalptZGFiWE54TkhndlUwMXNSVTVWS3psME5WTk9hRlkxZVdOblkweHlhVzlFV2taNk1GRlpWRXAxT0dSWGNuRm5aRWxIWXpCeVV6QjVUVUZpVlc5elpTdHFVbXRZYUdzcmRYUkJWa2Q0Vmxoak9GRllVMk5pV1daNFpURnZVV1ZOY2treGRGZG1lSG8zUVVsbmNYRTBlR1E1YjBReVl6TTFTRWd3ZDFOT1JGcFpOa3BtVTNNdmNtcFRSMjQ1TkcwM1QwOVpTM2RLY1ZCYVprVXlkM0Z2WjA1Rk9HeGxPU3RJTXpoTVlpdDZTRWhuZEdkbWR5ODFZWEZOVm1JeEwwZFliV3g0VUU1TlVGcGxlVVUzTTFsUFpGRkRXVGxhTldjMFYxSjVUbkprWlROdWNHUXpUblZrZWs1VVRIWjVRbkZPV0VoclNtdGFPRVJEUWpoWGNVOTRkVUlyZG01TWRsaFJTWFF3WlRVMmEyWnhNbUYwU0RGYVlrTmpNV1J0ZUdFNVdIQjJWeXR3Wm1rdmJqaEhURU5QYkRoVmNIWXhabFJDYWxaSFZWVkhRMmx3ZWxSV2RXdHZaSGc0SzFGRlkzcFhNM2hPTHpaRWF5OURhM1ZzVkVGVlNVMUdZM2h6YUVoYWQzWllOWEppU1UxM1pUSnZNMDVHVFdsWGRIZEtVWFpwTjBsbVVrZHJhMGQ1UkM5dFdYQldaR055UjJ4eFZHRkRjVU5CTkUxMU0wOTBjQzl3TVVzMU1YcHJkVFZ2WXpsWFFqaDVLMDlVY1ZOeFNrUnpUSFJYWkdWMFpqVlFNbTVIUVhVd2VWTkJibmw0VmxkTVoxbFZhRGxDTjJGWVdURnNZa3RWVlhSTlkxbEJPVEJNV0hnMlp6UnBURkZXV0RaMWNYUXJUVTE1VW1FMGNscEpSMFl5TUU1T1NFVmhhSFF2UzNkNGFITlZXVmhoYm1wblVVcDZjMms0ZUVwVU1sSlhkVFo0TVhZNVpEVXJNbGQ1V0ZGUlQyTmtiSFJrU0dZemRETm1VbFJUYUdKVlV6aEtRVEZEU2xSbVJWbERaVWQ2WjJWWFYySTJlVFZVV1cwNFVTOW1jVUpEWkN0Wk5uWkdWVGc0WlhWV2VEbFRNRGxTVUZobGNFODNTVmhhYjAxYVpIQlphVlo1WkZsclNsZHRVbUZHYVVSa05XTmxkbmcwWm5SUmFtMTNWRGxTWlVjMVZ6aENPV1F2TW1kWU1WaDVWWFphUldoTVpUbHpkbG81Wldsa2NWSm1hRGN2ZWpjeE1XODBUMVU0UFEuS2gzRU5WaWZUdUVuVFFRdnlpSVJNYWtlNGVTWEtNRTFKVmtxVmNrVUU3T3d2M1U5TmxJRjk4aHAtc0dhbFhIWk1zR1lpSGVpaDFmV0RHVDQ5aUhLb0E=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:48,687 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:38:59 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:38:58 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:38:58 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=C19C8A8290737A21D1E4EE9132CC4DB7; Path=/; HttpOnly')]
2020-05-20 15:37:48,693 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:48,699 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:48,701 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:47",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153747 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:48,739 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-20 15:37:48,741 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:48,742 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:47", case_exec_history_id="20200520153747" WHERE executed_history_id = 20200520153738 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:48,887 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-20 15:37:49,171 testplan.py[line: 46] INFO: 获取测试用例信息 [{'importance': '2', 'is_open': '1', 'modification_ts': '2020-05-20 09:09:50', 'version': '1', 'active': '1', 'author_first_name': 'Testlink', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '21', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'updater_last_name': 'Administrator', 'summary': '', 'updater_id': '1', 'node_order': '2', 'layout': '1', 'execution_type': '1', 'author_last_name': 'Administrator', 'testsuite_id': '5', 'id': '10', 'author_login': 'admin', 'preconditions': '', 'author_id': '1', 'testcase_id': '9', 'updater_first_name': 'Testlink', 'name': '作业预约', 'status': '1', 'full_tc_external_id': 'cq-2', 'creation_ts': '2020-05-20 09:06:43', 'updater_login': 'admin', 'estimated_exec_duration': '', 'tc_external_id': '2'}]
2020-05-20 15:37:49,317 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-20 15:37:49,318 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153738', 9, '作业预约', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-2')
2020-05-20 15:37:49,334 testplan.py[line: 76] INFO: 开始执行测试用例[id=9，name=作业预约]
2020-05-20 15:37:49,336 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-20 15:37:49,339 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-20 15:37:49,343 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-20 15:37:49,345 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200520153749', 9, '作业预约', 'pan1_of_cq', '长庆项目演示', 21, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-20 15:37:49,380 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-20 15:37:49,381 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-20 15:37:49,383 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:49,384 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:49,385 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-20 15:37:49,387 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-20 15:37:49,389 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-20 15:37:49,391 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-20 15:37:49,675 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-20 15:37:49,677 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-16-NHyJcX1yTcQr1t0CqZ7gfEzryKF0Br-passport.51gxc.com" />
            <input type="hidden" name="execution" value="8ccfce80-64da-40f9-988a-f7a9fbde2b69_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUWxoek5IQklkV1pVVjNCVk1HZGpURXhrWVdOek9UTmlSRFpyVlZsS1ZUZENRMjl2YVU5Q2FXVk9jMEp3SzNGekszVklRVWQ2Y1hwUmMwSTFVMjg0VGtSdFVqVmpNVGR2Y2xkYVdqRkxLeXRYYzJ0MGIwdzVaVWxHTm1GTlpWQjRjVWxrZW5Sbk1XVkdjME5UTnpSd1FVNHJjMGswV2pNM1dHMXBNR0owY21wak1VSkRTbTAxZDBab2JVNXViM1V2YVd0Nk5sWk9NV05IVFdSQk9Ga3dhVmt5Yms4dmNuWXhNVGRZV0RCSU4wdFNjMjlpUTFCaE5uZHlORW8xTUcxVlYzTXZjVEJ1VlVoalVUaDFObVpWWWs5T1NuRndaRXhvTlZsUVNIWnlVR1J0UjBkeVYwMXdRVUpXTXpWV2NubHlZVlJYYm5CT1pVOUZkVzlTYms5ME9WbFFOa0V5VkRScE9EUjFWR3hZVVRab1JGZHNTRGhGYzBkd09WbEdWR0ZuTkRGTlVsZzFUSFZWUjNoS1lTdHFRbnBaWVU1WllUWjZTMlZPVTFOaVRFVTBiVzgzVFRWVWJXVnJUbGszTmtOYVp5dENSSGxRWjI5TGFYUndOMmhoV0hseVVUZzRUSFZRYlVaaGRXRndka2g0V0VSeGNUZGFNRzU1ZEZCSWRrWlJSRmxtUVhoclVqa3laMXBWZDFaWFVWUm5jVEZKWVhoUlNWWjVjVTU0ZWtSQk5FbHNjREo1VURaS1IyUmthSE5GZDFreE9FZDBjazkwYTJwQ2J6SlZiWGRwY0dwRVJrVkxkVWxuWmtGdVNXOXFkakZSWW1KQk1FdDNRbWRsVjJ4NVVXNDNWSGxMWWpRclZsSlFaREZuTDNSV2FraHhSazFYVlU5YVRWRnNSbTFYZVdGclkzRTJRemt6UVVsMlJUSXJSbVZIWWpSSVNYRXdTRmRFUmpad09EVm5iVkp3ZGxSNlZXa3ZSbEpIYzB4eVdVTlpibVUxY21aQ0sySXlMeXQ1U2pReGIydFpjRk5JUTA0eWRHZExkbEpWVGpsdWRuQlNialpaTlRSd2RrTldPV2RIZURoVlNHcG1lSFptY0dSSVYyUXhlVkozWjBrek1Wa3hiSHB5TVRGbVpqRnlSMWg0WjFoMVVrRlBjbXBtWTNoRFdqQkJjM1JWYzFvMVJFVmFOREpWVGxsQmEyRlFOeTlPVlVwbk0yRndSVVZRZVdRdlYyTkhialJEYW1neVdFcE9iVkpGVUZOMVlVMUxkRkpJWVM4NWRrZEpXRkozY25WcE5uUlFLMVp1U1hnMWRsWndTMUowYkZwQldtOWhhak5EVEdvdlJVOXRkMlJ2YnpaemJXNXdla1ZMUlhWTldUQTJOakp6Vnk5clN6RlhLMFp6Vkd0TFNuRkNVR1F2VFVaeE1rMXZaRTVXVkdScWMyNTFiMHh3VUdRdlpqWkhUMU14VFVaaGJHdFFXVnBzVGtSamVqQXhNVnBsT0V4TmFXbHdTRkkzY2pkMFZ6SklOV1JaU205TFYzSmpMMDFsUmxJNWVrWTVjMWxITXpsS1kyVm5XbFVyZFRGcVRVeElTRkUwVVVaR1YzcGxVa1F6UVVWeFUzcDZibGxoUlRaT04xWjJaMlJOZW1ad2NqTkpabVJSSzJoM1NIVnpPR1pHVTJGdVZYTnBjVFJPUWpKdE1EWnljRE5xYkdaV2NUUkZaa0ZESzBGRlNWTkpTVTFpT1hkMmFtOW9aMDlFZFRCM05sbFJhV0pWUTFaRGFHeHdaM0JSUm5Obk5HSkJVMDUwTmtobFJsZEZSaTlvYWs0eE5IRk1XVlpCWmxkdldITnJUalpKT0ZReVIwRjFiVmxyYjA1Tk9Fc3haSGs1Y0RKRWVWQmFUMFJUV2s1VFdURmhOell5VUdsbE5Xc3JSMUJzTWxZd1NHNVljWGxFVlVSWlVVdG5OVGhJWW1ZM1IzcDNkV2xKTkZOaFJHUldZWGRuWkZaeVdFeGFaVVZRU20wMmNVWlpkMEZOUTI1MlJVd3dka3BPUm10dmFXUkhWMDFrZEhNelZ6ZFFaRFY2TkVRMWQwVklkMkZOT0hCTFlrWTViRXRCY0VWc1NHeGtWMmhUWWxOc1IwdERkQzlsVVZkVWVrdFBhM2QxUnl0RGVIQkJRWGhHVEcxbE16bHhZVFJGU0V4WFJsbE1aVVprVnpSSWMwbHRhMUpvS3pCT09UQnFVamhCYzBaSU1VdElkVEJtZW5GUVpXdFJhRVYyUm1oTVJDOVJhV1pUYXpreE9HeDJOVXdyZGpkUlRVUlhTRlJMTTI5WWVGbFNXbXN3VXpSTk1HMUJZa1ZuZFRsaU1EbFFLM2RyTVRaRVoxQm9PSFpLUlRJeWVHdGxTbWRKTkc5eGJGZHFhbmx3ZWtOcmFrcHhSSFYzWW5KMVUwazFUa3RWUmpSTk5HRjZSbk5VZWxOa1VGVmxjMmQyV2pKb2VtUjVaRVUzWTNJclEydHdlRkp0WkRCc1UzUlNhM2x2TlVwTlRIQnVRekF4Ym5RclNHMDRURW94WVdkclNteFlSVTl1YjNCcWRqaEZVV2N6ZWtkdFpWRjBlSEZHTkhaMUszUk1ZMlp4TkV0UFRtUllUWFp4WlhGUFMyNUJNalZzT1ZJNE1WbGxka0Z6UkVGaVFYWnJSaXN3YVRaeU5rMVhNRlJCUldSb1lYVmthVUU0Y0VWcmNteG5WbkZoUzFOMU5WTktPVU5YU0dJNVltNXFZazVuTUdrMGR6aE5VRmRVYTFwQ1JWaDRSQzlTZEdWVlJGUjZaVGMxUkhWdFRrc3JSRE5wVTJZNFoyNVFTbEpZUVZkVVRraEVRbm8wUkVNMVNHRlpXQzltUlc1b1ZHWlFTVlUxUkRCWE5tbHdSMkZhUzFWaEwzTlVNMlIyTWtNdmQwSkdNbFZ2ZUhWTVdVbFlTazVsTUd4U2NqZGlVM0ZMYTJ0aU1TOVVlbVJEUjBOalFWUkxZa0pOTldnNWRFdEJOVEZvU25wMGFYUlNUMWM0WjJwbFUwZEZWRVZSYzFWVmIxQkNXRzVCV2pSRGVFZElSRko0U25GU1RUTnFNRkJJUlZsbU1WZHRjbEY2UXpOME9FRkRWMVpoTVZNeVJWTjFjMjVPY1dSbVZFOHdTbmhzT1ZkMVJETTRjWGd2ZFN0Rk4yczRhVWQwU2xSTVlVRm5jVU5ZTlZwRk9YaE5RVkJTVld4aVVERXhTVzUwT1hWSllrRk5aa3RTS3k5emNXWlJURGx0YWtRNWEwSnlZV1JSYzBsNlVYZzBSRkpLZUVoSE5WQkhOWG94TVhWaVYyMTRZblJxWm1sWFpUaFlOSGxvVWpCeVdIWnplREJTTjBwNlowOU9jRE5NVDBwMmNtSlVlbXhoT1VvclVIWlVOVEJEVldwUFJtZFRaaloyVDNCVloyeEdUV3d4Yml0a2RERXlXVkpyTURSdlptWk9PRlp1VW1KeE1YcHVTRmhpVUVsMFJFTkZkRTFRVlVGcllURkxXbEJuYkVGaGFEVlViR1Z5ZVhnNGRFTkNlbWhhTVRaMFVWWjROSEpCWVZwMlEyTkNNbW80VTJVdmVsZEljbEI0WWpNMmFEVXJVVGRyUlZSUk1uZGpWREJ6Ukc1cFRFSmFTbTluVURkQlRXMHZXRzVtZHpKWmJXTjNiR3BHVWtsd2EzbEtUekJLUWtWUGRFOUZiREo1TjJNNFluWmFVa1YyZHprdk1tUXdWMUZzVGl0NlJHZHVSRk5NYUc1M1YxQkxPVkJ5TkVrNVdDOXFORXRRYVVGdlNpOTFSblpvSzJabVZEaGtTMUJQVVZwNWVHZHhlRlpVUm5WWlNsWk1UWGszYTJkclUzbEhRME5YTDFkMmRsSldZblEwV0hOdVV6bG1Va2x2Vm5wdVNsUTBXR2RvYkRCTmJ6ZHlSV05ZWXpKdGQwdE9WbkZCZUVWeVExUk9NR3MwVVdWalFVMVdkRlJ6U25oaFFVeHBVbEJLVG14TWFWaE9LeXRpVWtadFVXVnZNemhtVGtGVFF5dFFiMnRHTldkUGIyVkVUVzF3V1RjNE1sVkphMHhrT1hkTVpXOXFTVGRVYTI1eVdUY3dTVk5KVUhjck5VTTJZMEZSU0ZOalkwMUpZa1JpVkcxVlNVNTRkRWxVVlZocGRuSmFOVmxMTDNSVWRuZHJhSFJWZDNacU9VWldNVEZoY1VaSll5czFNRUo0VWxoSFIySlpXbkZsYkZWbGRYTnFLMk5IVjJSWGEwbDVaU3RIVGxCUFkyMUhNa1JMTHpoblkxSXdPWHA0V1dob1dTczNNbFpYVTI5Uk9VbGllVEp0Y2tKQ2NFVm9jSFF5UWtndlJsTkdaSGhzYVVKU09FNVNlRkJJUzJocWMwazVZM292YVRrek4yVnZhV3A0TW04MVRtMXNlbTlDUTJKWVVVbGlPWGh1Y0hJeWFGSnlLMjFWZDJsa1lqaHpiSFJwVG5ocU9FSnVOR052VmxKSlpVcHFNbE4wTVRGelNXVlpTVkYxVmpsUGNXUmtNRGxCV2tZeFZFaGhVMFI1UmsxdE9HTkxOMkp3ZURSRE5XbExiMUE1WTBsak9VNDFUV3BaTjFWWk1USk9RbmxKWm13dmJEQXpSMVpUWmpFM1UyUlFlWFF4WlhZck5VcDJTRnA1ZUhFeFVISkNjaTlEWkd0U2RVSTJlR2N4UVZGSFVHNVZiR1JwUTNodlZEQmxUM0pVTkZORmRrNVZkbXd5ZUhCSlluQXdaVzlaV0ZkTmRDOWtZVWhEUTNac1YyZElTRFZWVUhVMFNFaGFOazVLTW00MlIwWTRiWFpTSzNCSmNTOHhWMDlvTkM5V2VFRTVhek5SWlVobFFWaEVlV001VkRrNVFYaFRUM1ZWSzJ3emIwSkpXblV4U0ZSM2NGWm9UM0ZNSzNoeVNFbEtRak5FVlRORFRrMTFWbmszYkVJNFFqUnBTMHQzVmxsR1VHRXZialZPSzBKQ1UwZGFaR0ZuYkd0RWJHVmtZbkY1VUhKS2FuVmlUR3BNTlRsdVJtcFFNRmxTZEVOV09IcFpVMWRSTlhOQlJIcHJUMFJ6VFdaeWRXTmpZMmx6WjJOSU9WRjRZMkZGZEZCblJVUnlPVFZFTDB0WVMyNXlRamhxU2toV1JUZGxiV1JpYWs0eFRYQTVVRkpKTTBjM1dGRkNlVUoyVkhsT2RXWkROMmxQUkRWMFpXeHBaRUp4TVhOVFowTjNVM0ZTTlV3MldXVmhibkZtV214eFZubHBhamcyV1haRU1HWlRlR014WjBRM1kzQlNLMkkwZFhsSGIyMU5Wa1JaYURVMUswNU5hbmxtZDBwVmRGSnFTVklyYzNST2JqbGxXWFVyV0ROVWQwbHRTalkxY2tSWVoyMHZjelJKUFEueTNHMEIyX0F3YzhtWjJYZ3NtRnRRSGF4aENkY2p1NzNtemdjblQ5czh3dHJZOVVxeEx2bExYbHZ1VUpZOE1vRWNQRm5reVh0QXpYMnQ0alhjWTYxMVE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-20 15:37:50,057 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 20 May 2020 07:39:00 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 20-May-2021 07:39:00 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 20-May-2021 07:39:00 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=BFBA1E5FB101EB61ACFF3EBB285C834F; Path=/; HttpOnly')]
2020-05-20 15:37:50,063 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-20 15:37:50,070 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-20 15:37:50,071 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-20 15:37:49",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200520153749 AND testcase_id = 9 AND step_id = 21 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:50,143 testcase.py[line: 205] INFO: 测试用例[id=9, name=作业预约]执行成功
2020-05-20 15:37:50,145 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-20 15:37:50,147 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-20 15:37:49", case_exec_history_id="20200520153749" WHERE executed_history_id = 20200520153738 AND testcase_id = 9 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-20 15:37:50,341 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=9]的执行结果
2020-05-20 15:37:50,532 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-20 15:37:50,534 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-20 15:37:50,537 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-20 15:37:50,539 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200520153738',)
2020-05-20 15:37:50,543 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-20 15:37:50,545 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200520153738')
2020-05-20 15:37:50,548 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-20 15:37:50,550 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200520153738')
2020-05-20 15:37:50,553 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-20 15:37:50,556 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200520153738')
2020-05-20 15:37:50,561 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-20 15:37:50,562 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200520153738')
2020-05-20 15:37:50,566 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-20 15:37:50,567 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153738',)
2020-05-20 15:37:50,571 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-20 15:37:50,573 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153738')
2020-05-20 15:37:50,578 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-20 15:37:50,581 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-20 15:37:50,583 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200520153738',)
2020-05-20 15:37:50,587 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-20 15:37:50,589 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200520153738')
2020-05-20 15:37:50,594 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=11]步骤运行结果
2020-05-20 15:37:50,596 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 11, '20200520153739')
2020-05-20 15:37:50,601 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=19]步骤运行结果
2020-05-20 15:37:50,604 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 19, '20200520153741')
2020-05-20 15:37:50,609 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=13]步骤运行结果
2020-05-20 15:37:50,611 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 13, '20200520153743')
2020-05-20 15:37:50,616 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=15]步骤运行结果
2020-05-20 15:37:50,618 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 15, '20200520153744')
2020-05-20 15:37:50,624 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=17]步骤运行结果
2020-05-20 15:37:50,625 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 17, '20200520153746')
2020-05-20 15:37:50,631 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-20 15:37:50,632 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200520153747')
2020-05-20 15:37:50,637 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=9]步骤运行结果
2020-05-20 15:37:50,639 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 9, '20200520153749')
2020-05-20 15:37:50,644 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-20 15:37:50,646 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200520153738.html
2020-05-20 15:37:50,648 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-20 15:37:50,652 main.py[line: 235] INFO: 生成测试报告成功
2020-05-20 15:37:51,788 main.py[line: 242] INFO: E:\\project\\report\\test_report20200520153738.html
2020-05-20 15:37:51,790 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-20 15:37:51,864 main.py[line: 249] INFO: 发送邮件成功
2020-05-21 13:33:37,044 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-21 13:33:37,044 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-21 13:33:37,105 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-21 13:33:37,108 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-21 13:33:39,192 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-21 13:33:39,193 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-21 13:33:39,208 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-21 13:33:39,208 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-21 13:33:39,221 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-21 13:33:39,224 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-21 13:33:39,224 main.py[line: 90] INFO: 按项目运行测试
2020-05-21 13:33:39,225 main.py[line: 94] INFO: 运行所有项目
2020-05-21 13:33:39,649 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-21 13:33:39,649 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-21 13:33:39,650 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-21 13:33:39,650 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-21 13:33:39,650 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-21 13:33:39,783 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-21 13:33:39,945 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-21 13:33:39,945 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-21 13:33:40,137 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['19', '9', '6', '17', '15', '13', '11'])
2020-05-21 13:33:40,303 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-7', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:08:47', 'importance': '2', 'modification_ts': '2020-05-20 09:12:43', 'name': '盲板管理', 'is_open': '1', 'node_order': '7', 'execution_type': '1', 'id': '20', 'testcase_id': '19', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '7', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '<div>\n\t{</div>\n<div>\n\t&quot;检查&quot;:&quot;body&quot;,</div>\n<div>\n\t&quot;匹配规则&quot;:&quot;包含成员&quot;,</div>\n<div>\n\t&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;success\\&quot;&quot;}]</div>\n<div>\n\t}</div>\n', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '26', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:40,445 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:40,445 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 19, '盲板管理', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-7')
2020-05-21 13:33:40,510 testplan.py[line: 76] INFO: 开始执行测试用例[id=19，name=盲板管理]
2020-05-21 13:33:40,511 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:40,511 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\"success\""}]}
2020-05-21 13:33:40,512 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:40,512 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133340', 19, '盲板管理', 'pan1_of_cq', '长庆项目演示', 26, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\\"success\\""}]}', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:40,548 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:40,548 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:40,549 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:40,549 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:40,550 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:40,550 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:40,551 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:40,551 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:40,552 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:40,950 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:40,965 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-51-dMuXaConryydL6NDfkDSizL6jnWAu9-passport.51gxc.com" />
            <input type="hidden" name="execution" value="985413a0-8e6a-4766-a636-ea9bef8caee7_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuY1RkWGJXSlBSRmhyYUd4V01rTjVWWFpQY0RoUFMyWlVSREJwWkRaUVRtVm1OR2RZU1ZNeU9FVlRRakpRZDJWVE5EbFNVVFJpYzBGSlNYbFViVTloU0RSdVdrWjJlVlpNVVVkVWJtSnFkVlJpT0UxaFlYRXJhRU53U21kT1VEaFNVbnBRWVhaNmRVOW5UV1ZXYzNSbFJsWnFablJGYW5ONmNHWkRNRkk1YlZsQ2MyTnpSMkpIWkU1T05tNXhhVWhJUmtReGJuVkZla00xV21Sc2NtTkpXV2xuTVcxWVkwTlJTVEZvYm1Gc1QwcFRVbFpsV0ZsaGNuWkpWUzlLYjBaYVFtWmFkbUl5YlhaaVExVndZblkwYW1SVFRqVkVNMGRNYW1KdlNpczBaakJ1ZG1GNGVsWmtTMmxIV1dSNmVGVk9Oa2RMYW1JMFJsUktUbkpVYUdrdllWSjFOR1F6VWt4WmJIaGhTVWN2Y0N0MVoySk1OVWt6ZFhwTk1YRnJSMWR2YXpaNWR6bHdTSHBXYVRoSVJDOVJaalJZVEc5UU9EaDJVMmM1VkZSUE1XUk1keXROVVhkdWNtVkdibVZWYkdReVdVaHBhSFJWYlVRMU9WVkdVakpFVTBzNE0zcHRSMDU2WW01NGIzWkRSMjVSVkdaWU9YZzNjVU16ZWpBd01tSlFabGRST1hWck1GcGFja3AyUVRkWFJpdGFkVFpQVEV0cWFIRlFWRFJaWWxRdlVFMHljM0pDVldoaldFZzVNRzR4Y0RSU2JrRnhXVUo2SzBSR1ZVNVpVSE52T0hGYVJrd3lUbXBzV1RWWGJrdGlhbTVyTjJsSlpubHdNSEpYYmxCYVpFaERjMmhXWW1kbVVVTmthekZrVWxSTWIwWldPVkJ2WmtkSGJrczRiVFZNYlhGNFdXeHZOMWd5UzFOMVdqTnRWR1ExWXpGclpGa3JXRVJqZUhNNWR6Rm1kVXAxYUZoaVUyeHNlRFV3WjFWRVYzWkROREFyUVZKRFRGSmtORzlKTm5kRlRFMXpSRmRsYW1kQlRsZGtRazQwY25OSVZ6Rm5OM2w1TWtSeVlrcEhNbU42VlVaSFdXbGhOM2szWWpKU1pqaHhibkJ0VTFwYVZIQkpVVWxEVDIxSVFsQm1UVVZ0YXpkNlVYRXpVSHBTYTNscmIzWnpTRWMwVEhnck1YRlBUR2h0WjFaaVpXRm1hMnBwVUZwa1pXWjZUVnBDYjBrelJHd3lNekp4YWxadE1XcDVkWEF2WkZKR2JXMDFjM0ZEYUdFd2EybFhhbTkwTlhCWFRXNWFkRlUwUmtZMGVrYzRTRTFzTTA1Wk4wWnlVREoxTWpJeEx6VmlZMlp5YjIxb2VFSk5kR1ZGVWpGckwyVmllbWhsVVZsUFZqQldORkl6ZEZoRFFWaE5WRzAwTnpaSWQxQXJiRzFMY1ZoQ2NVRjNXRGx3YzJZeFVIaElVRXh5TVRaWlQyTlJRVkJPUVVkeFR6bFpaVzFMVWxocVJVa3lkMDVTZGtSMGVXcFFaR1ppV21oeU4zZG5kV0V5TlZOWlF6RldkRzVTVjJSUk4wOUhUMUJyVGk5TE1IaFBNR2RKTW5SUE5FTkRiRWs0YVZsUmRrVkVLMVp1WjBOa2IxVjRjVFZxUm01S2FrUndSVll2TXpkQ09YQlBNWFpJTVdWS05sUXhNa1UxVG10UEwybDFOWHBHZGpCTE5FTjNRa1JQUVdSTVUxSnpSa1ZQTmt4VWEyOTZVVTlwTVRSaFJYVTJSVVZEVUVOUWVFODBZMHh1YUdRMU1Ua3lVWGs1TXpWNlRIQkVUemx0YjJaWFRHVm1jRTVEVG5WUVYzRnpOVTlsVkhaYWFVRk5Sa05PUXl0TVIxQjVkMmRETUhWQ1RrTlVLeXMwV0dNNWVtbDJZMFpXZG1WVlFVSlRiVkExVDFOdmNFbDZTbmx0Y0daTGF6QjBhbUZVSzJwMFUwRldTbU0zUzAxUlFUQm9TV1ZEVVdwNVNtUnVWa1YyTmtGd1FqZFViV3BwWVZWT1NGUndPVzkxYTJrek9GbzBVU3RRZVdvd1pFZE1SMloyVm1aaE4zWmpaM2t2ZERGSWN5OVNOVVEyV21OeVMyTkZZVXRqZFZKd2IzSlJPREZtUTBwcGFHTnZPRVJJVEdSelIwTnRPV3BPVnpnMFdXNTROVU0zYzFvM1psazFRazVhTlZScmFXZGFWRTVYTmpaaVRuZFZSVTFXWmtrNFRIb3plbkpMUldjMU9XNDRVbG9yZVZaSFYybEhhMDlEWTBaWlZqQmhRelpYWVZSQlVIZ3pNVFl4TTJWeE9WQlpRbGw0VGpseFVtZDNLMHd5UmtWYVkwcDNXVFJ3VjFwUlFtUkpNbVl4TDFSWFFrc3JZekpOVFROclpYTmhXVEIzVlUxUVIwUm1USGgwYlVFek9GUnZXRkZZUTB0TUwwNHJNWGxXUTFNNGFqaG9ObVpSUlVWV0swTnZhWHBqZVZWRWNDOWlheTlPUmxZNVdVbGhhallyUkhCSlNFWTJZek5DUVhoa04wbFFVREp6TlVGamFEaDBPVmM1WkVVMVRscFBVSFJ6UkcxamVuWXlWbTl5WkV0aVFtcGhhMUZsWVUwMk1UUnhSVWh6VFdWeE5FUmtXSEF4UzBkUU1ERkxaMGRGUTFCQ1kzQkNNM055TjFGVFdIQlZWR05LYUdaNFRWaFpOa3hSYW1GbFpIbFlTamxCT0ZkcGExUllXVUZtZVd3dmJVUkxVRVZVYmxwaWQyTmlkblZxUTFsUFkySlhWR000Uld4dldWTjJSRk50YUU4eWRTOTZkMFpCZEhKUmVVeHphMkp6WVc5eWFrRXdOekpRZWxaQ01VNWpWREo1ZWxwdE9WSXZlSFY1U21keGRWVnRkbmhMYzFBelRHOWtRbTluU1U1bFdtMW1NRkJoVjB4RmNXSkpiRFp4VWpWclJFcDJZV1JPTjI5TVNEUnVTemRyVnpob2FDc3hRa1ZrUnprMFJXbFdObk5JZEM4cmFsSnJlRWd6Y2sxbmNISkJhRFZQTHpSTWVHRk9aazlvUnk5dk9IRTNXbFpPZEV0MVpHeEdTbkV5YUZsV2VTODJPVEZXY1VsTGFtRTFMMWxDT0Zwa1ZuRklXR3BLZDJSVVN6UnpVelZ3T0ZKb2JHSjZjamhHWjNBeGMyWnlaMjUzYTNWeGJ6bE9WRGRvVmxsRWFFcGlablppVjJoME1sQkxOM0V3UVV0Tk56RndhVkY2YUVWeE5GcFVTbTlwVW5oSFZGRXhaazlqWWtwblJUVnNSSGs1ZVNzeVpGQk9UeTh3U1ZwcU1XRTFlVlJxYWs1MVYySkJhM0ZKUTJONFVHbDRXRzh2SzNVMVRXNUdXVmN2TVZrdmVXMXlTMUJQTVN0eFJUSTRjWGM0Vms5NldUWm1VVGx4YUdkMFpIaFpNMkZCYVZOd09VTlJPRFJSVG05cFRISktOR2MxZW5WaVoyZG5lbUU0Y1RGR1JWUnNNamxrV0M5YWVFeEdWVzVuWkdweVUyWm5OQzlOVHl0SmVqTTRXbGx6VUZBMldYVXhVVVpKUjJwUVRHOWlWbEZzY0dSRmJuSXphelpXV0RSb1FrSk9RbUpDYmxZeVFuTXJjbkpXVWxFemNWcE9URzkyY1ROTFdWTk1VMHBMTVU1QlpVUklMeTl0WlhkblMwRllTRWRCYjB0VFlraHhlR3BIT0dvNWVqWlJabEZzU214S09FZFFWbWczVWpCeFEwWjFaakJPVW1wTmVWbFpTVEJUWlVRdmVYVlVOVGhVYW5OVVFqbFRMMVo1ZVRCcmRYSnNRVUp6VjJOSlZYUnJlRWs0U21aSmJWUTJSekJNZFRkSGJHWjVZVGs0UzBWa0wyeEdkalpRTVRSNFJFOVZaMUI1V25GbGVIUXJTRGxGYm1GTlN6SXpSaloxT0VreWMxVXlVMEZzVlN0emFXWjNjSEJCWjNKRlJVZ3JPVnBZZG1oSFFUVm1aR2cyVTBsV1FVOURNa2RHTkRaRE1sTlJURUphTURFMFREbEhTeloxYVVWdFYwSnRXR05OZGxNM1ZFTjBiMFU1VTI1cVQyeEhTVVJ0VFhsRlQybE1kMkZUZVVwMFZEaGhZbEJJZFROeU4yNWpOVkpJUW5selptaHNhRTB4Wms5V1FUWXZjVmt2ZFZneVpXMXhka3RtYjFVeFpWcDVabmhLVDNsRVFYb3pTbEE0TDFWblFWbHlVVXN3T0ZVeE5tMVViSE5rZDNvMFRXMTJhVGs0V2xKWlEzWjVObHAxUzJKVFdYQkhNWFp2YTJ4bGQyOUpSRTA1Y1hOelIwNDFiVTV0Wm5ScGFrMWtjRzAxVjJKa1RDdHpOa0Y1VUhseWFUaGxWVEJNY3lzNVMyNXhTVVpTY1N0YWJuTXlTa3g0ZEhoWFduWm9jRTlLUlZoWFZFVlZLMUpzWjNrelVsaFdiM2Q1Vkc1TmJrZ3lNV2hrVkV4dllqWlJkbmhDZW5wNE1HczBaVWhQUVZoeVMxbHVhVEJtYzJScU5YVktNSGRKU2tSNVZTOUtXR3RPWVRSeVJuWnhiMWhQUWtkUlFtMVhkRTlGU2xaUVQxTTVkSFo0TW1OdVl6RkxOMU5RY0dGelduVnVRbmRsTHpsQldFSkZObFF6THl0S1prSklibUY2YTNaMWJqWnZjalkzTUhKUlZUaElXa05zZDJVMlluUmhla2hZVXpKaWJ6WkRiV2RLYzJRNU4zRnFSekptYjFoaVUwaFhhWFkxVGprNVowdDZaREJvU25OWlZsb3djVmw0YjB3MlNIUnpNWEZ3VURoNFJtVkpLMFZxYVdFelJFNDBTMmxUWkU5RVFtOHdSRVJ4WVhVNFVsWjRMMmxzU1c0MmEySk5VRmcxYldwWGVYbFlOR1k1YUVWd1prZFhkbVV4VEhBeFQyeHZXVEV5Tm1rd0t6WmlWa05pVFhCQ05IbGtkVGRTWldNcmNrUjNTblF4TlZCM1EwSlZZbTVGZFUxM2VEQk5XR3d6VFdsRFptOWFkSFZIWVVrclp6VTRkRVZ1VEVkM05rMWxiR2xtZEZsRmJHRnJObTlaU1dsaU5WZFRSSEJwYzFCd01EbG9TaXRQV1RKR1UxRlFja2hTV1hkV2FGa3JUMmMxV1N0S01VMUtibEZGT1VwTVkyZHZkVUZaYkVaaVRVOW9aRWsyZGtoVmVHcEJOVXBzYzBob1Ztb3pTMUY2YVVkeWFUVlhkWGxoVms1WU9XOUVkRTQyZHpaNmFuWmFlVzgyV2pSVWRHWlVhbk5KWlVZck1VaE9RekF6VDAwMFJXRldjek50Y0RCSk9XZGFVV0ZJZEdwQ01rUnNXakp5YjBwMVkyUXZWR2g2WTJKWksyeEJVMGd2VEZwR1FpdGtiams0UFEuRGs0TUVIaWd4eXdFd3I0OGNwR0MtRThwNW9vRTJRZU1HN2IxbFlkMEoyTUtuQjJPc2xjMGZBOWVLUGxmTFZuRC04dVROQWxONWY3TGRsenI1LS1ZWEE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:40,966 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:34:55 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:34:54 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:34:54 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=B52D3A5D8541A366F4F50CA6C73D7D2C; Path=/; HttpOnly')]
2020-05-21 13:33:40,966 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:40,966 unittesttestcase.py[line: 46] INFO: 要匹配的模式（成员）为："success"
2020-05-21 13:33:40,995 testcase.py[line: 158] ERROR: 步骤[1]执行出错,停止执行用例[id=19, name=盲板管理]
2020-05-21 13:33:40,996 testcase.py[line: 165] INFO: 正在更新步骤执行结果
2020-05-21 13:33:40,996 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\project\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 74, in test_interface_of_urlencode    self.assert_result(body)  File E:\project\interface_project_for_dev\unittesttestcase.py, line 47, in assert_result    self.assertIn (member, response_to_check,msg=item[消息])KeyError: 消息", protocol_method="get", runtime="2020-05-21 13:33:40",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="{'检查': 'body', '匹配规则': '包含成员', '条件': [{'模式': ''success''}]}" WHERE executed_history_id = 20200521133340 AND testcase_id = 19 AND step_id = 26 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00' 
2020-05-21 13:33:41,042 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:41,042 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2020-05-21 13:33:40", case_exec_history_id="20200521133340" WHERE executed_history_id = 20200521133337 AND testcase_id = 19 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:41,286 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=19]的执行结果
2020-05-21 13:33:41,651 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-2', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:06:43', 'importance': '2', 'modification_ts': '2020-05-20 09:09:50', 'name': '作业预约', 'is_open': '1', 'node_order': '2', 'execution_type': '1', 'id': '10', 'testcase_id': '9', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '2', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '21', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:41,784 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:41,784 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 9, '作业预约', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-2')
2020-05-21 13:33:41,818 testplan.py[line: 76] INFO: 开始执行测试用例[id=9，name=作业预约]
2020-05-21 13:33:41,818 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:41,819 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:41,819 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:41,819 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133341', 9, '作业预约', 'pan1_of_cq', '长庆项目演示', 21, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:41,849 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:41,849 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:41,849 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:41,850 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:41,850 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:41,850 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:41,850 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:41,851 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:42,204 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:42,204 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-52-avfhnwdSrrUL34o216TqvOzUSNHcqY-passport.51gxc.com" />
            <input type="hidden" name="execution" value="e8b2fc3b-e3e0-4def-b6a6-379289fd0fc1_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTDJoellucFRWVE1yWlVRdmJrTlRRMkZZU21VemFqbHhlbWxPWldkbU5EVjRTazRyVEdjd2NFbFNVRFJ3VXpSM1UybFRPVE51UjBwMWFVbDZWVUk1TjBwRGEwZGpVMGg0WkVKeUwzUmhSRkZUVTJsQmFYRnBjRXRpYkc0dk1FMVhUVUkzTmxaRGFuUldZbU5aVVVoT2MwMXNPR2wzYUV0Q1VVRkhWVkpUTVc1bVduRnRUakZOYmpCWldHTk1URXcxVlZCYWJuVkNWRkpTWkhWdE4xRTBiamgxT0VOb1pFMWtTVlo1VVM5cGFuQXZZVlF2WVZkbWVXTndSVWhHVm5KV05WVjBWRWRYVFRobVVtUlVUWEpGV0ZoelIwbE9VSE5TVjNkalEyUjBORU5RTUUxbGQyeElNbWxxZEhRdlZWQjRkM05PY21SaFYyWmhTSHBSZUZvMVJEaFhablF4T1VoaVIwdzJTVU5RVkVGT2VXSk9RVmhZYmsxbVQzWXpZWGtyUmxGaE9TOHZhbkZsY210WWF6RXZTMVp0UVdSYVVITkhVRTlCTUhsMFQxRnNkMnBxWlhaVE4ybFBTelZCZFhCTU56RnFURTFCY0hKSVJUSTRjRGgxYWpGdFZXczBMek5WVG05NU1saHllWFJKVnk5T05tZDVlRWw1UTJGR09GRmtNRFJVZVROUWFYWk5UMDlOVTJjMFdtUkpaMmQ0Y0V0UEsydDVaSEI2WkdkUmNsZFNVRWRLWkdKTmMxQjFWbW96SzBwbk5razFabVl4UkhoMFpEaE9kV2RKUkdwWVMwZHFUVEowVUVsb2NGUlhabllyZW1ocFdqbE5XRW8yWVhWU2JFUXJkMkYyYVRad1VubGhWM3B5Um1KS1dWaE5TR00zY21wemMwcERZelp1YURaT1NYVlVVREpZVDNoalEycERkRFZ5ZFVrd2MyMVViRXMxUTNadVMxVXZWMUZuY1ZSUllUVm5kbmN4V0V0eE4zaG1kazUxYzJ4UlpGVnBWR2RtYkhoSVUxWnliSFp4VWs1YU5XNVphbEJ0U0ZRNWVrZEpWa3R2Tm5Ka1MwUjFTQ3N2ZUhSV1JFVlljRzlVY21OS2FtSm1hVzVpVW5wME1XOUhPRWhHZFZOVlozWXdVbWRNTW5OWWNtUXdWMHBuTlZsWVFsTkJhekI1SzJ0elIzQnZUMDQwT0hsNEwxbFhhemx5T1dwalVGWXpRakJrTVhNNE1GcFFPVTlsWVhCMFFuRm1WR3AwYjFCQldtRnZVRWR0U1dkNGJFRndMekJFWkRKWk9YTjFObGhoVUROVlZuWnZUVTB3UVhkTFpWZFROWEZsU1dZM1JFWldhRTVDU1dKaFlrTTVTbEYwV2s5UU5GYzVWWGs1TlVsb2RqaFhjVVp6ZFZSa1YzcEZaazUxTmtGUWMzQklOSEF2YnpkbVdUTkpLMWRIWlVOdlJISXpUV3BtY3pRcmFXRnpTazkxWlUxcU1FWnhlWHBDUTNGYVdFcEpObFJoWlRGVFYyaDVNVGxRVldGdlZXdEpjeTkzZHpCQ2JHaEVNemx6YlRkMmJURXZObXB3WlZrd1MwTllNSFJYSzNjNVZtVTBZbFV3TUc0emEwWlJNRU5RVEdOd1ZUVlRMM2xFU1RFMGNHVlFVRWhaTVdkWmVHeFpUMHB6UVRORVRISlJZbFo0YVRnMldsaHpkamhVYjBOQlRqaDNNRXBHUW1sUmNIbzFaM2RuT0VKRloxcHFaRWhOUW14dWQyZ3dkakJ2U21ScGJGRTRWREJtVmtKQk9GTkVNbFJXU2sxb05URXdjRXMyV21OYWNuZHZiblZxWkZoU2JGVnpPRVJNUzJVdlIyRk5VV1prU1VoR2MxTlFWMUpWVlM5VGEyeDBaMHhyWm1Vd2VXNVlablZaU0RWd1RrazFWSEVyTDJWbWJIbzVUR2t5UjBkR01tUjRkMGg2VDJKdGVUaDFXRlZsVkhRNFJVVnViMUpSUjFSSVQyTjZWR1pxWjNwcVVXTlRaRUZtTlZaTGVFWnNNMDl2U2s5blVXeFpXVTl6SzFsbVVpOWhkbWR6TlVseVFYcElWME5oVEdjemNrVlRVSFpGTjJ0M2RUUklUMEZTYkRoMFZrOWtNSFZqU21GWlNVY3hSRkpVY0RCMlNrUTJZamx5VFRkSVVFVnBNVVkwT1c5Q1RtWmhOR0ZLWld0RVN6Y3ZObFF6YkZZemFsQjJkelpJY1V0amVqVnBZamhYVWtSeGVtcDRVM0pYTjJSTmVXdzJlV0pIYTJWdGJVcHJVM2xpVGs1NEsySkRjV1JGYURnNWR6aFJZMW94ZEVWWU9HTnlhWEpOV0VZM0swbERNRmhRZG5aR1dqbFJOVmd6TjNCRVlrdEplRk5WYjNKaFNqZFlUVlI0TVUxeVlXMVRUbll2WVUwNFIwTmpiV0pVT0RKdlUxRlBUamxvWkUxeldtaHBhVVJCWm1OeFFVSnlObFJLUTNST01uVTFPRWgyZUdWSVNHMHZRbnBrV1RNdlUzTnRhVTFMZGpsVlFWSm9ZVEJUZG1GWGJqTnJaV2RrTjNvNFZFUXJNSEF4YW1OMEt6WTBOVGt6VlhWalNsQjFNMnBzY1VoSFkzcHhLMlpMYTNkdlYwcG9OazFoTWpSV1NHWTRSR3RPZEdkbk0zRTNaakppV2tJMVJqWlRXRU5QTVd4WlJYVlZOM0ZUU0ZCeWFVZzFUMWd2VFdabVRqRllibTlxYm1sR2NEZGhSelpQSzJNMUwwcG5SRmdyVmtzclIxQjNNM0JxTmxCNldUVmtOMnRSTW5ORFVXRlNZMFpSTW1kM2FFb3JjbVJGVm5KdlNUWk9hVXBuYTNNeE5uSjZlRVJ6VG10WGNDdEpSM2RuYjJORWRHdHRVVWRZUXpRclFsWlhUMmhuY1RZME5uVmxVbmxxWlRocU0wbGhTRVZGTmpoYU16UjNhRlowVm5keFNDODVWRk16V21vM2JUQlBSMDFoYkZSbFNGVnZLMkZtYzFWS05XUTNPVFF5U2pWclR6bHBabEo2ZG5kaGMyeFZVVlJ3Y0cxa1NDOHZjWG8zWTI1MVkwWkpVVzlWZWtKSFMzbG1aMVZKWVV4VWJVTmlOSGxRUkVSYU0xSnlLMWxCVFdGeFlucHRhV2NyTVhSWWRFbE9WMmxZTWs1UFVHeHdNWFp3YkhsUU1IcHdTSE5pWTB0TVduTlBhMVZSZEdacWRuRkRaRWxpV0ZGbVFVTlphRzVVTWpkSlZVOHdNemxXT1RWd01XdDNZMFpLYTBoek1GaHVRVXR2V1RCUFRXTXpkVXhsYjFGdFdXbHZNek13YzFCcWJHSTBkVFpMZEdFMmFrSnhVWGMyZVVJeWIxSTFVMVpKVGxGU01GZEtRaTkwU0ZacFRUZDZUR2R1WkdseVlrSmtSVmRpTDB0VWRqWjVaM1ptYzFKbWNsUnBUbmRhU1ZWQmNHTk1jV3hxVFVoRE56WklUV3BFYWpGT04wVnBjSE5pUjB0WlVXMWhaVUl3SzJSSFVsRkdNbVZ1YkZSU2VVaEdOa1ZsVkVFdmRrTXlRUzh6WmtWVlNsQkRRbEZQUjBkeGFYcGhhRGxoYmtOTFZrTllVbVpTTDJ0bVVFNXRkVm92S3k5TmMweHhVMkZDVVcxNmQyTXJlV3R3ZFc1a1p6SjZMemMwVUZneEwzZFNaWFphU2pBdk5uQTROVVExUzBFclFUY3ZWRWM1WTBkSk5tZHVSblZIWVVGNGNrdEtla1ptYVdGMEwyUnRUR293TTNSQlR6ZDFaVmxrUWtkT09IQmlMemg2V0RoRlV5OUZNRmhJVlVKTVUybHpLemxLTVdocWFrUlRRMnBPTTNNclpWcFlSU3RaYm1kSVpFWTNXRzFDYldGTmNWTm9ZVEo2Wm1GcFVVTnRhbk0zWTNKa2RYSTNaVlJtZDBGQk5Ua3JhMGR3ZWpKVU16TjVUMlJTTkZOeGVVbzJkSGhpZEZJMVdIWXpLMGd2WW1seVRHSmtTMk5EVjFkclZtTkZjamh4YURCWk1UTnVaRGRKUW5FM2VrbDBLMGhNUVZOVmNVUm1WMHhVUlRnM1ZXVkxiWE5NSzBWQ1ZrTlVVQzlDU1UxeU1VczRkVlp0UWxKVE1HeGlRVFJwVDJseE0weHJNWFZ3ZEdGRlpTdG9PSEo1VG1jNGVEZE9VV3hTWWtwM2VUbDRVbms0YVVoU056SnJTelJrUmpSc1QxcFJRall5Y0N0Rk9WcEVWMHcyZEVJM00xQldZbWhCZUhwMWFVVlpTMjVXWkhkV1NESmtXRVZLUWs1MmRtcENZakpFUVdVMFNVVllSRGxVYjA1U2VHZHJjVXAwV0dwWmFtZHVOSGxMYlhSNlNXdFFiRVpJYWxaeWJVdG1ORkJHYUU1VVVVbFVTbVpzWlc4M1JqRkdTM0kzTkhwbVEzbElkMWxLVmxsa2RrOTNSbHB6VDBjNWNHWXlSSHBxTjNJNGQyOUdhVlJOYzFKeVJEUm9LMjA1Y2pobmJGRXpjMDV3UkhGalVsbHROMnBwTDBwUGRHeENMM0ZoTDA5bGJVaFJNSFUxTDA0eFUyUnBkV2MwZVZJMFVtRnZOWFpoY1hOeVkweG5PRzVqVkVsV2VHbDBNVVlyVEZSNFJsSlpWbFZDTTB4a1NFeDZTbEVyVFVGMFdXVlNUMFp2ZEZSclFXOWpTSGhDTUV0SGFFbHpVQ3RYVW5Kb2EwRnVOVlphWlUxUVYwVnJTSE5xYldrelZsWlFMelJ5WWswMU9VaDNhekV6YTBONGRYTkdSMlJLYm5JdlNsTlpiMWh2YlV0VFIycHJZVGxwY0hFcmRYWm5jV3RTTHpKdmJITlBNMEpIVTFKR1ZIa3hVWFVyVm1seVJHaEJhV2hyY0ZZMU5GVldWbXh2TDBkQmFrUTFjRE5DUVROYWEweEZSVmMyYVdabmJUbElVR1pLTW0xbmVXaFNjR3ByWjNoeVVXVkZUbU51TkhWbGFqRmhURk41YmpWMmVuVTRhbXB6TDNkeldrczVPR05KV1hOWGVWbzViV1pQUWtsVFZFTnNjemh0T1cwNU1VTXhWRVp1WW1WRmVGaGlhVXRDY0hGeWVXMTNUMFpLZUVSd01IWTBlazVWSzB4UlpGWnRNR016YkRadU4wWkhkMmR3VkZZNE5TdGxRVTE0UVdnd1MycDRNemNyWm10Q05XVmpjMWhLYzBsaVpWQkdLM2RPVURWRlVreDROelZXVWxCSFkwUllaSFJ0Vlc1QmNVSjFXbWRyV1hGcE5VdGhZMnB1WVV4aVZHNDJTbkphU2pWWE1ITktTa1Z0Wm1Ga1VteDFWV3h5T0hvd1pWbDJTWFV4YVhSTmNWTXZTak01VGtKa1pVNHJiWFp2VWxsWlpGUkZielV3UFEuaXFhcnNaTXhoQmZsUnVWQkRfT2Z3ZFhudm9NT21qSUJ6cmNrOGRITTczSnN6c2RsUm9CWEZUWWN6aV9Hb2FhT04wa3V4eFZ2bVNDSjVSZXB5ekpsZHc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:42,205 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:34:56 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:34:56 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:34:56 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=79401DA5CFD8FA4FF39B8CAF9675CCD5; Path=/; HttpOnly')]
2020-05-21 13:33:42,205 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:42,206 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:42,206 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:41",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133341 AND testcase_id = 9 AND step_id = 21 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:42,245 testcase.py[line: 205] INFO: 测试用例[id=9, name=作业预约]执行成功
2020-05-21 13:33:42,245 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:42,245 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:41", case_exec_history_id="20200521133341" WHERE executed_history_id = 20200521133337 AND testcase_id = 9 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:42,419 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=9]的执行结果
2020-05-21 13:33:42,733 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'updater_id': '1', 'full_tc_external_id': 'cq-1', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-15 08:13:20', 'importance': '2', 'modification_ts': '2020-05-20 09:06:57', 'name': '作业配置', 'is_open': '1', 'node_order': '1', 'execution_type': '1', 'id': '7', 'testcase_id': '6', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '1', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '8', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:42,879 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:42,879 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-21 13:33:42,892 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-21 13:33:42,892 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:42,892 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:42,893 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:42,893 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133342', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:42,904 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:42,905 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:42,905 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:42,905 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:42,905 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:42,906 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:42,906 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:42,906 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:43,266 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:43,267 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-53-33lrp54he9rFcjfH6OOLPiKa3oyHr9-passport.51gxc.com" />
            <input type="hidden" name="execution" value="81d6b333-581f-4ee8-aeb1-8a356592c428_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTTFOT1UyRlFRVkF4Wkhsb0swaEZUVFJ6VFROb2JWQmtZVGw0VGpCS2MwaENPV05wWkZaNFVGTk1lRUZ0WjBjNGFrRllaRVVyS3pKNlEweDJkR3hpY0ZKaVZHUjFNMk0wUVdSV1UzcHVaMlkxVlU5R1dUZ3dkRWMxVlRKUmJsUjBTMDAwYURoU1lrc3JVM2hSWTFneWVUaHZlRE5HVVRkbFRXeFhUMHBMUlhGQk9IWnJRMVZqTVd4clZYZHlSbFUxZGpCdFNGUjNXblE1YjNSSWEzQlVVVkJZZERkTFpuQklOMlpsUlROamVVRldORWgxVFU1Rk9HVllXakJvV2sxM2JrWmlXbWRuVkN0ME1VaFNhVEZUV1dSdGJUWmlaakZpU0VwM1JucGFOM0JuYW14MU4wcHhhblJwU0dwM1VYSnJNbVpKU21sSE0yWTVja2xxVFVnMGVEaFBZVXhzUjJWU2QwUjBaV2RHUW05bk9VRlRVMXB5UjBONldtNW9iVmxPTTNkVFJ5dFNUMmM0V1VoU05EbDVkRmRNZFVkUVlVeHRaa05HYmtOV1ZYYzNSVlpIUm1SRE9IWmlhVXRXZEZGWWFFRmlWbUU1T1ZadldIUmFlVWxrY3paQk1HTnVWMUpDYkRGak1qa3hXVXAxYW1kblNFZDZSMkpxVmpadFYyaGlaazgyWTA1R05qaGFkWFY0UzNKR1drTmFlWHBJUlVWb1dtaFBPVFZIZEZCcWRFNUxZVGRaZEhSdFp6Um9NMHN3VVhGSVRteExPVkZqUWt4TFRGTm9iRWh5ZUVwclEyZFJkWFJPV1VGWmIxVlRMMnhQZFcxMVV6TjZkSFp1YnpNd01YQXpOMWRGVVZkVVJrUXpaMHRaVkVKb1RFSlNWUzk0VkdsUlZERkhWR1F3ZG5ZMWVXNVZiM1JuT0VOWFNXWndaRXcwV1ZVek9UTXdVVEJUVnpsVGVEVm1PRUZsY2xwVWNrOXJWMDQxYTI1dGJYQTNRa2c1UVhBeFZYZDFUa2RVWkZsTGFuWkViSFpWYWpFM2RqQTNWVEpvZERNNGJYVlZaMDkyTnpCeU4wZHpRM0J5WkZGeVRuWjRRWFZMUVhCR1lWUjFjbU5tTTBOc1JXUkdRbUp6YTI5b1NVcGhPRFJQVkRSTk4wVnlla3RrWnk5VVZuWkVaVnBtVDJ4bFJHaDFjRWwyUkVnelZHUktSazFZSzFZeWMySk9iRTQyTUhRMlJrMDFlVlZLVVdNMlZEZGxORk5LWlhnME1UZEtPV2RwWlRBNGN6RXpXa1U1Tm1OdE5EZFFRbk5KTjJONllYTm5kRVkyVG5FeFZpc3dWamhJZFdkNGF6ZEpOMFJuZDBObVJFeEliRE5yUTBSb1RqVlZUbUl6UVdSQ1VHcGhibkV6ZVZad2EwZE5hWE16ZHpkS01FTktVVmczTldGd2VrbFBPWEZqSzFwR2NGaDNjbWxPWkU5cVpVTndWblZMVm5rd2FUUk1kVGcyWjNnNVQybFJNbkZaZDNNMGMzTXlOMFFyV0hwNGJYVmpaVGxOWlZob1lUWmthMlJaYmxKM0x6aHNUMlpwVFhKeGFFcHRPRFZJZVZWTGMwRnliMEpIY1dKNlExSm9hbmRXWkcxcGFURnFha293TDBGQmFqbElLM0pyYjJGVlQwcE1UM013VjNremJXNXFkME54Tm14NmRWWnRRbFpqZGxWQksyTm5PVUlyVEd3MFpqTjJVVTFHVURGUWVVSmljWGhxYjI5blNHTTBiVVV6TDFWWldVZFBTbk5KVXpobWEwdG5RbWR6VUhSWFFUYzRZbWMzWkZGMWNsVmhlV042TlhCNFprcEVVSFJhVkUxMmIyNVFiMWMzYTNwWk5EQkhka2R4UW1kcFVWZFVNVmx6TWtoTVZXOVhiRWxUUjNGR1ZIaDJXbVl6UnpOSE9YUnZabXBVUVhOTmRrTTRjSGxYYjFRek1FbEtXamhCYnl0MVEyaHlaWEk0YlZGa2VuWjZOMEpCUVZKR1pUVnBhMDl1U2k5M1pUTXZUMHRtVFVaSGVucHlSRTR4U1V0eVkyMUlXRlJoVjNkUGFURklaMlJoZVRaSVVFOXZkMEpHUVdKMVVVRTRhSFUyV0RGclluQkNXSGRKVm5jemNYaG1jMjFpVlhFdlpXYzJaMGsxZUVwd1RtaDJVWEV4V1hWMlpHaEJUamRGVGtObFNIbEpkRmgwVVVsVU5YZzRiRUY1ZWtkbVZIWXhWMGRETmtONmNIRlRMMlE0Ym1admJXcG1USFJrSzFKdGVtWjRWRVJoVUdkNVYxZHJLMFJGUTB4NWJEWTNTRUZ3U0c1UVJVOWtkMWw0YlUxUWJYSkxRM1Z6VnpFMmVGbElPRkZET0VwQ2RWTXJaR0Z5ZGt0VlFtOWlXR2xsZDFCalUweENNRU5hZUdwT1QxSTJVMUpWUVRJeGNuZHFjR1pHUm1OVksxRlBTVVJUUXpKS2MxQllWbFkxTlc5SGFFWjBVVWhOVVd3NVltbE1WMjVHWTA1R2RHaG9kSE5FUTFWM1EyTXdNamxRVkhsM1IzZG1TRlIzVkVoT1lsbDNNa05JTVZVdllVaE9aazlIYnpaMWJYbzFVV3d3ZFZRNVRFWnZkV1JKYVhaNU5HaE5iakZSVjJaSmJHZ3dXSFpDVm10c1VWcEVTemRaY1dWTlozVnlhbXhPYjFGd1ZIVXhabVJyYlRWdEwybHhTa2d5YnpWU0wwdDBaRlUyYUVKRmFWUnNURXRPVkVNMVIySk1lVFZ2WlZwSU9WTmtVM2hNWlRSM1ZIRmxSR1ZIWjNKMGQxVmlTRzFGZDNaT2EwWkRXRWh0VWtkT1psZFlWV0ZOTUVGc1YyaEZSM2N5Y0VoTGIzWmhMMFJWTjFsNWJsbDVkVWhUU21RM1owTlNSRFUwVW1sWE1XdEtSRXhMU1dWT00yTndVSGx2U1dobFZsUllZamQ2TTFGTFFYQkRkbWhOYTJNd2JWSktjRVp5UTBrclFtaHplWFoxTkROa01IaEpjMkZ5TDNNdmFGQnNlSEUzTTNGSVFUUkNkR3hqWVhkaVoya3pPVWxKY0hsMllrUXphVlpCVUZsbVYyVnRlR05tVW14TFlscEdVakE0U21oWlowODRReXRNZVVkNWQweEdkRmhIZDBGSVRYVmxWMUpzVWxkQ1ZsZ3lVM0J5UVdkelFsTkRRMUZXU2pSSmVuTllhV3BOWjJodmQzbENiVlZzWTJSYVNtRTRTRGRMUmtVdmRrMTROWEYwY2twTk1YbzFSWEJJY2tWRlEwbHBUek5HU1RNNGVrUmxka3M0T0RsMGEyZE1NekJTTUcwNVZ6aHJaMmRLTTNsc2FEQkJiblZFT0c1bVVFRkVORzlDYWs1WU9XWm5NMVV5YVZoSWFIbGhNVkJQTkdkbFNYQTRWa0pGVTJSR1NUUmthbGRDWmxScU5FeHFNRUZhUVV3MmJtRk1TMjluYTFobk5HOXlNR3d3TjFSUVpqUnhlR2RhY21aUVZXNHhlVWt4TXpCMkwwRm1UR1E1VWpkVGNuUkZMMHRQU2xkVVN5dGFjbTVQU1c4eVN6WlZRM1F3WVVZclZGbERiekZXYzBoT2RtMW5jM1pEVkhKMFpteElSVGd3YUZGTFlVeHJRa0V4ZVRWM1JrVlZTRFY2TTA1eU1WQTNXak5LY0RodVFsRTJaVXhYTURWU1FVeE1ka2gxYUZSUVptVjRTR000VDFWaWNtWkJhWGhaV1VsblMyNWxTa2x3YjJsWFVqZGtZVU5LVGtwVE9FTklaRFJqV1RaeVZrc3phMjlhVEZvM1VuRkZXWFpPYjB4alZrRmhUbVYyZVVOMVNIRjViWGs0VUM5NFkydFdTMEpWT0RWbmFTdENiR3RNVFd0VmRXaEtXblUzWjNSMlZVOXJZVWxPTjNRMlpsaFROR2gxYmxGVmVrcENPVnA1TkVNelNVZGxWMmhNU2xNMVoydE9kVmsxWjFOTFdGRmhPQzlCZUdrdlJscElRblJpY1dobVZHaEpWakZvVVVwaWIzZDRha2hCTWxGT1pWZzJlakJwYVRSVFpFMURObkZ5YTNKSVNGVkRObnB1UXk5YVEyeHFUbHBRWldGdlJIaE5SWFZ2UlRKSWNtcDFSVXBKUTNsUFRuTmFWRlZ5VkN0RWVXcFRPRmRaVEhkbGVISmhRM04xU3pWVVpIQm5hRXRMWVROaWNtc3pTVlIxVjNjMVYweG9SU3MwUVdkcWRrbHJXRXBtY20xT1RYcFJPVzV3SzBSWlpuWk1VMHAwV1dwblQyWkRWazltVjNVeFNVUllSSFkyTkRWTGFrTXpOV3BhU0V4M01tdERVRTVSUkhkd1pFcDBiRGRMWVdaME9GWnNWMHR5Y1VGemIwODBRWGxwTTBkcFpUUjNhV2hEYzJaRWJITTVNR1l5UkRSUmJDOUpaVGxNVFdkQ1RrTkVOVTFUZEhVemREQm1OMkZHZUZKTlpVdDFMMjlTU21sdVkyVjJkblV5ZEZGWFVrdHJlRE13U2tZeU1sWk5jVTl2Y1ZOamRpOWhWV28xYVdkamJGSjRhWFp3TDA4eVJuQTJSVUpMWm1kdVMzVlRWVGxaYWxKalpHVjZabFZRYWxwb1JYbzFWMGx6UzNOM0syVktWbkJqVUhKdGFHVjNPVkpHZDBwbWFVUlVNekJ4YlRGdFlqVlliVk16Tld0V1ducEpWbnA2UVVjNGRWSktkVTlLU0RoU2FUTkxTVE5tWW5odVRVMUtXRlJ5TXpKSmFGZEJMemxHUkVKbFlVbDVVRU5XT0hKSE9VMXhjMHhVU1d4RGRsbHBSREJrYkcxNE5WaDFhMnBXYlU5emFEZGhOMUo1WVRad1VIUXlRblZNTjBOcmJIWkxkQzl4ZVc5S2FUa3dRV2R2Vm1aQk9ITnVkMkZwTWxobFpHcElWbGhHVGxKaGMxbEhOa2NyUzFaa0sycEVjMXBJUjNwT1EwUjNZakpvTTJKWlYwTnBhR3d4VWt0emNVTk5PRFpUU2xVMVRuaEJWemRUY1ZaSlUwVnBaWEoxYUdFMVFUQTNXVWQyVTJreU1HY3JVWEJzZWtKSE9GQXJkR1J3UmxkdGJXZFVUa1Z5YmpsVVdWWjZaalpETkRWQ1IxQlZXRUp3YTFWV1dsVnZXRVZ4Wm5SNlRHUnJTbmR1Vm1welMwZDFRWEFyZDJoc1FYVjBNUzlUVGxsM01HRnpTM05OVkRrdmJVVlBhMnh0V25GS2VFOTFkelpOWTBodWRFdDRielZYYTJOeGRVMWpSV0ZDYUhWRWVqVnJWemhaV1dWV1VVeEZVVzVPYmt0RFFtbzViVU5ZYkhJMGFrTmFObkZSYm5sUFIwZFFiMWx0WTFwYVJGaDRZWEp6YjBacFJXeEVkSFpKUFEuVUZqdm9wNGhBYWFSakI3QXpEZ1RpV3JrZ1lKa3k4S1Z6VGZHUjdvbGg4MU12Y1Rob1JadHpPWjZqVHVWc0dZV0JRVi1tQ1lnamN3WThqeDJFcHdkbFE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:43,268 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:34:57 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:34:57 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:34:57 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=6E6249E1C784CF51754ADA487C78ECC4; Path=/; HttpOnly')]
2020-05-21 13:33:43,268 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:43,268 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:43,269 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:42",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133342 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:43,283 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-21 13:33:43,283 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:43,283 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:42", case_exec_history_id="20200521133342" WHERE executed_history_id = 20200521133337 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:43,450 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-21 13:33:43,779 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-6', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:08:30', 'importance': '2', 'modification_ts': '2020-05-20 09:10:17', 'name': '安全分析', 'is_open': '1', 'node_order': '6', 'execution_type': '1', 'id': '18', 'testcase_id': '17', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '6', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '25', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:43,930 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:43,930 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 17, '安全分析', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-6')
2020-05-21 13:33:43,972 testplan.py[line: 76] INFO: 开始执行测试用例[id=17，name=安全分析]
2020-05-21 13:33:43,973 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:43,973 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:43,974 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:43,974 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133343', 17, '安全分析', 'pan1_of_cq', '长庆项目演示', 25, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:43,998 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:43,999 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:44,000 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:44,000 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:44,000 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:44,001 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:44,002 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:44,002 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:44,424 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:44,425 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-54-bNc0A5GRsa6woy7hA7MRz01ykzRedx-passport.51gxc.com" />
            <input type="hidden" name="execution" value="f4089894-b730-4801-bf58-4c1070b94678_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuYUdkVmFsTnBNRGh1VjBOWlJHbHBNMUYyUjJJMU9HeDFPVVJzTXk4MlJqZGtkbTlvWkhRck5TOXRVVVpqTnpaM2NrUjFkV3BwVlZSaGNIVnlPV3hOY0dGdmVHTk9RMk5yTlhSMk5EUkxaSE01TTNkVWRFZHhhMjFxZURaNVZIbHRVbk5oTWpSeVNDdG1ZbVJaZERaMFRVbEJZbVV6WkRkVWVsVmxjek40Y2poc2NHUm9ORVk1VG0xV09ITmpZakZ6Y0hKTldXcFdNRGR0TlRWNVJIWnFRbU00UTBOTGFWaHJRbE5CUVhocE4wWklPV05LZFdodVVIUXpLeTloVUVocFYxZGtUVGsyUkN0R1dYVjNlVmhhT1ZCekwycFZNbTlwZG10VWVXdHNRV28zVjNkcWRYbFFLM05PUlcxMVRuZDBUVmxOVkRGcWNXSXliRk5JTURGRk1XVnFLM05oV1VkUlMycFZURVE0VldkQk9YcEJReXRWVXpsSFJrUTJWWEZVY1VOMVMxSk5ja3BJY3l0d1JuQmtVbHBzVkdwRVIwbGFUM1JzVGtJeGFHdHVWM0pFWjJGYU5ISlRiVmxQVVd4cmFFbExMMjFMY0VSWVRFOTVOVnBDYkdkdGRYSjRZVmxHY0hweE56SlBaR3hVY21zMVl6QlhNVkZXZEUwMk1YRkNlbGxGT0RCU09HMUJNRTl1UzNOTU9UbHVkRUZtV1U1TlNqVjRTMGhXVVcwNVQzSTBjMk01UTFGblZYWnlRbGwxUjNwbFZtVkhMMmxGUTJsdGNtMVllbHBNVG5KVWJqaFJibXd6VURCRVpIVktaM1JCY0M5SU0yNUJha3RpZFRJMVNXeHBiR05RTlRCQ2JuZHBNMUpMWjJsSVpGTTJTRU4wUjI1UWNIcDJjbEJDY1c5U2IwVkRVazVDZFZwMmVIZHJUREpUYUU5bWJGQTVXRVlyT1U1cmFFTktaM05vTnpKbk5pOVZlbmRtUlZsaFRUSXZTRXhzYm1reVZYaENiVTlLZEVVclNuTTJWVlo1Wm1SYVpqWk1jMWRoTkZWaFRHWTJZV04xWm5wdFF6QllTa1ZEUjJ3emFVVnFWM0EzV0VOWU1ITmFXV2t5VFUxNWNWaDJTSEZPY205NmREVkZPR0pSUmpWa2FsSlFRMGd3VUhFMFFXcGpMMUJ6UTBkTWFVMVVWSGhTTDAxRWMxZGxRbEJFTjFORll6VnJPVkZzVW1SRlRWZEViMHd6V0ZWUVVEUjVSMUpqVkdKUlVsVlNjR3hZV0VjdldqWm1ZV1Z5VG5SdlVGYzViRGRWVGk5blZUVjFXamR2Y2xoM1pteDJXbkF5UlVwTmFqSnZTbWxpYVZSd1ZIWktlVVJHVjNZMVRIbGpkVTR3VkRaVlFWQlhZVUpwWW1SR09HWldaWEJxWkZaRFRWTjZWRzA1WWpkWmRFaDZUa1ozZVhKblNERXJlVWR2VEZKWmJXUlRlWEo1YjNSdWRYVXJTMGdyYUhoYVQwMVhUazExU0dSRU1WSXpXR0pRVkVwNFoxRjRZVTFIVDFNNU1UQnNXbUZwUW0weVVDdHpkRzlpZW5kMk1qRlhTME5uVlhrd2VEWlFjMVk1YTFWWmFteExOSFl2Y2xKdGVHVXliMkpTTmxSb2RtWm9Va2N4T1dONWJrOTZhMmM1TUhsSFNsRktPRzlyVFcxNGFIbE5RVVpTY25CcVZWVnBLM2x4UTFWdk1VMXBhbE5aVFZWdVVIcENTVWRRZEc1YVNFa3pORkpET0hsNWIxZ3plR0k1VHpoM1MzRkZhVVIwVVZOdlYxUTBZM2wwU1VGR2JWWTRTR3d6UzNoSmRrUnpSMVpHTjJGRFRubFNVVk00VFZsQlRVVnZXSE5UVDI1T1EzaHdVMlptWkZod1dsaGxhREZvUm5FdkwyUlJOeXQwTmxwTlJIWk5SakkxZDBVd01FZzJUR1Z3UVZSdFQwMTNhamhFVG1Kb1IzaGFja3hNVVZCRVprWkpPV1paTUdrNFpqWm5NMVZNT0cxc1NtYzRSWGhVUW1OSFkyUXpTMUF2ZFcxVFNsa3dSRnAxY21nMVlsQTFVa1J1UVZBelZFSkZka1J0YmpKdVJHRjRVbVYyY1doRVMwSlZiVmRPWm1ZemIydHRZMmx3UW1sWmRrZGtOVVJ6VWtkNFVIQTNaVXB3UzNCT1MxbFJRMWxoZW1NeE9HSmlaWFpQZVdSRGNtTXlRVEYxVVdsaGIwNU9lRnBuYTFOV1J6WjNhM28wZGt0bmEzZzRjMnQwYTFCQmMxcFdaRk5FVnk5TlZWRklPWGxYVW0xd1dYTldjakpRVkhwVlEySkpUSGsxWjFGUU5UVXpTazFEZFdoaVJrZFZiRGR6UzFsVlpFODROWGhKZWtwRFFXZHFVVU5xU2xKRk1VTnVSVTgwYTJaRE1qQlZOMGRsY3pVd01pc3dOSEZpUldWQ2QwNVFXRlJIU1RCRlVFdEJNRlp4ZEdSdU1qQjFiMjB3V2tJMlpFTkxiRU5uUmtsMFNGSkdaVTV2YjA5SVRteFVTbU14VnpSc2JFVlRTak5CUWs1QlJTdHNZVWRHUWtKSFJ5dG9PVkJ1T0ZkdUwzQlpkbXhvYm5GbVUyOW5kM2czTURZMFEwNDNPR2RIUVhNcmRVRmpSVkpRZVdGa1YwTjNlbGd2YzFZdmJYaEZZekZtWm1GTmRWTnBMMGg1VDB0bFVqWTBjRWxqUVZKVVExa3lhbWRpVkV4SGRqUnllQzh2TlN0V09WQmpka1owWmxoVWRHbzRUVmhRWmpCbU4xZGtWbk5wZFRWTGJITk9OV1JJWTNGVlNXOWxhSE5QY2taQ2RTczNVa2hLTUdWNWNUSnZVbE0zYnpWeVJrb3JSaTkyVldGVk1USldSMlJsVHpWSU4ydExNVFV5Vm1wWWJEaFBSak5vVmpOMVVHZE5hMFJWUlhKUlNUTTRlSHBHVnpGQ05FaGtWbUZEYVcxRWFqVTJXblJqYm5WTGEySjJjblphZG5sTWJXRlRNVlY0TTBwdE5YRm5iVVZJYW1KRFVGbFpTWFJyY1RFelVsb3lVbmM0UWpjM1pYSjVObkpxV0ZSWWFUUnJhMGRyZWtsM1dVY3hVV2xOTDI5dk5VUmlWemxtTldGa2VqTjRVa05oTkdOVVExVm1kSGRQVG0xa1Z6WTBXRlZzYzNKYWRHeFBjQzh4VGpOTllrUmFOSHByWVhncmMwbFBTM2x1TDBOak0wVjBPR2hLUlVWM1RFcFZjblJNVlZobFZtaDZjVmx6U0ZoSGVtWlBhMGxWWjJkQ01FMU1PWFIzWW5OUWFEaDNNRzFOYUhadWMzbENZVlJtWlhsVGRHUlNOVk55YlVrek5FOW9aRmxPT1cwMVNYZzNUR0ZrVVhWUmRqUXhlR3RwYTFaTGVFUmpkekV5YjJWa01HTmxLM1F6ZVVOTWNISlZkWEkwVFVoQ01WaFBTMHQwUm5aVVFXRk9WVU5PYjBWclFXd3ZNbGhPWkVWbk0yWTVjV0ozU1dwQlFWa3JabkJNTlRCdEszVjJhMmh3UzI1dFYxcG5kMGxMVlhOckswd3dVM0ZrUjA1TmNUWlJiMVIzWXpFclJtdFJVaTlDUkhCa1RGQXlkVThyU0dnMVdXMVRiVXBqZGt4bWRVcGFjbXhuT1dSNVVYZEhLMVJKWlZsck9GcFJka0ZFUm1SRk5rb3pNVlpUWjJKYWNscEhNVlExV0Rjd0t6bFlORWRFT0ZWb2VsZHFUbE56UkdocVIyZHVVM2h0UjJFMEx5OWxVbVZtVlhrd1ZFUXhXVVpwUW5saFVWWXpRak5sZDFwRllXUTJjMVpyYm5BMmRUSkRkRmNyWTJaVGVEVkNSR2hvVkZoVlExSTNWR2RzZWpBemNFOXBLM1l2ZFRGeVdXa3ZWV3d2ZG05MlkzVTJaRlUzUkZWM016SXpha2RuVDJ4eWRFTXpZMUJrWldSS1lXaFlhemxCUjJseE4za3liRW80ZVhscVVXeE5SVmhZVjJOVVptUTBNRlF2V1dKb1kyVkVNMU4xWTNWMWJFVjRLM1JTZWtsaldXZEliRUY1WlRRMWNVRTVaSFl3TkVScVdFOVVLelpuWlZkYVUybGtNWEVyZGtGRk1WRk5UQzluVGk5UGJ6UXdlbmxOYlZOWVptVk5VWGMzV0hsNlRYWk1XRWcyS3l0SE9FaFBNMVJGZDFZd05GSldhR1JaTUhGMVNUSkJRbWwwU2s5WFdUVlNOR2RIV21zM1pqaHRTRFkzUkV0TWFsTkdVV3QzT0d3cksxaEJLMEpoZFhJM1dVWkpka2xFZFdKVE5FTTBVbU53Y1dGYU1HSXhkemM0UjBvMlQyVjNVVFZ5ZFM5TlVqRmpjaXR6UXpCalMyNWlUbU52YlVOdFNXaExiakY2TjJSUFVYSTBla2gyUm5wdE1uUmpRazFHYzJOblowRkhNVkJSVG1sWU9UazJaRE13WjB4UFF6SlhRbWRFWkV3NFJtUlNla1ppT1c5RmVGZGthRkpqV1V0cmEya3ZWMEoyYlVwaEt6VlZiV1IwV0dNeFdFMUNZMnRoZDBSaVlURlNhM2swTDFZNGIxQmhha0V5Wkd0eGJFaGtWV05TZUROeFRtMW9aa0pUVDNSaFVuRlpOM0ZNY205S1EyMUNTMkl5Ulhaa1RrMTRaMFFyZURRNE1IaFFWbnBIWW1SaWRsSktVbFp2YURack4wRm5Xa2R0UldoTlJrTkxXVlYyWm5Cc01Ya3djbWxLU1VkWWF6STRhV2R1YUhKdlNISkVOVGsyUkM5Wk5rbFZTMVF3ZVVKNGNrbGhRakpPVmtoRFRUVmhWSGt4WVdKb1YzSjBZVGN4UkcxNlZIWkVLeXRyWkZOSWNYaHJhRzV2U0RsT2FETlNZMFEyVlhadlVsWTNOa05KS3pOeVVqTjRhekZzV1VWNVMzRkdjRk5STVhsSWFtOWxhMHN4YjA5cGVESkdkR3hvVVdkR1dHWldZemxPY1daeFUzTTVPRE0yTms1MGVHRmhNV3gyZEU5WFVUZEROMXBvTDBoYVdYQXdXSE5PV0dSVVZYRkpkM0JQWVV0RU16ZGlNVkIwVlROclZscE9jblYzYUdSUGJVSlRiVFoxU0VsMlVYSTFabGhpYVZacVpGSkRSM1ZhUWxoRFdIUnBSMnhRWW13elFsSkljamR3SzNoNFEyTjJla292Vmk5d1NYYzFXaTlSZFc1M04wZ3dVbHBJYTFjelRrWXhkSFZEVEZZMmEzWjNkR2RxVm1JdmJ5ODRURGxMWms1S1VrTndWbGRIVldNMFpscFdOVEF4U21aM2JFVktSalpXY1V4dVVIcHpSSHBtWmxOWloxUnpTVzlaY0RGRWQyZG5MMFV5WlZsdWVuSlpjMWRGUFEuZE1SZ0M5bmhzWGR0Q285QnJ0VTUwRTFSN09HWjhrUjBLSFpYcllIX1lFMHoxSGZfR042MFc2VExETmt0SlRwVmZsd0YtUWZhYXJTaUVKcW9idUFqS0E=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:44,425 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:34:58 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:34:58 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:34:58 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=9F14EB88A7163B47DD0975414B3D14EF; Path=/; HttpOnly')]
2020-05-21 13:33:44,426 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:44,426 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:44,426 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:43",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133343 AND testcase_id = 17 AND step_id = 25 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:44,449 testcase.py[line: 205] INFO: 测试用例[id=17, name=安全分析]执行成功
2020-05-21 13:33:44,449 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:44,449 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:43", case_exec_history_id="20200521133343" WHERE executed_history_id = 20200521133337 AND testcase_id = 17 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:44,607 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=17]的执行结果
2020-05-21 13:33:44,953 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-5', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:08:17', 'importance': '2', 'modification_ts': '2020-05-20 09:10:10', 'name': '作业统计', 'is_open': '1', 'node_order': '5', 'execution_type': '1', 'id': '16', 'testcase_id': '15', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '5', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '24', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:45,086 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:45,087 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 15, '作业统计', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-5')
2020-05-21 13:33:45,103 testplan.py[line: 76] INFO: 开始执行测试用例[id=15，name=作业统计]
2020-05-21 13:33:45,103 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:45,104 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:45,104 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:45,104 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133345', 15, '作业统计', 'pan1_of_cq', '长庆项目演示', 24, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:45,134 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:45,134 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:45,135 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:45,135 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:45,136 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:45,136 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:45,137 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:45,137 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:45,484 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:45,484 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-55-riZtgtOn0uA9MAbtdzzqOHwqWZcr90-passport.51gxc.com" />
            <input type="hidden" name="execution" value="67453935-bc16-4a76-b9f8-d4fedce8fa08_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWkhkMkx6QXJXalptV1RjNVUxbFdZbnBuVVZRNVUwNUxiWFZqU2xBelpXTkNhR04zYVRJMlQyaHJkMGsxVTBwUFVXMVRkbFVyV2tGbWNuZE9jWE41WVdsb1V6WjZjeTkxYVU1NE5XSjRUbGgyWkdoMWNYcHpZbW9yWjJoUk9XbFdjVkJhZUdGalMwcFVaV2xIV2xWS2QxbFROMFZUU0ZFNE16Y3hSbFJqVVd0TWFWbEVPVlU0WVRoM09IbHhSa2hRT1ZaTk5YQllSRWRQYXpReGEyUjBVVVYzY1dsaFFscENZMkZMV2tKYVZuSjFSaTgyY1d0SE4wMXZOSEpRVGpkRE16ZzFVSFJ5VUV0UmVXTnVlRlprV2xRMlN6STFNbmhYUldKNU1YaG1MemxPWVc0MmIxRmhWbFF5TVZSMGJHTjJVRTVTU21GTFFXRXpiRlphTjJNek5XSlNiMHBpTW5wekswNUpkazlCUWxkc1RHbHZUVk4xTTBwMWRXeE5TbmhMWVhkM1kzWXdWM0pGV2pKMEwwa3ZhVXN3YXpaNVltTnhPREZoU0hCblJsRkZjelZzTkVkNFZrTTFUU3RJV0VGMWFFOXpRUzh5V0hCWU5XSnJURUY2TkRkV2RITnVlREp3T1Rnd05rWm9VRzVKUTJoSFRXRnlhblZNVUdadE5rbG9aVlZzVFhRdlN6ZFBPVWxEY3pOWlUyeHRPVTlIVW05QlJWcFJlVzlCVEhkelJHeFZNMDVhU0VKalowbENZV05OUjNVM2RsSnZNemhCVVhWeFlURk1kbFVyVG1GcVdVcFFSaTlNYTBkWU0wZ3ZZWEpDVERCc2IxZDFNSEJ0TmtkS1VUZ3ZOMnBPYWtSRGVIcEVOamRuY0hJNVZtODNXbFpFT1Vkb1pGWnBTVkoxVkdSb1pXeFFlRFZuTmxGSWF5dHplSFUySzJ4alZHNXlRMDgyV1VaQmVqSnZaalF6YjNkR1lVRnJaVFJDZFZjMGEzQjRRbkZEYld4dVkwOVVORWh3TlVwNVJXaEtXRGxEYVd3NFdVRkRNVlpYVlZaUVExZGxTaXMxWlhGNmVscHZMMFJNVGtRM1prSlpRMVpMYm5WRU5sRk9ibEJFUlhNNWR6SklZVEV4UkVsbmVESTFlVVJ5UVZablJUSjVRWGRPYnk5alFsTkZjMHBxV0hCMlFXRTJiRVkwSzFwR2QxVnhjVEl2WlhReGMwTmpWR2xVWTFkck1sWnpTMlJOVEc1eFRGbFZUbkJLTmxGWGFXUllWRTFTVGpjMlJsQnlPVTFCVWpSYVFWSndlVGM0VFhacWNtNU5WekZxVGtkbU1tbGtTazU0YzJRdlRuTTViSFVyWVhSMGQxUlRlV1ZPUTFobFMyaE9jVlU0YnpZMmR5OVpjWFZMVEcxa1FqZE9Oakl3Y1VsNVQwZEhObUZ0VTA4M09HOUllVU5IWlZSeFZpOXZialJ4YTJKVFpFNWhlbXQ2TkdSeWNuRjVUM1YzUnpkdlltUjVOak5tU0ZGcFRVSm1TVFF5V2t0NmFVdHJVR3dyUkRVdlRERktNVEpqTTJGalUzcFhUVkF4T0ZsaWFqVkxNMjF2VUhCeldWUXpPRmxTV0V0dmJWcHRTa1ZuZW1NMFdERTVlVmhwU1VrdlZVRXZhbk55VkRCdldqQjVOR041WjI5TU1Gb3ZlbWQ1VFZkNlJscHllbmxXZEZWRFdGbDZVVkJMU3pOaFJteDZTbGxTZEVkaFNFaGhiVXRLTVdKME4weFpTMFJPWjBKaE9GWk5WMGxtYWpOTWExWnRkRWg0YzBsQ1VVRnZWeTlMUVZVdk4yVm1WR0o1Ykc4ck5uaENhMlptWWtOSE1tRTFlbGtyVUcxUWJqWTVhbVZHYW13NU1EZFNWMmR3UkdkWGJVeFNjR2xLU3pOME1GTlhXalpvY0VWV01EVkZUVFJ1TTIxVkt5czJhV1pyU21OU1VXRndhVVZrYXpsUWVGZzFNSEJhZVhSalVsWXhhemh2Ym5ncldWUXdlbnBoTDNsTlQxTkJkblU1WjJaNWVsbGpjM0J1UkdkM1VHaHdWWHBQYnpOMlFXaDNXbUUyVTBSQ2QwTlNObUZRWW10cFJGcEZkVmd2VnpaMksySlRlRFlyUVZoTFZHaEhTRVp6VjJkWmIxaFdWMHRTVm1jeFJWRnJkQ3Q1YTJsSllsTTFiRTlOU1daRWF5OUpSRUpXTkRWaVowbHVWMEZPSzFwbVFWVkRNbWxuUjA1WVl6TlJlazFFVG5vNVNHRlRia1paVVVGeFUydFVhVk5WYVhaUVQzcEdjRVV6T1hGT1EzZDJWWGMySzNWek4wMWhlalozUkROdE0wSnJUWGxOU3pad1dtVmtUVmt2YmtKeVJGcHpaM0pqU2xCVGNGTllPQ3M0Ym1sTk1FMVlVR1JxTUVwRGMyWmlVWHB3YzFwaWFVSnZkSFJwV2s1blZWWmlabHBrUlV0amFGY3hUR0ZrUmpVck9FNHJkMjVvWkV4TE4wRXpUakZHYkhCWE9USnJWR001Y2t4dGNFbzJaSEpKVlVZemVtVjRTbmRQTTJaUk1DdDVORXRUWnk4M2JtWTNkMUpoTTJoSFoyVmxTVUZHYUdJdlZUaE5ha1J0VDBabkswTlNaSEYxUlRsdU5GUmpObll2Tld4M09YUkRTell5ZEVweldEQlRUakp6WlVaSmJVaGtiMWRYUnk5TFZqSTRjRVpETUhSM1UxZDVaMnhuY0ZBelpYZFVVWEJDZEVzd1RUQmpTV3BqTURKUFZGQTJVMUpGUzBKTmJuVjVNR0UwUjIxYVJEbHhjMXBGZVhSU1lXUk1ia2hSU1RCdFVtRnZSbGhhV0ROSFYxRTRNamRIVDFNdlFXdHlMMFJOVDBkdmRVaE9ORzVyWlhKdWFITlNjbVpTVUdoWGJGRTFlWG8zZEVOclRFWlZXV2QwTTNsUEwybHVXbUpSUzBneVRrWmpURVJTZUc5SU5UUldNMFkyVnpGU1drVmtXQ3RXZWt3eUwya3ZRMHhpUWs5TkwxazBjWGN3V2xoeFkxWkZNalJyTjJGQmNTOU5WMGxSVlhCb1JHcDRSM1ZFY25CUlpYcFdiVmhWYVRaV1ZWRkRVMkpMZUhwT1NsSlBiMjVKWkZFeE9YQXpjMjUyTjI5WmIzcGxSbWhQZEVWdlpWSk1TbkEwYURKTlQwUnFWalJxYkROeE9IUnFTRlJDUTFNNE4xUXhhM2xOUjFKMFVGQjZVSE51YXl0VWQxbHJWM2RQVlRaTE0zWnJOMlZyVVZGMU5EQk9NSGNyUkdablIxRnVNbkpaWjBwR01FZzJhREJHV1UxRk5qVnJiV1JrV2pWd09WcFlTR1p0U2xkMVptSXlWaTlvVTJaeWNIRllURmxOT1cxS09TczFVMHRRV1dVMGFYTkhWRlZrU1RWWk1GVk1hM2M0V0RKcGEzSTVOMDR3YkVJMVNWWnFXR0oyVWpaTFkxWjFMMHN4Wm1kVUwzWnJkV3BYSzNJeVlVVjVhV3A0YzNKMFZWRm1iMjlVZFdRd05GcHlTRmw0UWtONGFXMVdSVTU1TUhGaEszbzBUVlJQUm5kNWQyRXpaMjR4UmxOclYxUnBjbGR1UkUxbU1WbGxhRUpHVWtReVJEUjZjMkVyTmpsNlJGRXZja2RoZDAxNFJIVjBLMjFoUWpJellUZE5hV2cwZEhGSFZsSTFTRGxZYlM5a0wydHNUa0ZWVUZwb2RTdG5SQ3RTYWxKVWVrbzVjR05NSzFaWFJHeDBlSEJtTldkQk5uUkdjM1pUY21kd2MzWTVSRU5VYkhCWWVsZFBTVTVLVEZORVFWSjNaemwyZEZsMVNXTmFVM0Z1V0ZSNGVuSjFLMWxSV20xU2IzRnRWbVEwZEZaMFJFcEVlWGc1WkhSaWNtaE9Va2RwWTIxVFNXY3JWRVJzTHprd2EzQmlXVzV3ZHlzMGJGQmhORWh3WjJWNWEwOXRSU3RaU2xOVU1HcFlSM0ZHUzNJdlkzTjVTalJ3UzJreE9YTnpTMmxZU2tWaWVWVTJSV2hVV0ZoUmVEZFdlRWxaWkVWTlIyaHJOV0kxUlhWU1dqWTNUa3R1ZVVkRGEyZHdZVGx1VTJrdk1uVmliV2h1Y1dSTGNYUllZVFo2VW5WcldYbDJjMlp5VTJoTFNsaFNPSE0yTlV4QlFUaFhWSHB2V1hrNFJtMXRSM1JOZGxoQ1pDdFViMjlMVkhOYVJrOHhjSFI2TkVaVFlXZGlORE5rV214TVdscDRTMnBCTlRJMllWUkVVRWhWWjNWWUwwZEZjR0ZZVTI1WVZXaFRiVE51VlV4Vk4yZEVWbXRSVTB3MkwzcHdaRlZTVkRabEsxUlZaV1pqVjAxNU55OVdVRXBUV1VkT05UVnRVVnBQUVVGbll5dENaSGt2VW0xc2FqaFZkVXRhSzNad1QyNVpUaXRtYTJ0SWMxTTBiVGhXWWxCeWMxQTFSa2s0V1RWUWRWWTJXbmxqWVV3elIzWjBjbFZWVDJWVE1URjJSalZyVUc5alEzVkxXVk5KYW1zNWJtOW9TbWh5VEhwQ1MxYzJRbFl5Y1dsNk4zWXJNV2hVTUhNM2JVZGxWakZUZEc5S2RXSnphVGRRYVZwMFoxbGtNRE5tY1Nzekt5dEplSE5hUTI0dkwxRlNNM0p3U0dSU2RYTk5Va2s0ZEhjeWJ6RlhTVk54Y1hkek0yWXlNRVZJYXpOWFduQnFNbUpoUm1sMlNTdDJka2x4U1hVM05YUjVlakJPVjNOaVVEQXZjMjUyTVVjMk5tSnNjVUpUWlZSMk5qZDVSVGMxUjFaVVNXTlFiV3B6TW1obGMxbEtVVWgxVVhaalEwZFpXSGxFUkhOeWNrMVhXVE0yUW1aVlpUUTRkRTFMTURoVE1EUlJVVEEzYTIxSGFWUndORVozT0RWS1RrMU1Ta2xrU3pVeFYwVXhTMWhxWkVoUk1tTjBPR0ZPUm04cloyNUdZM016WVVsbmRreHFUU3RTVUZKM2FrVkZOREZvY2xNeGVsaGpSRkZPVG0xb1UydE1VaTgzUXk5TmJXWlRTVnBvT1ZrM1QyRklURFJYSzJWU1EwTXhWbmhTTkdSblkwaEVWV3R3VWtoaVExVlBhelZuY2pGWGFYRTRiMlJJVldSc05uRnlUbkpLZEZabWFISXlVMlJ5T0RkV01FTkNWbXhIYWk5NmRESTBSM0YwV1docU4wUTNUamRTZUZCU2JrbFhOM2x5UVZCS1VXUm1WMGxpZVc5UFJYVldkazVCYVRBMmIyUkpjazQwZHpZM1psVm9kbUpsWm1OeFpDOURNV1pzVUZaT1RsWm1UMGtyVDBOQmNWUnZUVUpxY0dFdlIyWjRiVlZhUTNsTllVRlJaVll2VEc1WFZsbFlUbUp2UFEuZW8wSGZJTEJnXzZqWmxNaGQxT0tDdElTZUFiSXNqN1dOMzQ4T2JfdDQ1ZV82cHJndzB4SDFiekZwMFBrMFBRSmRuUlA4OUUwN3Y2cmNPN0hiMU5kdUE=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:45,485 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:34:59 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:34:59 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:34:59 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=88743F771024656C36BE6347A87DA5A7; Path=/; HttpOnly')]
2020-05-21 13:33:45,485 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:45,486 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:45,486 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:45",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133345 AND testcase_id = 15 AND step_id = 24 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:45,496 testcase.py[line: 205] INFO: 测试用例[id=15, name=作业统计]执行成功
2020-05-21 13:33:45,496 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:45,497 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:45", case_exec_history_id="20200521133345" WHERE executed_history_id = 20200521133337 AND testcase_id = 15 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:45,645 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=15]的执行结果
2020-05-21 13:33:45,953 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-4', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:08:03', 'importance': '2', 'modification_ts': '2020-05-20 09:10:03', 'name': '作业票授权', 'is_open': '1', 'node_order': '4', 'execution_type': '1', 'id': '14', 'testcase_id': '13', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '4', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '23', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:46,097 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:46,097 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 13, '作业票授权', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-4')
2020-05-21 13:33:46,108 testplan.py[line: 76] INFO: 开始执行测试用例[id=13，name=作业票授权]
2020-05-21 13:33:46,108 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:46,109 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:46,109 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:46,109 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133346', 13, '作业票授权', 'pan1_of_cq', '长庆项目演示', 23, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:46,181 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:46,181 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:46,182 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:46,182 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:46,183 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:46,183 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:46,184 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:46,184 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:46,508 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:46,508 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-56-QoGuVi0U0ztTtsvpzRfB5vUT3OZvox-passport.51gxc.com" />
            <input type="hidden" name="execution" value="eaef3f92-5906-41b0-91b4-31356709997b_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTm10MU1UVldlRXBUZVRCeVJraFVXbWRUUmtsVE0xTjFWek16YUhCUUsybE5SVzV0TW5sRlRHNUZTRFpIUmpKV1VIVmFiVU5JVWtoNFJtczJha3BCZFZGb2JUUTFWV3AwTkRsQk5VcE5lVE5FVm5CUVUwODFjR0oyVjBGME0yVXlSMU5oV2xWSFFVcFBPR0Z2VEdkRWIwSm1hbmc0UXpkblZqWkdaMm81TlVaelEweDBZVTgwUjBKNGJHZFFXRnBvY0hoRmEzVmtkVkpwV1ZNMVFuTldjbkZ1V25KeGRXTXZWWFZWUmtsR1RsVTNjM0JPZUVNck5VbEViemxDWVhSV1JuWjBXbU4wT1VvNWJuWjFTMnRyWVVwRlJqVjFSV1pGTW1NMFRDdDZUbnBTV0c4NVRUazVZa2t3SzIxM00xSmxNeTlpUjNaV1JqWnZVM2MwYW5GS2NtTXJZelpxV21NeVNUTjBVa3czTlZOdVkwOWxlV3BvVTFrcmVGZGlkRUpyVTJWU2RWTlFMMGhhYm5sYVYxZExPR0ZLY0VkQkx6Z3ZaRFUwT1ZWSVJXRk9ha05NUkhoTll6TnFhaTlaV0hSNU4zQlJURlpVTjJ3dlIyNUdPV0ZRVlZGU2RFRlNPRkJEVW1kclIwUXZaWEF6ZUd4d1QzUnVSVXM0TDJ3eVJVUmxUVWRXU0dGTFUyMTRSM3BOT0doM01FSk1lRU5RVmt4SVNERklXRU5zTVZJNGJrdHZOM2N2TDJWbFlYUTRWVGt6UVVOUmJEWktTU3RzVkhRM1lucGxLMDE2Y2pScVJtSk5hVFZxTVRoUlZWbzRZVEl5TnpaeVJqY3dZMnh2WkdKUWVrWlBSV1J0YURsbFdWRk1WRmxDYkRWRmR6WkpTR3R6VVRoRWJGcDJSMUJKU25aT05WRkpVRzk0V1RZd0swVmxXRzl0WmxkVFVXaDBRM2xNTjJ4WllsZG5SRWhVVUhBM1dVaEthMDEyTjNWVlRUUkxXVVJIVWpocE5EZEdSbWRJUkRobWMxUjZRakU1ZFhWS1NGRXJUV0pOVm5SeE9ISlJWMWRoV1VObWVEVnBiM0ZtUzNadWVWTmpOMk53VDB4RldHNVZWV2RPWTBoRU1tTnRNelZCVFhkbVZ6aFdXbTA0VVZsRGFVTk9iVTF1ZVRSQlQwZ3dSREYwTm1wYVl5c3phSGd6U0hOMUsxazVZbTVCWVhkV1drOW5LMnd3YkhJclpXbFdjV3hITlRRck5URTJiVFV2VEZkU1F5OUVNQ3RqY2tGNk5VMW9NMWREYVZFM09XTkZTVGxZV0hOVE5EWXJNREp3V0hoQ1ZGWTFUR2s0T1c0elVqVnpZekpvZEhGSFpGQjFXR1p5Tmt3ek5TdHFaRTlPV0c5TmVqaGxWVTh6Ulc5b2NqTndRbFZCWmtsWlVXeE1OV3h3TWpaVVFrdGpOamhIWTIweE1pODJTMUpqUzFsaWEyMVJiM2hTZGtKR1dsTldNazVRUjFCc1prUnVRbWxzVWxoUlEyeDJiazFSTm5GeVVVdDJlSFZVYkZnd2FFZFhVM1J1ZEd4Q1FUbEJWR05tV25kMVJHaHVXRnA1U2pWTlRXdFBja0UxT1VsbVQzZEpOMWt5VjJ4clFrSkZiRU5pYmxGWFVGUnhRa3d6VkZGVFJrcE9RazFpUVZWRlltSkliVTFhT1UxaWNYSkVMMUJtWjJVd1ZHdHZSRXd5T0dKSVdtOTJZVTgwZURFME9HaDZaa0phZWpKWmVEUnBNRmh4Y0RKR1lUUkZSR2hyVUVzMGQxcFRTMlJhYUZCNE5HeFBhREV4VFdOSWJFWnRZM1JTYTFack5FZENjMDB5YVROSFlqVlRXVFZQWW1oMVJXVjNWMVZZWWtscFdqZzVZVUpqV1ZNemVuRjJaMGg1YTJjM2NHaElTWGMxYzJ0eE56ZDJVRU12VFhKR1FVaFVSM055VDBwT1pXUm9lRUpzUW5VeFRDdENabU5OYkhReGIxbEhkWGRLTUdseWEwaFdlbWR3UlZKUlZ6VkROMVE0V2pSTmQxRXZlSEZMTlZneVRFdFBXRW9yTW5aVmMyUkVhbTFhTTNWNGQwVnRVVWc0UlU0MVVqZDVTRlkyVFdwelJEbHJhaXRqVUdWNU9FRlZiQ3ROUmxsME5rUnNOVlZ5UVZjd1dITkNiREp6UVc4MVJrTnJUR3QwVTBGQlNHdE9Ta3BzTVN0RldFaENkSEpUZVVSTFMyRlVTekJSZEd0TmNWUXhNMkpwWVRoRlVHdDVUV1JvTUVNdlZUQm9lRGhqU1hkNVJIZExTSGR2Tlc4MGFUbERWa2h4TTFOemVXUTNaR3g1V2tGcUswNUpObEpIZFROSWRWTkVORk5OY2s1RWNtOHlPRGxvTHpsbFZUVlNVRTFLUW5CWmEwSm1MM0JIU25WelEydFlXVmhMWTBoMU1tVmFlakJxZUVvMGRHRlhhemg0UVNzd1N6VnRUVlJMWjFkcmJtWmxSMFpJTW5aRlkybzFiRnBDYUVZMFJtTmtiRVkyUzJkeU1YRXpOaXQ1Y21kaE56RkJRVkprY213dmNrdzViM2hCUmxaMU5tSTVabmhwTkZKQ1JrUkVabkpPYm1kdVRWa3ZZbEJYTm1zNFYyVllaa2xZYmpaNVJpdDRTMFY1V1d4RmJ6SnJhRlV2TkZScU9VUktZVE4yVTI5RFJuZEVTeTgwZVZGaVNYTlFWbkY2VVU1aU9HdzRNek00WjJKRWRVaHVjRkoyVFhNNWNXeFFaMFo1Y0RSMllVNDNkRWhvYzFoSmVVdDBXSEJYUzNjd1dIRnlVR2gwVmtwdlJFSjZkalpyUmprdk5WVldTVTVVVEdsM2EycElRWHBLYldoSVV6WkRjbmMxT1dWRGVraDFlblF2TkhZck1XcExVMVY1U1ZscmFIVm1PWEpuTkRoRloyZ3dVekptZVRaaGQxUndjRmhKTTNjM1NGSm9aMk42YzNWc1dqSnFiR0pWV1hkdGNXeEpiMjUxVDBGRlNqaDFZbUkxVjJaUGJTODVTVXQzT0VWSlZtZDFWV1pvTjJOUldXdHhNekZzUkdSeVExbDFTelp0TUc1TlJTOUVjV1Z3WTJ0SmVTdGxRMEpHY0daelpGUlZXVFJpT0RaQlYyeGxaSFpVU1drMFZrSnRkMU12ZVdVMVpHNXRjMDk0V1RRd1VGWjZPVkpFWWxFcmQwMXFVRXRtYm5acU4zRkhOVVJrWjNoWWRYbzJNMDgwVGpCd1QxVXlObmxzWTJkb1ZubDBSVnBCVEZoSGVuTTBlRWhYVERsS2FYWnlZM3BYUzJvMFNFcEhWalExWldWNmVHZENNMVJ0YlVaUGFrMTNhR3dyUmtkUldWTTBTMUV6VlU1WFdrcExZbTVKY21wUGNFVkNiMnR3VTJoMVkxY3lOSFkzZGtOaVpuRTRSbHBOTlhOeGMxcFRiM1FyZDJkSVdVSk1WbFZyWldscWF5OWpXalpTTnpKS1ZrWXlhSGxETHpCRVlVMWhiMGxYVERablFXRjNlSGx2UkRCMVJWQkxiekl4VW10MFFYTnBNR2N4SzAwemRURlZURlZuZUhOUmFsSkdabU5hWXpWaFpsWkxiV1JZUjBKUUswWlZaM1V6Y0hOMWMzUktUbEpXVmtreWNHUktZMUozV0U5c1pVeHNjbFF2VGxOMFFqUkhRa3ROUVdsdlZDOWhSalZyUVV0VlRsQTRVRE5RZUdzMlJGZEVNa1V3TjJJNGJFeEdRVkJSYjFkdFltRmtObEZ0V1RSTVpqaGxiRlp2UldneVlteDJkbE4zUkdWdGJYUk1WUzgyWkN0Q2JHRmpTa3BRTkVjMU16VlRPWFZaVkd0eGVDdE1VazVCYUdWVVYzSkNkMnBQU204MlpHYzFSV2xJTVhWRWVtRmFieXRWYkZwSVRFaFpSRzl2VlZScFRXTmpSRTlLVkRreFpqbG1OemM1UkZCeWNTdHNWMHBvTTNvMU1EQmhWblF5UldReGJVNHlMMlUzWm0xWWVUVXZUMk5wVFdKM1QxTlpVMlphWWtGbWMydzVXVUppUW1oNlRpOXliU3N3TTNCMVRIbG5URlZHV1V0M1QwVkVjVk5CTWt4RloyZFZiVkEzV25wcVZuZHRURkJYUjB0RU5tTmFOREYxVGxsaVVFUlBjVTFZU0VWeFdXZFlSa05DWlhKcE1USTVNSHBoUWxVM1kwUkJhbkJTV0VwcVJsTjBTWFJPYzI5aFlrcEhhalF6WjIxMFpXSldObXhKUldKMVZHeEtjVzB2TVVGQlV5c3pRbXdyWWtkaFZtSlZlVUZKZG5KVGFqaFFhbUV6ZUZseFpITm5SbXAyVEZkWU9GTklOME5PWVVJMFYwMVBRVVZ0WTNOSllVZzFjVGNyTHpKc1JtSmFNWFZZV0ZCR2NEVnlURlZxUmtOYVdtRjFhemwzUzJ0dVJVRXZiVE5XU1ZWTFFYZ3pkM2hRTUZOUUsyNXZRV3RHY21ocFkwaHBiVXRCVTNORE5TOXFVV0pMTDB4d04wMUJPRmxRZFd4TFNXWkxXRU54V0dkR1VWbHRUMWRqTDJob1pTODFLMFZ5ZUdaU2NHMUljSGQ0TTNNdlNWbDJNREpqYjFKeVRVTlBlVU54UVhsQlpqZG5UbG92ZWtWUlRGZHJhMU55YzNsaU5reE1RVkJ5TkhGUlMwRTJlbWszVDNvNE5rcERUSHBUZUVVM2RVYzViVE5tVWxoaGRWRlRNVEpaUzFKMVEzbGxjRU5CZFc5SVIybENhQ3R5WkVKUGVrNUJXamxCVVdoV1JXbzBUVzFuUkhkTWVHdDNObVp6ZEhSaWRUUlphRzFaYzB4SlJuUXhkM3BNUmt4c1JHZEpNbFJ6VVRSaVkyUkliMmsxYTAwM1dUVjRNRkZDVWpWT1VIRlRUbGh2ZFd3NVlVUlpSeTl2UkZsa2FXOXlTSEpKYTFoNllXeFdUVGRZWTJ4a1JrUlBOV2x5Tm1kRmRpOUVSSEp5ZG5SdlZESnFVRzl4ZG5jNE1qTm1jeTkzUTJKNk1IcG9hWEoxU3pWQ1FYWjJWMHRKVUcxdWNqaEVOMGRIT1RreUwxSlJWRzFEV2xwbFdVTjFkVGxwYURsNlZYQlZSblZKTWk5TlNtNVVUVkpRVm1FdlpWRjRlV3B1Vm5sSWNreHdjVXM1ZURGd2N6WkdRVmRQVDNWSlNsRjVNVUZZYTFCb1YwSjVSWEZNTWxKTWJXbENiMlpKWTNKbFdURndlWFEzVVRGblZGSnhXRkZZYlRNd1duVk5hMU42ZEVOb1JXNVVSMkYwYjB0SFpuY3lhMjVvYjFScGJXZEtVVmwwTW5WRldXeFBVR2szZFhBclpqRTRha1l5TkRsVlIxTlpSbHB6TDFvM1ZrVmpXREpWUFEubFRTUEMtQnZQRnRNeld6ZTB6bmRwZVdQcUhnZ1NNNVFHSlRhRkh4OHI3VTFVZldEell0b0pNMjd5UWRmVXBxd2NRRGdDTkQ4UWxzRGFEVWoteXNLS3c=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:46,509 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:35:00 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:35:00 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:35:00 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=7BA6DBD74E3D97B6CB7F26734B155910; Path=/; HttpOnly')]
2020-05-21 13:33:46,509 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:46,510 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:46,510 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:46",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133346 AND testcase_id = 13 AND step_id = 23 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:46,534 testcase.py[line: 205] INFO: 测试用例[id=13, name=作业票授权]执行成功
2020-05-21 13:33:46,534 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:46,534 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:46", case_exec_history_id="20200521133346" WHERE executed_history_id = 20200521133337 AND testcase_id = 13 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:46,678 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=13]的执行结果
2020-05-21 13:33:47,005 testplan.py[line: 46] INFO: 获取测试用例信息 [{'summary': '', 'updater_id': '1', 'full_tc_external_id': 'cq-3', 'estimated_exec_duration': '', 'author_last_name': 'Administrator', 'layout': '1', 'version': '1', 'testsuite_id': '5', 'creation_ts': '2020-05-20 09:07:32', 'importance': '2', 'modification_ts': '2020-05-20 09:09:57', 'name': '气体检测录入', 'is_open': '1', 'node_order': '3', 'execution_type': '1', 'id': '12', 'testcase_id': '11', 'updater_first_name': 'Testlink', 'active': '1', 'preconditions': '', 'updater_last_name': 'Administrator', 'updater_login': 'admin', 'tc_external_id': '3', 'author_login': 'admin', 'author_id': '1', 'author_first_name': 'Testlink', 'steps': [{'expected_results': '', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '22', 'step_number': '1', 'active': '1', 'execution_type': '1'}], 'status': '1'}]
2020-05-21 13:33:47,148 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-21 13:33:47,148 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133337', 11, '气体检测录入', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-3')
2020-05-21 13:33:47,165 testplan.py[line: 76] INFO: 开始执行测试用例[id=11，name=气体检测录入]
2020-05-21 13:33:47,166 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-21 13:33:47,166 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-21 13:33:47,166 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-21 13:33:47,167 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200521133347', 11, '气体检测录入', 'pan1_of_cq', '长庆项目演示', 22, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-21 13:33:47,178 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-21 13:33:47,178 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-21 13:33:47,178 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:47,179 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:47,179 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-21 13:33:47,179 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-21 13:33:47,179 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-21 13:33:47,179 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-21 13:33:47,485 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-21 13:33:47,485 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-57-q6SgnivJxlRaFbJxufKrpBd1b6dH6B-passport.51gxc.com" />
            <input type="hidden" name="execution" value="5cfb133b-624a-4e89-8442-dd480dfca43c_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVFRRdllUQXdUMnBZU0dWMWJIVTNaa05JTVM4Mk5EWTVkM1E0ZHpabVVVTTVaRzlwSzIwek1tZElhbFEzTW5Wb1NDOWhSemhyTlc4eWRuRkdTSFI2VkZkSVRUVldjVzFxUWpWQ01sSlpORmRKVlROMVJsQkpVMUZXUVcxUlR6ZE9RbE5WWldSTVMwVk5hQzlRWmtObWNVMXpkelZYZWtOaVMySnFPVk5YU0d0aVowSXJObGxpVmt3d1QzZHdOVUUzY0Rad2JHOVpXbVJwYTJsWk9VczFNeTlQWm1Wd1NXTjVTbUZJYVRoSGNGcDRZa1JDY0ZwS1lrdzRWMm81Ym1nNGFWYzNTMHhxYms1eFpIVjBhMFpXVFRSNlUzVnplRzlXZVM4MGJFRndjekZNWWtkbFpIbExPVVV5YkRkWGIwY3lhalUwUzNsRFNFZHZkWGxPU0c1VmJYRnhXWGRrUTNKb1YybDRka2hFV0hKTEx5dDZWV3cyZFM5WVJEVlFPRXBWYTJ0c09YVm5aSEZqZUVsblYyMXdSVm8yZEVKdUx6SjJSREpZUlZCeFkxVm1TamR3VW1aWGIwTlpWV1p3TURZeGRVSktXV2R1VDFOME5VNU5XbEowVURGa1ZYRkdhakJMWW5KWldqWnZVR3BMZGtWRGRWTXpPVXhuU1RaelVFYzBSR0pSZEd4d1pWVm5hRWRNYTJSWVlrWjVUbU4zYVZSVGNsSXdjVzQ1T1U5SVoyVktaVnB3TVdORlRWSlVMek5HY2xwcmJYbG9XRnBCUlVkaVpUSnJNelZ5VWxaM0swOUpLMjFZVW1WREwxWnlkblJaYmtoa1JXMXlja2hzUmpoaFJuaFllaXR6YW1GUFRXVlNlVlJZY2pnd1oyOUpSQzh2YVVjMlkwMTBUbkp6ZWpSM2RIQkZhM1pSYm1wc01XVXJSMDR4YzBSbVUwTklWVVpzZURVelJsZHZabkV5VFdOaVRsWjNaSGhETVhjeVlVbDVlRXRxVlZOcWNtVlhjVUZQWnk4eVNYTnhkazVoUm1kMllYTkVMek5xUkRFMlJVRmhWMDE1Wm5obGJHZzFUVEUzY3paMVdXMXVObFZPT0dkRFpHOW9Oa1JaUlRVM2FuaG5TVE55UWxaQmQxQnRWRlZ1V21aa1VYQnVkekl5U2xOM09XTTNSRzgxYm5rdlpqTkpkbkZGZVRSS1QyZGFlaTlPYWtwWUx6WXZPVmhFT0daeVZYUnVlR1pUWVN0Wk1FRlhLMmxoU0haeVVqQlhRalJUVmt0SGMyMDRPVUZLUVVkeFp6SmFja1puUzA5MGRtc3JLM0J0TjI5NWIxVkhTbVpMUTNoRVpsQTJZVzF4TVZOeE5IVlhPV3htVTBkMFZUUkZla3B6Y0RsNFIwRjJhV0ZqYlZGRVFqbFpVbkZMZFhGYVZVOUdia1ZpUlc1NmJFZHpheTgxVXlzclNUaERTVFJzTldWVUwzWmFPV292V0UxNVJubFRiRVJyYTFSNU5XMW1VV3RhTkZkSlJ5ODNSa3N4YzJjdk1DdFlWME0xWlVWeFpWUXZjRVJLWmxkblRuRklLMnczTkZVd2FFNW1kVEZxY0VwaWRqaFJjRkE1V0hOR1JYWTVVbGh3ZWxsaldXeFhZalZVUkZONmVYRnJaRTVKVmsxTlN6SlRkVkJVYWxodmRYbFFkbkpJY1RsTVMwdFVZVFE0WkROQ01VWnZTMk5MV1VFeE4wUTRiRzFwUVdWcFJVcDBWR1ZxWjBNd1ZscDBVMFEzTTJseFFYWmFTRXQzZVhkdE0yOXNNWHB3ZDJkNU1FeEJiblZyYkRoSFUwRkJRbFV2YlZBNGFTODBUalYxY1ZOWFpEUXhaakZLWlZvdlZISjFVVzVwU0dsVllsTXpTbWxtVmpOTlowWjBaR2tyYW1GVU0yRkVNRFZPTURKeUwzQnVPSHBJU1VkdE5qbDJTMlZ2Ym1WTk1ERTVRemhGWkhCMldtNVhiVEl4YW01cllrc3ZOM1k0Y0ZaUk5WcEJjV2d4UmtoaE0zUXdWVGRYTjFnMmRrMVVaMWhMYW14eU5HNUJhVGhNTW5GSVVFTjNUR3QyUmxnNWFrMDBiRXB0WkZwUVNIRXhZMU0xU0ZGWE5sRjNRM0Z1U0ZrNU5HZ3ZPVnBSU25RNUsxb3dhbE01Y0RGMmMxbzVWMXBpVTJoeFRVOUROMVJ2YUd0bWQwd3dkbWxQU0dzdlpERnliMmxEY0UwMkt6STRlWFJKVHpWTk1tVTFaM2xVZWxKdU1YWkdabE5zUlZGV2NVd3Zhek5wY0dWUmRXYzFRbGt4VW10blltSk9RVTh5WTB0VEwwMVVWMng2YlhRNE1sSnZhbVZyZUhWd2NtVnhUV3QwYVZWWk1UaE9hMjVyT1hBekwzTktPVXh0TmpSTlMwdEJTVVIyTUZWYVdVNUxRV0ZZT1M5VFYxbzFjMUZNU25sclF6TmtUWFJRTjNGdlVWWTBLelF4UkdrMmJIRXhSRnB3ZDNCeWNHZDNRbk51Wm5CdllubDNRbWgzY0VSdlRFOHlSR2MyVEdOcE5rUmljRVJYWWt0R05qTkNRMHRVVVVkV1NIQXpRVGg2VGxJd1VVWjJaR0U1TkU5MGFEZEtibFJoZUVZcmEzWTVZMFJaVlU0eGEyVnpPRlpRWVRWcFRuSkVWM0l5ZW05aGJFcFhibmRpYUc1a00xVk5ZMHhMYTBwdlJEVlNWMVJsT1RnM1YxY3ZXRUphUkcxeWVuUnVXRTkyVlRoVmFrazJTM042TjBoaU1qQTBPV05rUkVobU5TOUtlSEJ5ZGs4elpEUkZlREJuZFhwaWQwMU9MM3BKTUdGUGFubzVhR3BZYVVoV01YTkVNbEV2VjFkMmJteEZWa1Z5VUZWb1ZFUjZSRmxLUkU1U0wycEJMME0xTmpWamVGTldTMGRtYVVzNFdreEZaWFExWkZGS2JYbGhkM1IyZUhwS1VtVkRXRGx6VUhsb1pqQnNaRXBXUjBWRVlXNTRUalp2Tm5oMlVTOVRURWxxUTFGYVNISXhSa3QzT1hwNlExcDFUMkZtU25WT2VFMHpORWtyUTJ4dE5sSklNRWhVUVVSTmVqVk1ZbkZoVTA5RWVXeFRRMjlyYjBWS1oydHlXVEJwTldKTFpHcHFhRUZyYVRGR05GRk9URFpCT0dkaWIxUXdTM0pCTTBvNWNXTTFNMlkwYVd3eFJrMVpkV2xPYTFSalRVSm5ielkxTDJremVYVjVURUZ0TnpCV1N6bE9kUzlqYms5cE1Xa3ZRazVrWjJGd2R5OXFWMGRuSzBsVU9ERktabFZyVG1Ka1VtY3hNM0pqZERCeU9ERXlVRXBHUm5OdE9FRm5XVVpSUWpWdlRHRjJSRlZZTlVwMVUxTlFOVmhXYWtKR1NVOUJNSE5SYTBWMk56WTFhbU5NV0RSQksxa3ZUR1Z0WjIxTE0yUlNSVTlGZVd4RllXbEJNRlJXVUc0NVNEVkhhVWN2VFdodk1YSlJTVE5wU0dSRVIwRjZkRWh6WWxaUGVtSkZNR0pHYmxWM1FsTmhXV3RIUzNsRmJGVkZka3htTW5GMU5GZHRSeXRXWkd0RlRFVldWRTFHT0U5dWNEVnZhM2xLSzNWU1REUmtkVVZSU1hwdFZrOXZhMDlYUXpWSGRXOVhiWEUwYVdSbVUyRTRiSE5YZFUxVk5YWnJSakZyUjJOclZXOWlZekp5WlhKWVprUkRRa1ZKVXpoYVJubGFjVU12ZFVNek1IQlVlRzgyS3pnNU0yRTFURGxoTjIxNlVIYzVTemMyTlRWbFUyZFlUV1pxY2xsUVpXTldXalpWWkhCaGJWQlRlSGxZWVVRd1JIWkhUbU5qV1ROWWNVUm5aekV3TUdoNGQzVlVhRmRPY0RaT01qQktabUpxWkdrNU1uWkliMmhxUzJaemRISnhNRTVXVVV4T2JVSnNVVlYwTW5kUkwyWm1ZMVZpV1hjMVdYZHZVM2hZUzNFck1WRnBRbTVIZFcxSFNWSnpiRlJwTVVOdFREWk5TekZDWlRWbGJXdFpVRWd6ZDJoTFJIRk1aelJMUmxwYVZFOUZPSFpXUXpaTUswSllZakpSZW5STlltZFlUVTlJTTB0RUwwNHZNVVJrZDNSUkx6QlZTRFJvVnk5aGFHZGxWQzlOVDFkTmRFcFpSemhwYTFJeGN6WTBaa05IWTBSUU5GRkNSSFJwYWs5elZEVjFjV1oyUkhGck4wOUdTSFpPVkhWQ1kwSkRSVWRDUm1jM00zUXJNR2c1YjJ0c2JIVkhVRkpaTVc1Q1VIWlZXbWh4UzBOUVZYVnpORUZpTlU5cVFXYzBkWGRQT1d4R1psSllkbVpaZUN0R1VXaHlaVkZGU1haNk9VVlpSWFphV1hRNU5YSnJTRzlqWVVJeFFrRlRSa1ZFUzJac2MwbDRXbGx5UkhWdVVYRm5lRzA0ZG5jeVpESk5OVzlQVlV4NEwyOXVXRFZsTnpWR2VFaHBVMG8zZEZOWlRuZENjSHBSYW5SclFYWmhjbnBFVWpoSWVVZzJiblphUzAxVWFYTjRUeXN6SzFaUmFYZzRXbVZDVWpaWE5VbHZjVlZKT0d4SFYwVXJOREpPTVdwa1UzZFdiVkFyWkRrMk5rZzBSVzhyWlZWc00wMUhkazVxYXl0cFF6TldLM0pzVVZaM1JVeDNOMGN6Y25GalVtcGxXR2RGVm1oS2IxQkNaMHhhY0dFemVUbE1aVFZpYzNGb2IwWjBRVXh6SzNKdk1ubExkazVoVFRVclpuQktXa3B5YW1kUlNuSk9MMjk2TDNVd1ZtWXJURXBLT1UxQ2FtVnRNVzlWVGtaR09WTnFjMFJIUzB4dFpXTlVWVTlaZGtSdmJtaEVTVXBRZFc1dVoxQlhPVTkxUkd0bVRFZE5UREpMYm05S05HTjNkRkpPZG1vMVNqZHNNSEUyVEdGbVVFRmlWM2RESzFoM2VVRlhPRTF5YlhGM2JrWkpkSGcwU1haSGVtcFFhVGhRYjJwT1ZIWmxlRU01Y0dSclRsRmxZMnRJSzFoRE1WQnBRV05yVkZjNE1tVkljV3hPTkRWV2FGcE9OUzloZUVOVU9VOXllVk42UzNsaFRsTXhMemw0UmpRclFXZGtVMkpsVWxkRU4ycG1VRFZKU25OdVRsWlhjVU5NVkRSd1lXcG5WVkJXYmtzeVMwWldaa3BvY1dFeVRGcHZSVlV3WTFGb2FVOVRUVmMwWTFjeVNXNXdWU3RaUzJ4aGJGUnpTRXhJY0VoWVdYUmpUa0pEU1RSRGMwMWFXbGhoYkRSV2MwTjZSMkZSUkZWVFUzSnllakFyVjJWSU5VUTVUblF2Y1U5VmMwTmhZMFZSVDIxV1EyeEZVMVJNYnk5b2FWbFRLMVJJWjNGTEx6UkthVkZaUFEuSU1KSHF2aDg1THNpSm1pM3dOajdlUUxxTEF2UmdFSW9LTkVRc0dQVmJlRUw2cnNsVU5iaWxaSEUzRzlBWlJDaUFrVUhHMUJPXzVlaUJMWVZvRDlWQmc=" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-21 13:33:47,486 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Thu, 21 May 2020 05:35:01 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Fri, 21-May-2021 05:35:01 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Fri, 21-May-2021 05:35:01 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=0EBCCC6DB59F48EDFC366E64AB6726C5; Path=/; HttpOnly')]
2020-05-21 13:33:47,486 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-21 13:33:47,487 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-21 13:33:47,487 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-21 13:33:47",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200521133347 AND testcase_id = 11 AND step_id = 22 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:47,500 testcase.py[line: 205] INFO: 测试用例[id=11, name=气体检测录入]执行成功
2020-05-21 13:33:47,500 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-21 13:33:47,500 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-21 13:33:47", case_exec_history_id="20200521133347" WHERE executed_history_id = 20200521133337 AND testcase_id = 11 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-21 13:33:47,654 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=11]的执行结果
2020-05-21 13:33:47,821 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-21 13:33:47,822 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-21 13:33:47,823 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-21 13:33:47,823 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200521133337',)
2020-05-21 13:33:47,824 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-21 13:33:47,824 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200521133337')
2020-05-21 13:33:47,825 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-21 13:33:47,825 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200521133337')
2020-05-21 13:33:47,826 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-21 13:33:47,826 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200521133337')
2020-05-21 13:33:47,827 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-21 13:33:47,827 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200521133337')
2020-05-21 13:33:47,828 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-21 13:33:47,828 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200521133337',)
2020-05-21 13:33:47,830 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-21 13:33:47,830 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200521133337')
2020-05-21 13:33:47,831 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-21 13:33:47,832 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-21 13:33:47,832 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200521133337',)
2020-05-21 13:33:47,833 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-21 13:33:47,834 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200521133337')
2020-05-21 13:33:47,835 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=19]步骤运行结果
2020-05-21 13:33:47,835 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 19, '20200521133340')
2020-05-21 13:33:47,837 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=9]步骤运行结果
2020-05-21 13:33:47,837 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 9, '20200521133341')
2020-05-21 13:33:47,838 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-21 13:33:47,838 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200521133342')
2020-05-21 13:33:47,840 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=17]步骤运行结果
2020-05-21 13:33:47,840 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 17, '20200521133343')
2020-05-21 13:33:47,842 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=15]步骤运行结果
2020-05-21 13:33:47,842 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 15, '20200521133345')
2020-05-21 13:33:47,843 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=13]步骤运行结果
2020-05-21 13:33:47,843 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 13, '20200521133346')
2020-05-21 13:33:47,845 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=11]步骤运行结果
2020-05-21 13:33:47,845 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 11, '20200521133347')
2020-05-21 13:33:47,847 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-21 13:33:47,847 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200521133337.html
2020-05-21 13:33:47,847 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-21 13:33:47,849 main.py[line: 235] INFO: 生成测试报告成功
2020-05-21 13:33:47,948 main.py[line: 242] INFO: E:\\project\\report\\test_report20200521133337.html
2020-05-21 13:33:47,948 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-21 13:33:48,057 main.py[line: 249] INFO: 发送邮件成功
