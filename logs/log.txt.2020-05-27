2020-05-27 09:07:07,337 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-27 09:07:07,346 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-27 09:07:07,434 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-27 09:07:07,439 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-27 09:07:08,983 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-27 09:07:08,984 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-27 09:07:09,021 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-27 09:07:09,021 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-27 09:07:09,035 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-27 09:07:09,037 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-27 09:07:09,038 main.py[line: 90] INFO: 按项目运行测试
2020-05-27 09:07:09,038 main.py[line: 94] INFO: 运行所有项目
2020-05-27 09:07:10,686 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-27 09:07:10,686 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-27 09:07:10,686 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-27 09:07:10,687 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-27 09:07:10,687 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-27 09:07:10,851 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-27 09:07:10,995 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-27 09:07:10,995 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-27 09:07:11,234 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['13', '6', '11', '17', '15', '19', '9'])
2020-05-27 09:07:11,401 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '作业票授权', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '13', 'creation_ts': '2020-05-20 09:08:03', 'node_order': '4', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '23'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-4', 'updater_first_name': 'Testlink', 'id': '14', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:10:03', 'tc_external_id': '4', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:11,541 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:11,541 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 13, '作业票授权', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-4')
2020-05-27 09:07:11,625 testplan.py[line: 76] INFO: 开始执行测试用例[id=13，name=作业票授权]
2020-05-27 09:07:11,626 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:11,627 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:11,627 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:11,627 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090711', 13, '作业票授权', 'pan1_of_cq', '长庆项目演示', 23, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:11,664 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:11,665 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:11,666 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:11,666 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:11,667 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:11,667 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:11,668 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:11,668 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:12,029 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:12,032 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-33-CI9puRFLRdbxbynKdF3WeUmBfVRmTn-passport.51gxc.com" />
            <input type="hidden" name="execution" value="e7c14dd0-d207-401f-8094-d7a1a595fbc2_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUzAxcFJVdGpRMVV6TTNNM00yczFMMVpXVERKeE4xZ3lSRTg1YW1seGQwOXJhek5yVUhCUVp6UktRV3hMZFZNeFUwMWhhbmwzVDBwU1puSkJTbk1yU20xb1NsRkplVXAzVUdsb01ucGpibGR3VVZBeE5WRTNWVWhIZEV0RVZsVjViV3RhTkZobldqRkZXRXBTYUhsRmVFSXJTak5zZHpCUlozRnVjVE15VUVSaVJWb3dNRlZHYmpWdGJtaEVVVk5JTUVGWE5rVXJZbTlJTkVzclV6ZG5Va3BNY2sxMVZsY3hXbFEyVkhaRU9EVjRUV2xSWm5WaGFUWXhaa3hKTWpneFltbzFWbk00YWtwc1MybFRWREYzYlhoSmVGZFRaM0EzYVhNMk5XNUhNRm96V2xjd1NtbEtiMUl5WW10QlptTm5kREZyT0cxV1FrTkZkVkJXVDNvNFRqVkpUVXBoV0dnNWNFc3lSSHB2V0dGeVpXSmpSakZJYmpCTmNERXJLMU4yZUU4MWJXbDNWak5CUWxWeFVWVldkbkJhTldKeE56QkxabWxxWkdNMmRTOWFWWEF2UzNGTGJWTnRiVVZKZW5kVWVuWlBNRXBZUTB0TFQyWjNTRTkzTDBsaVEyNUdkMEpuV0dOVlZTczNkVkJyZUVJeVNFcE9Sa3RPVVROSlp6aDJObTFhTWxwRE5rRkNPVmRYYjIweVNYSlZabTlaVEhkV1pHeE1NbmhCTWtjeVpUTm1PSGN2T1Rsa1dITmhTbGxNYjFsemJVOXlPRmxOZW5JeFVrd3pZVXBoV1dGdVVFWTRjREJXUW00MlNHWTFkbGQwYWprd05VRmpOVUZLYjBabWRqWlNNVlo0TmxWYWNGSlJVMWhqUVdoVE1XRnFVVU5LT1ZoMFNGZDFZa01yYkhoRlJGTllWVE5pVjJvME0yNWpkM2hrUXpOaFdXMUxWR2xwTm1oVGJrVlJhR293WmpWSGVqUjNVMFZUUW5WdU0zazRabEZ0ZGxwMllXWk9UVlZVTUU4d2FqZHRUMnBDWmtsMGNIbDFZelJGY1ROck5VMVpiRTEyYjJKTmMwNVZZVEUwY0hrdllVWjNRa1V3VkhGNGIzaE5helZrVlRSTVNGUmlTbFU0WldWblRGVjBMMWhqVlV3MVFqWTJVeTlIY1VKRWNuaE5aREZqYzFWelpreHhOa3B2TW1abE1GaHhiSFpTVTBkQ1Jtd3ZaRnBDV1VrdmFYSmhjRFoxTHpWSVEweGhTbFlyVEhkbVV6WkxWek16VFdwcWFuSmFWRlZTUVcxelNEbFhjakZ1UzBSV1VqQnpkbU41U2twUVN6ZEdkVkZJYW1wNVJrSXpXRGN4U1dKM2JGQlVVUzlEU0ZSNWN6QlljME5UTlVveVIyOXpkM3B5VURsQlRFOXpSalJ6TWxkNFdVbFhNVmhsVVcwMk0yaFFRUzlYT0hZek1WVjNNWGRDYkM5RWIyTmFSMmt6VVc1YUx6RnRlVlV5THpSMlkydG1Uazl0YlN0RVdrZEJSRkp1ZUhZeU1XSm5lWGhYY25CV05GUkRNR3hGZFdGMlFqRlNZMHQ2UjB0UmFqRTNieXRwZEhZMWRISXdWREJvVGxaUVRrczNSVEF3YTBKelltUXdPSGhhTUdoSlRuazViVXR2U2l0cWVrSTBhbWMwYjNKRVZERnVSRTVVYzNNM2JIRlRNV2MxVVZSc2JHaE1aa3Q1VEdNclZHVlJORUprYmtSVVkwSktNR2hUYVd4c2MwbFdTa2x4ZDIxR1RFZFlibXRQY1RkYUwwVTFiVkJSVG5WSlprcHBTVlIyU2paNloxRm9VVWQ1UmpnNVYzcExhVkp0TVRCVldVSjZOUzlhYm1weFlYVlFVbTlUTW05WlMzQnNZelJHTTFoaVdXNDVZblI2VVRSS2NWbHNUalZOWjJsdGVWWmxaeTlaTVZwNGJuSm5ZMlJQU1haVE9WZElXbEJ5WW13M1VFOXZlbUpuUkVwSGNrb3dNbTlxU1doRWJYZExZVU42U2xCYVl6TldaR1JzVm5Kd1dUSjJhREo2ZGpWUFRVRkpjbTVPV25SMWRXaEViRkJoWTBoS1NpOTRSM2N3VjBGWWVqUjJaVlZSUm0xdmVFUkthRnBYZVV4RVNrUnZTMkpTTTB0cGVHUkxlRXM1VkRaUVdWZFhXVTVCU1ZwVVRrSTViVGxyYzBSMVRFWXlNa3BqZG1oa2RUZzBSRFpvV0ZoWk5UUjVXa1pxVDB0eFUyTXlhVkp0TW5wT1NXSXpSRmxPTkhoNGFWSm1lRTkyWmxwTlNqRTJRek5oVDNWcWJqZHRjSHBaUmpGR1ZpOVFTSGh3VlVwNGNIbDFkWEJUWVc1dVdrRnpWWFJHU0RWRGFtOHpiRTk1Y1hZemIxTXZiMGM1UzJaRVNURkplbXBrSzJsaVVVRnZhakIzVkVWTFNWWmtRemN6Y2xaalExTTBOMjVKTkdodFRucHZabGNySzAwd2VTdEtTVVZLTUhOUlJrTmxlSHBaVTNsdlUxbDNOVXA1YUZWNGNEWmtVazlYVG0xRmIwcHBaV3hpVVVVMFYyWXdNbk5JTDJzd1IwdDNVRXBzZUZKQ1NqUnNOMFpqYTNCb1lVeENSMkpRVHpOMU1XVjVSWEZDYjNOT1lTdDVUbGxuV2psaWRVNXJTV0p4ZUdvdmQyNDRORTF5TkdoUE9FNW9aMG95YTFWWmVsTllkbUZRZFVRdmFqZFJRMVpxUzI4elQycHJXVlpsWVZkdVN6Z3JhVUZtZURFelRIUTJhRVZxTHpnMmRtRnhObU5LZDNCcWNHMUpPVlYyV2tsa1JXTlFWVTAxWkVwNU5ESmhZalF5TWpaUmRrMHJSa1JSTVhnMVQyWkxRVWh5VTI5MWVXMW5kMFpIU1RobldrMUhaeTgzVVdwaVRrczRVM2N5VTNWMk9UVkRSMDAxTUhjNWNFNXpPVGg2VDBWbU9FaHlWRmd6Y2pseWQzSk9PRWRFTkZCYU5IRnROMGd3U1VKbUt5dHpNek50V21wc2N6bGtUMGhFZDNSdU9YSlNhVTlwU2xSM2QxUkVLMkpFZVROdFZscFlaSE12VlVGcUwyZG9SbUZ4YVZsT1JrbHlhVnBUT1hOVlEyWjZhakJvZFZOV01GVkNkbkZCYzBSRmNYbGlZVmhuU1dsVVpsSlBkblYySzBObVNHUlNhV0l6Wmt0QlprZE5aRWhQTjFwUlpESXJjRWN2T0VWeGEwWXhPRzExYlRaV2JWVmpja3RWWW5GUlJtTnpXalY0TkZFemFXNVFWbGNyYVhWVlNVbFpVMjVQTkROV2FuWk5VSFZSU1U5RlNVOTZNVk5LUWtOTmJsaFNTMk5yUlU4M1NHeHVOR3B6Yld4b1dHUlhSSEJPVGxSRk5HbHFWelo2UVRaVVZ6VmhhemhNTUVSV05taFJXbkZNYm5CaU1USklNbXh5VlZWc2RYWktkRGx5YnpCc2JWSnNOV2hFUVM5SGMxZGFOblZSYTNwVVZsQnhWR0pqTlRsa1JFOUlkMWhtTkc5dWVYSldUVlUxVldRM05XRnRjRkprVm1jM1dHcENkWFpXV0dkaWFraHNhazFMTmxaa2NGUkhLMnAzUWpCalVsSmFiblF2UlhwcVdEbE5ZV1pzVGtVclN6QlNNRWRKUlhCc2NIZ3lRM0I0T0hsVVVrSXZkR3RqYW1GQ1VuTTNSV3B5WmtGa0wwMDFjVE5OUkVSbE5Xb3dWMWt5VUZaWk0wZ3pjekpNU213ek9VTnplRkYyTjNGUlpIaFhURkkyVDFnelEwMXpOMnBZYWxOTUsxZGFURTlqYjJReWVEVTNXRWhXUWxoMFIwUkZUbkpLWmxRd1ZFSjRkVE5FZDFWbk1rbE9kVWhDYVhGdFNXNDJWSEpWWWxCVVZVWnJOSE0xTlRoUWJWazRVMHd2ZUVkNVpsZ3dkblowVUZkaWJFTnBjVUpzYjFkeFJGUnVZbEkzV2pNd1ZtRnVNR1FyVHpKYVprcFBkMGR6VEhaMFR6ZE1URzFPVGpVekx6SmljMU5OT1c1a1JVaGhUM05DTHpaUk5VVlpWRU5oVjFSaGEyaFBUR1ZaYWxGcU5tbHJPVUZoWmtKME1FNTRNMWRWWlVJNFFtczNibHB0UkhJMlNFY3hlVE5TVkVKSVJFSldSa2QzSzNkUVYwMUdZbWQ1UjA0elJuWmpRMWd4V1UxMVYybFlRamRJYlVkT1VUYzNTWFI2Wm1WR1ZuSkdNVmQ1VjFacFpGaEdPRzlEY0RaSWNGSjBLMmwzVGpsTFQyUmhOVzVXVDFGdVZtb3dhbVUwY1M5bE9WTTNWbmxLUVhSR1RTOU5TV1ZRY2pSUVlXbE9NVmxVSzJsT2NtbHpRWFExUVZsdFdUZFdPRVp0VjNRcmIxcGhVMWgyVXpCb1ZYRlFTbVY0TUdRMWJWaExjMWQzSzBnNU9XWlRTM1JGWWxWTlIyRTBibVJ0VTJSbGNUZzJUSGRQVVZBM2FXcFRSWGRoVWtoR1lUQlVLMGRLUm5oSFFWRnBkbG80TVU5RFRVTm9OMWxOZUVsek1tMUhUM1JyTjFGRGNVMXpibVZGUzNoaWQwUjNWR2xMV1VoRGVtbEZXRE5vWjIxRlJUWmhPV1JVU2xWamJsVTVUazVTSzJsdFdFdzVlRFpJWm5Rd2Nub3phWFJKTUhKSmNIb3ZPVVZJUzJKdVlWSm5NMlp3VFZGRldFNVdkM1JHTWxFcmJrSnRZa1pIVFdoc1RtSkxLMUV6SzFOcVdsYzNibGQxY0VoV1dFRkVNRXh4VUVvMmNrSjJTalZqY2tWVlVHMUdNbnBDWXpreVNFMWxSM2xUUXpkRlMwNXVTalZNTVdZMWMwRkVZbkJvZDI5V2NrbzJTbFZKU1ZwRlJsWnJjak5GYjNOcWRFeFlhVVl5Y0VkT1RXOU1PR3czZGxnck0yWnRaREpDUlRWMFl6UkhlbGhOUlhZeFJYQlNXRWxRVG5Bd1ZITmFNbWRwZHk5RmNYbDVlalJITldkNlZFcEhjMlkxS3pod1ZXOVNWMUUxU1U1RVVGUkdkV05sUTNKbVFUUmpORE5oTTBSU1oyRTJVR1l2V0ROMk1UZFBObEF5TlZKV01YTmhVbWxhTDFwVFQxaFFZMnBsYlUxaE9FUlRTbnBJUm1wVGJsRktaMU5EVUVSNFFsWmhaazlYTVZSTFYzWjFSWEJOUjJOV2RHOXlXbU5uUlVZNVJpdEdORXM0TlU1U01sQnhWM1ZDU1RnMlRURXhaekJaY1hoVmRHRkxReXQ0SzFCSVpYSnBlSFZ4U0dsRE9VSnRORE5OUnpsSU5FOVJjSEY2UjNSWGNtbHRWRUZvUm1KSk1XaE1iMkZ5TUVvMWRuWmphVkJ5VW5WdmR5OVlPRTlPWVdoSk4xQllWekJTUkVSS2RVZDBOVFJoUkVFd2EzRkZVakpZVFdRemRrOWxUVkZvVEM5Rk5FSk1Za2h6V2pkWlRHOWFTSEp4TVhJdlNXODRiV2g0ZFZSWmQxQlJTa1YyVlVscGNrbFNXbVJCT0ZSdFNGQjVTVlZWUXpSeGRVRklOV0Z3Y2s0MlYxTlBLemR3TVZkWlNYcEthVkl5VlhwNE5tWkxVRmR0ZVdjOS41N1pOU0JqQnlfMmkzdERXLWZ3NTNmeUMwbk9BcFdzVGhEcFh3X3hSbUx0YUtMSk03c3UzYnBTZk5VNThyYzE2SmxibFhmYldad0JsenBxS2E0N1JuUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:12,032 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:36 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:35 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:35 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=7AC501C9BEB6C1A08EF2B79FE2FFB1B3; Path=/; HttpOnly')]
2020-05-27 09:07:12,033 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:12,033 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:12,033 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:11",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090711 AND testcase_id = 13 AND step_id = 23 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:12,108 testcase.py[line: 205] INFO: 测试用例[id=13, name=作业票授权]执行成功
2020-05-27 09:07:12,108 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:12,109 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:11", case_exec_history_id="20200527090711" WHERE executed_history_id = 20200527090707 AND testcase_id = 13 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:12,327 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=13]的执行结果
2020-05-27 09:07:12,748 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '作业配置', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '6', 'creation_ts': '2020-05-15 08:13:20', 'node_order': '1', 'preconditions': '', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '8'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-1', 'updater_first_name': 'Testlink', 'id': '7', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:06:57', 'tc_external_id': '1', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:12,887 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:12,887 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-27 09:07:12,903 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-27 09:07:12,903 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:12,903 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:12,903 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:12,903 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090712', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:12,916 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:12,916 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:12,916 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:12,916 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:12,916 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:12,917 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:12,917 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:12,917 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:13,198 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:13,198 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-34-zTyJFQeRF9vp0bDxIVIfvAQ9edDETd-passport.51gxc.com" />
            <input type="hidden" name="execution" value="3f81cc33-7982-4441-9d3c-c44149cb9031_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVDFjelVVbFVhbFZQV0ROUU1scHhkVlIzVFZKNFNXSjVWRzVvTWtWMVUwRkRaa0pFWTAxMGFqZzVTRzFzVTBOVlEzRjVjMnBzY21wd1JraFJlVXQ2UzJkbE9HZFBSRVJpYm13MVYyRm5OMEpKUmxZek0yZEZXSFZaUVNzMVRFZENhMEprUkRZeVRHUkZTRlZ0TjJkc2FteExZbWxtZDIwekwyeFFWM1E0ZUc4eWFrdDJWeko1ZDI5c01HTTRUbGQyY0hodGRYWXZia2MxTXpSWE1VMXBNMlZaTnk5MFNYaHJOR05ETldKeFJtcHBjVFl5WWpsaE9GcHZTRGx5YjJKbFJrRXJaM0pWZDBKbU9YcFBNWE5UYVZkUGN6RjJaMHhWZUc5YVJqUldPVmN3TVU1Nk1ubGlURE5CYmtSbVpUVTRVMmgyVDNaT1oxRXZiRU5NTjNKWlYxWkxjVk40Y0ZsVGNrRk1SU3RtUTIxRU5VZE1RM3BxT1RJM2NVcDBZVlZXYkhSMVFVY3hXREl5TlUxWVNESlZhRTVqYTFveWFVUm9VVWRzV2s0M01uVm5UWEp3UW5Jd2JscHdjWEZYTjBVM1JrVnFjV05EVWxWaVkwZG1hVTFFUmpGcWVtcG5ha3cyZWxsR09HRlRORkEzWkVscFoyRldNMDkzVVZwak5YTlZSR05qVUhsRmVqazJVbnBqVjJSa1lWSkNkVGhLVmlzNE5tWnpVRTR6VUVWUVdFZFRUR0pLWVV0UldWZDFNMlI2UTNWd2NuRmFOalZ0TVVnNVMyWnVPR3hRT1U4MVltcEZVSE5pTm5GVmJpOXdaVzUzTm1GMUszZFROSGMzY2pBMmJGTm5SWEJaUlVGRmNEQkVjMk0wUWtJd1ZuZHBZWGd5VlZCMWFsQlpWRGhoTm5kVmVsSm1ka0Z0YTBWU1p6RkJVME5zVEZoeGJrMTJVVXB3VjNwNVNVVlViVFYzVms5c1VHMTVaRmhZTlRoRVpXUlZhRWN4UjBFMFpHNWhVR1ExV0c5WmRrOHJORVI1UW14WVRsWmlhbWw1VDNaR1QwbGtlVVYwZGtKTVpUTmllRk56YTFSRGVVNUhaMjFxTmxvelFWRXpUamxFT1haamFFSXhjR1V6VUVKUloyTnRjelZhVjFwM2FIaHNkRUZUZEVwbU1UVmhORzlqU1ZSV2JUWlFLelI0VWtwbVV6bHBiR1JUTm1seGJVSnRZMVJoUkhSdGNuaG1XbFZNT0ZkbmRuaHVkMUJ3TmxSelJHcFJkVlJ6WkdneWRscHlVWEpDUTJRMlkzbFRVMGszWm5ocFlWRXdkRFprTjJkcmRqTm5ielJuZVhBdmFFUjJhVmx6ZERsM05TOTBSMjVYZFc0MGRUUm5OSEpKVkdoemNtSnBhRXh5ZDFZMlFtaFBRVWQ2UTB4UmNUTmlXa28wUldaTFkyOU9ZV2RVUjJGUGNXd3pSblJFVEZCc1owMW1WVTVYV0c4eVpWaEhiMm94WWpKTWNHY3paMDh6ZDBOd2Eyb3djMUppYjIxaGRscGFNbUZoUm1oYVJrUmhSWEJZUzJWalVGTklSeXRNWm05UGR6SklhVXd5YldoeVprWXlWMVEyUzJKa05UbFZkVWwxWldWNVMwWnNaM1J2WkdaU1psWTBSSEJYYld4aFRrVmxTbGREVUVKcmRtOXlNWGwyTkZKSVFYaDRVMkZYZFcxSGRrcGlObFpuTkZGemR6ZFNUMEZ5WkZkSGRVOTZiMVJNYVhCclRXZHRWRlJEUjNSTFowNXpkakprVVd4ak55dGtibnBSVWpkUUsyaG9WQzlZTUdWRVkyeE5SRGh2VkRSM1ExVkVZbGRZVmxOR05rbzBaR2RTT0ZZeU1VOXJlRmREV1ZCRVNtOHpOemRvUlM5VE1EWTNNeTlpVDA5NWFFZHBkRTlIZERGbFRGWjBLMFZIUWpnNU9EWkpWREZLVEhOYWVqVlliWEJFYVVjeFl6aGxZazFzZW5seFlVaHdhM000ZFVaUlVFbElSbkpJYmtwTlpDOTBUV0pUVnpkYVdUWkdkblExY1cweFltNVdVVU4yYkhjNE1HNTBWbVI2WjNCNVRDOTVOVFowVUd0NWNUQjFRbWR6ZGpCSGNVdDZXRVl2Y2s1TmRsWllMMWxDYVVFeVIwWmlUMDlLYVRrMWRWUk5RbWxpTDJwWmNIcHVPVGxNYW10b1prcFZXazVXTlVOR2ExbFFNbVpYWWt4eFVXUkxTbTFUVFV0aGFVbG9LM0pHZWxJd1dHeDJUbHBwYUhFNVl6RjFOV3N3Y25WeFJXTTRNR05NUkVsbk9ISlBaMmRPTld4VVNreEhUekJsWXpSSk5uZHlSbTlaUVd3NFV6aFlkM1IzU1hnMlV5czJXRmhvV0UxQ1EzTTJlVzFNWlZoUmJrczFPVTlRZG5rMVRrWkZhV1o0TWt4UlQwVmlTems1V1dwTWFXdGFjbXgzVTFkUk1VZENkbEk0VDFGUmNrbEpaMVJSUmtOMFNUUjRhRUpMUTIxR2JrTTNSa0ZHVGpBd1RHUjBlbkZSY1ZCdmRsbG9OVklyVjA5VVZITkJORVoxVld0aFRrOTZSMHBLYzFGVFNIaGxNa3AwYmxWUmFTOU9kMmRrTVM5dVVHTnJLMmxwYjB0cU0yVnJRV3hVTTBKUmFsQkpWM2RVVGxOMFVtUnNXRnBXUW5seE4wODVibVpWV1dsWFFuaFplbk5xU21FdmRrTkxTa2czZEhselNGWXhlRVF6V1hWSlFVWTJWbmM1WVRabU9IcFhaeTgzWTNWaWJtbGpTVFZ6YVRFck4zVTJWamxwYUdkRVdrSXJhRlE0UmxGd1QwZE1NV0pCWjBjMFEyWmpibWt5TVVndlpsQlhiekYxZFZaSVRqSXpaV1Z3YmtoUldVNVVObEUxUm1WemRrc3JSbFV2T0haTlIyRndhMUpVYzBSb1UzRnFkRTVUSzJScGJEbE9SbFUxU0RsaE9VbDRRMDB2TlRScmIxaGtPVEZKYjBaeVozbElUMkl2ZUd4aFJuaEplSFpPYkhGbEszRmhjRlJ3T1hOR2RuRXhZVWw1T1RkVVlVMUNVVGN3YURaVVEzTTFUMGRNVjNwSFJtUmtjME5qZDJGcVJGbFBaMDQwZHpWYVQxVnljVGxQWlU5aVRuUmxNV3RsVDFkblJ6QlBWUzg0Y2pOT1NYUklPVzlMWnpobGRUVkxSMVZPYUROTE0yRXJhME54UVhNeFdXMXRhbGxIV0dsdGVtdHZUbk4wWm5kbFJsUnhjVWN3ZUZGV2IxVjZZbXhpVlRRMGRHRXhhRUk0V0hsSE5taFZNMFppWkN0NWIyWTJSVXhRUlhSSVZYTk9kRFZqZDNJNU9YaE5Xa1Y2VHpCcE0zcFZMMHgyVlZkcWJGSXdXSFZLY0ZoMWEybGtiekpFTVRGRFlYSmtabXczWjB0amVXMXphWEZ1Y0hnMlUwOXpRV2RXVFZwQlIxUlZNV0kxV1RRclUzQlBZa3REY3paaVRrdGtWMXB5TVdOYUwxZG5WQzlNZFhvMFlrMU1ORGRXZW5aSFJ6VjJWMGhSVG01TmEyRkJLMmhHU2pocU5XY3hRMjFDTlZvNGJrRkdVR3RxZERCeFluZ3JVMUpTUnpab1QxTlRlbFpuTDNaVWRUbGpiMnBSV25SelpYTnpjVWxKY3pOb2JqWndRemRvVVdOTU5VWXZXbkIwYW05UGFtTmphRWxKVG5OWVpWRTFXWGRrVlRKSGJXZGhWR3hTVW5BNWNHRk1iR3hzVjNjMlYzWjJZV1p3V1djMVQxVm5hRGR4S3paNGVtTlJMMDV3VEV0MldFWlNMMFZuY3pkRlUyWktkREpvYm1WNVF6ZG5NaTlJVnpkNVJWbFVlRlJEZUdZeVZqVk9lbGxYU1VodU9YZE9aMEpRTVRad01HeFBja2gwWm1kVVdVTTROaTg0ZVZoVlJHNVFLMEpITkRrMU4yZFljVVJtV21KaGJGaDVMMDE0UzNkdlVIWlNNa3g2YmxsWUsxQnZWazkwUkVrM2NGaGFkM1YzYTNWTFZHRmtXRFZ3Y21WNmRrdzBMMGg2VW5relpETk9jVVZPTVZWTlpGUmtXVk5CVm1KcVQwaHNOalJ2ZWxONGNHMDJZamgxVjJSTVFVaG1Za0ZSYldSNWFtNDFZUzlDUW5KSlNXMXdWa3RzTkhBM1ZFVnhSWEJrU21Oc1JsUTJhelExWjFCdU1WTXlOWGxFZFRnd1YwTnFUM2swUkhab1EzQllXVFJPTkcxUU9WaDFUSHB5UkdkRVJWTlNUWFZMU0N0UE4zVk1VRVJJUzBvMmJsVmtXVVI1VERkQlFYWlljR2hhUkM5bWJXa3haR1pFTTNSMVVXeFZaVVZ5VEd4WllVZExRbTV3Vm5OR2JreE5SRFZVYVdkb1FuRkNTMWx2UjBkMWVGWjFWRk55TVVsMmVGUXJNa0pRWmxoclduWlFaRTVVU25nelkzcFFTV1pWYzJwT2RWVnhjVU5SY0c1VE5FRkJWemd6YjNkbk1YTkRSR3RWTjNwdVpVSTJZMDVDU1cxclNWa3JiWFJFTjJ0bU0wVlphbnB0V1hWUFZIRmFSa3QwU1RRdmNuZzFZMDkzVWxCTVlsQlJZV015UjJkU2RtUkNja2RFVnpodWFXTTRTRTlpTHpGWGEybE1iSGw1UkVKcmFUZDBNMlpJTTFORWFYQnRZMjFFVWtZelJsaFNaVXBaYlVWTlJ6TlhWVEI0TVc5VU5tRmpZall3WW1sM2JYSmpNVGsyVGtKaFdUZEdXbFJtVHk5YVZXVnhNR05XTHpCUWFsTkdSamx5TDJSaVZGY3ZOVk5TT1ZCWlp6SmpiRzFVUXpJeFl5OUpiVzlUZVdKWGFEZFZZa2haUTNaTGJVRllUVnB4WXprd04wcFNXRFpvYVVGMmQzWnpkM3AzU0VwdGIyMUhWekZMTURndlRuWTRSMlp2Tm5sRWMzSmpkV0oxT1RRNWRtdFdORXgxY1ROWFpscDJVMEpET0ZwblFtazFUak5sZWsxdWNsQjNUWElyZFZKQ09YaDNVa2czWmtSS1YzTm1SMmwxVDFCdWNIcDBlRzVzTmpCaGF6VTRiVE5QUXpBM2NHbFZlbEpzYm5kb2JHUjNZaXRJUms1RGR6a3lORUp3ZEVOVVEzVmlkMmQyVVZKUVlqaEtTWGczZVV4M1Z6TjVORWRDWjJ4T2FYZEpjVUZ1Y25ORFFXWnJhVTV1TmtGbUwyaFBTbGxoYUVkVWVIbFJNVkZJYUZkR1RHMUNjSEIxYlVWaFF6bE1XSFpCVDFVck1rRTJaamtyYlV4TE5DdE1SM1kwZFRSQ00wdExaRmhCZG1OUlpVbEVjamh4UjJ4blExYzBjRXgzVjNSU2JtTnFVMmwyU1hkRFpEY3ZWWEF5YkdKTmVtWTFhRTVzTjNncmNrUlRlSFIxYzBzdk0zaDNTMVJOY1Vkd2RXTnJiM2hYUlRaa1JESjJhbEl2TkZabVlXZ3pPV0pMVTFRMmFYQnBLMHhZWkhaR1RERmlSekJHZEhrck1teHBOV2hUUWl0UlpUTnVNR3RJVm1aaFUyb3lWazlsVkV0RVN5OWhUV2RtTVdGdk1VaHZXVTFzUTBFOS5Qcnd5RTlTa0otZmdFY2ZHN1BOUmRtQl91Z3dvNDBxZVM3VFloRzhCTDlGZjBhZVJZaFVjSEJfaW5UaXN3MDZSazQ5WmN1LUdTZkMzaFdlNmNaeGVzQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:13,199 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:37 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:37 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:37 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=98EF4A9E6A5547EEE41FDE27E3E08855; Path=/; HttpOnly')]
2020-05-27 09:07:13,199 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:13,199 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:13,199 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:12",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090712 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:13,218 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-27 09:07:13,219 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:13,219 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:12", case_exec_history_id="20200527090712" WHERE executed_history_id = 20200527090707 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:13,422 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-27 09:07:13,731 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '气体检测录入', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '11', 'creation_ts': '2020-05-20 09:07:32', 'node_order': '3', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '22'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-3', 'updater_first_name': 'Testlink', 'id': '12', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:09:57', 'tc_external_id': '3', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:13,870 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:13,871 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 11, '气体检测录入', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-3')
2020-05-27 09:07:13,904 testplan.py[line: 76] INFO: 开始执行测试用例[id=11，name=气体检测录入]
2020-05-27 09:07:13,904 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:13,904 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:13,905 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:13,905 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090713', 11, '气体检测录入', 'pan1_of_cq', '长庆项目演示', 22, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:13,934 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:13,934 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:13,935 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:13,935 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:13,936 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:13,936 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:13,937 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:13,937 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:14,251 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:14,251 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-35-segh45StFxc9ubnmiIj9X5Q2z6pWAe-passport.51gxc.com" />
            <input type="hidden" name="execution" value="3a65185d-1738-4b57-8d7f-e8ed53d64f22_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuV0VaVlVuUTVOV0ZUYVVkTWJWSlhURlJLTjBGM2R6aEhVaXQxVkZSVFZrVnZTa2d6Y20xa1JERkhNVmh6VTA1aFpIUTFSR2h1YVdNcmVVVlpTMmhaTW1wNWFXY3lhRTRyUlhRelJsQktaRzloTjBWUFp5OUJSa28wZWxoMmNVUmxlbE5HTWl0a1JuWlNkMjk0TW5VeGMydFBWbXRSYVVrME0wSkVkbG9yY1d0TVNuVmliMU5aWkcxbmFVMVRaRkJzUVRGVFVHTXpaVmd3U1dKSlpGaFdRVWR0WTBreVUzUmtkMFpZY0dVMkwwVTNObWgzT0ZCaE56RkJZbEJDWW1WemRuZENRMFpWWVVoU04xcE9PRkI1VXl0cksyeDVka3h2WjJzNUwwZzBSakpRVGtSTlpqY3ZlV0kyUlVGRVYzUkZTVVJvWkVkNlRFUldkblZXUzBJclYyMUdhMUIyYUZsc1ptTnRZamx1YVVKWU9EaFBZVnBKZFc1TU5TOXJTVEp1VTBaa01rOVRjMjUxZGpWS04yUktOazUzY25abWNYUjJTMnBYVWsxUmFrSkJZekJzUm5OSlpWcGtabmR0VEVwUE9XSjZhRTVuYTFVNWFuZ3ZOMFY0WVUxc0t6ZHhVRVptUkZSRVN5dGxUM2xxZW5kMlNUazRSRUZ2ZVdJM056bFlkV2hVV1VOVWN6ZEpTSEpKUVU5elNVVkxOV2g1V1Zjd1JGTk5VMVpEVGxRclJGZFhkVXhzYjI4dmFrcEpWblp3VlVoa1kyNU1VemQxYkRCaU1TOUhOUzl0VUc4eWFtMU9lV3hvZEdoVGVUVjJaRUU1WW1Jdk9GTkNUa2t3VjJGWWFXZzRaRU0yV1dsMWNUVlhXVVJuTVdsSFNYZENUM3BJZWxoVlN6UjZMMmswTUZacVdHeExaRk40TnpkTVFtTjJOMnc1YW0xeldGQnRlR0pVU1U1YVNWTklVRXRqYjNOSkwycE5ObEJGY1djcldsRk1Ua3hPU1dodGNsQkhSSGhOVWtoQlQySXZWR3hXVUhWUFQxRkRlVzVrZGpCeWFFUmlVbTByU1dwWWFFOVlSV2MxWkc5NmFESnZaRTlsVTBJemFWZHVPV0pSZW1aR1RHUklhV3RUYWpoQ1RIRnRWelkwYkU5RFVuTldWbU5LYlZWalUyUk9iRWRyTWs5NFVtbEhZVVZhVEVVeE1FczJkMXBPTXpGc1NUSjBNRkZhYjBKT01rRTFRVFZIYlVrNVNrSk1aVWswTlRkWE9FRlFOMmxZVVVaamMzaDRhMWRRT1ZNdlFYVldZVWMwU1ZCVWJGUXhlbVp1YWtzNVdVRjFWSHBrUlhnMlRreFRORTFvY1VSU1oweHFPVXRxUW5ad056WXpNMjVVTkVFM2NDODFjVk5PWVVaM2ExbFpNbVpHYVRGVWVUZGlRVkpzTWpsdlVqZFJaV05rU0hVd2JrcElMMkVyUkdkaVNsWnlXa05LWXk4NVEwdHlVMjV3V0drMVozUmxVWEpHU3pkbFFVMDNURXBOTHk5UVdFOXlVVEZQVERKTGFXOUlaa2QxU1M4MFNtazJUVlEzZDFRMVdtWjBjM2xQUXl0alVsRmxLemRUYUdoYU5YUXlSVlZNWW1ObUwwMVRRbmhHZDBvd2FYWTJjWFZ5Um10a1kzbFZLMFpaVVhKWmJGWkdaMDVvU1V0UmRubHJSbGxvY3pOU1dsUjBUWHBNZDBkV05WRXpjR295V0V4aWJXa3pLMU4xVldWalN6bFJWRlJOU21oS2VFZHNRVFZvVDFGWFNHRmFObGhrTjI1M2NERTBURFZ1YjBwWGNHZHlWVXRCTlROTVVrRkdXaXRKVm5abVpqVnlaRnBTVlRSb01qZERTM0pRYUZGd1owdGFOMk5PTlcxMmIybDRXR3c0Y1ZNMlNGa3pZbmhaWkUxbkwxUm1ZMFJZTW5RNVFXdHVORUpUVUdabFRVVkdla1pSVHpFMU1XMWxSMnhtVEVkdmJWcFlaekZrWkRKTmIxQmpaek4xZWxkd2FYcE1URE5WWkdwMlRGWnlkbVJVUmpOd2VYZExNbWhYVDFSVlRVbG9SMUZuVWxSSlVGQkVkM055VmxOM1VtMUZNMHQxVUVWR2VrbHRUWGxRYlhGb1ducEJabnBaT0RKV2JFNW9OWFprTUhwR1pVZFNVRkExTml0bVoxbGlNemxUTTNONlVXMVFkRUpFVmpOQ1FrbGxVV3h4ZEZRM1JFTkNRWFpCTldGcmRsSTNTell3YW0weFMxUjJhVzVsTVZwQldsRXdlamN5UjJoTWNrcFhUV2x3Wm1KbFdXOUhkSEpOWVZaNFJHSnRRME5MUzBvNFZ6bDVVa1ZOWlhKSE4yMHpjMkp1ZWt4R1VtWjBRek5KV2xSWU56bEtObkZwT0ZsUFdTdFlabk5JZEZsaE5HeHJTVmxITUU1RVVHcHphMnROZWtkSVZFZ3JkREZqT0U0M04waFhSRVY0VkZRMlEybDZkbE14YXpFME9EbFRUMlJNYTFocFNYWmtWV2MwUlRkcWRrUlpVMUpGU0dacFVWQmxiVXBaYTFCMVEycEJUbHBFWlVOTWIycHdSR0ZKZG1kT1RuSkVaMjV1V1RKM0syVTVlRFZ3UTA1blJ6RnpTV1pJV2tsWGNXRnljalJtZVV4RFYyVXJiRmhXY0hkV2IyaFBNMmw2TVdObmFIazRabkV5Y3pCME1tMXZaVFJNY3pSWFR6aGpVVGQ2VTJGd2VVMWlPRFJRYW1weWNtTkVkR3hrVTBadllURklhSE5WV1VGeE1VNDBlR05qWkdjMVUxbE5VR2syUVhsUlNYcENVMkpYYVdsQk5HOXZjRzV0Y1VRelJuQnNjSFZ2ZGtoelZsaEhUMHBzV2xWYVNGZFNVekExUVhCdmF5czVha0p0VFhsRFJqRjJORFZqVFRCRGJsZHZPRGxJUTB0dGEycDZaSFp4ZFVaalZIbDBZbTh6VVM5akx6UmxZeXMxU1hkTlNtNDFkVU12VVZkRFpFRXdNazUzTjFwdU1FOW9TMlpyYmlzME1VMVplazB3U25sclFXZE5iV2RZWVRWSUwwOHZaM2g1YWpOSFVqVjNSVzFRV21ZM2RqRm5Xa3MzTm5SSmRsWnFRVzlHTTI5SGIxQTVOa2wyYkdwRVZsTnZlWHA2Y1ZSWmJHTmpOVnBvUTJKa1JrUjFjbTFhWVVkS2VuSjVaVnAxYUdRd1ZIWmFXVTFwUkVadlVWSXJXV2MzUW1sbVdIWndXV3R1Y2toU1RFbFdTVVo2UzFsbWNIRmxVMmhQTlZweGN6SmhPRmwxY0hWdU1XZFZZa3R6ZDFBMGVIRm1XVGtyZUVwWFFuWlFVMFV3TTFCQlUzTklVWE5RTkhZek1FZFVaelZXY1VzeWVHcFJWbGxFYUc5eGJXMVJhSE5GU0dKT05TdEtZWHBpUm1KYVZsTTNkMFZUVml0aldHcG5PRVkwZUM5MlRtRXhURlYxWjJaUFdVUkRjVUk1WTAwM00yWXhZVXRETURaWVJWTkdNalpoZVROR1FYcFlRMkZ5VEZRMVpVbFJNMEZDWVU1TWNUaHZjSG93YjB0VVJ6aFdXWFJITkM4NVppODROMm8zV2tGU2VXdEhWblV3Y3pka2VtSm1RekF4V0RSaGNTczRNM1YzVjBOcGFreHpObGxWYzJ4NE4wdE1hbGM0UTFWMGIzQldMemhXU1ZOTk4zQTJlVE5vV0ZGbFdFODJRVzE2VkVWWlUxaE5RV1pZYWl0SU4zZzVRMGszWTNoa2JWbGFNVVpPVFV0UGJsUk5SMHQ2WmtsRFpHeFdjRWM0Wm5GQlIyZFlVemxPUzJNeGFqVlBLMjh5YVZwS1ptcFVSemR5UWtwSk4xRmpNRkJuV0ROTWQyZEVWM1Y1ZVROdFpIZGthbFJRVFROeFNGaE1ja3AwUjFsa1lrZGlabmMzYUdaUGJtSnhMMWhITkdveWJFbFVNMUl3VldkaVIwOU9Uekp3V0V0aVFUUkVjV2QxSzFZcmRHWm9iblpyWXpkaGIxWkxVMVpVZVRWc1ZYRlZPR2xNVlM5V0wxUTBjVnBoYmpGcmQxbHhLMmh6VkZGdVFtNDJiR05LT0VONk1HSkVWMkUwV2s1a1dsaFFXbEJ6TW5ka1lrcDRXWE0yYWt4R01rNVFkWFp2YTNVek1FRldTVEZSVHpJMWREUlVUMnhOYVhjNVJIbzBOM2h5UVU4ME5VWTRTR3BVSzBOSk5rNTFRMDFRY1VFM1QxUXZTM3BhTVhWMVZIcFFUR3BFWjFKa0sxUTRNalZpU1RCc1lUSjBORWxJZDIxWU9WWmtiVE01ZWt0alUwOXJOamx4TkdkT1lYbGlhVEU0S3prMFJuQmpORlZIZUdjeVQxRmhkV0ZNVW1sTVZtbEtXRkJZYURKTmEyOHhVbVowU1ZKc1l6ZFlTMGd2Tnprd2JtbzFTRGgyTW5WVEsyMW5ia013ZDNJNE5ua3JVRFEwVUdkcmFHWXlZVUZ6YUVwaGJFc3JTVE50TUZCWVZERTNaMVJrZFdoUVEyVnRNa055VG5KbFRtMUxTVWhHTlVwcGNrZERLMlp3TlRkdmVYRldVWFpFU1ZsTGVHRmhZVTR3ZEd4c1Z6Rm1WRUZsUlhGQlMxaHpWM1pyTTBWMVJXY3lkalkxUVdGc1ZDOXRlV2c1V0U0eGJsWmlhMHd2T0VSRVUycHlla0ptYmpSNkwzVTRkbHBtUlZFMldUWllWVkZOUzNOUGQzWkJhRGhpT1ZKaVoydzNSSGRWVEhCTk4yNHdSMU5yVWl0d1JGSjZaMnRMTVU5VFkwWjNNQzl2U1hoWmJWTnNNMnA2TUhCSlpIQjNiVUZMU1RWdU4yOXNVbUZWWlhWblVVSm1XaXN3ZWtacE5uVlBNbGQ2TVRCVU9XZERVMFpFUkVOTWNrdFNlR1ZSTUhSeFpFOXZOR2Q2YzBWWVVHNVZWelV5VjFKQlFUbEVhSGQxV25SVGEyVnJWazFRTVdKWVVVdDRSRkJSY0VSdU1ERktNR1owUlVSVWFGTk9VMncwZDI5WWVIaHliVWR2T1VOWU0wSTJRMlkxVTBGVFYzWlRWRGRxV1hOeFF6UlpkbnAwUW10VE4xbHVVVGhPUW5Rd2VEWkdlR0kxZDI0elFWRm1SRzFTU0VSTFMwWk9MMkpRUzBSd1VVdENLM2RwWkZkbGIweEtOWFJpYUZKWWFqUkhWVFJsTVhWRFZIaGplVGRGVTJ4eWFGZG1TMVZyTUdrNE4wMUJaSHBJYmxSU1ZWZHNZV0YwTkVwWVN6QmFjVXhNVlVONFltdHdiazlHZDBSaFYwWlVMMDVwVG5GT2NuWk5hMjFRV1UweGVXNXVhMEppYzJKNFdpOVBkSEo2VFZoSlRGaDZibTgwZG0wdlZFUnFiRk5FUlVJeVFuQlVVMWcxZWpNMWJVRjJUakpUYXl0elZXTTRSRmgyT0hveVprWjZOamxsWTBka01XSTRVbEJJU2tJdmJsaDZaMlpDY0d0dFdsWklXbEZOVmtwVFRtWm1WMDF4TDFkaWVFWnZaMDFrWnpkQldVMUxOVTV6TUV4QllVMUxNMUZwYW1KRFFWWmpVMGR1ZGxSTFoxaEJOVzU1TjJzOS5RV25Ea3o4bGlGaVJtZlE5ZlF0c3FlM25GUEdMQ2hoWVVaZVV1R0xacWJFVEtGWWJCeVI2RWtzTUJEb1l1VUlIZTZvWUdUTjJvVG5aUFIwTFFfYUgtQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:14,252 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:38 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:38 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:38 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=EC41909418FEAB21B7FEF44504BC3D77; Path=/; HttpOnly')]
2020-05-27 09:07:14,252 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:14,253 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:14,253 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:13",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090713 AND testcase_id = 11 AND step_id = 22 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:14,270 testcase.py[line: 205] INFO: 测试用例[id=11, name=气体检测录入]执行成功
2020-05-27 09:07:14,270 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:14,270 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:13", case_exec_history_id="20200527090713" WHERE executed_history_id = 20200527090707 AND testcase_id = 11 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:14,420 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=11]的执行结果
2020-05-27 09:07:14,725 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '安全分析', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '17', 'creation_ts': '2020-05-20 09:08:30', 'node_order': '6', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '25'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-6', 'updater_first_name': 'Testlink', 'id': '18', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:10:17', 'tc_external_id': '6', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:14,854 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:14,854 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 17, '安全分析', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-6')
2020-05-27 09:07:14,863 testplan.py[line: 76] INFO: 开始执行测试用例[id=17，name=安全分析]
2020-05-27 09:07:14,864 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:14,864 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:14,864 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:14,864 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090714', 17, '安全分析', 'pan1_of_cq', '长庆项目演示', 25, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:14,875 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:14,875 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:14,876 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:14,876 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:14,876 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:14,876 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:14,877 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:14,877 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:15,149 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:15,149 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-36-nJ4F4TrV69lenoJyX6lvdROyWRtfzs-passport.51gxc.com" />
            <input type="hidden" name="execution" value="8a4591f9-1826-429f-b0b4-ab3ab66430e9_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuV0dzeVVsZFFWbmRsT0hwR1EweEVabXRKWmxSaFpWQlVaMjkxV21NdlRrb3JkM05IY25rMlZXaENMMVJvT0d4MlVrTjBaMHhVWnpaU1Z5OVFOV2hEUmpCQlMwZE9iblZIZWpGQlQxVkZSbHBJU1RGWE0zVlZTVmQ2UTNCTlMzWXhibEJPTkdoRWNXeDBPVUV2WmxsSFVFaEpZVEIyU2k5b1RFbHBWMjVaTmlzNE16VkVkbUZ4TTNOalZqQnJiVTVXWld3MmFXUjVURVI2Y0ZReE1uQkxOMlpwU0ROd2VXOXZWMHBvTUdObE9YRjJiV3AwY1dkdFJHRmhSSEoyVW1SRFJUQlNZMHBOUTFwS2FDdFlNMGROUjI1dmFVaHZTVEpOZERWTlJFWlhTM2hVTTNWcVMwcE1aR0pWY2tKR2VUTTVPVU40U0hkVGNXcFVlSEkzWldKUlRqbElabVpwWjNCek9XbFZaMUZIUVV4Vk9FdG1SVnBtYTBocE55dElXbUZMSzJOemJuVkZNR05YTW5BMVMzRmxjelpIVnpoSmVHVXpTMHN6TTJaVE5tOWFhVXhGY2s1QlVHTk5ORmczTWt4VFMzUjZNRGswTWtJeFJVcE5OSE5XYzFoNlRrd3pRV1poUVRGVVRuaE5RV3hqVVVNMlVGRk5ZalZGWjBSWVlrRmxaM2hGVjFaTFlXOUVSV2wzY25aNk9VbEphVUV6VjBWdFpFbGplRmM1U1ZkbGRWbHFWek13U0VKVGFGWlVWM3BqVUVFeFdqSk9kMWRGY2pRMVRGaEpURlkxVDJ4aGRXcFNkaXRLYUVnMFMzaElSV05MVDJ4bU1YZzFWQzltTUZacFpVSkRTR1JCWWt0aU9WQXpTMFExWmtaS2IyeHhUSEJ3TDBaUlZVaHVhbFF3TkdWRGIwdEZURWsxZGxscVdHVnlTMnA0TXpKd2QyaFRWMGd4UzJwTk5tNVVXV05oV2xSWUwycFZSM2hhUlhsUk5GcHZhR3hCTlVOUWMwMDRjVEl3U2xaVlZteHBhVkp0WkRWWldESXlhRWg2VEdNeE4zaHhTRXd2VW1salZUVXZWMDVxUTB0M1pXUTRhREJoUXpBM1NUSm9RMWd3TkcxNWQzRnhhQzlQZWpoWlFsaFFVMUp2WjNSRE1GRXpkak5SV1VaSWJUSXhRMnN2U21abU1EZE1iREJzZWpsMFQwcE5ZM0V6TTA5R1YybDFWak5MVEhoa05sSlBTRE14YjFWSFpGSkxVbVpNUlVSeVUyNVZRMmhCTTNSNGFqWXdObmR6YW1oV1NHVm1TWFpMTWtsWVlYWlFkazFFWlVNMk1HMHhVWEU1VUZJelJISkZkREpQYm5Jck0xQk5LMkpxTWxGMFVtUkJha3BJY2pjNFJVbDViME4xYzFWaVEyVXlZbTV3WlZKelJsRkVVVEYwVFdWNGVIcExUM2hEYVdablZtZzNjV0ZqYTJSeFpHcFZPSEEwT0VkdloybDJPRE4xWldFNFJrTndMMVpUZFhSQmVGZHNUVkpDU1RacE1GWmhVRkZFTVRJemJqWllUSGhWV2tocVFVdHdha1ZJU0hSMVFVWjBVRmh3TUdGTVRYcFdZV2hQTkUxc1NIcFJVWFF6Wm1sNWVWRkZka000UlZFMFUzbHdUeXN6UVhWR1JtNXZNRGsyV21sd1NFZzJWMlJGYTFkeVIyNHZOMjFKUzBRemJEVnlMM0pVTVc0emNsRlplamczVURaRlUwMXhNa1V3WVVSSGVtaHBaVXBOVFd4WFdEVjJTM0kzUzBOS1ppdG5OekpZWVVoWGVUaHlRa1IxV0hCdGN6UjJhemhoTlhwR016QklaVXd4VlROdloyRnZLekp2WnpOeE1rVlhlVGRhYVZZMmVuZ3pVV2RMY1d4MldHRXJjVEpVWlU0M2JWTXhPVTlNYnpaM1NucElNVVpzVlhkaU9GY3pWbUZUU1ZsdE9XVXdTbGxGYTNsSVJsY3JhRTQzUVU1d2JESmpPVVJyTjJ0RWEwc3pUSHA2TTBKUGJHeHVRalp3VnpoRlRqUnZTVlJNVUZVeVEyWnJhelJpWWxkMllscFlieTh2ZWxFNVpHSTNNbWhzU0VSS2JURldRbmgzVkZscFNqTmFNbkpXVDFkeGFHeGFZa2xZVGxRM1lrcDRURzVNZDJsTlQwcHNOVFZvT0hCaWFXUXlVWE40WkRoUVExZ3hXa3BuUlVoQ2VuZG5ibXMzVXpWd1MzQjJRMHBIYlV0eU5tWkNhV1JOY2tkcGVVaFNRM1EwS3pBM2VIVjVXRlZVZFRSMlpFSjBOR3ROZWs1YU5XSkZaemRsY1N0NmVqVnBkREpZZUZWRlEzUmFWRkpyYWpsTlJUZFhNekU1TURkcFMyZDJZWFJLUlhRNVJpOVVSbWcwU0RSQ1UwSXJUVmh5UWtvMlNGbE1VM292ZEdkVWNWZGFUR1pxYkVSTVVGQm1PRVJrZVVNM1FUZEJNekJPVUZWU1kwOUNSWFZzZUhsaVNraHhXSFJ5VmpWRVIyVTBjR3hwYWs5RVVXaERibE5oVDJJNWFFbFdlSGRMYjB3d1RuVlpURVZ6YVdOQ2R6ZEpiRk41VGxOQ1VVdHJPQzh2Y1N0RFlsUkdjbUZZZUZZNFIzcFVTQ3RIYTFGRFREVlVUV1JDYkZJM1UxTkRTbWh5WlhCVWNsTlVXbkJRV2paM09FeFJkVU5LY25Cb2FrSm9WV2MxYUdOR1RITm5ObUZhYkVFeWFrSjZZa1pxSzBGUGIxVm1kMEZrUTFGbU0ySmhPVXhSUmtaWFpVTmFVMDVyVUVSeFdETm5MelUyWVdGSldXb3ZZMDFTUTBodWNERnliSGxxYkdWVVEzZFlhQ3RNYm1wMFF5dEVORnBJT1ZKbmRWaFNTMDRyWlZGcFVucGpVblJsTkRabVZVWmlkbXBvZWtVNGRVUndUa1pxUW5aaVVqQnZRbU5QT0hCemRscExTVWhyTmxNeFdHRlliM1ZpTnl0Mk9GTlNORnBpY210SFRscFRibGsxWnpaa2VrOVdlWGxDT1dvMWFtTnZlVUZuY2twTWNuaHJNVzlLV1V0U2JrdGlTR28yVmtOcE1VNVViSFpyVTB4UVNtaE5WelpRVEZoT1RFOU9Sa054TjBOMFNUWk5RV3Q0UlN0dUt5czVhVmx0ZDBsaFdqQXdWek13TjJGNU9EaDNZMUl6VGk5SWQwd3hNa1o1UkhoblRrMU5aREoyTlZWVldqTmxjVVp1VEN0TlVqbGFkQ3RWTW5GT1JETkZRVkJ5Wm0xcFMxSjVaREJOVmxSSFRXWXZZMjgyUW5wNFFqazNaM0F2TjAxQ2N5dG1MMkZ0ZVM5NVZGWmhaWEF5Tkc0eU5Fc3JaSGxGTlVGaGQzSlVPREJxVjFVNFZYbFNXVXRXTm5wWFdVZHJRbTFRY1VSRVZWWTNSRkZwY0dNNWNYb3dXbWRZVWtaTFNIbE1NRlJHU2tnMVpHOHpiVFJLYlVGbGFtTXlkVWx5UmxNMU9HZ3lZV1pMWms5Vk9WTlZUbGxGY0VVeU1TOWFNRTAxVVZCb1praGllR2cyVm10RU16STJSM2g2VjB0RFpIZDVhVWxSTjBsSmEyWlFRME5CWkhwWE9FaHJUSGx4UVZoSWNESnNObGd5ZGxKR1JYazBiMFpsTWxVM09XNVllVUpqVUhsWVNFOXVVbTU2YzNSWlpYSm9iSHBZT1N0VmJIVk5PV1JNV0RSallXUjVhblZoVkRkVlZUSTNNMUJUT0RadFpUWndVMk0xUkdOWmNIQjNjMFJ2YlVadkx6TnNWRVkxU2xseE5FWnpSMlJwY0VaaVlraEpTbnBtYkd0clJ6VkxNemt4U0hacVdub3lNbTgwZUdOc2J6QjJjV3N3U0ZWM01rbFJUSEJNUkc4eGJqaHZVamRGTUdSVFRtOWpNRTFJTHpreFZUbEljRlJLUjFkWVozTk9lWEZxWVd4TGIzbFBNSEZOYlRGT1MyWlZhSE5QYVRKbGVWbFhSRWR4UjNjMGNVbFRPVzVTYUdsRGMwVm5MM1pXUVhvd01XSjJLMGd3SzBwa2VVNHJOSEZQU2pCMmMzQlBTSGRyYml0eVpETkJTRGhZTkhOa1ltc3lZV3czVFdKaGEzSkJhbVZ6YlZaQ2JXeHljMjkxYzFNeWJYQkRhbFZLT1VReFIxWjVORUp4Y0M5QmNVVm5ZblZsVWswNWVHTlhWMGg2VldWd2NFeHFRVFZYYTBoalVFTlJlakJYSzFocVEyVmFRM1kxYXpCbVkwcFJTRFI0WjJsR1FucHlWRGwwVVZBME9WbzNlVkJQWXpWaFZuTkVXSHBMZVhGRFFqaFVMemxPYlhNNFMwazRObkJvZDFrMU56UkVNMGwwUVZrck1VOUlSVzh6YzJocFkwdE9LMXA2YzBObFltOW5SbVV6VlRjMWFWTmpZUzlGYTJKUU9WaGpla1ozWlZOdGJIQllSaTlKVW5OcE9DdFpLemRWVkZWdk5YTTRWWEpZZVRsM2RUVTRSbWxVWW5jMGVqVXdUM0J2TTNsbFJtaEVXSE5qU0hkQmF5OUpkazUzUWxJM0sxazNZVk5wVDFNelNrNTFObVZMUVdwSWJVODRSbEZVZFhKeFUycHJOR3BCVDFobU1sb3JObVF5WVV4bVMyTnJZbEZYVUVkVE9EUkRRME52VnpKalFsTnVlRmszWVhGclJYRnBValpTZGs4NVZrRjZia28xYmpGYVdYSkxjRE4wVFVob2RraFNlRXBFTVhWc2RIRXpZMkkyYTBZMGNISmtTVU40WXpGeFoxTllORzV2VDFaNmJYVnJjVk5rUWtaRVRrWlFlWEJKYld0YVZHRk1Ta05sTVRJNFRrazBLMXBuU21WQ2VHUXpNbXhpTW5VNE1rSTVNRFJCUzFWUk0xRkNLM05uUTFKNlpWRXpabXB3TVhvMlZXMUdSREpzYzJ4U1NsaFNhSG8zVFZGT2RGTjZjRFp4UTFaU1NGVkxPRFpxSzNBd2RrNU5XWFJNYm5aYVJWSnNRbWRoTldVMmEweFBOa05qT1hnNE1XNXVkWGRsWlcwM1JIUkdTMlJNV1ZWUU5ubDZhME14WmxKS09USkhkMFZzV0RKNWNWUlNOamxQUzNOUmRFbFVRWFJUYWxaTGJFRmpWMHhTV0ZSYWNWUTRWRk12Vm1kRFpEWkNjMG96TmxaTVUzaHZhMk0yVHpaNmMyNXZaWEZoYURkMlRIZHRPVzltV0V4TVJtVkZjMWxMU21oYVEweFViamN2Y210VWJTdGhlRFJFYkZKVWNIZGxhRE5QU1V0d00ySTVWRkJyYUU5dk9GQllMMlZqWlZWcVVrSnlNV3BHWVZGcWIwTXlTRGRqTjA1RGFuVmtVR2w0YjJKVldYTjVVME5WUTB0Q1JYZzVUM2NyUkVObVdUQlBlV3c0YjNkRGRHTm5ZMnRQYlZoWE5WUk1abGhsTkZOVlNDOUhWV2RpV1V0cmJYTnBiaXRwU0ZSUGRISlFSalpCTUhKS09FTnJMMm8xUVU5U1EwUnlTRE5NUzA1RE1HOWlPV3czY3pobk1WQjFNamRQVG5GeWNsZFlaVEJLVUdvNFUwZ3dMMDl2WlhaV2VIRXdWRmxVVWpROS5aSWlQdkxzMnh1ZUZ4d29PeFlVeVFEbmxsWVdIb1duZ2tlbW9FN1VDc05xQmE1ai1IWDh0c1dFOWFFR2RsWERjTm84RmY2NEY2Z0NSNTlXSUlmc0dlZw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:15,150 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:39 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:39 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:39 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=3CD53A099B918A65D041A96EA106ECB9; Path=/; HttpOnly')]
2020-05-27 09:07:15,150 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:15,151 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:15,151 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:14",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090714 AND testcase_id = 17 AND step_id = 25 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:15,213 testcase.py[line: 205] INFO: 测试用例[id=17, name=安全分析]执行成功
2020-05-27 09:07:15,213 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:15,214 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:14", case_exec_history_id="20200527090714" WHERE executed_history_id = 20200527090707 AND testcase_id = 17 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:15,437 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=17]的执行结果
2020-05-27 09:07:15,734 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '作业统计', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '15', 'creation_ts': '2020-05-20 09:08:17', 'node_order': '5', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '24'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-5', 'updater_first_name': 'Testlink', 'id': '16', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:10:10', 'tc_external_id': '5', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:15,874 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:15,874 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 15, '作业统计', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-5')
2020-05-27 09:07:15,902 testplan.py[line: 76] INFO: 开始执行测试用例[id=15，name=作业统计]
2020-05-27 09:07:15,902 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:15,902 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:15,902 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:15,903 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090715', 15, '作业统计', 'pan1_of_cq', '长庆项目演示', 24, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:15,927 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:15,927 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:15,928 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:15,928 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:15,928 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:15,929 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:15,930 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:15,930 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:16,224 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:16,225 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-37-rh5TkxeiPtei5YxZfmH2GHc3Z2C1Cu-passport.51gxc.com" />
            <input type="hidden" name="execution" value="946003fa-4deb-40a7-916c-18bbed7e1a75_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuT0VGU04xWlhTRGxaYVRWWVJVTXdlRWRDUlZCVlZHSnNabk13YldSblNGQnJMM2wwYkRad1Vrc3JZM050V210dVVsQnBTazEzVDNOQ2MwOWhPRmhEYjFNeE0ySjVXalZKVVVaWVRXSmlOREpHVFZOQ1NFOHJRVlIzWTFZMFRXMDJiMHB6WWs1SVFXRlpLemhLTDFOcGVqWk9kRTg1ZVdKcE5UZG5PWFZCTm5kS1JuUnhVMlpOWVVrNWIyUkxTbTlrZG0xQmNFczBhbGt3UkU5UVNWTnpSMWhFUlVoSmNtVTJNa2RxTW1sb05YUjBiekV5UldVeE5sQmlSM1Z2VjJGaU1GWkllV2gyWkZwU2JFb3hXbTlDYmxSdk0xcHdWVU14ZG0weU1GSXlOWEJaUzBWTFZtUXlOVXgyVEhOdVJXZHZVbWh1WWtaMWNXWXJhelZKZWl0MlptWllNM1I0TDFadGQzbGxlbmg2VVZFclZVSnROWHBWVGxCbVNuZzNUMnM0VDFVNWVqaFJhamh0UmtsM0swdFVkM2hGVmtveVdHc3dkVUU1UzNKMVNYRnlPR1ZGVjNVd2FUTjVWMVk0TkZjMVprWmlURzlpUmpsSk9VRjVjMjFwVjBSNVZXOTVhMkpJU1ZSRVZuRjJhQzk2Y3poamJUWjFWM1ZQYVd4RFpqTlNLelJWWlRFNWExWTNNV0ZCTlhneU5YZFRSa3ByU0ZvdllYa3pPVXBzZWpWVmJVRkxOR3N6VHl0eWREaDNZak5EWTFac05sWnFhR3BKZFhjeE5uSTFiMlYxVjJ4a1kwbHNaSHBNYURsa1VWTjZhbTVTUlZkR1pUUklhazFTWVdwV1VUSklWMUJyYmxWWU9WTlVOVVF5VG5NMWJUWlZhMEpMV25vdlUwcDJUMnBvUzI1VlQzRlpZMjlpWTNnNVZqWk9iREZHVUZOV01uSlZRMnQyVWxJMk1HdHdlR2c1VmpaV09XZ3ZUR2xUVGxGS2RVWnNjSEJoUm1sdlprRjVjREV3V1d4U2JVOTBiVEpSU2xCSmFsaEllakYxVmt0Rk5tZGtSVVZHYlVWaFlXbEdZM1J2YzJvMFIwaEJRVmcyU0VsSmFXRjRUa2xTSzNoeWNUTkhURTFQVDFGQk1HcE5PSGgzVmpkdE1sQjFkblZtYTBKbVEzUmtVRmxYV1Zsd1lUaFZaREJ6VlVKUVpYbEpkVkJ5ZGpkR1dHOWpkWEJUSzBkdlYxUTJTWHBRY0hwb1VGRXZhVWx2YTFWYVFVcHVVa3RvTUdjeldHWnBTbTl5Y25GdGFVWnNLMWwwT0ZONU5EUjJkbE51VkdsblEzRjNkQ3M0Ym5kelp6SkdOMmhaT0hoUFMxTjRXbFZvVjBaVFJUaHhRM3AyTDJFeU9EVmpaaXRsYVZseVZWZzVTVWczTUdSRWVITnNPVU5UYVhsUGJURTBZM2hZT1VZdk5IVk1lREZsTjBwR05GQmtUbWhESzBJdmVGUm5RbTFHZWxCVmF6QnpiVU5uVWxvMmRIcGFkRlZqVjFCUlowRkdVbkl5VDFncloxQlhOR3R4ZDFwTmRVTlZNbGhpWlVaRlNtbHRaMjlGUlROUEt6bDBSbWxDZVdOUGRVVkJNR042ZW5aWk5rUmphWGMxVjJaa1ZtZHFTME12VTJ4RVYwNTZkMWRITUVwWmVEZ3ZRV0pWUmpKR1R5OTRPVE5sTjNFeFZUWXhSR1IxWTNWUk9IVkhWR3BYU0ZGMFQxQkNabTlTYjFVNFUyeG5RbGxRTmt4MWFDOXpVSEJKTmpFeVdFazRSMUlySzJaYVYzWjVRbTVsZHpkVWFEUlZWWEpNZEcxdFQwbzJMeTlRWW1OVFYyTTVRa1l2Umt0TFVEQlVRbVZqYWk5NU1ITllOMGhXZVU1NmJHdzFSREo2VkhOeE0xSkhlSFUyUzJsTE4wOXdUMDhyUkZKTVVVOXFWR050VVdGTlEwaDBSbG8yTDAweWJVb3dSa3hTYzNCaVNFWjVUazlXVVRKdWIwb3hXVmRqVEdOck5uZzJhbGREYldJMFRuTlhlRzkzZVRkNlEwVnpWRGxuV0Zjdkswb3dWazFSWnpOMFRXRXZNa1JoWTNSTk5VSlplVVl4U1RFM1FUazViVXhuY1N0bFZrTlBRMVo0YVdsTlFrZEZkakZuT1dwaFdqWnFiVUZrVkZaWk5qSTBNSEZxYW5aMGFURjZhRGxIVVRKUFNFWlpabkIwSzBnd1RsUnpXbVpYVmtOVkx6ZFVaa05RTkZwa1IzWmpSMmRIYjFOTlRXVjBkR2x1VVZOR1pscHRabmcxTDNsb1JWQjRWR05hVlVWUFUybEJORFV3Y25OMmJUWjVXV2xTY3lzdmRYcGhTbFEzUkdoaVJsSlBlR3hHZUZod01YQkRSVTl4WjI0NUwzUnBMM1YxVTNGSlYwbFFUV2xDWkV4a1NtWkRkbTlwY21WMk1sTnJNMU5vWjFCblRXUlJkRUpQTjAwMGJuY3hWV0o2Vm1ocFRWSmxWMkpyY0VGWldETkxSVmx3UzFodGVHdFZjeTlNVTNOblYxTlBOR3BCWkVoWWJuaFRhV2xNVm1SSGVsaGthbXAwVVc5SlVGQm5OSFY0ZWpNcmJtWmxPRk5hYTJaU1VUWnBRVzFCZDBkUFpURlBSVllyYzFwUFprMXJkMmd3Um1wblpHWlJXbUV2UkV4dlMzTm1kRlYzTnpkV01WcDFUSFJ3SzFrd2NsWjJXRzlvVDBGV05saDJURk5ZWmxOSlRrMTRjakk1YjNWTmVGTk9LMkZzWTAxS1dtbHhlbEF4ZDFsVUwwWkpNVEJhWjJkcmRrWkxUR05KVkhkMFF6TlBkSGg1TTAxRWRVeFFiRGR2YzNGd1JFaHhhVVYxVVdWcVJtRmhNRlI1YTBjMVFsTklSbWRIZVd0MWEzVTRaa2xLV1VGR1JraFZSMWhxVjAxWGMySmFZVE4wWWs1M1MxcFZWVU5SUTNKd1owWTFNMWx2UWtOemFtMU5VSGQzU3pKeFNUaGpXRTh6TUhkMmQxUkJXR2xYUW5wSlNHVmlaWEJDY1hSc1oycFdZazR2SzBGcVQyc3hlakpIV2tsQk9VUnllRkpxTHpJek1YQTFZVTh3Yldaa2JFOW9VbEJDTjA1T1VUWkJNV3h1UlhRM1EweGhhbWhwUkRsUVUwdG5iMnR1WTJGNU1FbHBZbFo0YWt4dE1rbEtkRnBhT0ZGWlpYRnFlRkYzZFhSTldYVkxaVGhhUWtwUFJGbzJWVmhhWlc1cWMyUmlZWEZZU3pseU1EUlhSall4TkdGWlpuRXlMeTlQTTI1SlVUUlBVVTFTWjA1aFJYcDJkVWRQTlhWQlJVVlhaMVoxT1hBNWRYVlNWRlIyVUhkNmMwWkRORTVtWVhOUVdXa3hPRFZuWldOcFVHSlVUMWRVV2pWVlVYQXZXVGM0VDJzemRrMHlXRVZZWlhKd1JsTkJaM0puTTA1Uk0yVkhVVTFJT1hsV1dFcFpWRFY0YldwRlJqZHJSbGxRVDFoWWEwbDRaVlp3ZVVSTU9VNU1kRzUzYm5waFNFaGhOWFZtU1ZSNmFFbG5ia0ZKTWxaaGVVWjBSbEZ4VEhwTVpWcFdaalJxWVRneVl6QmpZbWM0ZUZwWFVXd3dNMnRsV0ZneU1FOW1kbXRXWW1vd2FFcEJabUkyVG14UFpEZG5SU3RpYm1wUk5XcFJZWE16VTNGVWFDc3hVemREYUhBM2JsVnhkMkpJTkdGTlZYUnRkME55WTJST1MyUjVUVXR1VUdaMVNHeHZXbk5UZHpBMFNGUjFXSFEyZEdKNGFIUXhRVnBpVjBkbGFFeGhTMVJaTDFKVlMzQktkSGxIYkdsNmNYWm9SMVF6T0hCeGNFWnlTbmR6ZFVsSFNVNXBZMDFyU0RGUWFuUjZSR1ZCWkZwdVdYbHphV0V6Y0hsb05Fc3ZUR0pKYkhKUFQyc3ZORFl6VlV3NWMyRXpiMGtyVTNaQ1l5OHdMMk5OVGs1a1EyZHVSVmdyTHpRNE5ERkhiV3AxUTFSbE9Gb3pVMlJHYlROMWFHSXZaSGhJWkZRMGRWa3ZXVE00UkdzMVdrTmlZVWRYY2k5dlQweHdWbUZNWjNGQk1GWktUSFF6WW1zNVJsVXpTSEJUYkdrNWFDc3dPRzFqYzBKbk9XTkVXa0ZrSzBneU1WTTNOM0Z4UWtJdmF6aFJTbVZhTXpoRk9GbHFPVXRYTkd0bFMzWm9SelpVVTFkcFdHaHRjMDQzYzA1QmRURkJRMmw2Tm1JdmVFSkxSRzQ1Wm1wd1dXOWphRnBSV0c1RVptMDRSMlZLUTBaT05uVlFZM2x2YlRnd2FpOXNSV0oyWkhGbFRERXdNMk1yWW5SdmFXeFVkMjgxWW5kRlZtSjNWRXQwU3pRelVXTTJhVmt6UlZCMVJXeEJTVUZLT0ZOeGNHcExXRzkwV1ZOdVpIRnZaMVJZZFN0YVF6RmxiVXgxZFV0eWRHaFNkblpOYkZndlVHa3llbXhhT1djdlFVVkRVVWwxVFROWVZDdElSbGxLZGpOT2JqVklhVkV5TTFKeldsQXdkR281U2tKNVpqSlRaMjAyY0dNM2NqVXhVVVpQVlVSWmFHOHhSVko2TVZNMVIxVm9TMFZpY21aSVJVUjFObXBrYVc4dlVpdDJZWFpYU2tGaVNtOW5ZVkJ3VDAxNmJDdDNTSFJVTVZOdlVtdFZPVXMwUVVaUmMzaEpkVXBTVnpWbk9WazBkM051YlZoSllXcEJWMFoyTWtkc09FVklZa0pPYldwd05GcDBiamc0Y20wMGR6bFFiV0ZYT0hCV1l6azFSekpQTTI0ME5Gb3ZUMGREVDJoNlduUnlRVGg1YWtWU1duVnZVWGxQWXpZMmRqSjJUek0zYm5aTlNtMWtObUZRWVhONWJVWkpXR0paTVN0dVRqaElhR2xQUm5wUFF5dEthQzk1U0hWM1NreEJVa2h1YjI5WVdVWlFjRXRZZFZRM1VGcDBWV3RzUVdsR1IwVTRUVmczTURjeFNuSldLMWd5ZG01NlFXNWxUVk55YWxCdlVVdElTR2g1U1c5bVNtSTFNa0ZhVTI0dlNUTnpUV0V2WVUxUFNISklhVTFxY21wWU1tbFpjM0V4WWxKSlJVZEZNelI1YlZnMmNtZHNMMDVGWlN0TVFVOWFNMlV2TURNNU5XRTRTbkl6UjFBek1EaHBTbFI0WkhoNVYxZzVSMGd6Unpka1EyUmtRbmh4VmpWS2VuRm1LMFJ4WjBOdGEwaGhWMU1yVUZwd1duUklZVTQ1WlRWbU5YcFlaV2RyTlZCcE5sUm9VaTlaWjNCV1l5OXJPRVEzTlN0eVpFZHVNR2h2U1dabVIzVTFVMUZWVm5CTFZsRkxiR2R4VUVaRlJYTmpTVzUzYW5oTWFHNTJSMDF4WlV0cU1EUjZWM0pyUzNZd1JFUkJhVTAzVkV3eWJqRkJTa3d3V0c5RWRqRklPWG95Ymxoc2RtVjBVMWhuZDNscVJFTlFlaTgzVW5wM1RtdFdWVlpEY1ZCSloxQmxRWEJNY1c1VWVYWnVRemwzWnpaNFRsTjNSREozVmtOUkswaFpRV2hZU1RSclJFTlNVRk0yZWxkTlFrTmpTMUJMTUZFOS5pcV91Mk1CWWthTXNHUUFvMWhLVEc3LVlxRFY1YzNmbnBDQkRERFRiX1NYeFM3Y2h4MjhvbzB0WHlIdHVPUnlHaF9TZUtwVXU0N3loWUNuYTFTdk9lUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:16,226 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:40 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:40 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:40 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=D27A04941540315C19B087316AD95CF8; Path=/; HttpOnly')]
2020-05-27 09:07:16,226 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:16,226 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:16,227 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:15",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090715 AND testcase_id = 15 AND step_id = 24 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:16,242 testcase.py[line: 205] INFO: 测试用例[id=15, name=作业统计]执行成功
2020-05-27 09:07:16,242 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:16,242 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:15", case_exec_history_id="20200527090715" WHERE executed_history_id = 20200527090707 AND testcase_id = 15 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:16,384 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=15]的执行结果
2020-05-27 09:07:16,698 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '盲板管理', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '19', 'creation_ts': '2020-05-20 09:08:47', 'node_order': '7', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '<div>\n\t{</div>\n<div>\n\t&quot;检查&quot;:&quot;body&quot;,</div>\n<div>\n\t&quot;匹配规则&quot;:&quot;包含成员&quot;,</div>\n<div>\n\t&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;success\\&quot;&quot;}]</div>\n<div>\n\t}</div>\n', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '26'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-7', 'updater_first_name': 'Testlink', 'id': '20', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:12:43', 'tc_external_id': '7', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:16,836 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:16,837 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 19, '盲板管理', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-7')
2020-05-27 09:07:16,869 testplan.py[line: 76] INFO: 开始执行测试用例[id=19，name=盲板管理]
2020-05-27 09:07:16,870 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:16,870 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\"success\""}]}
2020-05-27 09:07:16,870 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:16,870 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090716', 19, '盲板管理', 'pan1_of_cq', '长庆项目演示', 26, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\\"success\\""}]}', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:16,882 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:16,883 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:16,883 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:16,883 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:16,883 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:16,884 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:16,884 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:16,884 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:16,884 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:17,237 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:17,237 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-38-UU2bIBLpeIJBDeYFRfOUsRy7mEzPRW-passport.51gxc.com" />
            <input type="hidden" name="execution" value="05c34690-c584-41b1-b65c-0df662060624_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVVVKQk5XeFdjVGx0TjBSNVRESXZjRFZvYkV4TVJtbHFhWFYxV0Rac2VucHJjVGRVZERCc1lrUXdOakpxVVVWUFEwSTFlRkpGT1Vkc04zTkdObVY2YzBvMk5FOUNNVXh1VXpadllrVm9Va3gwU2t4NlpGZFpjM0JXY1Vkc1FuTnFjVlowZW14R2RpOHlNWFZhTTNoSmNrdE9WbUZKVUZaNmRtNDRZakJYUTJwclVrWkRUeTloV1ZkTk1IWnRRVWR4WTNWRmJrUm5Ramh6Y0VWWkswMUthRk15U2tOb2QwcE1WbWd6VlZKU2F6Snhka1pPV0hWNVlubHJlSGhWVkZSa1QwOHpkalpKWWpGSU9WZGhSamRrWVd4b05GTnVTR0l5WkRsclJVRnJkVTlsZW1ORVNGWlNRbGxuTWpsbWIwNTNaM1JuTm1kaFNtMWpOV001ZWxkUGREZHNaWFJxTkVsVk1GVlFUbHBOVmlzM1NFNW1hVWhUVlV0VlVrdGlNQ3ROWm5wWVFXZFBTV012TkUxQ2MwWjZOeXRHYjBSbk4yeFRXR0kyZVZwaWRYUjVSMGtyY3pGWlpIRmtaemc0YjBOaFJsSTVUVXd5U1RjckswdDRZekZIZDJKelJYVXlTMnhMSzFWdk5GRmFZWG81WmtGdFkwTnViV1I2TXpWcVZDdE1aekEyV0cxalZsaHFVM2MyVFdrMVlrbG9ZMk0xYlc0MVowdGxiREZTVjIxVGRYZENSbEJZWnpKT1NsVnFUMHRITUhBeVFqTnlaUzlKVFVWc1RrdzJTakprTWtjMVNVZzJOR3ROY0VkVGRHNWtWQzlWWTFsT2VuRkJibEJCVWpsV016WXJjbEl3VjNObVEzQjVjM1pHVURSa2JtWkVVVUpWUkVFM1VuRnNibEl2Wnl0WlVGQTNWbFF2TUV0WU9FdFJVMGwwVVU1UVV6bHRaVkk0V0UxbksyMUJNRWRqYkhwSGJUWmFZMGhxVWxKdFVVWTVMM1Z4UVdoSVRsazRXbTlWVUV0S1pWaHdSM3BEVGxGU09YZEVkMlpPYjNNNFRtSkpOVEozUkZkaVNuRnlRa2huV0cwMVdsUkRZbFV2UzFSd1kyZE9SMWxoTURGRU5XbzRMMkZTTmxodldpOVBNRFZPYlN0Q1prTk9VMFo2T0UxaVNVUnZUMjFwWlhWWFlUVnBibkZxU21keU1GaHhha3RNVVVKWE4wcEhUVnAxUjFCT2R6TXpTak41WTA1S2FFMXdSSFpxTkd4c2VrdG9Vbk5hTHpSSWN6aGhOMlIxUVhGUGVtUnhLM3BzWWtoR2NGRXhRbkpNY0VSeGEweDNlbGR2V21GeFdGbEtiVlJWV1M4elNsSm1kaTl1ZUVwaVFYaGpVVXBCUjNoYVUyTk1LM1pPS3pNNWFuRlNUbGhxV0ZwVWN6RmFRM3BTT1ZGVVFXeENSWEZZYTJ4TlJUTldWMnBNWVRoQkx5czBVM2MwTXpWb1lqQk5UWFEwVkdSTFJYcHFNVzByYzFWR01rdGxWamRWV2pSeUx6QmxibkZwU2sxTWRVaDZMekkxWkhod2QzcFBlVFk0VFU1Q1ZqRmpPWGRtVVZZMlpFWlpjM05EZEZSWGNuQmphMVY2T1RjclVYSkNURk5uWlZWVlFraG5RVE14WjBSSGJEUkhWMHh5TWxoNFJEVlZPR1o0VDBvNVozTjBlbUZtUVRsUVdIZzFSbUZTWmtkWU1sWXlkMDFGYzJwRk1HOUxTa3RKZDBOSmRVZHdSV3gxVTNoc2NqTkxXVGhuYzJGTGRYZEtlSGwzUVRCVU5VY3JjbE5VVjFRd05XbFpla3R6SzBkUlRYVmlabUp3YzFOa1EwNTBURUZ1WVV0aU5IVlRjWEVyYlVObFNsZG1hbTAwV0ZwTlVsbDVOSFZLUWs1aU9XTm1NRGRGT1ZOb1NUQnlhVGRoWW0xTFJFVk1Na3BrWmtnMlpEQlFjMHhRVVhocmVHdHdVbUU0SzAxa1ZWcFVaRWwxU0doaVZWUmljRFZ3WWtGVmRXSkpMME5LTkZOd2VERnlUa2xxUVdFMVUzZG5RVkV4Y0V0aFVFZGpUemg2V2k5bVJHUjRibVJKWlZGa1JuZGhNVTlSYW5kSlUxbzJUSGRoZVhadmQyZHRibVI2U2s1eFFsVlZPREkwUWxWSFYyNUpaa2RoVjA1aFJuZHZiR0pvYVhKbFVrNUNUMmhHVlcweWJqRXJNRTAyTVhOVUwxcEhXbWhYYUZaaWVYZElkMlI0SzNWUE5HZExlRXhJU1dNM1QxRjVaRkJYV2toak0wUTVWSFZXVEVsUmNqTnRlRkJDUW1wdk1WVXZPVVZTYTJsNk1VUmtUbTVpWjBjd1pXRmlPRGREVW5BclVrNVdTbmhOTjNoVk1HRktlV1JDYkRkd09ERm9ZV3BpYm1oTGJXNW9WalZMTW5oU1JXVkdkRFpsWmpCU1JXVjBaVlUyWWpSeVNGSnRTUzlYUlRRemVXNDFUVEV3U1ZjclprWXZRa3BoVFRjemRuRjJUV2d2ZG01TFMxazNla3htYVZkVGEwRnBRWElyYjBsdWNFUmtkVVF3Y1RaQ2VXcFVNVEIyTmxoMlJFTkVOM0pqWVdjeWVHbERPVTEyVDA5YWVHeDBiRUpOYVc5ckt6bENlbU0wWjNaQmVtRlBVVUY0V2xWb05UVkphMFZQT0hNeWIycGhlVmRqTjB4NlNIWlNjMmszVHpadE1VTkZUV2d5UWxwVGExUmlhSGNyT0dZdlJraFBlRkEzV2twMWFrRjFNbkptVURGbk5WaGxlRGhqYlc5VU5HUmhTWFZqVVUxS04xWTJlVlJ0ZWtrMFVuaFJkbWRrYVdWc1MyRlBTekZLTnpFMmNXODNORXA2UTNGWFZVcGxabFZGVEZJd2RsTktURUZyWTNSS1VFWmhVekI2ZFc1TVJUVkZkamNyZW5KNVJFdG1kUzl1VkM5cmVGQXZRVU5OWVRKQ01tazFUVE00UTFaTUt6ZENlVkZxYVZkWE9UbGtRbTUzVWpSaFYxcG5la1IwTlV0bmJUZHRMM3BMWW5KM1VXVk9kUzlKVVV0b2RsbFNRVXR4V1VsamMwOUtTVE4yTWtWUlFrUkNRVTQzTWpjeFFVeFVZM0Z6YW5scVRXSkRWa2Q2Y2tGUFNuWklVRkZLTm5SMGNVaGhRakZEWmpONFVWUkNMekZpUmpkNlFWSjFaV3BVTWpkbU0yNXBPVVpsUzJFMk1WZ3llRlF6TlcxUlIxZGFhRkZCTjNOelZuSjVOV2RuV2poSlVraDZRaXRVZDBoWU5IVjZZMEpyUWtSS1IxVkpjaTlWY1VVMWFtRlBNVXhIWkRWM1V6TklkV2RETUROemVqTlpRa2QyWkhORFpFaEliRFkzZEZoMFptZHdTeXRITWxSWlZGTkxaQ3ROY0d3eVRpdHdibXhIU21VNGNVbExWbFI2TTFweWVEaDFNSGRIVTJSMmIyOHpRMFl2WWpoblIybFdlRFI2TkhwbVFUbEpZbkpYWjNKaFoxbGlNMHhLV1M4NFVFTXJZWFoyT0dkclNHeHNaMmwyVTFGMGFYRXlTR3RxWTIxWU9HZEhlRlpaZWtWTmFXSldiVzV0V1RGTVYyOXliSE00VTFsa1NIRkJaak5TYVhZd2NFMWFMMDVYVDFSeFFsZE1UbFJWTXl0bWVYaHhNSFJpZG5ReWJ6QnhRbHBHVVVzMU5FbERUa0ZCY0VGalVXVklNbWRvVmt4VmNUVnFRemxZTWpFMmRHZDFkMFl2WnpGWkt6bEZiMm81ZUV0T2FEWTRSR3RaZEVnNVlrOTRjakY1VldrMlZtWllWRlJMYm1WM05XVnFTbTVZZW5oTVJrUjFTakJ5TUhNMFVYQm9hbVF4YVRKbFowTkdjaTlIYm1SbkwyWnVhSEJyZVVGUWNGWldaa3gxVURSeU1uaDBMMDQwUkVaUGFGZ3pkbm96VTI0eFpGRXdSVFpFUTJWblFVUTFiblJtTDJWdlVpdEZaMlZyWjBwRVpGSXlTbmRCU1hSSlpTODVXVWN4Y0hkT1NITnNiME4yUmpSb2JWRjBRVlV2T1dVMFozQklVMjVzY0RSNU4zbGpkV05uZUZaVVdFVldhMHg1TUZCVmEzTnJUMEZ1Ym1sQmJuRnlWbWw0TUZadlMweE5SMVI2WWxSWmVtazBhVGswTkc5eVFuSjRSMGgyT1VJeGMyVTJkVFprUm1acmQwOXlPSGxUY0dGNFpsRk1UazUxYlVOcFZWSkpjbkl4YURNeFRVaFFWM0Z4U2tWNllVUjFZbkpLTUdzNGNYZGtMMUpwVFRRMGMzRmtTRFEyVUdRNGFtOHJUR3h5U3k5T1dGbzJkM0JLY1UwNWRVUm9VWEpJZDFjM2VGUkpjMUExTlN0bFVYQk5kRXgzVkZwWE9VbE5Oa3B6SzJ4bWFtb3dVWGhhTlhNMVpuSTNXVkJETkhkRVRYUmtNbFExZEhCT2FUZHZaSE5IY1U1TFVXWTJZMlZRVkdkdlZXbFBNbWt3YldNck4yZEJjV05GVmxSWmRsUndhMjR5VkRaeVptaHVVVzlLVlN0UlpqRXdWWEkyYWs5VFJXSmlTRFU1TUhsUGEzZ3pNRXdyZEZWQlpVUXhjelp4TlRGRmIxVjZXa296VUdGVVRtVjZaREZyVEZRMlVuTTBUbEV4UlRsSEwzZ3pNMmxQYTNkalNVOUNSWEZ1ZVhFMmJFUm5OVnBvYjJ0YU9YSlNkbkJEVEN0WWJVOVBORFZuVFVvM1FsVnpVV001ZFdZeFJXSnJZMkpaYjFOUWMzaGhVREJPWXpOUWRFZEdORE55T0VsV1UycFpSMFl5UzNKTlFuTnNPVzFVVlU5aFdUTkJNVTRyTUdwRFR6ZG9WbUpaUnpSV1VrSTBMMEZFYlRkdVVYSTNSVXMzWlRaWU4wWXJVMU5zUmpkb1pHZDJUV1ZaV0c5SWR5OUZTRWt6VFhwd1l6WmhOMnhDT1hwRVltNWFPVVJpVlRsTVFVVnBUbEp6T1hCT2JUVlNlbE5KWTNGcGJVSnJiekkyY0UxSU56bEVXRmhCZWpKTlFpdGlTSEJwYzAxU1JIQXliWEp5Y2xObldHNXZRVTl3VnpnNVVrazJSbFozY0VKblpISnBRM05TVFdaRWJIbHVhbWhzWnpneGFGbDJhVUU0U2pObVFYUnpMMDVqVkZjeFNWWTRhbm8zT1RWTlZEbEtkV3czTUZkdFducEdNelZTVWs5SGNYZHdaemd2VURkTWNrNHdWMWhuZURGbU5UY3ZTR2QyZG5ZMFdqWjZlbGhtVFZKRlJscFdPRUZMTkd4aGFuVktUVWgzYkRSeFFVMTRaM1ZzZVdOQmVsZFZOMFUxZG1OWFVGWXZjRkpYY20xb1lrTXpiVm8xVDAxRWR6TlVhMGRVTjBORldUWlBjVkJzWWxZMGQxaE1WRGhKVW1acU9ERlVjbGxhVmxoM2JYa3haa2xTVTBNNGVEZEhjV0pLV25rdmExcG9RM1IyUTNRMGNrNWpkRlpUU0c1Nk9FdEZkVzlsUkdSNEt6VkxRVlprV0M5VmN6bHFWMGs0Tmk5d01qWjNVa1ZWTUZaMVREVklabUpRTVRKTloxb3JTVXROYm5jOS5UaE1xOE1UQVE3ZXZHRmVVSzVwZ1Q0MHdiM1l5cVliNmZXel9fQ0NQempGVzd4T3RsNk42MzUzaGtwTTQ0MkxRS25XWW1DUXlHSkUxQTNGd1YyYWgtQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:17,238 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:41 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:41 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:41 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=EFB95288BEFF7DCEA7EDE2C1FA0AD6EB; Path=/; HttpOnly')]
2020-05-27 09:07:17,238 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:17,238 unittesttestcase.py[line: 46] INFO: 要匹配的模式（成员）为："success"
2020-05-27 09:07:17,240 testcase.py[line: 158] ERROR: 步骤[1]执行出错,停止执行用例[id=19, name=盲板管理]
2020-05-27 09:07:17,240 testcase.py[line: 165] INFO: 正在更新步骤执行结果
2020-05-27 09:07:17,241 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\project\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 74, in test_interface_of_urlencode    self.assert_result(body)  File E:\project\interface_project_for_dev\unittesttestcase.py, line 47, in assert_result    self.assertIn (member, response_to_check,msg=item[消息])KeyError: 消息", protocol_method="get", runtime="2020-05-27 09:07:16",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="{'检查': 'body', '条件': [{'模式': ''success''}], '匹配规则': '包含成员'}" WHERE executed_history_id = 20200527090716 AND testcase_id = 19 AND step_id = 26 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00' 
2020-05-27 09:07:17,269 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:17,269 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2020-05-27 09:07:16", case_exec_history_id="20200527090716" WHERE executed_history_id = 20200527090707 AND testcase_id = 19 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:17,467 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=19]的执行结果
2020-05-27 09:07:17,772 testplan.py[line: 46] INFO: 获取测试用例信息 [{'estimated_exec_duration': '', 'updater_login': 'admin', 'version': '1', 'author_login': 'admin', 'name': '作业预约', 'author_id': '1', 'status': '1', 'is_open': '1', 'execution_type': '1', 'testcase_id': '9', 'creation_ts': '2020-05-20 09:06:43', 'node_order': '2', 'preconditions': '', 'summary': '', 'steps': [{'step_number': '1', 'expected_results': '', 'execution_type': '1', 'active': '1', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'id': '21'}], 'author_last_name': 'Administrator', 'layout': '1', 'active': '1', 'updater_last_name': 'Administrator', 'full_tc_external_id': 'cq-2', 'updater_first_name': 'Testlink', 'id': '10', 'author_first_name': 'Testlink', 'modification_ts': '2020-05-20 09:09:50', 'tc_external_id': '2', 'importance': '2', 'updater_id': '1', 'testsuite_id': '5'}]
2020-05-27 09:07:17,901 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:17,901 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090707', 9, '作业预约', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-2')
2020-05-27 09:07:17,912 testplan.py[line: 76] INFO: 开始执行测试用例[id=9，name=作业预约]
2020-05-27 09:07:17,913 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:17,913 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:17,913 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:17,913 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090717', 9, '作业预约', 'pan1_of_cq', '长庆项目演示', 21, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:17,942 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:17,942 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:17,943 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:17,943 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:17,943 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:17,943 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:17,944 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:17,944 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:18,306 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:18,306 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-39-KAV65i2DGJ7q9bSywDss977Q2q6ThM-passport.51gxc.com" />
            <input type="hidden" name="execution" value="e36051eb-040e-4743-851a-35d2068db1e5_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVTBoRU5VeG1TbVZpWW5KalJqbFdOM0p6Wm01VmFFeERhR0p1TnpCeGRHNHJjazB3TkZsc1UxVkpkbXR5ZWtocVMwNUZaMlZQV0hsaFJsSkRNMlIyYW5SMmIzSjFhVTh4TTNaT1QwaGhlVVJsT0hOdVNGTk5hRTFEZFVGcUt6RkVabTFsVERWNU5rNDRabkU0ZWtaSmNUY3ZSRU0wTVd4RU1FSnNiU3RQT1M5WVJUVjFkbFZFV0RWVGEycEdNV2hoWkZaUWVrazVSemRHVDFRd2JFbElaMDFOU2pWTVVtcHhVVzVxYzNKNk5XWlFUV1pNWjFsVVluTnNTbVppYTFVd1luRlNWVEJtZUhaUE4zUklXbmhTTW1GR2RtWkVlbXA2TVV0UVdsSm9LMmd2VGpOcE4xbHdkVXh3YTFZeGNrWjJNUzlqTkVaYVJsTnVlRkI0ZDNwRWJYQlFkM2xqYm1oTFUxWmlVRkIyWWpkVFZFbEVZbXBOU0ZOa2FYbDVRMm8xV1RCRFZrNUdaWEJ4THpCSlF6QlVhM0JoTUZaNE1YaHpXV1JxWkdsd1VHVjJibVpMWm5WUFNVOVFiWFptZURNcmEwWk5ZbXhxVnpoUGRrZHZjVE5QTWpaTVExVkpNakZFZGtkdmF6aFBhbkJLYlVSeGVtNXlRaXMyZUZGbGRIZENNRUo2SzNOamEzaG5OV0pQVWxOQldHMXllWGdyYWpOdVJtVXhXR2xvWWxkR1VVSmlaelpMWkRCTlYyZElNV1JzVUZadFRrRm9Va2t3VWxnd1ZtZHdhVTh5VFVsM1prdGFSalpUUkZnMFR6a3ZhM0JpU2xSdVVHeFZjbVJNUzJoMVZraEZXWEprVW1kVGVtSTNTVUoyVFZWWU56ZFRka2Q2VlVoaGVIaGpRbE5pVkVkNmJXcGFVVVJGYUhnNGRGSjJhRWxaZURFeVpuSnZUbmR6VG1GSWQwNWpWVzlCUVVSd1dIWlZORnBGYjFSYU1VMWxNRWd5VVN0S2VGbDRLMWw1TUhKdU56ZExhWGhQWnpOU1NHaExjVVZDWnpGMFlWWlFiV2xWVkRKSFYyTmtaWFpWVjFGU2FYbFZMMUpMTlhoamVGWlFPVTExZFdGVFpWbFdRMDl4YkdONVJGY3hOMnhxUjFSblJqVlRRVlprVFVWbWVsRkxWMEpUUWxKNVkyVkhOMXBHZG5jck5DOHpRbEU1TUhsNWJIVlpNMjVQU1dob1V6Rk1LelJoU0doSGRVWmxhRGxNTldrdldXUjNjamx2ZFVFMFNqVlJXREY0ZG5adVJVVkZVVmhYVDJsUVZYQmtTbG9yUW5GVFlVYzJlbGRaT0RNd1ptVlBlbFJoY1d0c1VrVnlOVk14Y25CdlVVTnNRelpuTmpKc1VtNVpXVWhLVVhKbFMzcENSalpWYTNoc1owdGpaMnBrU1ZacmVYUm1VbGxCUTBORk5sWlJXWGt5UmxsUk1uTkZOa0owU0RsTlVEWTNlVk52THpaSE5FazRibXRSWmxSV1QzbHhiMUJWWmxoTGFqSTRhall3Y21VeFpUZHlZbUYyVTJWWlFqSkVWVWcyWW10c0t6UXJVbGhGWVVKWVNXSjZNSEYwYkZrdmVEaHZSbTAyVWpoSWIxTklLMFZYTkc1SWJDOU5Za1pSV2xSU1pXbHVPVnBUVEVJck1reDNlVTl5ZEdZMlZtSXlTbUpyTmtsbllWVlVWamd4YWswMk0yUTFTRE52YkVoYVoxSnljRmtyWVhaUFVVWjJNVTh5VEdOSGNqTlJLME1yU2xOMGNtMXZjWEpEYTBoeGRrdDJXblpWVEN0bFZIcHBjVFk0UTNVNFpFWkdhamxqWkROM2ExaEJUbEZYUTJSdldWWlNNMDU1TDNGekt6TndlRWh5Wmtad2RFaEhZM1F3YTJOc1N6ZHdSMnRDWlc5eGQwNTFka3AxYkhRclZrUjROaXRIYzBoUlQxVkxSV2QwTTBSQk9XbDViMEpLVW5KUmQwUmtVWE5EV2pBcloxVmtVV0ZQZVdWV2FYWnFSMlZXZG5Od1F6WXhjbGhqVkUxQ1NYTTRVMG8yWnpkQ2FXWm9XRzByWWxWTFRXWlNaRnBGWjBJM2RVbE9SRVl3VGtGclluUXdZamxLVHpaVWVHWXdOVVJaUzJ0dk5tdGlSbkp6WTFsREwzcENXRUpNUlZKUFJWaERkeTlqVUhCMmJtc3hSVWhSTkdaNlVYUlRRV1ZOUWs1dlJVTmpiVVJhY1d0b1QzcG1SbWxMZGxsVFFteFNWRko2VldZNWJtUm9abTAzVTJaSlpVTlFTMnMwWlRaRGR6WnFkVzkwU2xWRWVYSnBXRWRZZGswMGJIbEpWblE0TlhwaVJtaGtjVlV6WkVkWFRURnhUbTVWVGtvdlJGSm9RMFpaUm1aMFJtZDZTVGRYZGpKWk5rbFhNVU5JYjNVMWNWRmlkRmRPWkhKc1NGZzBSSGhMWmtwblFrZEtlRzFyVVhkc1pVNHpia0pOUkZjd1YwNTFUV0l4Y2pOdlNuVm9ObW8xU25oU01pOWxkbVIyVmxRNWNHcHVlbUpvTlROeE4yMUJWa2RyYVdWT1ZVZHBTRWc1UVZGd05UUXdRVVUzTkVKNWRUbDNUVk5RVmpkVU1rRk5PR2d6V1ZGME9VOWFZMnc1YjBoMlNWRmpWVmhJV0VSbmIxTTRPVFJEWVRnNFVuRk5VVFpIUm5OMFoyMUxiM0pKTDFVeWJETTFkemxVZVRWMVdXVnNVWGRGU2xJMVMxSnJkRmsxZVV3ellYbGxabmQwY2tkalFsRkdXV1ZUTVV0RFJqVkZNbFUxUlhCblMwOWtTMmh1VVM5TmNrODViRVpQVmpSMGExRnBXR013V1VGbWNVSmFSaTlHUkhNMldFbFJOek40TnpoVlVEWmlUMmN3VTIxSFFXZDFUbll2WW05blREWm1VMnQwYlV4cGF6RmtNbWhvZDFOVVJVSk1LMDQ0Um1kNlpqRkZTMWxsV0ZocFptcDBTVlV2YVV0elVVTklWVmh3YzBoeFZDdFhUemw2T1dJMU9UaHZhMHRqUlRGc2VWUkhhMUZMWlhkTGVIZFhRMmx5WTFWU1NscG9WR3d4Y0dvMVdXTXhhVUYzT1RkeGRWSm1RMUpEYlhkcU1XeExUVVZVTmpkNlJEVlVhRWxwZEM5NE5rSm9aemgyTUVWRmRtUjVWWEV5Y0ZoV1pHcHFkVEV4WjFCUE5VbEZUemR3TURodFRGSjJiVW95UlVVeVNXVlBPVlU1UW5SS01XTmpjMnhyTTNOc2FGQkRlVEJLVUZweFZsRnZWR2hpUmpkbGJEa3pjMmxyTld4clNHSnFWSFp0UW5rdmNVdElSbGR3YW1NNU9WcDNaa2xpVFdkb2EzTmFZMWRKVUVFMkwwcE9aek5UTURad0sweE1WVkkyWkc1aVMxSjFOMEoxWlVOVVZYUTBNbHBuUmpaVmNUa3dTemRWZVRocmIxUk5ZelYxVDBsTlEyZGhaM05EZUVkV2F6UjNLMUoxYUdwbVdIUm9Salo0Um5kRmJ5OVBlSGQxWVhCUk5qRjZaVEJKUlhGR1ExTTJkVzlWTkhOUFdXaDFXVkIxVDBwMWRYZGFUR0p5TlhseGRFTlVaVUp3UmtKdFQxSklWREpTWkhOVWFqbGliRTlZTnpCbGVpOVVNVEpLYWxaQlZVazNPRVpQVDFwQlNYSTJlVEp5WTNRNFdVaHpaWHBWTlZCWUwxaDFkMUJhVTNWdmVtYzBVR2hwTDNoYWRGVkViVllyT0hSQ09Fc3JOa2R4ZUhGT05qVm5PWGRXVUhwV00ydEJXV00yV1daUlFqUnpjbTFGWjJacGJWSXdjRUpWYTBJM2FIcFphREZFWTJSWWFXSkVPV2s0TnpKM01FOW5lSEZTUVV4elJ5c3lhMEo2TjFCek9HcHVMMUpGVVZBMlNFUTBkVE5sYURCclNTOW1NRU5rYVRkM1RtSnRNa0ZFTWs0MFFXdHplRTlRVTJ4Vk1HSkVWMVZSVGt4aVYxQkRTRTR6WTBJd1pHVlFURlZoZFRKWldVeHdUVk53TWxsUGFIVlhSalZuY0d0UUwzbGtNVXhzT0ZkYVNDdEVlbXRXY3pCMWEzaEJWUzlyVmt4MVNVbFRlRXB5Ym1sVmJYWTJVazFQZG1WNFYxUTRjbVl2U0hSbGFGTTNjbGhSYWpOSFpETTRXbWRvYW5Cd05XaHhTVU5rVUhoVmVUaHhTRXBPUlc1bEsyVjJlVTUzV2tFcmIxZHVkSFU1UkVONWJGVkJPWFZTTm5sdlYzaFRVRlpoVkVZeVRIRnNOREpwVURKa05UQlNOa292VUZoaFdUY3JhMXBrT0c5VlNHY3lUa1UyV0c5d1ZHdEtMMHMxUlRsaE4yNDRNVTFQVW05eFVXRk9hMWxDUms5aGVsaEdlVGd4VkdGNVRHcFRVMlJRWmpOa2VrcE1Ta3g0VFhBd2FVYzRZakI0ZEVZNVJXZzNkRVJvWTJ4U2R6STJWa1pCWm5ZNE9EQTFSRTgyTW5vNFRWVXpNek5IWmpaTWRXZ3JlR2t5Ymk5UU1UTkpOalppVUVFMGRsQmllQzk1ZDNOU1ZVNXJVRFJuY0dSS1QzTnhia0Z0WmpZNVQyZDZUbkZXWTJWdVR6ZEVhWEp0SzFNcmVWTnFRelZpVlZGRmFteHdiREp2VERaMldrcGxNemRTT0hOU1RFdHdiRUpZUzB0a2RHSlJOMDgyYlRSMVl6azRNV1ZyVGtSRVp6Rklia0V2YmtVclVrWTRjMjVCZDNKcU0wNWhWMUkxTlROcmFGUk5jWEl4U2taNWFHRldMeXR4VjJacFZEUlRZMDVMVUZKT1lXOWxlRGRLYVVSdFJtODFVRkJ1VW5OQlIzSm9kMDFqYUZOdk1HMU1abEpNY3pWT01GbEtNMFpsUjJWU1kyRlBiWFJCVEVONlRXdGljMFZETVhObmJtVkdTRGxHVURoWWQySnBSVEpRUXl0TU1YWjRiR1UxV0hwalRHOTBTRFUzZUdkdlRsaERNRXRyUkd0WVlXOVVSR1ZsTXl0SmNHODVTVmRFUlVoUFlWZFJMelZuWVdSMWJURjVhM05LYUZWVFlVeDNLMDVvYXpKaWFtMUNOVTFNUkZGdGMwbFZSVlF3TXpkcmVuWXdMMFp6VW5CalNHUkVNRlJFVGpBeFMyUnlWM05tVVhsWVpUaFNZVzVyTHpVNEx6SjNNRzVGVFRrM2JtSmxSMDQyVDNKNWNqUkNSbk4yTURaemQwbGlNV0ZIZEU4M1UxbG9iVVpzUjFST1p6Qk1ObU5qZUdZNFVVOVFWRGRUYW5GRFZIRjBWMEpLT0M5YVQxWlhkVTFuT0RkbmVFRTVlRk5qYTBoMWVFTXdNM2RCZHpWNVVFWkdlbFpXYUZCVFNEQXdkeXQxZHpKSmNtRlNRV0pxYkVsd2F6UkpVMjU2ZVZKck9YY3ZiaTh3V2sxREszQnBPWFpSYWxkWWExWXdZbHBzTVhRM1dGZHhUa2RYU1hjckwySkRjVlpNVUhGMWVETnJUV2xVSzBOUk5FcENLemxoTmtOeFJXVkZkVGR0V0hSUWRFRlNkU3MzVGpCamJFeHNlVTFWSzJkQ1YxWk1iV2QzWTI4OS5BMEYyd2VjZHg2ZEwwUkdHMFNIUmZuSHZTUTY5WW41bWJtWnNJSng5ZkdZUGJkUHVMd1h6T3c3WDhUN3NEeDRaN1RGeFNyMEdweEI5SDNPQWlpU3NPUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:18,307 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:42 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:42 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:42 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=C9A878CA1E6D0DFF23FEB5E9562324BA; Path=/; HttpOnly')]
2020-05-27 09:07:18,307 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:18,307 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:18,308 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:17",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090717 AND testcase_id = 9 AND step_id = 21 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:18,320 testcase.py[line: 205] INFO: 测试用例[id=9, name=作业预约]执行成功
2020-05-27 09:07:18,320 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:18,320 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:17", case_exec_history_id="20200527090717" WHERE executed_history_id = 20200527090707 AND testcase_id = 9 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:18,469 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=9]的执行结果
2020-05-27 09:07:18,628 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-27 09:07:18,629 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-27 09:07:18,630 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-27 09:07:18,630 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200527090707',)
2020-05-27 09:07:18,631 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-27 09:07:18,631 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200527090707')
2020-05-27 09:07:18,632 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-27 09:07:18,632 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200527090707')
2020-05-27 09:07:18,633 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-27 09:07:18,633 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200527090707')
2020-05-27 09:07:18,634 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-27 09:07:18,634 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200527090707')
2020-05-27 09:07:18,635 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-27 09:07:18,635 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527090707',)
2020-05-27 09:07:18,636 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-27 09:07:18,636 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527090707')
2020-05-27 09:07:18,637 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-27 09:07:18,639 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-27 09:07:18,639 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527090707',)
2020-05-27 09:07:18,640 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-27 09:07:18,640 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527090707')
2020-05-27 09:07:18,641 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=13]步骤运行结果
2020-05-27 09:07:18,641 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 13, '20200527090711')
2020-05-27 09:07:18,643 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-27 09:07:18,643 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200527090712')
2020-05-27 09:07:18,645 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=11]步骤运行结果
2020-05-27 09:07:18,645 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 11, '20200527090713')
2020-05-27 09:07:18,646 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=17]步骤运行结果
2020-05-27 09:07:18,646 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 17, '20200527090714')
2020-05-27 09:07:18,648 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=15]步骤运行结果
2020-05-27 09:07:18,648 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 15, '20200527090715')
2020-05-27 09:07:18,649 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=19]步骤运行结果
2020-05-27 09:07:18,650 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 19, '20200527090716')
2020-05-27 09:07:18,651 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=9]步骤运行结果
2020-05-27 09:07:18,651 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 9, '20200527090717')
2020-05-27 09:07:18,653 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-27 09:07:18,653 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200527090707.html
2020-05-27 09:07:18,653 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-27 09:07:18,655 main.py[line: 235] INFO: 生成测试报告成功
2020-05-27 09:07:19,720 main.py[line: 242] INFO: E:\\project\\report\\test_report20200527090707.html
2020-05-27 09:07:19,720 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-27 09:07:19,809 main.py[line: 249] INFO: 发送邮件成功
2020-05-27 09:07:21,417 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-27 09:07:21,418 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-27 09:07:21,437 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-27 09:07:21,440 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-27 09:07:22,976 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-27 09:07:22,977 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-27 09:07:22,978 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-27 09:07:22,978 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-27 09:07:22,978 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-27 09:07:22,980 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-27 09:07:22,980 main.py[line: 90] INFO: 按项目运行测试
2020-05-27 09:07:22,980 main.py[line: 94] INFO: 运行所有项目
2020-05-27 09:07:23,261 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-27 09:07:23,262 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-27 09:07:23,262 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-27 09:07:23,262 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-27 09:07:23,262 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-27 09:07:23,398 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-27 09:07:23,543 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-27 09:07:23,543 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-27 09:07:23,682 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['9', '11', '13', '15', '17', '19', '6'])
2020-05-27 09:07:23,833 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '2', 'testcase_id': '9', 'author_first_name': 'Testlink', 'id': '10', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:09:50', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:06:43', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '21', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '2', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-2', 'testsuite_id': '5', 'name': '作业预约'}]
2020-05-27 09:07:23,980 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:23,980 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 9, '作业预约', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-2')
2020-05-27 09:07:24,192 testplan.py[line: 76] INFO: 开始执行测试用例[id=9，name=作业预约]
2020-05-27 09:07:24,193 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:24,193 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:24,194 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:24,194 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090724', 9, '作业预约', 'pan1_of_cq', '长庆项目演示', 21, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:24,230 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:24,230 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:24,231 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:24,231 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:24,232 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:24,233 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:24,233 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:24,233 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:24,556 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:24,560 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-40-GwgfANapSZJPTvgGeZTNcbYRX55xgW-passport.51gxc.com" />
            <input type="hidden" name="execution" value="70f5a8a6-7563-41a2-a2cb-d263e60e722b_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTDNKMVpqaE9NMnBLVEhKNmMwZHVLMkZWYldKYUwwcG9NSEZ0YVRJdmRUUnViSEJwY3pGMGIySmxjMUpPYTFWT01YVjBOeTlrZGtZNGVISnVhMVpLTjNreWFHOXpTRlZNU1RVeVJqbFpNRVl4TVZCb1ZEaFpjMHBoTUU1cmFVSjZURGszWVROcWVuZFRjMDh2V1V4U0x5ODJMMmh3VDJOVWNVMTRZV2gxVW5CVWQyUnJVVEpoZUZwRFRrZDJUMGxyVjNCTmNHUnlUVGhCWW1KbmRrZHFaamRwY2xGeWNWaFBObWh1YzAxT1lqYzBNWFYwYkZNM1RrUlRlakJLUXk4dlowaFlTRWRrUzJrNEt6QkVPSE55TWtWa1ZVUlVTMVJHWjJoWmVVeHdhRGxhTVM5bGJHRnRNa2RKZEhSdlpEaHhVazFvV25KalpHUldNMEZwY1hSclpFWnJVVGhUTlZkSE5XOUVjeTlJVWpVeVpqTktXRUphZEZsSVIwSTVUWGxtY1ZsUmN6Y3pSbmxDUzBwa1ZUaFNUVEpJV1VSWVZsbHBVRlUxVGpodlRGTnJaVzU0TjNwWWFrNUtVa2xoT1dKaVkxVlNWVFp5YlZKRmRURkpUMEZyVlN0eE0wMU1lVEp5ZG5sTFZEaFdLMkZHTlRSclozazNaVTQxTVRjMk1EaEZjRVJxZW1FeldFOHJSVzEyWVhCRk1VVlRTVzlTTkhRM1kzUkxTa1pNYzNCdGQybFJPRFEzVDJWc2JEQk1keTl6YVZCaVQxTklkMVF5UTFKRVJXZFNRMjFIZWpSeWJGWkRibmh4Ym1SaGRHMDJObTVEZGs5RVNsSnVXVkZIVGpKUk9EaFhNMk50V0UxR2JtTm5XVkJPUWpCWGVtRkhRWGhrTDBJelluRjNjMVF6VUZSQ2NsQkZaVmhpZWtwcGRFOXlkMDVzYkhKSWVWWmxWM28ySzJrMWFIRmhWV1JqV1RBd05sbFlNak55VEZoYVdUSnRlV1ZYUWxSWFRXcGpTRTkySzFkdGRWZGlUMVZzVGtWa1lqbG1kMWxFZVZab2RTczBWVXgwVkRGNU0zZEhURU5xWVZab2VVTTFRaXM0Wlhaak1GTnZURWhOWVdNd1pHdG9PR2RqTjNBNU1HeDVZU3RSTjBkVVQyTklOVVpIWmpWNVMxQkpaems1V1VOTFpGTjBjV3hWVjA5elQzSTJTSEpDTlZselRISlVUV3h4Vmpac2VrTmliMWd6ZEZWdGVqWlJiWGQ0Y1hKTlZGTmhRMFY0ZVhwT1N6SlpZbGQwYVRWblZuUnJZbFkzU2pkYWVVTlRRMDlSU1hCc0swWlBWRWx1ZFhWUVMzTTFRa05LTlRKd1VXSmFUMGhUUzNSbk1FOHZkMFpPU1c1MllWUmpjVXhKT0VKRFVYZElSekpPUjNSUFpWcEdUMmR3YURkTmNXbFJXaXR5WWl0aVRWZzNWVzV4TkdKbGFEazBORE4yZUUxbVVWZ3lNbkF5YTNsMWNqbElSR0kzV2lzclEyOWFUMDVCTmxOMmMwMDVTMGQzVjBka2NrZ3piMlFyT0hRNFdXTk5SV04yTkUwdk4wNU1kSGxSZERoT04xZEVNV3h4S3paVVNtODVkazR3VUZOU1ZrNXZVRkJtV0V4RWRrY3hibGhESzAxRmFYVTNkSG94UTA5cmRFeFZNV1puUlV4cU5ISTFhVXhxU0ZVMFpFcHBRbmxYZVZOU0syNDBlSFJQTkM5RWNXeE9NMWxRYjJKSWNVVkdZWE5DWkRNd1lYRTRXVEZaUzBwWFpHMVVjVVkxVjFaMU9XSnhSRTl6VW1OTFRVczJUMjlKY0dNMVIyZEZPVU5YZDI1MVl6RTFORUZ4UVVoVGRHMU1XRWQxWkVsTE5uTkhRalI2Ym5SdWVsZ3lOSGhOU1ZCdE5IcG1WVVV3TjJ3M1owbFZNMFZ2VXpkdmVYZEJja2x1VVcxa2VVOUxXbGhaV0VJMlJHeHRVblE0Tld0SWNEZERVbmhqYlZsU1JXdFRkbnA2TkZCbmNrSndOMk51YjJWNlNrdFZWVVJrVVV0amVGbDBjVVp6ZEhoeVozVm1hVlJVVHpkcmIwdFhUR0Z3UkhWUWNGaDZMMlJHUWk5MVJXRjFRMWhuYmtGMVpXTTNaSE42WTAxaVdsZzVaSEJ6ZHpCclpHcFliall5Y0hsc1EweFRSbk4wU0dwSlpqRnBTa3h4Unk5R2VuaGFObk00YkROV1NucFNXalJIYWpoeVNtRnNia1JJWTBSSk5pdDRaRlEwWXpkUk1sWXdVRGRSUzNoR2FUTkJkV1JXY2xkbVlXTllVRFZSTWtkek5tcGpRa2hhYXpWNFkzVm1RVlkxWkd3NFYxRk9UVVZFZDB0NmNWWTRiVVlyUlRkUVYybGlaRmxKV0ZZM1lXdFlXbmgyYlhKMVIwVlJUR0ZSVkVoeWVEQjBLMkpoWTBNeGVFNVdTRlJLTmxaU2QyZFhiV2xsUkdobVpEaElLeXROVnpJeFNDdHhVM1ZTTld4cVN5dG5WbU5tVWk5clpXdGpVMFJ6VGxFeU1HeHVkeXRHUWtkU1lXcEtkbkpXYjNJeVFVOUVhMng0V1ZvMVpsRndPVE01Tm5vMGIzQlRjbTFrVEd4bFpFeE9ZMEY1VEZWTVltRnFRbWcxY0ZOWUszVk1OMVpFUldGWWVDOUtjRmh3UkdKeVpHbEVlak0yY25sQlJ6VkthbEo2ZVZKRlRHdHNiR3RWVEV0aWNuUXplbm95ZEVsa2FtUTNSME15ZEcxSVVUTXZVSEVyZFVscVNWZGFSVkpvYlhwNU1qWmtZMFZwZDFKTlNuWXZLMEl6YVhaYUwwRktNbFEyUkhORWNWUXhTWEJXTkhWVVRuaEVaRGRoV21OMFowTXdWakZ0VHl0a1NFcHZSVXMxUkZkdWFYVjNOMmhEYkZCelUyOUlTWEJDUWxaWlZTOVFTbWhGYUZsQlMxVlJPVXRpUzBwNE4xWlhVMHBKVmpseGRUVmxabEZQWkU5U1Vra3dTSEJQWm13MlNsRk1ZM0YzTTBWUFdHeGpkWGxGTXpsSFkwaFVWVTgzVTNwMVIyOXFObWhFYjNoaU5WVlJjSGwxUzNsMmVHSklVV2xtVFRVd2IxVjBlRGhFWjBWVGFURlhVa1ZqUmpoemR5OWlXRXhWVkROalJDOHlhM3BWTlcxU05WaDVUMEp5TVdZNFkyNW1jR1oyUmtwWmJWVmhRaXRMUkhOS1dqVjRNRUoxWjFoTmJXWTFUM1JVYVUxSVZsSkxNbUV4WVZWc1dVSlRSVUZyUW5OQmRYcE1VRlI2WlUwMGVIbExXUzlzV1ZJNVkwdGxPRWd6U0VGT1JGQjVTMUp1U0ZORGQyMDJORE5VWjFsYWNIQllRMnhZUm01aFkzZFJTbGRGSzI1SVQybEtlV3RyUkhwbE5HdHBaekIyUWtKWFNtSjJhbTVNVFc1Uk0xUlhVWE5LUzJSNU1Ia3JWMFJTTUhjNFIxZzFjM1J5YzFNMFNXaFlhMnB5Y0dWcGNIWnhWakpaVVVkRVlVVTFlWE5hV1dKS1pXbHFRM2xQVkRCQ1ZYWkVZa1JGVGs5elZscGhWR2RuSzBodVJqbFZXU3RYTWxWSVVYbHdabXgyVGxCM2RXOXlVVWxuWTFWbVJsRk5aR1F5Y2xOa1dqaEhWakZHYUZrNGR6RXpORkJKY2xKRFVFODVRMjFNZHpoa1FrbHFiRFl6VlVOU2VsZGpWemhETUVndlFVSkpUVGhtTjNCU0szcFhNVkZ1YW01NVdHOXBVM0ZEZEhOSlowRkdjMDQ1TDA5aGQxaFVlWGxZUkcxb0szWmlRVXhzVUZoeVNGRXhWVzFFYzJ4eFl5OUpjRmhtZURkNVEwNXNOMHgyYTJ0bFlsUkpUbEJMUVRaU1VFWjNXRkJPUW5aaFdqY3ljR28ySzI5WGRrVkNSbVJHTUdOV2IyWk9hRGRKWlVJcmVHeG1LMHB2UlZWSlFpOXBSbFpoVm1kQ1RHSjZjbVpzVG1VNWRXa3pNM28xY1hCS2VqVlBXa3hPSzJkSFJrUjFZbXR4Wkc5RmRrVlNWV2RuZFhsdU1uSnpNV2RhZUd3MldVaEhNV3hRYVRneVUyVkVjMjV3ZFZCNmFHaFhiR1JZUTBsdlNHSkZXVEJXY2s4dmVUSklaMHczT0ZrclpDOXRaQzk1YW0wMFNIWm5jMjlQUjJ0NlQyVllOVVpyZDFCb05YTm1kekp1V0N0dGRDOU1TalJ1VURjeGRHSlVVR3N3ZEdoNlRXVjRVV2N4VVVoWVNrSnRlWFYyUW1oUlpYRkpTbE54UVdrd2MwbzVhalpEVGs5c2JXWmxRWFJXV1hsMWRVcGpSMWcyZGtSTksxRXZkRVJTU0dacFJtSjRTM0ZRUkdKcVZYaDRTbGhoV25Od2JVZGtRamhyZFV0a2RUTmpVRFI1WjNweE0wY3hNWGh6YmtWbE1uaFJOakpRUTNCVFRYcGFPVlJDYlZoaldTOVJabkY1VFdWbldFSkpUMjlMY2pGbk5rVktjM2R2Y2pBck5sZFZSR05rZWs4NU9VNXRhR0o0S3pKbE5FYzVaalpyVW5Kb1VYTTRTWE5PVkZGTU1WRkVhbUpuUlZKSVNuSnlVbmw1ZUVGeU1VZFFWRVJuWkZrck1rNUNhRmxHVkVaNVNtRmhVRVo0Y213M2R6UllSa1Z4V1RnMldXbDNUazhyT0ZsRllYVm9hbXh6YzFWd1JXWkljR0l3TWk5cU4zcEViSGRoTVRscmREaEJVbkJPVDB0NWNXWkJiRlJaWTNwaWRtRktkbVZLTmprMlRHeFpSR2MwTUVGSlpXVTJNV0V3VmxCUWQyeHRaVEZOYkhvMVZEQldVMDlYTXpCc05XaFlUVEE0VFVOMk9VWkVhM1IyZVU0MWFHdFZkRkpYWkdWRFZISk9NMlY2U0c5amNrRlJlVGxZYzBWdE9XcEhiU3RSVEZCWWMxUXpTVzVvVTJSMFVWaENRMWxGUjFNd1RIbzBZM1JhTmxobmNWazVNRTFHUzNOQ2VqUnlaM0owTjFSdVVWVkpVa0pqYjBKNFpFWlphMjFtVUdzdmNUWTNUakJHY0VoTlVrczRPR3g2WldGV05UQjNXV0Z1WlRCYVJEUk5Za2h2YXpCd01scExWVGQ1TDBKb2JIcFVlVEJKT1VObllVeEpaalJ6ZEUxWk1uTTJNVkJDZEhSTWQzbHdiWFJJZWxkMVpHRndTa3AwZVRCRVEySTNlVWx3Y0hZeFFWVXJXVUZVYWxsM1ozUjNaSFZhWkZWNk0wdHhTRWt2U201Q01rdFNXRTU0WmtsUWRWQTVhRFp6UlhwS1pXZEVXREEwVG1Kc2JIUmlXRGRQTW1GTlNubHhLelJTVjFWRWRIcDZPVTVMYWxkbGVIWk1PVlJYSzNNdlMzaHVjVTVqTUVSamRtVXpZVFZqTVN0ek4zbFFjV2xMVTJ4T2JEVnNUMWMzVnpabVRsUm5kVWh5V201bldEQmhObkpJUWpoelVHTXJaa0ZoY0RJMVlUYzNkVk1yY1d0NFdWTTFMekZvY1ZSeGVtRnFiVlJyVW0xbmMwMUphWFZKZW5OUGVHaGhTRVZZTlVZMWNraE1WMnBwVG5NOS5OZ3NFeEZ2V0Q4a1JObEdqNExaUXEtSkFjSTdKZFlxS091RjZwQnh3SWtKbDdIWkFsSzQ4M0g3NUtlNHh5WHRTT0Y3OWNlVzRhUzBkYWFwbDFFMlNYUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:24,561 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:48 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:48 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:48 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=F6AB5894E94240B0B97C3C24DE955A40; Path=/; HttpOnly')]
2020-05-27 09:07:24,561 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:24,561 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:24,562 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:24",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090724 AND testcase_id = 9 AND step_id = 21 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:24,582 testcase.py[line: 205] INFO: 测试用例[id=9, name=作业预约]执行成功
2020-05-27 09:07:24,582 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:24,582 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:24", case_exec_history_id="20200527090724" WHERE executed_history_id = 20200527090721 AND testcase_id = 9 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:24,812 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=9]的执行结果
2020-05-27 09:07:25,121 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '3', 'testcase_id': '11', 'author_first_name': 'Testlink', 'id': '12', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:09:57', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:07:32', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '22', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '3', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-3', 'testsuite_id': '5', 'name': '气体检测录入'}]
2020-05-27 09:07:25,262 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:25,262 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 11, '气体检测录入', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-3')
2020-05-27 09:07:25,276 testplan.py[line: 76] INFO: 开始执行测试用例[id=11，name=气体检测录入]
2020-05-27 09:07:25,276 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:25,276 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:25,276 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:25,276 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090725', 11, '气体检测录入', 'pan1_of_cq', '长庆项目演示', 22, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:25,289 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:25,289 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:25,289 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:25,289 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:25,290 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:25,290 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:25,290 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:25,290 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:25,611 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:25,612 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-41-kyYJkgBC6OL6crIdv6md25buytOgDt-passport.51gxc.com" />
            <input type="hidden" name="execution" value="b1c4ac0c-c2ea-4e20-ba6d-abee5d533447_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuYUdwSlJrNUJTMVp0Vm10NlNIQnBObXAxTm5WNmNsQlJla0ZwYW10NFowaG9XRmR3VWxsV1UwOHliams1ZFdNMFZISXdkazFFV0ZsRVZYcDBValpKU0RkaU9EZ3lSM2RxVWtkRWFpczVVVkJFU1ZwWFFYZ3lha016Um1kaldUa3ZMM1JSUm1kSWREVjRaVUl3UW1VMmMxWkRWbVkzTDJ4MVZWQkdTM2hSWTJkSlYxUmpOM2gyV0ZReWNtcGthalZPWkhsTFRscDZNRWxQZUV0SFNEbHZjMlZ0ZFcxWVdYSXdObEJLYzNCS0wxSk1MelZhYjNaV2NuUTFlRFZUVDJGV1NXeG5kVXBGT1RsTE4xUnZTVUZCUlU5bU5qVlVPRW93VGpkS1FqVmtlSEowZUVKYVUzZFRRMkZNWm1KNU5FaDZTbFZKZURoclRtdEpRVWN3TlcxMmVtVm9UVTB5VGt0b2RWVjRlSEJMTUUwdk5TOXNTMjFZU2pOQ2FtOVdObGxLT1dSUFNrWjFTMEpRWVdVNFNVWkVXVEJ3VEdKRWFVYzVhM0pLT0VSaWJrSnpOMmhIUlc5bmFsZGhTVkJXVW5FeVNrZHZSRGh3UlZKbFdWaDBURXQ2WXpWeWF6a3dka1kzTldNeU5FcE1RVE0xUVVKS2RVRlRRM3A2TXpod2NXdEhTa1Y1VERCWU1FMTFlVlpvVlUxTVpYSXhVbXd4TmtsdFZtMXJUWE53VFRCVmRHbEplazh5VFVkd2FEYzNiMjVyTTB4Q2R5OXlTRVpRWTJKa2FrMU9RVlJNWm1sbmFqTkhObE5JVTJ4NU4yNUxNVWRoV2pWRlZsRlJjbkZrZGtOUVEwbGlOa1pqWlVNcmNEUkVUWE5aZUd3M05tZE5ibEU1ZVZrNE9YSTNOMkp2UlUxNFpuRlJZMmR1UzBwdFNHVlZVMHR5WWpoQ1VWUjJZbXBuYVdaSmFXRkhTRXQ0WlU4elNWbGxLME5KZFROUE1WTnpOMFlyZW5ObmRGZDRSRk16Y1ZsTlJIUmxZbU5QTm1veE9WaENlaTlqY2xKS2QwSmFWM05GTTBaNksxbHNORUpGWlRKRlpsYzBia0pPVUVSQ2EwRldhV3hHUVdGcE9WWmFOREJtWm5nNE5YWk1USGhTSzBsbVRuQlRXRWhDYlVwWlpUbEJNa2wzTkRCdU5GRndaRXh3VWtkVmRHZG1TMWQzVDJaaFlXTTRNRFF2YlhGVlRHSkhTbU5sUldsMWExRTRhQ3RZVmtORVkydFdhRmR3VFdoR05rZEZZbWw2ZEdkSVNtaEhkakEyVkhOc09EZzBSVmx5TlVoVFEzRTNVMlUxWldjMVVqUm1hMVZWVkRKV1VVRTNRV3MwTjNKemRreFhRMHRhY1d0MWNHWjJXVWcwZHpCSmNsRmtkakZTTWk5RGJXNWFRblZRY0UxUVpGVmlibGgxTjBGM1RYRjZiMHR3VVhoRFRESXJUbXh2TWtOUGFUUXpUR1UzYjFSbFRWSkhNMkZtT1hweUwxSmFWV3M0WTNCR2IybExPV2d2TUdsRFVtYzBjVGw0UW5GdlJrNUhabmN4WWl0TGNrZzVVbEZJY2tOVWNuQlBhVGxHVHpOM0x6ZHFjV2xOV2tadWFHcG5ZeXRoWTJ0WVpsQXhLMFkyVGxGU1pHUnJXbGRPTVdRcmMwMTJiV3MwVVhreU1YaEZjV2RoUW1GMU1YTkVhMlJMUW5GMGNXUlBhRTlxVlVaUmNtZGpiRGc1ZGxCeGJuaFFZM1pTU25KbVZIa3dSa3BTWnpRNVpYaHlObVF5VFhoYVIwUmhkRGhHU21reVRHaHROM3BIYlZodGNtRkdOMElyUXk5SFVXTkpRVXQxTTAxd2FFZzFjSGRLUzJwclMwNXljbEphVFdSdU4xZFdaVzFNV0V4c2FHWjJhMWdyUVZjMlR6TlNlRlp4WVdkbk1VNWpPRTVpZWpGMFZqZFBaa1ZSTkRsclRqRmtZbEkyVlhjclZUWjBkVzVRYm1WQ1kyMUpVbU5aWjB0WVJVUktNRnB2YUdaU2FTdHZhRTAyYzNSSlRFbHBSM2hpVUN0TldYSjFaMHBaZFRVMFVURkNlbGhPTjFaVFdGb3lka2hPUkhOdlpFMVlNRUZKVUc5U1RIcEZZa3hHZVhWTVVXVmxURmRLUkZsUU1YVm1ZWEUxYzBZM1pVa3hlRGRKYzFSWFRVcDJZMVJ3YWpGdlVFSTRRbVJzT0cxSGRUaGpSVE5aV2xaU1RHWTRSRGg1YkUxdlpVNW5NRmhoTlRCc1MyNVNaRGxuUmpoMU1HZ3phbnBRTlRoRWVtRTFWRGRQZDBscVdEbENhalExY0hKdmIxazJSV1JyY1doelQycHhUVmt4WkM5d09HWTRSM29yU25RclFUTTRhMk0zWmpnNVZVTjBiV2c0YmsxSFRtY3hTa3RZZUVKM1pqSjBXVXRHUXpoaGEzb3dNRlF3UzBkVk0xcHBRbXBuYVVwNFNIaGFkMlpGTkVSQmVYRXZXR0o2TUdGUlpHbDRWazFWUm5aMGIwSlVURzVvYzFSR1MzbGFTbVZKZWxac00waFlieTlJUlRsR1kwMVRWbFEzYVdWaU5YcGlja3hNUlRsSU9XMTRNREkyZGtKQ1NubzNVSGxZYWpFeVRIVXZjVWxpY0ZWS2RFSXpjVkV4ZDNSSlZYTldXRWhqY0dObWJXdG5lRGR1UVN0WlpubDRTakJqVDNOeFpXazNaMHd2VTJaSFRHSnNiM1kzV2tWVE1scDBkSFZZUkZkNllYZDViRTFaYTBzclZ5czBlbWMzVUVkVFlXUlFhbXh5UlhvMmNWa3pXVTg1UzFsRFIzUnhkRE5EVDFKNWFYVXJkMmxQVG1KdGNqQmhZMWRDV0RWb2JIUkRObmhRUzNNMmVuRnZhSEpPTjA4d1ZtcG5hbGxCVTB0TFRFWkJPVGhPVTJkalZuaG9WWGhvU1dKVFZDOU1abWhKZW14VGFtVm5TMjgwU0hKS2RHcEpXSEZrZG5CUlVFeEZMMFY1YkZOWk5WZzNTak5DT0hrNVdDdEVjakJVU0d3ME1IaEhOMmxuV2xObE9IVnVha3RFVnpOc1UycGFlR3c0TUVGVVFXRlBWRk5zWkRkekszQnJhVFJJUXpsWVNHWm5kMHRIYkZWUk5WaHpaazgyTjBscGRVeE5UM0ZwUXpWVk5YSjBNSEpwZVRnMFFub3pjMDByYkZCUE9WTjViREZJVkhKNE16WkxWR05zT0VKWU1ubFZVaXRSVkdSMlZEa3JTMk15ZDBSVVFtRmtRbUUzZDA1UVpFWkNjMmxLTkRWYWRHUkpiR3h2YW1WVGVFTTBOVzUwUzNaVVZtUlJXa3huYzIxTlpIaFhVamxxYVRaclUwMUdjSEU1TWsxVWEyeFRhR052VWxOUllXVk1NRWR0WlVwVE5VTXhUV3BrVm5CUEx6TXhOVFZtT1V4RFZVUkhVMEZYTlRKRE1XYzNSblZ0YmtaUldHRllUM1VyWXpOMlkzWlpaWFUwYkVsRVNEVnpURU5YY0RVMVVHeDVaRTlVVkd0WGVXOXpjU3RrVVhBM1dsaERTR3A0WTJ0dE5IUkZiVVJEYVhGbVJqRnJkSEppWVU5MWIyOUpVVkoyUVVGSVRVTjJVRWx3U1hkWFJITkZZV0pYT1ZseWVVbG1iMjl0ZG1wcmVVOHZaV3RCTkU5QlpYVkNaUzlRWVU4dk9VZFdRbFEzVDA5amRYSXJjRnBKUzJGMlVVNXJRM0p3Y0V4T2QzcFpiWFJLTjBORVMxaG5VRzFJWlZGbk9WQnJOSEp6WlRCbGNrRlRPSEI2UlRCc1l6bDZhREpWU1RSV2VURXdhV1FyWkZKV1ZGVnNiWEEyYkZGMUwweENaMXB0VEhwQlNqTXhkWEJxUkVrNE9FdHdNa0p2U1VWdmNHdzBlalZFVjNkV1RVZHJZM2xEZVVkWVUxWk1jRW96V0U5cWIxUnVPRVI1YkRReFMxWlpaUzlaVERRemVEaEVZaTlDV2xWQ2FFaEJRbE5uTmtoa2FpdE5aakJ4TWtaUlF6aEJhbWR2UVd0Q2QwcEtTVWswWlVabVNHRk1XVkJrTUVNd1NGTmlaSGxNT0ZoQ0t6aDFkbkZFYmtWdmFXcDFRMHBOZFdKNE1UWklhMlJYTkdSalUwdEdibVZ0TTJGQ1JWUmFXVzRyUVZOa0sxaHpNMmN5UlZReU9UaFVlbGRPUjFFNFpIZzFTVVZ4Tmsxb1JXVXpNa2hXUm5kb1kzRkdaekprVTNScFpXNXllVkJaZGpSRWJFZ3JiRzV4WjFZdlVUbHZiVzVVUVRodmVYWnpXRFY0YnpJMU5XUlFZMmd6U2xOd1MxUlpWMmRVZURCbVMyNXZkWFpaZFVWNk1YTlFRalp4Y1U0NVFVUTBOa05tZG1sSkwxbG5NM2hpWTFwVWN6ZE5ja2d6WW5Obk0xSXhabGhPWjBwV05HbEJiMGt2ZWt0eFREQmtNMmsyYWtwcVRsTkJPRTQyYzJsWlF6azRUWEZzVldoT1pHbEdRMk5TV0RVMk4xRmpka1ZWV1hKcVJsSm1lRmt6WmsxTmRuTXdMekpPYUZVclluQlViM056UjFJME5tZzFjSFpOWW5OUlpreEphamh6VVdwdFFsSlNZVEZvYkZWaGRFUXdURGg2UkZVd2VqZ3piQzlMVmxKTWIyZFFOR3RJWmpSRU9WSTNPV0pzV2pOalJGbzRTbEpQVGpCaWQwRnRkVVJsVmxGNFRFdFRRbEpvUkdSdGEzaFJWa3B1WlhkMGNFbDJOMnBPY3pReEswUjFOMWhzYVUxdVYxbGhTMVZEVkdSVE1FaFVUbFpDYjBGMVF6Y3pjbVo2VmprMVRFZ3lhRFZaSzAweVNERTVZWFI2UnpsVllXeHpVblUzY3l0RllVTklNWE5xZGt3d09VMVRNVE00YjFwb01IbzNkMDR3ZUZGMmVVbFpTSHBPV2tkblVWRkNNbk40T0ROTVYwbHBUMEozVVRFM1pVZHFWRFp4VnpNek0wNDVhbUV5UWtVdmVteHVhamc0VFRJeGFWcGpjRmRWT0M5alpXUmFVWFpFV2xoR2QwcHRjbEZsTm1NNGQzQTJXa0ZxYmtGNmNpdFNkRkZFTlhCak4zQktOV3RzVmtOMFl6VklVWHBoVVdkMFNUQmhWVmMxWnpoNVRURldVVzVJTURoa1dFSlRWVkp5Ym1KbEsxZHRhVkZuVDI4MVZWcFNiRGt6ZDFoYWJWTlZaMUJQUm1wdGNVUXhTV3cyY2pkVGRFcENUVzVWZG5SRVRWTXhkekJGZW1Sb1ltSjVOM0pNZEV0bldYUlBUMWd2V1N0R2ExUnRPQ3QwTmxWeVlTOVBObVZMYUZKaVZtNW5ZVVJ2VFRKRVNIUTNRMVJTUkhWR1VYcHZjbkk1Y0VwaU9XZE5lazVzU0ZKMFIxRXpXbXM1VjJJeU5FNWtUazl5TVdOVFNsbFRjMGxFY1ZkMWIwUjBMME5hUzJWR0x6bEZjRW92TVZkMWVqTmlaWFFyT1Zwd09HWlBkbTFYWnpKRGR6RmxRMmRYVldWWFZsVm1XVTUxT0ZaeldXaFVXbmxDWVRSUFJuSmhiMGhMZDJ3ek1VRlFTbFJYZVVrOS5uTE52T1BjeXlTM3RONzFSNFpnaGJ2Z0xQTlhpblhOVWNOVlp1V0VHaHkybHRidVIyTlBick1Xai1McUtEX29lX3RfeGg0MDdrcnM0WnI2aE5wMHNnUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:25,613 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:49 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:49 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:49 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=0172D635E31B68059A9AA6525281356F; Path=/; HttpOnly')]
2020-05-27 09:07:25,613 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:25,613 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:25,614 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:25",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090725 AND testcase_id = 11 AND step_id = 22 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:25,625 testcase.py[line: 205] INFO: 测试用例[id=11, name=气体检测录入]执行成功
2020-05-27 09:07:25,625 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:25,625 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:25", case_exec_history_id="20200527090725" WHERE executed_history_id = 20200527090721 AND testcase_id = 11 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:25,781 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=11]的执行结果
2020-05-27 09:07:26,117 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '4', 'testcase_id': '13', 'author_first_name': 'Testlink', 'id': '14', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:10:03', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:08:03', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '23', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '4', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-4', 'testsuite_id': '5', 'name': '作业票授权'}]
2020-05-27 09:07:26,258 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:26,258 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 13, '作业票授权', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-4')
2020-05-27 09:07:26,269 testplan.py[line: 76] INFO: 开始执行测试用例[id=13，name=作业票授权]
2020-05-27 09:07:26,269 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:26,269 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:26,269 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:26,270 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090726', 13, '作业票授权', 'pan1_of_cq', '长庆项目演示', 23, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:26,282 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:26,282 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:26,282 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:26,282 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:26,282 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:26,283 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:26,283 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:26,283 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:26,545 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:26,546 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-42-dbLgENGgWqUVzddmbNladpnly6gXxx-passport.51gxc.com" />
            <input type="hidden" name="execution" value="a23ca88a-ea9f-4aa2-aca4-c130bb1818c7_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuV214d2EwOVlTRkYySzI0cmNVRjFXRmxoU1U5b1UwZExWbTlFYVdGaGNUbHBjMWh1VGtkYVJHUmlkMDk1VVU1MVpYRmhSMjlhZVhaelRVbDVRVTlVUTNsRWVqY3liRFZOVEZOdFdWaDNVbkZtZFVKSFNXSTJVRzF0YkhGVldrdHJURk5CTkZjeUswb3hOa3hHWm1KaWJ6QkVSRmRDTWxWSmJITndiV0ZRWmtwc00wVjRRekZrVFZReVdDOXRUMjVSV1hGM09XUTBiRFpUYUhGUmRHeFZVV2hQWjFVeFZWcGlTWFZFYjNOVmQwTkVlak00TkU5d1JHdHRTMlJJVTNZNVRUSlpURFkwU25aeFdYcHVkbk5QWjJodWVGZzFWRnBhTmtsV2VtNTNZeTlyZWtwQ1EwaEJjVTh5ZVZoSVpHeFBNbWg1Y0d0RlozbzVNMVE1VVhSc1N6aGhkV2RMU204NVFtbEVjRGx4Um5GdmVEUnRWRU5HYW5ZeU5URjBZVlpMSzNrd1VHbDFhRFptWkdWbVdTczBMM1JTTHpsWE1WZDRZVUZqWTNZMmMwNHZablptUlc5eFFqZEZPSGRWZURnM2QycHlhMkZuTjFaVGJFeEdWWE4xYTNKNFYwdERja3RLYW5reldWWmxiMEZzZHpsMFptbERhM2t6YWxaS2JqQm9hVEpvV2tkdVNGVTBUSFJJUTJjeFlsWTFSVVZWY3l0NWNHcEpaV1Z3Y0dwNVlXcHVia0U0Y0haYWNHVmhWa2RIU1dFeFMybFVXR3B4YjBsM2FqRmlTMUpNWWpZeVFsVjRiRWRDVUROUWQyaDNka0V3WWtsbVpFTTRSMGR1WkVGd2VVa3JOVU50VDFSWVFuSkdhR2xIZGpGelJFUnNVbTFQUldodVVFeElSSG95TUhKaWFWaGpVREJEU1d0dGNWQjRhWGxGUkZObmIweEZZVlZtV0VWelJFWm1WRTF0ZDBOTE1ubEVOREJDVm1jelNUUkhTQzgyZVhNck0wdGFhM1F2ZWxvMlJrWnVXV3MwVVd0T05sSnZVV3hSYW1kbE5FWTRPWHAxUkhkMGRXWkJTbU5TU1ZSbVIwbGhiWEJFWkVOUFFXNU5SalJUUVc1dlUzWmtlSE5tWTFBNFZGRjNiM0ZOU1hSU2VEWk9RbUp2Y0VOVk1raElZMkkzWmxweWRWWnlaRVpVUzI0cmNUZHFhMDVXV0ZOTVdrUlZSSEJRYzJsR1JVRkpZMVJ3ZVRWbldsUkZSVTFEZEdVMWQyTTRRMHREVEVGd2JVRlBUVGMwUm14UFdWWjFSMjFWWW5kaFdHTlpjVk14Y0M4MFNtNWxla2Q1YVdWQ1RpdHZSbkZ5T1hoUlJsZE5OVVJtZFVaVVMwZzFOaTltVHpsbk1tUndSRFpETVVodE9WVTBNMHRNV1RKbWNsQjFkRTFxZUZsRlZqWjFPWGhZVldzcmVHdGpTRFJPVm5sRFRYZG5XRGRFUjFkak9IbFZTRkV6TTBkYU9GUlFSV3BuVmt0NE4xTXZTVEJIWTBaSmRXVjNaM2syY2xrelV6Y3dWSFJGTDFGaFZWaEtUV2hrT0ZJeWRGSk9WMGxYYVZJeWFIZFdkRUVyUzJNeWJtaDBiV3BsVnpNelNYZHViMjF3ZG5BNU0yUXdWemg2WVhoUUwyMUlNVUV5YlVsU09YVlZPVFl3WVVOaGJESTBNMmxXVHpod1VrRjJMMHN3VDFobVpXMVpTRk5JZVVoUkwyYzVWVkl2YUdkVGQwUmxiblowVEhGMGJEZEtNbEV5TmxSUldVTXdXVVJvVTFsVWRGWjBaWFJqTDBjMlIwTjNSakpNUlRWS1RUYzBjMVIwYmtOUmRXNXhhRzF4VG1vMlJVTTFlVFptT0ZnNFMxQkpPVzVWSzBWbVVVZGtaVWhsYzBsWFdrMHhlbUpQT1ZCVGREUjJVRWhzVDNWeE9XdFZOa1JPTUdablowTlVaM05CV1hSTVRIWTBTMGRrYjJ4SU1XWkhkRVpqWlROT1EzUlhaWEJ3WjBORmVuaDFLMWRNV0M4eVZqQTJTMkZyWTJGd1RTOUZXRzh4T1hkMVdHZHlPREkzV21wdlpsSlVabnB5TUZBelYxb3JlSEV2ZDNoSloxYzJabEphUjJsd2RrUTNkQzlhZERCbGQwbDNNMUExVFdKMGVDdEVjMVJRYzJSNlNsTkNOVkpZU0ZGcGRHSmxlbWRsYm05S0swOTJhVlp1ZW5WT2JFTnZOR2wyVGxGYWFEUnpPSG95YWpjdmNUVkpjbkJLWTA0eWVqbFNPV2N6UlZaS2EyWnRiVEE0ZGtSRVlVMXNjblZQUkNzeVR6Y3hOamQ2WjBOR2VYUm5jMUZsSzFWcGJHZHRaVXA1WVZOamVXWlJORVJ4T1RoNmNsUnJNM3BDYkVzelYwUkZWbkY1YjNsUlpIVnpTbFpNWjJNNFVuTnZhRzFRTVV0YU9ISlBabVpuVDFSSGJFMUdSbXN6VFVsRWJ6SXpVMHBZYlVnd1ltVmhSbTlDWnpsUFNpOVZhR1UxYjFVeFNYWkllbTVFYVhRNVpDOTFlRVZrV1djemRFTlBNVFJIUWtsU1psRktiUzlpY0ZSR2RVVlJTMVJ4T1d0eFFqUTFPSFZGY20xUUwzcHdRVVJSV0VkSlNrbHhTell4YldaUFMySnFVWFJtUkhVMGFrUkRSbVpFWldsRVRFdHdaVlF2VDBaMFJHZGFabEZpYWxCYU9VRnNhRE0zWjJKRVExbHBlRE5VZGxWYVRreHVUM0UzZDJGRlFVVkVkR1Z6YzJFd1VEZFphbEkzWldwUk1WSmpkbXBXYUZReGMxUlpiRmg0Y0VNeWRVaHVNVFJCVjFGUFNVRlJlRXd4ZFRWeWFXSjBWVXhyYm5wNmIxaHVlamxQY0RCNFVYSnFkMGx2VTBoc2FFdHhOblIxWjNSa1dWcHFjRll3TVVaMmJIWk5lbmRUY0N0eWRESkhkeXRuYlhGM1RTdFhabnB3YjNCRFRYRnFTRkoyUzB0UWJtbzVkemhRU0RaUWIzTmxhbVYxTld0MFdEUnlTa051WWtWYVJrZGFSMnRCYWtvemFHdE5SVkV2WlVSTlpFWm5UbVpJWnpVclRGVnBkVXQxWjFkbk5FMDBSRXRNWW1SRGFURk5TemRrZWxodkwwRmFVRUZWUVRKRlRXTmxTVWx0YURkcWVIVkRaRVo2VFdKTllTOVZWR2wwTmpsS1ZXRjNaMDUyTVhBMFFWVkRVbkZITm5wT09TOXlOMjkwVDJaUFptVmFRV0pVUVZoT1FqbHBjVU5IU1ZSeWVXcEJUVTV6VlZWU1ExWkZPRVJOZFhNd1QzcHZaSFU0YjJSSWVFOURXSFZ4UlRobVIxVXdibU4wZUVjek5WbEpNbHBWVUd0b2JUZEpWbk41Y0c1eVVGVTJOMVZIV0RneVlYcFdhemxLWmtGbVZqbFJZVEVyYjFCYU9WTmtaM2w1VW1aQlJGbDRaeTlNVm1WVFRERldTV1o0VlZVeE16QkdaRU5TYVc4eWJDczJXVlJDY0ZGMGMyRkZkbkJDYTBaVmFrWjRVbkJZTkdscmVVaHRORVp2SzJrNGFHd3JTbHBqU21vck1raGFaVWtyVmtWc1VXZDRkV2hqVW5oNmNtMHhTbXg1TjJ0dE5qZzFUVmxLZWpFd1NXSlViRU00ZWxVMmJEbFZRMFpNZG5Wd2RqQmlWMUp2Wm1JdlMyeEpVRmxqWjFGUFFXNXlNMWxpTjJJNFJEbHphbW8zYTBWRlpURk9kVzl2WkdNNVQwcExaMGxQYUVoTFRtSkxTVU14VFhoVlUzTktLMUY2VTFwME1YaFFhVkJyZFVaVlpFbzRXVzAyUkZOUVMySnpNVzUzU0ZsdFVuRnhNRTQ1VEhoek1taHBkVkpvTUVobFNHYzNNWE0yVFZCTEwwdGlja0l3VWsxQ2FHSkNSRlJEZFM4MGNUVnBkMEYxUW1NNVlXSkpTMjlYV2s4eGRERnVOM1JFUmxWQlFrVnBSVk5HWm5aQ1l6RkdhMjFSY25GVWRTdDNPVXBNVmpWWVQzRTBVRzVKVlRObE56SlJTa2gwYW5OUFpESkZjaXRwWWtOdVZIWXJRa2hMVlU5cFluZDFNbUZxY1VKR2FsWkdXR05uVFdWMlNVZExhVUpNVFhKd1IzaGtOV3BMWTJSUE56VmlOak5HU3pGNlltRllRMHg1YVRCUVExZHRWRVF6Y25ZeVdEUXhNRmQzYkZsRVVGaHhNRUpsYjBzMFkwcFZjRU1yWVdkMFUxVlpTRmx4UVZFeFZ6bHZXbkZoY0N0RVRIVk9SWE5HUms1cU1EVm5UeTlIU1VWc2NGYzVVbEZxSzFSNk9UTnNaVzV5ZVhKU1VIaHpUekl5YUVwQ2NHOXRiVnBET1M5ek9GSlFSVlppUkhGSFJrOWlNazlXVG5kd2JsVlhSelZPUTNOTk5XOUROWEpVZUZkdWNuVnVWR2hTUVhGeldrVXpVVmM0U21acFYybGtZVlYzZG1WbVZGRlNNMjFqWkhablMyNUNTVmhsUnpGalZVSndUVnBIWW1nMGIyeFJVMFpLWlV3dlZGb3ZVVFlySzBkMlVVeENLMmhzYlV4S2RGbEViemhSVVU5SFoycENNbGxqVXpkRllVcHlNVWRSUzJOdlNUZFhhSGMyZGpSNVVFSndURkJrZEc5cWN6Tk5jME5NWTJ0UldFdDVkVkowY1hCdlZXcENhMEY1ZEVOWFdrWmFSMFJwTkZodUx6VjBlVll4U0RneldtOVhkbkE0VldOaFRHaG5iV2wyZG0xUE9EazBkRkpOU1RkTU5UVmFSREEzU1hwUWRuTndTV05JTVV4UllXdDZiWGsxTW1adFEzQmxORkp0WVVZemNsRmpXV2t2WTBzeVdqbFpaMFpwYlV0VGVYRkJaRmg1SzI1dGJuVlhUMlJYYWpkRlIwSkNOWEp3VHpSSmREZDNaR1pZWkhJNVFqQllUblZJVVVGUVQzSlJZa3hWVURZeVZXaFVOM292YjBoNmNYZENjMkZaTlhWdFpuTkhPV3RDVUhsa1VFZDRMeTlDWTFOT2VVWmlWMGM1U0U5bmVUWkJhRWhUTm1sYVUxSkdMelpoUmpkeU1sQTNXR1ZxVTFsalNIZFNZM1ZwZG5kak5UWTNVeTlGZHk4MFNuZGpablJwWlU0eU1EVnlibTVIV2t3MmNsbFlNMGR4V0hSaGNFdGxkV0ZUTlZsc2JFeEtTRVV5VUhkUlRHVkRNVzV1YVhaMGRuVkZiMkZTU3poek5tZDFRMlEyV1RoeWVuQlBlbTFxVWxkS1JXaFhLMWN2Vlc5eVNXRTNMMWxVYjFWSVdVbE5TM3BTY2tkRE5XZDNNVVF2U0Rkb1YydE1ZMXBFTlc5NlJVMTFiVkJHWVdkRldETlNVbXhwTDBzNWRXTkJLMDFSWkdSS1IxRlViMkZ6TjBsM1NuZHRWRTV6YWxJMmJqZERWR3BtYkd0V1JqQjJhM0ZKTm1KbU1uUlhaWHBaTDFoblZGRmxObXBGZFhKNVVGUXJORFpYYVhOTVEza3ZSRmNyYVZVMFRFUkZSRFIwSzNCWWJVdGlaM1o2U0Vkb1ZGaFVVMUpGU2paNmVISkNRbXR0UkVFOS5ZTkVrYUx2bmw3WDI5QXFEVEpKc01LQ2dkR2NyWG5xRFJqc05mVGhRb2cxaHlWejdvazBMaHdMLUNWbFJQc2ZpTFQ1emFvcG5IbE1zOHBnaGdIeGpQdw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:26,546 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:50 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:50 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:50 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=2BF45B71B06B260633917A08A8A383AC; Path=/; HttpOnly')]
2020-05-27 09:07:26,547 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:26,547 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:26,547 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:26",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090726 AND testcase_id = 13 AND step_id = 23 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:26,560 testcase.py[line: 205] INFO: 测试用例[id=13, name=作业票授权]执行成功
2020-05-27 09:07:26,560 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:26,560 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:26", case_exec_history_id="20200527090726" WHERE executed_history_id = 20200527090721 AND testcase_id = 13 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:26,715 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=13]的执行结果
2020-05-27 09:07:27,026 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '5', 'testcase_id': '15', 'author_first_name': 'Testlink', 'id': '16', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:10:10', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:08:17', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '24', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '5', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-5', 'testsuite_id': '5', 'name': '作业统计'}]
2020-05-27 09:07:27,168 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:27,168 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 15, '作业统计', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-5')
2020-05-27 09:07:27,179 testplan.py[line: 76] INFO: 开始执行测试用例[id=15，name=作业统计]
2020-05-27 09:07:27,179 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:27,179 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:27,180 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:27,180 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090727', 15, '作业统计', 'pan1_of_cq', '长庆项目演示', 24, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:27,192 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:27,192 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:27,192 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:27,192 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:27,193 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:27,193 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:27,193 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:27,193 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:27,459 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:27,460 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-43-6mAgYE6mTC6cns1DoTSKeFTlTIDogD-passport.51gxc.com" />
            <input type="hidden" name="execution" value="2551a102-a238-4efa-9a6e-02fd2e2760ff_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuSzNkUGFVNXVWbXh3TlVkSVlXMVJVbEZIZUZOcVdpdGxOVlU1TDBKT1EyWmFaVTh3ZFRSVlJqUTVNR1pvYjJKUFptZHVXalU0TkVoYVdUUXdjMmQ2TmtScE5GSlFaVmcxVGxsblkxZDVkRzVRYVdsVVdYSmFUVWRCV1RObldVaDZXWGR0Wm5SalZIZDZiRGhOU1M5UmQydHZRWFpQVDJ4R2FqaEVaVTFoYVVReWIycHhRMDV0WVZnMVdVNVdSVzQzUmpCb1F5c3dWeXRCY1Vjdk9IWXpTVk5wWVhCUWNGVllZVlExYzBocGMxcFhhREJ0ZWtKSFRIWnBSWEF2V214WVJFOU1LM1JzVEd4UVNXcFVRM3BIWkRKdGNGaE9hMjQ1U1dGTlRHcHpja1prY3pScmNrbElkM1U1Y3poU2JteFdZbWd6UlhORkswTTVUMFJGWmpaeFFXRk5ibTl1UkZCTmRXdGlSREpYVkRaUVJuUjZlR0Z6YUVGd1dVVTJXRTV3TlRoc2NsTmlUM2h3VjIwMk5qZ3pkbmhCZVRVdmFreHFWa2huVFdkalRtSlFhamhNWlZkS1pFVTJjR0p5UTFsbFFreDRaQzlRWlhweFpVZEJjRFZ5VFVkME4zUXZjM05XTUhObFpXSnVSMWRaUTI5alExSnpaRnBWU0RNd1QxRmlkVTlDUW1GdGNGcHdiMUUwUkRsTVpWVnNjblZWTjB4eGVXNVFlRFp5WTJoV1dXOWFOblp6UjBGdVNtZEdiVFJ1TUZkV2FtczBWMDlFZUdWRlRtTk1Va0p2YUVVeU5HNUxTamM1WlZOaE4wdHNkVVJTYlZrMWFIUkpXa2swUVRSWFdFRk5aMWRqZWtaVVNtSkdhakV4ZG5rMVV6SlVjVFJPY0c1M2NETnhlVTVRVW14dFFYbGpPVEZMU2twNVpEZGtkR1ZTWWxaeVdEZGtXWFU1ZWtaU2N6UXhlRlZsVTJZeFVXUkVSbVpZWWtoUEx6aHZaVmd5TDJZd1NtRjJNVFZLTDJsMVdVUTBWMkpyYkVSdlZqSk1WbEZ0ZG1kT2EzSjFRWGd2T0dacWVUSTNWWEZtTTJOQlJVRlljamxJZGpGMmNXVjFSREZqY1d4amVYQnFlRVZRTkUxcFFqUkZUVXRYYUhKeUx6ZzBhRTE0WWtOb2FqWlpWVUZPSzFCUlNtRnlObTgxVUcxQ2EwUlZVRzQwTUhRMlFuQlphVFJCYlRWNlNuWlNVRUZXTkdwMGJXSkVhVTlWZDA5VVR6WjJiRlU0YmxvMk5uVXJlR2RDU0ZwSlVGcElUM3B3Tm1aVk1uYzFjbmhFVmtsMlkxSmxRMVZxVlZocFEyNDBZbVpwTVRZd1dUWkZZMmh2TlZKdWIzQTJVbFJTVTFORFpsTnVaa1ZXY2xwV1VTdHJObk5RT1RnM1RUZzFUVGc0TjAwMFRUbHljRlZNTmxOVmFXZEVlV1ZOVm1WbGRFNVZSa04zVjNsMWQyUjZlR3huVVRaMWJXMVJLMkZGWVdWR1kxRmpSa2hZVW5KaWRWWmlUemgxY1ZKdmF6bGhWMVZ0UjNaSFJYQmhjbEpCYVRBelMycENURlkyWTNSM1JrMUxUblp4YlhVMGFXOTFLMnR3ZUhOWVJub3ZOMWxFYkV4a2VVTXdLeTkyUmxaVWRubFdVVFJoUWt0aFpsWjFjazlYVVRaWVptOVpUamhXWlZaT2QxZGtUbmRMYkZndlVsTndZalY0Y1c1TmFGazBVMVpIZEVkMlZtZG1aR2hMWlRsclNUZEtWRVZaSzJaQ1UwWlhSMVJ4TVdZdmVHOU1la3hWYjBsR2JHcG5ZMGcyY0ZkU1FTc3pZemcyT0RaM2NHMDBaRmxWTm5CSVNGSnFjR05oT0RSeFVtOURWR041WjB3NFVreEtNR2htVkhkUVNYWTFiVWNyYm5reE5VSjRTa1JuZFVwRGFubDJSekpvTlVFeUszVlZWbE5LWmpSWFlUSTBWMUF4VTJGNFowRXJSMWhHTTFoUE1qZ3pMM3BtZGpaVWJreGxXbGhqVVhaMFpUZENXR0ZwV0dGeVZqUXpaemxQZG0xRlEwaGpia3RZWmk5dFZVcEpiakZTVTI1MGNWVm5hazV6UlZOeVVYaEdiMG95WlVkd1UzcGlZbk0yYm05aVptbHFZVVp1WmxwNFRGRkxTbVZzYjJoYVQzRmxOQ3RrVDNkQlRqZERNRU5FV2xSM1VXTldPRXBoWVdsUmJEQm9WbEF6WlVaM1YxTkpWemhLTWxoV01IRkliV3QxZDJaTVQyeEZPRXQyWVhOdk1VVXJkVzV2YVVaMVlTOXllVlpzVGxBdlIxTlJRMUZxTVU1WE1XMVljMFpJVDFCelEzcHliMHhGUjFWWVZWVm9XakphZFhndk5YaHRRVlUxZUhKMWVIUndiVTF0TlU5NFJsUlBZMFozVG5sNWRYQTNNbGRRZVZNeWJVeHNWVGxzTkZrM2JYRXhaRVEyU2k4dk1IRTRWVFpsVGpGSmFXNXVNVzk1UW1Ga2JWTlplRFZuU1hkbVZETnFiWGhXUVd4aVEwSjNSWFZYUzFGSGNYQmphMUo0YURSdkwxTTJRME5ZVjJRck5IRTFWVkptU2xSNllXdzJUVWRCVERsSGNrdEZXR1pOUlZSaUwyMHJXbWhXWjNOVVRHaDZXaTl3ZEVWNWJ6bFpMM05PVmtRME5FWTFWazgxZW1wdVRqRklUMGh1YVZsQ2N6Vm1ZbGN4WmtkMmFHZDZMMFZTYTJodVpWUTJaMk5TVUdsR2RXZzJZVXRzWW1aMVluRkdSSHBsZDB3d1FURm9UVFV5VFVvMU0yMU1ZalZ2TTBWVVIwbzBhM2g0WWs5WFFUY3daMk53UmxsVFVrVnJVR3RMT0hRM2JVUlRXWEJtYVhkMmJHRXZSSE0xZG1Rek9GSnlOMmhoZG5GR1pWRmFjM2hTVTFCTmRIQkxOMm94UkhKNmRXRTBiSEpMV1dvek5FMXBabE5HZUZKSE5URnlkbGR3U0d3MVNFRlNMMngyWjJRNU9WWnNTVlpPU0VGUlVsRm5NRmszVG1OMGFYbDFOVU5uZURScmQxbzVkWFpMYXpsdWFWZ3JXRkJCZFhRMVUxWnpXakZIU0ZsamVVWnpZMFUxWjBSNGJVNXdiMDlaUkhSRVVrTllTM281ZUdWcFJtTjVaV2RNWm1kelV6aG9Ta0l4ZURCcVQwUkplVWxxVG1SbFRscDFTV0ZSVjJaMFlXdDRTVFZPV1ZkYVRGTkZORlIyTUVkU1pXbGhSa2hXVFRSMWRIWnhSRFpMWVRkNlVGZHFURUZWY1V4bVdsRTNNRzh4TkZkeWFEUm1SMVZwVDFwelFVMVhkRVIzYkVGTU4yZzRaMXBZWldGNmMwdGhRUzlFZGpOdVkwVjBSMEpLVDJWdU5ucHZUa0l5VkRKU1oxRkhMMGR2Y2poU2REbElVV1JWUlVneWNuVlFZbEoxTTNCWFpTdG5jRWx3TW5ZcmVqRlJlVUpHTm05R1NubDVhazVoVVZSdlNESmtZVmd5VVhFMk5XRm5SM3B6TVV0QlQyOWpLelozVERWSFRXSjJWVFpNWjFBMlUxaDZhWE5NY0RBNWFrcE5kbWRtVW5KRU1XTXZXV2xEVkdKMFNXdE5aRWtyYURSSlYydzJTM1I2Tm5OUlRVdHpUbkpJUm5sVFJHTTViREpoVTJveFRVa3liakoyWkZab2JrZGFVVXhOU0Zwak5GTmhOelk1UzFwdE5XVnFWMmQzUkdnM2FYSmpaRzU2SzNWeWRISTJZVTlwWjNVM09HVndUV1ZEUmk5VU1IbzFhbUpQWVRJNWJEVlZWVEptYUVoU1EyUnBLek5MYTFoYVpURm1iVmcwUVhOSFZUUXhWREpoYzFocmNHaG5VbUp1TW1jMk9HTjZhSFpMWjNjelZVa3hiMlEzVEd4QmNVeGFXazVVTjFKd0wyRlRXVFpIYjFwSWNERnBXVll6VFdKeWNUbFdVbGxtWm1SU1IwVnJUM0pQTldwV2FHZE1NRU5uVFZKemRFMVlTMkpZZFdGMk0yTnpXamxIUVhWWlRGaGhWbXRWTmxvMFkzRjRTV3haZUdsNE9XRnJLMVZUYkhCSFRXcHZWbXhsTjFsREsza3ZXR012Y1V3Mk9IVXdSMUF6VTAxWmVHNTJjWEprZDNnMlJsUXlTekZRYWtsMWQxVkRiRk00TldZck1XTkxaMXBUTUZKTldrOUtia3BsYm1KdlkwUnNlV1JIU2pRdlpYcFBWbEZQTkdWUlUxVXZlblZLYzFaVVVYYzJkMmhUVVc1eVMxUktMMnRzTVhaTVFVcEtabUp0TldrMlVUbHhRVE5rWkhwSVN6bHRTRkEzVG1ocU5FRndXVkZpT1dkeVkyRXdWekE1VGpGSVRVSkVZV28zUWtGTWNDc3JOR1pUTkZRclYzWnVWVTFLUkVFNU1qZ3pSV2REYmxaRk0yWnZjR1JtUmxaekwzSmFNbmhJZVVKWlMyZElPRWNyVm5Gc1dqWnBjMjUxZVVWUlFsRkhNRTVPWjNwcFduY3plVTU1TW1OU2RsVmpOakl5YVhvMWJscFZhWEZ4YmpkNGIyWjJiMmRyZEhCU0wwNHJVWEpNVkVaYWNGRXdiblIwV2xkT00ycGhkSEIzT0VGWFVYVnVhRUpqY0VNclFrTkplbmR6ZGpobVJTOXZTMEpTTTNKS2VIZGlLM0pGVm1VMlVUTm5WbVkwTVcwclRXRlhMek5UUTB0VGRGUlJjRXQzTVRKNGRIQjRWbWt2VkhaaFEwNDFSRFZXYm1aR1QwRmpNR2REVkRWTFpFRkZXRzQyTTFGbldIaE9kVkUyV20xVmVEZGxkelZMZDBsSlNVbHRRa1ZRVG5GamJVVm5hMDFxTlZnM1dTdGFPV2hYV0hWbk9HczVTRkpTYkVSNmVGcDNjakpWY2xSSlZqZFZWVkpRVjFsVFRrMUdZMjVpZEN0a1JuZEVRV2wyVDNCUVlrZEdVVVoyWmt4SEwwSk1aMkpEUm5aSFNXRk5NVFJCU1hBMVduRm1ibEJaZDFkQk1sSm9XR2szYURkR1EyeDNWVmQyZFZrMVREZ3lZbVIxVVM5MGFtd3lTWFZuYUU1TlRsRm9iWEpVTjJweVZXOXpSR0pOTjA5dmIzRk5UbGhxU1ZkMGVXSkViMWxGVUU5YVRrUjBNbFJsWVhoWVdWSk9kbVpqZEZCTVNXUm5SVGhFYlZOUE5ucGhlakpxYjBabWVrZFBjVEZzV0M5TE1VRkhUazFvUmpSSllVOW1kV2xMYkZsSE5HbE5UVUkzTkZwbVVuaFBORlJUZGt4TFdYVlBkeXRzZGxOb1dFY3JhRXBUYm1SMFdWRkVkbXhtVm1wWE9EaDBhMnhUTW5KU2VWcENXalZLTUdOa2J5dHJMMjlTY1c4d2JuVjVNRlZVUVRSMVluTnVNaXQyTjBSUlRsb3dhRk4yZHpWUE9XaDNZM1IyYXpoS1J6aFdNRkZJV2twdlpGbEllRGhJUlVrdlJGUjVSV2RTZFdSeWRYVTNkekk1VTNkVGNHOU9ia3RFT0VNNFNVc3JPRk5zVEVwblMyZEJjemszWVZaemNETk5OVGxKT1VaNU5uYzRkMWxSVW1zOS40c1poakJrR2ZwbEQ2bXFiRFVzSnliNXhVMHp0dDJYV3ZEaENxQ3dmbXc4eFUzZEpFV2RCaWg1dWQxci1lSkhDazI4S2FPV1U4NjVRNmVPbXdIWDhoQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:27,460 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:51 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:51 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:51 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=CBE80018E384C9716DBC857492950F8E; Path=/; HttpOnly')]
2020-05-27 09:07:27,461 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:27,461 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:27,461 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:27",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090727 AND testcase_id = 15 AND step_id = 24 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:27,495 testcase.py[line: 205] INFO: 测试用例[id=15, name=作业统计]执行成功
2020-05-27 09:07:27,495 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:27,495 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:27", case_exec_history_id="20200527090727" WHERE executed_history_id = 20200527090721 AND testcase_id = 15 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:27,722 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=15]的执行结果
2020-05-27 09:07:28,071 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '6', 'testcase_id': '17', 'author_first_name': 'Testlink', 'id': '18', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:10:17', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:08:30', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '25', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '6', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-6', 'testsuite_id': '5', 'name': '安全分析'}]
2020-05-27 09:07:28,212 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:28,212 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 17, '安全分析', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-6')
2020-05-27 09:07:28,230 testplan.py[line: 76] INFO: 开始执行测试用例[id=17，name=安全分析]
2020-05-27 09:07:28,230 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:28,230 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:28,230 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:28,231 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090728', 17, '安全分析', 'pan1_of_cq', '长庆项目演示', 25, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:28,241 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:28,242 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:28,242 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:28,242 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:28,242 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:28,243 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:28,243 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:28,243 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:28,551 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:28,551 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-44-KpeUCdYLSKIIJMOwfROYWpfIPOMfiK-passport.51gxc.com" />
            <input type="hidden" name="execution" value="24413c7f-5ee6-462c-a9e6-a0ddaa2c9a85_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuZVRWWU1HeE1WRFJUWVUxUVVqYzNWVGM1U1VwQmVYRmhXRVk0Y21oNE5rdHVhMVJEU1dFNWVGZG9TMUZoV25OaGJTdFFORFk1WVVWVGIycEVURU5CTkcxNWFXaGtkRE5EUkVod1R6UldUVTlrV1M5MFkwVlBZVkJ6V1dGV09XcHJNRkJuYlRCVlExWlFiV1pXYmxWVmNtd3hVbVEyTjBWUVQwVk5Na2xLYkNzM1JsVnpjVmhrV1VzM1NrdGxWSGxaZFM5cGRuTnNhVVJOZFU1T2RHUlhZM0JEVDJGaFFVcFhhMEpWYWpkTmVuY3dVMnh2TjA5TllVazRlaXRYWjJSc2RXOWtXbmRxVkM5bkwwMU1kM2xYVlVwYVVtczFRWFJVTW05aU5uSXJPU3RCZUZCR1RVZExkbE55VjB0bFZsaExVbWhUTDI5UlJXVkNVQ3Q0UVVobVRtZHlTSGRsTjFadmRGQkVRMVZ2WVhneldXSXljWFpwVTFaS09IbEVhM2xuVWpReFZWbHVhVWxPVG1WWlltMVVlSFJKWnpkeVN6RkJUMG8xWWxKWEwzZHFOSHBqSzBkbU5scDRlRWh3UVVSVlJqUk1OMk4zTTJwTU1IRkJPVk1yY2xWWVRXcExaWFExVW1aeFVETkVNbk5pT0VoSVRrbHBTa0Y2VWtSVVEzQnFSMGc1UkRaR2VVdzFjVGxZWTJSa1oyeDFNMVZYT1hRMU1WRk1aRVJETUdSS1UwVkhVelZEZFV3cllVcE1WazlyTUN0MU1tTk9iWGxGYWxsMWVFeHZlbkZ3S3l0VWF6RmhOM05TZEdoeEx6Sk1XWFE1UXpoM1EzRnFiR292YldSWVFtVXdUSG8wYmtsWVdISTNibTQ1VjB4WVZtZDJiMUJvYjNWblRTOWFSbmhvUVdFek5rSlFMMEZqWVZwT2RXNUZlRVozVG5RclozRXhRM3BCZERkcmIyWmtlV1ZNUkdZdlptbE5ORkJzUVVsT1UwYzFUVVpOUkZkUFlYUjNXR05FVmpWT1UyZzJXQ3ROYkZodmFFczJNbXB1SzBGNVdVWnlUM281VVN0NVFYbEdUSGx2VlVoTU5WWkdWR2Q1VlhOdlVHVmtVV2cwUVdodVZGWkdPVEYxYlROWFpGVllNRTE2U0c1c1RETXlSbEZOU1hBM1F5dHZlREZIV1hkT1RYcFNRVEUxVEZwMlNIYzVURnAzVW5SclFWVm9SSGxTWm5kTloyNTNWMmR0ZVRCQ1YwcDFTSGRRZWpkVldXVTJaMngyVFZsSFpUUlJjekpHVWprdlNXeFhUa3hCUkdFeFQwUk9Ta0p0ZG1GTWVIZHZMM0ZoZUZscGFYbFROV3A1WkhCQmRFNVhOSEZ1VTFNeWRGSlpTVlpvUTJGRFlWSTVOa1Z0ZEdwSldrNVJTbnBCZEVKV1NWQkxaa1V3VFV0bWJsbDBWekkzVFN0V2RFdElXakpyZHpGeGNHSTRXa3AzTldvMlJWcDVaa3h2VVRBMWRsbzNSemRpUVZWS1luUTFaM05SVEdrME9EZGFNRU5RYTBjclFtOUpOWHAyVTFsVWRGVXdWMk1yV2xCWU1uUjZPVkl3WjI5aWIxUnJlSHBzU0VWT2FqRjBOVTR4Y1RGNVREaFBOSGhpZFhkblIyUnFNbkppTkM5eFVuaHpkak5SV2twb1ZuZFlSa1Z1WmxvMmRVMUtXRWR3Y0UxVWVTdHlVMlpKZERaTU9YQjRialo1U1RGU2FsUjFNSEFyTlRVM1FtVk9UMUpsYTNsV2VrUTJZelpYYUhkU01taE1RVU01ZVdwV1pEWnJLM2x6VWtsMlUyTlljVVp2UTJwR1VUZ3dVMHRHZFdaRFJERnlNRUZQUmxoRVJVNWhSVEpUYnpVM1ZEQnpiMjlCY0doM2IxUkZlbWg0Wm5sV1RETkhOa1JJVmxkTFpXWm5iRGxoYmxORmJuQXlRV3d2U25WUlFVNXhUVUUwZG1sU1RXSjFibWxFUTJNNU5GZzRSVEpSUVdNemVrZ3ZNRkZzUW5CV1FtWmlNRzl0YnpoM05XcHNUVzQ1VGtwcFluUTJOek5NWTBoRVREVTFRamROWWsxM2VXeDFhM1JXWlRBdlRtNUJTMEl2YkRacWJ6Um5UVlZKU0d4UVQwUlRkV05vUTJoWVp6QTNRVTB5VDFkUWVUQkxXR05xYUdscFZVZFBSVlpwYjFRMWRtdDBjMWRZTDBsRVZXWm1UV1JIZVVweFJEUnZWV0ZzVkRSWVMzQmxVR1ZQUVRoQlNEZzNNV1pxTDFKSGR6SkJkVmxqVjBSc2NGQktZa3BuZWsxUU5HVlNZbWN5Ymtwb1ZqaFJVelowWVRWeU0xQlRjVkpoWWxSaGVIWktObEZqVlZGaWNtaHJTazg1VjA0d00xQTVTVzkxVFdRdlNIZGFOV2syYjJkbmJYb3JSM05yVFZCR1NUSk9lVTFPZVZZMGEyWXdaekJNYjJWMVluRlliamxEU20xc1RqbHRLMWhYVGxCNGJURTNURXcyU3pnd1QzbzJMeTlpTUVaNVdYSnhTbnBzVFVsS2NrUnVhMmRvVDFNeVZWTnVTR1pPTW1WdGRERk9NekJIZVZSdWRITlVMMUZoWTBWV1dEaFZOekJvTlc0eE4wVllTbFZoVW5SVVduQmFkV0ppUkZCRFpqQkRhVTlJVEdSSlZqTm9PV2d4TnpCaVRpdDZSR2huYkROUU16VlhOa2hFTWtzMVdYaDBUemd6WkZSYUswbHVVVlo1T1RNMFNWRnVTaXQxVjNSRFZVMDRZVkZqZHpVMGNrVnhSRzQzTVdOUk5EZE9VV3c1V1ZCRE9VSTRTbXBLTUVwSU4xaHZWeXRPVUVST01VdG1VMG81ZVcxSFJWSjJNMVJHTnpaSk1IRjVhak5FWVdWUlVrVTFhbVU1WmtGcEt6ZDJjbGR3UW14RGVtaG1Oa000SzJWd05rbEJLelZyU2xKdGJXdHlSV2RSYUVOeWFtNTNOVWhoU1hRMlltSXpVSHAzVjBFM1FuaFpOa1owVXpGd1lUVnVjak41VVhaTk1WRnVVRTlSYUZCRVowSmtaV1YzT1ZSWlNFWm1XVzV4YzJ3M2RYSjNOMVJ2U0ZVMU16TXlaV2RNVVZGdFJVbHFSMWR1UTNKUlprWTFaelpyYkhZM1pHa3lOR2MxWTJac2JXMW5OU3R2ZGxneE9EQXhUWGNyVmtkb1lrVlhUSFZvUkdSTGJVMU9ZbmhGVGtaMFIyVklXbWszV2psb0wyWmlabUZ5U3pneU1XUm5WRmhzTlRselVYb3lhWGhCZGpkUVNsbERlR2xvWmtaak5IUkJialI2TUdSbFoyTllXQzlwUlZJMWRIcG5TSGxHY0Uxb2NFbDVTaTh6ZUVwMmNVaE1TR2x5WWpJNU1VdE9lRGRrVmpOd05XeDBObGxLVkhBNE5VNHdkMk5sWW1oQ2Rrb3ZXV1JQYUV0MVYySTJha2xEY2sxdUwyRlVVeTlyTWxWNGR6TmhURFp6UVU1dlJqRTBTRWR6VW1SUE1tdGFTVzh3WWxoTGRYcGFaVE5CYm1vcmJGVTViWGcxUzJkVk4yUlFlRlZaUVhrd01Hd3ZUV2RRZVdGYWFUaFFMemN2Wkc1Qk1VMXVhVlpuVDJwSWRqVmhRV2syTDNCbFluUjRVVkJ5VDFWNlVYUlNXa2R6UVhWNVZWbE5kQ3RtUmtWV2FGVnBlVGhuV2tSUE5tODVUQ3REYkRsMFFubzFNMlpIUTBKS1FqazNRMUp4VlUxR09ITkdPRkJDWTFoU2RtVXhlVmxzS3pKaldUTndOMDlETlhjd2FqZ3hTRE01YVdkNVdYcDBRM1JOVHpCaVRIaEVhMkpVTTFsc1NrVnhRbXRFYzFRekwxVlFSbWhUSzBaVWNVWnZMMGxRU0hBekwwTm9NRnBGZWpjckt6UkRTRFpxSzNsQldtWnhXV0p0UTJabWJFWlpkR1JMTlVKV1pEQjJUVWxpVG5kSWVXTmhUMmd5YlZsc1duSlRhVWh2VlRKSWMzcExRVlJWVjJscEwwOUxZamh0UlZaVU5VeFhZMjV1WjJZeFFWTm1kMFl4TVhWS2MyRkRhV3cxSzFoUE1UVkdUWFJ1V1hoRGJqaG9iVUk1VTJGdWJHUmFObXBPY25oWFlVbHBOVlJYWVVSa2FreDRXVTFOUXpWWlJXUndNRTlqZVhsRVNVUldLMlZzTTI5c1NUSkpVWHA0VEhadlRVMUpVa3hWV1U5a1ozSnBLMFpGV0hWYVZsSXZTVlVyZWs4NVFrSkdhamhJZURKYWQyUlVkekJDTUZJM05FaDJaMkZIZERaSmJEVTRVVmt3U1Rab1JXOHhSMFJOTjNsSVpYaFZaRXBtWTJwNVkwRk9lVFozV1c1bWVEWnpVWFJyWWxaRVpVcFhXakJwVlU1TFYxSTRaRXN3Tkd4ak9HcERTbEpuWlVwT1ZtMXRTSG95TlV4VFRVWnhPVGxCY25ZNGJrRnBRbklyT0ZobWFscEhlR0ZIUW5sNU9XZFFaM05NZGl0SVZFTnBObk5tUlc0clFWVXdiMDFoU0cxaUsxcEZObE14WjJOaGFuaGtZMFJYUmxOM1FYWktNbmxoZWpCbFdXTTVjbTQzT0dwd1EwaExZV05oT1RsS2FFOVBjWE41VWtKSkx6SlRNazEzVUhoWU4xZG5VbEpHV1ZKQ2EzSmxTa2RzWlM5R1ZESnBaM0ZKYld0WU9UQXdSbk5rUWxvMVpYVXdSR2gwYmpCMlZETTNhMFZ0TnpaaFRqRjFSRFI2TDBWb04xZEpVazFvUjBOQ05YSkRjMmRXU0hSdGRFVnhjSHBqYmt4b01HVTBlbU51WkVaUk5FUnpPR3RuWTJaTVZXTm1ibFYyZWpWNWVFMTJLek41TlhWWlNIQnhXRzFETW1KM01FOWtMM2RpZGpCclMyMHZaVVJqVFdKdmEzWmtMMVZoTWpONVdERXphMlZaYms1b2VIWldjME5MVmtOU09UWm1iSEI1TDFWUGNWTndTV0ZsT0ZsVVJuRTJNWFpLYlZjNVFXTkdhSFlyZFdaalZqWlBSWEEzTjJKcVkyMU1VbWRyVEZjcmFtVlViVXRYTUZwUVp6RnBlV3RQWjJaaE5uaHdaRFowUTNSS2QxbENkSGx1UjFOdk5qRlJUek15ZVhCaWIwTm1ZMEZKVDBOb2F6SnVMMVpFYjBRNFYybGlUMUp3Y0Zabk4waHVTVmxwTUV4R05rNUdaMjByWkdGTU1XdHJVVXRqVERWdVRHOXlRazlxWkRKRVJITnZhazFrVlVGcUwwRm5RV0l5WWxsTU16QlFORU56TW1kbWJEUXZkMjVaVFdaRmF6ZG5NMlZKVG5wS05EQldhRk0wV0U5aU5tbFdRVmRPVFhoRWRHUmhVRGhRVlZGellrZFJTbFI2Y0hKR1NFNXpXamhZZW1sNWNUQTJhRlIzYnpJck5UQXpWbVZrVFRSdlFVdDJSVWxGWVU0dmJUSnJPVWhrWm1NdlpuVnRhVUZqTTJGdmFrOXRVazlVUzFWS05ESjFObk5IWjBWS1RESktVbVI0ZFdGWU9XSmxXSFpyTmxWNU1qWk5kQ3RST0dseU16RTRWRlpSTUhsd2NVZzNSekp6Y1hNOS5CSUJZRnJ5Nnp1cl9OYTFuMjJKSWR4VEFJUDNwMWp2MXZCU1hFQWtfSnBrSXpDZzhOYjg0eDRYZ1ZXR0FLek9RY2JXUUtpTUxGSDRoU0RfNHVyTGhZQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:28,552 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:52 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:52 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:52 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=79E2E270B4600BFA975979A5E8450786; Path=/; HttpOnly')]
2020-05-27 09:07:28,552 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:28,553 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:28,553 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:28",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090728 AND testcase_id = 17 AND step_id = 25 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:28,591 testcase.py[line: 205] INFO: 测试用例[id=17, name=安全分析]执行成功
2020-05-27 09:07:28,591 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:28,591 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:28", case_exec_history_id="20200527090728" WHERE executed_history_id = 20200527090721 AND testcase_id = 17 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:28,790 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=17]的执行结果
2020-05-27 09:07:29,107 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '7', 'testcase_id': '19', 'author_first_name': 'Testlink', 'id': '20', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:12:43', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-20 09:08:47', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '<div>\n\t{</div>\n<div>\n\t&quot;检查&quot;:&quot;body&quot;,</div>\n<div>\n\t&quot;匹配规则&quot;:&quot;包含成员&quot;,</div>\n<div>\n\t&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;success\\&quot;&quot;}]</div>\n<div>\n\t}</div>\n', 'id': '26', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '7', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '', 'importance': '2', 'full_tc_external_id': 'cq-7', 'testsuite_id': '5', 'name': '盲板管理'}]
2020-05-27 09:07:29,248 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:29,249 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 19, '盲板管理', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-7')
2020-05-27 09:07:29,270 testplan.py[line: 76] INFO: 开始执行测试用例[id=19，name=盲板管理]
2020-05-27 09:07:29,270 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:29,270 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\"success\""}]}
2020-05-27 09:07:29,271 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:29,271 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090729', 19, '盲板管理', 'pan1_of_cq', '长庆项目演示', 26, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\\"success\\""}]}', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:29,282 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:29,282 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:29,282 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:29,282 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:29,283 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:29,283 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:29,283 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:29,283 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:29,284 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:29,547 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:29,548 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-45-fZGnAeMEjqSekWaLISyM9RihgWo70G-passport.51gxc.com" />
            <input type="hidden" name="execution" value="67fb786b-7848-49f5-8a9f-8a469d8a3a0a_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWTI1clNGVXdaMFJOTldaNmRXbERPVFJUVDFkdFp6VkRTR2hDUkhSV1JUSlpNRzh6ZGtoNWF6QjZVVlp0VVdVdlZUbE1PUzg1VjBKcllqWlJhQzk0ZVhabE5VeHVlRkpTUjFKdFR6RnFTbWx6VW10NVRGRklha1ZVTTFReEwxWk9RMnhCYzJOeFNsWnZNa1pEUTJaUFNIWnpNVW96T0dONldtdExPSEZ2YWxWWVIwMVpja1pWZUZsa1lXaEdZa3ByTVc1UFRXSlRXSFJETUVwc2IyaEtaRXRQVGtaTlZIcFNXVk5QWTNad2MwbFlObEpIZWs1VGJrMUZjMlpUYzJKbksyOTNUMDU1VmxGWE4wOUplRWt4U3pCR2MwUXJRelZWVmxCRGFGcEtValZDTXl0YVpWTTBhVkZLUzNFdmVubFVTMEo0Vm5CbGVuQllNMWM0YlhscGFXZFZObGRaYUVwSFJGWkxXREJYUVRrM2FsRlZSVmd2V0ZKVFFVVjVZelpzTjNoRWQyd3JUVUY1T1dkUGEzSnhVa2MxY2l0a1NqVkNiams1TlhjdmMySkNVR294VG5WNGNYa3hVblk1VjBob1FsWm1lRWQ0UlZwU2QwaHRaRXc1VjNKYU0zcExZVWcxUVdzMllUWk1ZVzlCSzA5M2RURXdRa1IyYURaRlpVTjBNVTVNUTNSeVoxWTFlSFp2Y1RaMmRtdHJSelp5ZFdaNFpXbERlakpDVFhWRk5TdHJlRGhpVlhCMGVHZG1jek5xYUdaNlNXcFRjbEJqWkVKYWIzVXdkRzlsYlRGS1NWQlZhRlpPZWxadlpERm1Xa3BtYlRWdFRHaEtlVTVzYXlzMFkwWTNSMHhDUW01c1MxVm9VR3BvWkVaYU1YaDVjMk0zYVdsVE5WTndlVTlCTjBsVlVEWjFSeXRQVjNnM1EySkJRVVV2VVc1WmQxbFJORmsxUTNCWlRFZEpXbFp4YjIweVJYTkJNRFZTZVVGM1EzZGpZWGw2TmpNNWJDOURNakJwYTBkTFpYUTBORlIyYm5sa1JsVlhTV054VWpOMmNFZERhR04xTHpOSkt6RnlTbnBCUms1d1MwUTNLMkpXVDFFMllWRnFTblIwV0VaaFJIWmxWRXR0WTFaRVlsbFlVVlF5ZVdZNVNtUjJaVEp0WlRJemNXOXplV2xGV1hjNWFHSjJWRXh4YTJoeWFuSXJWemxPVFdsclJ6Rk9PV3hLVEVSdlVXSjRaRXBhU21SQ1psRkVVR0o0U0ZoTVpIbGxjbVJNVFUweE5GZE1kM0JQZEU1elpXazNSSGRHZFhSRE5GWlhlVU5PTkdwSVZGZFFiM1lyZEUxT0sySTFNMjVLWjFFMVVqRkhaMk0xTDFWdmNWWXhSM1IyTmtWclV6TnBWMXBaTTI1RlF6WlJZMFpIY2s5Qk5XSk9ORWwxYVhkSmMzb3paVkppUmpJM2VTdHlUVUZ4UkdkV2VqUnBUMUZCV1ZSUWIwSnNORUpuVFhGRmVsY3dUVk5RUTFwMGFpdHVVR1prSzJzeE1WZEpTVFI0U214MWFHZHVTbEpTZVhZMlUxUTVLMmxqWW5JNE9FZHdlR1pZT0RoVGRXUlBSa05YZEcwNFltWm5lbUZ1VkVKV1ZuQllZVVZwY2xwcFdEQldTbnBRUlVoQmJFWTVLM2szU0VaUVkxaGtUalJDVm1SQlprY3pWVk5UZG1OWWJrbHdNR3BKYjNwR05tbFBWRzE0YVdvdlJVaHdPR04wZVdwS2FVbDJhWFkyVWtKallWcGhWVkZRWVZCSFFUYzJkVVJ2TlZaTmVUQlNkamR4UVhBMGJXNXFTRUp2U25WMmVFMUJWa1pwTmxsTGIzZE5ibFpCY0VJNGVXSmxibXhCUldaVFoyVlVWME0yVlhGR1VEVTFOazlaZFVOc1kyMVRkRzQyYldjMFYzUkVhM3BQTm1ZNWVHTnRjMFZ2Y1RrdloxUkNkVEZJZDBsTFZucExVVTB5ZFVwM2JtSmxSV1UzZUhZek4ybFVUV3hDVWxsa2JYRlFWRlpUU0RGVldtdGFZU3RuVEdNeGNVOXNSREpJYW1wRlYwZzVhbU5ITkZwbmJFYzVXUzlYTWpBMlRHUnhjemhUYmpaRU1VRm5iak5vTHpsdVRGTXdWVXhvUkZKSWVHWXZWMGRKWjBrMWVFRlBWelJIUTNsUGMxZDVTa3BSZVRRMWNYRkRRWFZYVW5SUlJHRmtVak5hTVdaTmN6aFBNbUZ2WlhOS1JUWnBaMllyZW5CUWRVc3hlWGQxYUdsa09HbGFiMlI2VWpKNVdGTm5hSE52TWpCQ1EzUXdTV3czYzNnME9VWjJibFJFT0hGVlNtaHhTbXcyTTNNM1YyOURiMWxhU0dkcmVYcDFUMFptU1daVGFUWnlURFV5YkRaUFVVcGFlbU0zUjBKc1ExaE9WRmQzVlVSQ01sQlJZM2R3Um1GdU5GbHRkMlJFWVVoS1JsSkdjMmswZURKQ1JEVXphbEoxVDAxbVRXaDRVWFYyTVRCVldUWnljMXBrT1ZkVVNuQkRiRk5pTDJsQ2RWRXZaMlZrYTIxR1lXNW9aVEkyTnl0dlNWWkhUVzVuV1VjemVWbEphM2tyZGxoelprcFZkV1l4S3l0VFltWmpZWFV4TjNkS09VNXRlVFJpU0U4MlVGZGpTamRQYTFOaVNEbEplVlpWWXpaUVNHSTViSGhMTTJOWWEzQTFhMWR0ZUVOQ1JWWXllbGxyTmpGS05XTnVaSE5zVGtJNVNFOUZUVFFyWm14UFpIUllXWEV6TjA4MmRuRlZSV2czUzJOcFZtZFNXa3RGU0ZNMVZqaDFPREZJVm1seVlYbHBSbXB1SzIxT1ZVSjJiMVJrYjNGTGVqbENXRXRTVDJwb1VteHJVMDAwVm1KYVNuZDVMeTh4Vkc1T1JVMUJPSGRKTVhkdmRFMW1jakEzZDNwRGFqZEpSV05FYUdsclYydFVaRlEwWjJsdlEzRjNielZTVG5wUlRFOVJTR3BJTjB0VFNIVkxiRWg2ZFRkQllsVkNTR2hRYldSNWJXZ3JRazlLZDJRM1VEUk1iV3hTZFhaSlNqSjJVakZwVmt4c1owcFNVak56ZG5kWk1saEZVMDg1Y1ZaR2RGaFJVMkZhUm1oclZETmlRVlJTTTI0Mk1HTk1ObWR1ZW1sVWNFdHRka05pYTJSNVkxazBjREZZVEVONFExb3dkRE55Vlc1WE9YcEtNRWRKTm05UGNsWjFTRnBNVFZWTVRVaEpXamhUWVRWUVowZFFSR3hXUkc1SVF6VkJRamc0UjFSR1JuaEVjRVUwUTJ0U2EyeFVVbmQ0U1dGSVZuUlJibTV0TDBKdmRYTTNhalZ4TjNOaFFqZDRhMk52UkVGUFRIY3hPVFprZW1kblVGRkJZWFI2VjNadk56QlZTMW93YzJaUlkwaFlVRGRqY0hkd01HMXBSVWROV0RFelkxTjZjV2x6U1hKbkwzWm9Na2hIUlROWVZrVjVObXhtVEV0R1ZqbEVjMVYxSzJndmNYTnplRVI1ZVhock9VazRialZTTmxOU2JHSm5RMHRwVjJGd1VHbDZOelppYlM5eWQwNXhWVnB0YXpGMWFXVXhRakJzV1RoaVNYbFdNSGw2WmxoaVIzcGpiMnBuZDBjMVoySjVibVJRYVRKMGJEUjRiM2QxZHpkM1ptUkJVR1ZNYmxneFMxWmFkelY0V0ZBNVdFMUdiVFYzVVM4NVpHOXBibFkzZGpGVE5VZHpWMlp4VDNOMllXRXJSMUE1VG1WNWQxcDJNR05oZDIxa1EwUmpLMmN3TW5oS2EyY3laMmhJTDI5T2JDOUZXQzlDTlV3cldYVlRjVVpFTXk5Uk9UaE1iR3RYZW5Nd01VSXlSRnBYY1hZeFUxbDZTbTVpZFV4SmJWWTFaREZzWjNCclJIZDJkVFJRTVdka2VISkhMMXB6UWtSSFVVUTFlalZvVFVWd1JYTmhUMFJPUjFBeE5XUjZPV1lyV25OdlRtMXpjMHR4Y1ZSSlVXbzRTVWxsSzJZNE9URkdlSGxLUlRoWVpEQTBNMEV2UzFwU2Myd3Jja3BzZFRORWFrZE1URkpLZVRkMFNtUmhhVzEyZFZOV1pXbENZVFIxUTFnMFkzSjJUbVpFVVRWVVVXVm9WM2N6VEUxdE9FTTVPSEIzU1ZBeFZVZFpWMEZGTUZKNlVXaGxjM0JLYlVwU1NuWnlXR2hDUjB4TFpHVkdNR0ZWV2k5c1QyOURaR3RyVUVWVE9EWlBNR3hQVWk5b1NtbHFNRmd2TlZWMU4yUjZWRkJIVDNCRGMxZEhWbWczWm1sRlNEZFZiekpTZGxKdFVsaFFjVzB5V0N0elltSmlhSFpuZG5sVWVWZDJOVE0xZHpaRVozUmFWME1yVEZaTmNVTkhkVzByY1dKbFpteDBTVEp5Ulc5ckx6ZDVRa3h5VUdWRlNHVnZXRmRHYUV0WlMwcEdkMDl3WTJZdmVUWklSbko2UVc5RlNEVk9Wa1IxWmsxYVoybEZXVXRaZGlzMVJERnNhVXN2SzBsdWNIRjBRVUp2VjNWd1RFUm9lWG94ZWxkR1V5dG5PV2t6UzJWblJHVkhXblpSTjFjMGMwbEJkV1JXU2tGa1lscHBZbk5XU25VNFlraFBTRWQ1V2xWTVVtbHBZMGxKVWxkNlRTOHhURk15WkU1UVVXSlZkMFV4UTB4bFlVMWlaM0JNUVhGTGQwVlZhMHBNWmpOYVVEaDFUVXhvWjJ0WWVqZGliR1ZHV1c1ek5EaERNRGs0ZWtoT1NsaHZhbTVGYW1oNVIxUnNNWE5ZTW1GaVZFRXZhblJKT0dZd2VXeENXbnBXWVhKYVVrNVllRTQxUlRseFZXa3lRbkZaU1hVdlNtVnpWR1YxUmxacWJGaEZhRGxJVW0xUUwzaE9Xalk1VTNaVlptcE9WRTgzT1VWQlF6QlFkVEJEWmtSYWNFSklRVEZ3V25Cc00yOWhLM2wxUVROdEwwVnhiV0ZUVWsxU00weERibGhCZG1Jek1qQmpieXROZEZKeVpsQjVWM1p3YkhrMU5YWlVSSE5vZFhwcEsxUmpZMGhOY0RaeFl5OXBlbGM0VUdsUFNYRk9aa3N4ZVdkUmQwcERVWEJLU2xwaWNIUmphbEZrWm1ka2JUQkZaVEUwUzJGelIwUTNla0ZtTWxSVVRqZDFhRGgxWWtwSmVYbDNRM0pEU20xNVdHVjJUazVLZFU1RE16TjVWRFJwWm5WeFMxaEhZWGd6UlVSMFZuaHdTRWxxYVd0dlNVWTBWRU5FTTJ0dmVXZHVNRU41Y1VwMFVGcGlTelJ0ZEdGV2RVWnRXblp6ZUhKbE9EWjZUVGh6TWxKVWVGcG9RbkZ6T1dkd01VRmxPWEEyUkVKbFMwWmtPR1YzVVVOVVltWjBhRXBMZEhCM1drdFhRbkZFUWxkMVFUQk5TMlZyUW1kc1RubHpVbGRxTVVKak5qVXdaMGRXTVhWd1QwZEplSFppUm1OVVZtaFJLMlp2U0V0d2RYWXliSEJyVkM5UmNIbHdlR0ZSUlZwR1p6TjRjMk5uSzBoMGNGazFaM0ZWYkdSTFprdHNhbkJzYzBSNE9FOXpiR0pDTHpOdFRFd3ZaRmxXUmtVOS5nM0JZNVRpZFpQazB5dVN4R3VmWWRfRWhBenFHb0RjWEpRY1M0Snc0VXpCd2dCRWJCM29SLUM2N196QnhtRjRrcl95SGRlUlpKOFp5YzFPQ0dDa0FBQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:29,548 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:53 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:53 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:53 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=130D74974E2EB52C89D77FCDA7940D1E; Path=/; HttpOnly')]
2020-05-27 09:07:29,549 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:29,549 unittesttestcase.py[line: 46] INFO: 要匹配的模式（成员）为："success"
2020-05-27 09:07:29,551 testcase.py[line: 158] ERROR: 步骤[1]执行出错,停止执行用例[id=19, name=盲板管理]
2020-05-27 09:07:29,551 testcase.py[line: 165] INFO: 正在更新步骤执行结果
2020-05-27 09:07:29,551 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\project\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 74, in test_interface_of_urlencode    self.assert_result(body)  File E:\project\interface_project_for_dev\unittesttestcase.py, line 47, in assert_result    self.assertIn (member, response_to_check,msg=item[消息])KeyError: 消息", protocol_method="get", runtime="2020-05-27 09:07:29",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="{'检查': 'body', '条件': [{'模式': ''success''}], '匹配规则': '包含成员'}" WHERE executed_history_id = 20200527090729 AND testcase_id = 19 AND step_id = 26 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00' 
2020-05-27 09:07:29,585 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:29,585 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2020-05-27 09:07:29", case_exec_history_id="20200527090729" WHERE executed_history_id = 20200527090721 AND testcase_id = 19 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:29,793 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=19]的执行结果
2020-05-27 09:07:30,214 testplan.py[line: 46] INFO: 获取测试用例信息 [{'updater_id': '1', 'author_last_name': 'Administrator', 'node_order': '1', 'testcase_id': '6', 'author_first_name': 'Testlink', 'id': '7', 'estimated_exec_duration': '', 'author_login': 'admin', 'execution_type': '1', 'updater_last_name': 'Administrator', 'modification_ts': '2020-05-20 09:06:57', 'layout': '1', 'active': '1', 'creation_ts': '2020-05-15 08:13:20', 'version': '1', 'status': '1', 'steps': [{'active': '1', 'execution_type': '1', 'step_number': '1', 'expected_results': '', 'id': '8', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n'}], 'tc_external_id': '1', 'updater_login': 'admin', 'is_open': '1', 'preconditions': '', 'author_id': '1', 'updater_first_name': 'Testlink', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'importance': '2', 'full_tc_external_id': 'cq-1', 'testsuite_id': '5', 'name': '作业配置'}]
2020-05-27 09:07:30,358 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:07:30,358 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090721', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-27 09:07:30,382 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-27 09:07:30,383 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:07:30,383 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:07:30,383 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:07:30,383 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527090730', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:07:30,425 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:07:30,425 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:07:30,426 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:30,426 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:30,427 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:07:30,427 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:07:30,428 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:07:30,428 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:07:30,722 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:07:30,723 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-46-dSXFlApdom5JMabZcWx2WpfcazhtQR-passport.51gxc.com" />
            <input type="hidden" name="execution" value="e2aa155d-81da-486d-ad95-a1e1674d39e9_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUlVSQlFWcFlaR1ExV2psSmVGcHBhM1ZGVkUxSmIwUkZXa2RtVUZaeGQxcFZNVFJXT0V4WVVtVlRXaTlLVEhwSlJXSlpkRkY1VVRsMFRUZE1TbnBtU1VsdU1GWkhNMnQxY0VSU1RuZERVbGhJTlVWS0x6TnBVQ3RaU1VSTVEzRlFVV2hXYUdWSmIwMUJaeko1YkdseFZUQXJZVWw0TkhGMGQxUnFWa1ZPVVN0U1JqRjZPVTFEYm1JelJXVjFhVmgxT1RsdEsybzVNVms0YUVoYVRrdHdTemxXUldGVVpXUjNNbGRIYWtOU05IUnBORkpHZUM5alEyWjFVbWhGYzJzNGRVMU5Wek0zU1ZoVGVUZ3dSR3BxZVRoSFl6Sm1aRFF3Wm13MWRUZFhWSFJQTVhKUEsyMUVjRFppU2xwdWNXMUhhelJVUkZGQ05UTTVjbFZuYTJoU2NXbDFVbU5EZUhWUlVqWmxSRTVLY0ZwUGJUQjJRVm8yWTJ0WlZXZE1VMWRpTWxoVWQzZGpUVUpZTW1weFVIVlphVEZ3YkZwTVVrVmFTazVyU2pjdmVUazNTWEZKUlRsSGFGRTRlR2hhWTBSM1QxaE5Sa3hJTW14SVNVSnBaMFJVYTFNM2RVVmlSM0pMWkdKeFJtVnhZM0pMZURsbFNXNWtVR1ozUmtGaGRXUnpNR280Tm14NGJ5OVdVMnR5YmxkdVZVTmtlVVpTVWpGb2NFeE1ZbWhaUkRaU1FraHVURkpxZDFsQ2VYbEZXazFzWkUxd01EWlhUVmxCWldoTmNuWjZhblZRZEhkbGRUVlRWWEo2TVcwMmVYWTBlRXBoY2pCSE5tUk5Rall5TUc1NmIwODFSR2tyTW5ReFJXMVJSRzFwV0dzeFpHdElla3BoY1daSlJsQnZXR1pVYUdVM1MwNDRWVGxSTVdkclVHTm1lazVzU2s5YVZrTm9NakJvZGxNdkwzSjRkVUZKWmxBNFNEaE5lR3hwVjJZNVkyUlBaVkp2ZFdoa2IyaHdkV0ppUmtWcGNFcGtRWFJMUzA4MlRIUkxkUzlhVlVRNFNuSnpNVTVQYm5vd2FXVm5RelZsY2pZeVJsSmFiRGRHWm1OaFozWmhZM2RaU0dWa01VaDVTVlZaVkZSNGFuSkdUalZ2YVdNM2JXNTFWM05aYVdOUFpFVmFUMkpKYWpOSk1UWnRhRlJrZVVkamNVaFhRbkZtYUVodWVVdFlNVEU0VUhKT2QyZzFPV28yS3pVM09XbDFhRUYxU0c5SFVTdG5jR0ZJYlVZM01sbFRPSFJYT1U5MFRuRXpaSFJ5TUdkWFVWUjFSbGxNU2xOdlZraG9SbVpEUkRaTGVWaEhlVWxQT1hOemNFWTFXRUV6VWs1MVlrTlpaVVZEYmpoeFZ6aHVUMlJyTm5kM2NqVTFTR2RoU0VodGMxaFVTbmhGVlVkNlltVnBkVWhTVG1Wb1MzTlFla1ppYm5CNmNGbFVVa3h4V2tSek1qWTNORGRMZHl0UWEzcHNNalpwYm1ObWQzTjJkR0pyYVVGV1luZFRlazh5WkhOTlJtTjJPSGhWU21WUE1VbEVPR1Z5TVZWUFNYSk1hbTFsWjBKdFRFcFdjV1JDT0ZocGRWVnVOak51TVdaRFZXNXRkak5CZFdNMVRrRklSRVJHWkhsaFRXbEpabVp3VTBwellYbExUMFZ0YTJWNFUzWnphV05MT1doNVR6VTROMUZwZEVkRlZWUlpTRmQ0YUUxWFNrc3habmxMT1Vwd1VGaG5iR0k0V1ZZMFRETTJUa2hzVEdwWE5IaGpibkpUU1hFeFNGTXJkWEprYlN0aVlqbE5PVXhSZEdWVVRta3lNSFJyVEVKQk5tSnVNRlUzVVRoVFJUTjNNMnRaYjBwS2RqZFVPRVpxTUVwVk1tWjBOSEZVTW5jM1NEa3djMDFOUWl0SVNqSlpVRlpwTHk5NlNsZFRjVWRMYjFwaE0wdzRkV3hCWTJwS1MweFRlblpUWWpScWRVOHlZV05LWjBSNlQyVjZVMnRKT0VGSVJtRlZZak0yY0ZWR1VtcHpNQ3NyVWpGSlkzbHVVMUJTZVVoRGQycFBaVGt4VG5SdU1GVjNRelEzVDFSd2MxTklPR1ZVZFdWak9VdHFVMlZsZVRCYWJ6VkhiMHhDTVZGNFN5dERMMjloVFdoVFNXNXNXRzg1Umtwa05HNTNkWFZJUTBGVEx6ZEtkM0ZDVVZScGRERTFVRGRDYkVaWFdVUnJlbll2ZG04MlZ6RjRTVWxNUkRGWVVqTkxOV3hEVjFWQlZXdzVkV29yY2xwdFEyWXJVVlZaWjJjd01VRm1PVmxEV0hodFFXaEVSalF5U1dWaVZubHRXQzh6UVVOWWEwUnNhSEJ5UnpORVFUaE5VMDVSTkV4d1JuTjRUMGRoU1hZdmJHZHpVbkZZV1ZSVVdtTXlhM1J4YUZoSWVuVm9VVThyWjBkQk1sRnViRVpUTlZWd04wdHFMM296VTFkd2FGTmhhWGhUWkZKeFZrOUVSVnBsWjFFeVMxRTBNa1poWlhkSWNWWmtUMVU1VmsxUWRGQjVMMWcwYmxwYVYyTmFRVzU1Tkc5dVNTOUZTMUJHYmtKbFVHSlNTMk42TnpSS2VYQjVRMkZhV2tKcVlrNWtjRTFRU1c1SlRUWjBjbVpJUm5kQ2JrVnFhVlZNWXpkMGIzVklNVmQ2Y1RVemNteElSamRDYURSeVJWRXhXaXR4V0VSWVVHNWlVazlqZG5KMWVHRkxaMk0yZHpaRFVGZDNSbEYxV2k5d2NsZDBNRzF0WmpaelFUSmtWbWQwVG1ac1dGUlBjVlkxYTA5UGR5OURjblpyYTBNMU1GRm5SM1JOYzBkdk4wTlBWV3haZUdFNWNrWnRWME5JUjI5R1NIUkhWMmgwVUc1MWVFWjNRV3RKUVVndlJVVlljMjlZY1hKWFdHRTRaVFY0YWpCaVdFZGhXSFYwVkRkWE5UUk9kWHBpWjJGcVVrTXJlbUZrVW5kaWEyaEtZemRsSzNJMFIxbHhhSFYxUWxObmNtcFlZMWRwZFdGR05qbDJORFJEV2tOcGQyZ3lZbVF3ZHpKUFJ6RkVaRVp0VW1oWVNERkVjbVpQU1dnMFJYRXhVMjVVUm5JMFpYQllNREo0TTBKT2NrRTJiRmQzUldGYWVUbDBURXhVYXpaTWNHaDRkRFIwVml0dlFYZG9hazkxZVZnNE5EWlBNbUZqTkhSMlNVNTZOMnREYjJaTlpHOVpObkJTV25wTlNFcEJibmxRYXk5UVoxVnVXRlJCU1VOUVVFOWlkV3NyV1VOWGNVRXpUelpuT1U5VVVYWXJLMVEzVDBWTFR6Wk9WSE0zVDNGRlp6TlBLemN2Tm1GcFZXTlFSRkZFV1U0ME1XSXlhSEl5Ymxsd2NGSjFSQzlKWVdZelJFdENZamNyWVZsTFFuZzFPRVkzWlVsR056SlRNMjVDTTJGTVFuaFBkRlJ1YVhKSWNWUnJhME0zZVZwNFVqZEVTSGQ2T1ZacFpsWkxjR1lyU2s5VVUwTnpTblpVVmxSQ1lXYzFkelptU2pCbVRVVmpRbkpCTkVjMVJqVk5aWEp5YUd0U1ZHZDJSM2RKVjJwME5rMVNORFJVTkV4VmNFNXROa3QzZUVSSmJFMUdNa3BUYW5KR01XTnpjeXN4ZFRsMk9YZDBRbkV2VmpkdVR6ZFpTVlJRVnpSWVprUjROMVZrTDBoWFVVZHFMMEppU3pKdVEwZDBkVVJoWTI5TVZHMVlVMVJ2U1ZSME1IQldaaXR2VUVVMGVIY3JWWGRyWjNsMlp6UlZSakIzWkV4Wk9XdExLMlIxUkZobFEyNVNUVWh0UVZwT1JISXJSbXRJWVhwMFJXVjVRa1phTlRkRWIxRmlXbFJxUlVodmExWjZMMXA0WkVVNU4zbEVhbVozY1dwRk1XMXNTM0JEVjNCVUwzQlJNRkU0U2twNU9GZDJVQzlKVlZKVmVqVnBNRkU1YTNZNWFGY3hRbmhTYlhOWlFsQnJiM2N3T0hjek4yUkNWaXRsZEN0dk1YSnpibHB2VjB4RFoyWTBNSGxHY0hwWFQzQXZZMjAyYkdwMGRDdHhjR3BpVmxaSWFHVllLMXB5VUV0RFVIZzViRTVsYjJsSGNEWkpkVEJMUVVkUVVsRmhhMUJ0ZDNGcVYwRjJka05wVmpoMmRGWmFhMGw1V2s1dk5VcDBObFpWYUVsM05FZFJOalpxWmtWU1JsVnROQ3RqVW1GVlpqWjJjbk4wVFhoNWJtZFlkamQxWVZWb1NHWnlOMWhOWlVRNGFXZHZaVFZOWWtKSFIyZEhObE0yUjNwc2EwNUZWR2cxYTNwUk1FSnRValprTW1NNE1qbENlVTlYV0Zab1kwUmpVMlI0VG5OS05XUjZZWEJPUzIxR2NISk9XWGNyY2tjNGQyUmtOR0pEZWpRNVlqWXlhRlZuTDJrclNrNXpWWE51WldOdWRWcHllbUkzVURKNlZrVjBVRXhoVmtOVWNHdE9iRTlSYUhCM1MzTlJTMHhGWWtoNFVqVklNM2RUY2pGTmJFdHFNbFE1VHl0WllUUkdOSFJwY0hWcFltSTRlbWh3TVZaUVMwRk5WSEo0UzA1YVZFZFJVR2hGV2tKeVdsSjNURWR5ZFZKUU9YZHlhVTgyVDFCNlRscHpiMmsyY2twSVltNHJSbkJTVmtGc016VlFUakp0VkZONVVIQXJSbkIyWldSbVJsWjFOM1J4ZW5KbU5rUmFjamswWTJvd00ySjBPVXhIZG14alIwa3dVSFpKT1ZaS1YwWjVVazVGTVcxWVVYTmxWSFJPUm5sdk9VZGFSR042UzJKdWJHdGxSemRyVlUxVFZWaFJZMUpYT0ZoWlpVbFhZa0pMWTFsclRtUnNVM2x4Tm1FMVZWSlJWRWwzYkhka2RuUmpRMDV5TVZKdmJsYzJRVlZqV0d0UE5qSnVibXAxV0VRd1MwRXhNVmRIV0U1YVYzRnJlU3RVWkd0SFpXcFdNbHBrWm5SUU1uaHJSWHBSV1VRM1QxUnRlbU12YldSQ1pXbGpXRlE0VkZVM1dIVlVSalpMUVhaYVZpOXpkMHB3WlVjMU5uSjZUMFZ3WWpoek5rcHdWMk5XYm1SWE5uTTFWVE5pT0VSR2FVbFBhbWh3TmtOVGRrdHNVRWhOZFZKRU1XNVFlR0V4WTNKUWMzZ3paazlPV0RGc1dqaHFTMlZGVEc5TFJtbDJRVFpwWmxsR1NsUldVRlZyTldOcFF6ZHRlRGxIVmk5WFZFZzVSa0Z2TkcxUlVITjNaR1JRYXpNMFVrWlJOMkptTWs5cFRtSklSMVYzY0V4cFdrdDNNbmM1TDFWdGNHWm9lR1JCU2tvelNEaHhjMjF5ZFVwQloydzVTR3hRVlZaQ2RWUmFVRnB5T1RoRWVYQkNka2R6VkVwM1MwSmxObUpUUlRKclFqazRPRkZ6SzBwM1pYRkJObE5TWTNoeGFESklkWEF6Y25KdlJrOHlaMkl3WW5ad2NTOUJTRkZGWkN0cGRGQnZSMVpKWmt3M01tbExOVUpYYld0MVpGUlpSMUEwVVdReGF6WklPWEJYZVN0b05qQkpWV2hVYW1OWFZFTTNaelo0VkcxaFN6UjZkekJ4TldjOS5QaW1PVFBjaXVmQi1URmdtMVB4QURwajRLRWdHQ1lGY3hPbGF5VDR6LUZHQk01MEtQc0IxSV83c1k0bGxkTkhzd1I4cDl4c21Ec0FtSmNoQ013QnBIZw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:07:30,723 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:08:54 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:08:54 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:08:54 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=FDAB2F98E5541F2F4A858FF6D514A2A3; Path=/; HttpOnly')]
2020-05-27 09:07:30,724 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:07:30,724 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:07:30,724 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:07:30",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527090730 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:30,756 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-27 09:07:30,756 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:07:30,757 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:07:30", case_exec_history_id="20200527090730" WHERE executed_history_id = 20200527090721 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:07:30,978 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-27 09:07:31,141 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-27 09:07:31,141 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-27 09:07:31,142 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-27 09:07:31,142 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200527090721',)
2020-05-27 09:07:31,143 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-27 09:07:31,144 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200527090721')
2020-05-27 09:07:31,145 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-27 09:07:31,145 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200527090721')
2020-05-27 09:07:31,146 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-27 09:07:31,146 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200527090721')
2020-05-27 09:07:31,147 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-27 09:07:31,147 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200527090721')
2020-05-27 09:07:31,148 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-27 09:07:31,148 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527090721',)
2020-05-27 09:07:31,149 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-27 09:07:31,150 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527090721')
2020-05-27 09:07:31,151 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-27 09:07:31,153 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-27 09:07:31,153 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527090721',)
2020-05-27 09:07:31,154 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-27 09:07:31,154 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527090721')
2020-05-27 09:07:31,156 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=9]步骤运行结果
2020-05-27 09:07:31,156 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 9, '20200527090724')
2020-05-27 09:07:31,157 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=11]步骤运行结果
2020-05-27 09:07:31,158 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 11, '20200527090725')
2020-05-27 09:07:31,159 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=13]步骤运行结果
2020-05-27 09:07:31,159 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 13, '20200527090726')
2020-05-27 09:07:31,161 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=15]步骤运行结果
2020-05-27 09:07:31,161 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 15, '20200527090727')
2020-05-27 09:07:31,163 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=17]步骤运行结果
2020-05-27 09:07:31,163 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 17, '20200527090728')
2020-05-27 09:07:31,165 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=19]步骤运行结果
2020-05-27 09:07:31,165 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 19, '20200527090729')
2020-05-27 09:07:31,167 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-27 09:07:31,167 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200527090730')
2020-05-27 09:07:31,169 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-27 09:07:31,169 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200527090721.html
2020-05-27 09:07:31,169 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-27 09:07:31,172 main.py[line: 235] INFO: 生成测试报告成功
2020-05-27 09:07:31,258 main.py[line: 242] INFO: E:\\project\\report\\test_report20200527090721.html
2020-05-27 09:07:31,258 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-27 09:07:31,354 main.py[line: 249] INFO: 发送邮件成功
2020-05-27 09:13:36,467 global_var.py[line: 22] INFO: 当前运行环境：测试环境
2020-05-27 09:13:36,468 global_var.py[line: 23] INFO: 正在初始化数据库[名称：SAOFUDB1]对象
2020-05-27 09:13:36,485 global_var.py[line: 30] INFO: 正在初始化数据库[名称：TESTDB]对象
2020-05-27 09:13:36,487 global_var.py[line: 33] INFO: 正在获取testlink
2020-05-27 09:13:38,017 main.py[line: 58] INFO: 正在创建测试用例报告报表
2020-05-27 09:13:38,017 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS testcase_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testsuit varchar(40),                                          testplan varchar(40),                                          project varchar(40),                                          runresult varchar(20),                                          runtime datetime,                                          case_exec_history_id varchar(50),                                           tc_external_id varchar(50))
2020-05-27 09:13:38,018 main.py[line: 61] INFO: 正在创建测试步骤报告报表
2020-05-27 09:13:38,018 mydb.py[line: 44] INFO: query：CREATE TABLE IF NOT EXISTS case_step_report_tb                                         (id INT NOT NULL PRIMARY KEY AUTO_INCREMENT,                                          executed_history_id varchar(50) NOT NULL,                                          testcase_id int NOT NULL,                                          testcase_name varchar(40) NOT NULL,                                          testplan varchar(40) NOT NULL,                                          project varchar(40) NOT NULL,                                          step_id int,                                          step_num int NOT NULL,                                          step_action varchar(1000),                                           expected_results varchar(1000),                                          runresult varchar(10),                                          reason varchar(2000),                                          protocol_method varchar(40) ,                                          protocol varchar(40),                                          host varchar(40),                                          port int,                                          runtime datetime)
2020-05-27 09:13:38,019 main.py[line: 64] INFO: 正在读取运行模式配置
2020-05-27 09:13:38,020 main.py[line: 71] INFO: 正在获取运行全局初始化用例……
2020-05-27 09:13:38,020 main.py[line: 90] INFO: 按项目运行测试
2020-05-27 09:13:38,020 main.py[line: 94] INFO: 运行所有项目
2020-05-27 09:13:38,301 global_function.py[line: 81] INFO: 正在读取测项目[project：长庆项目演示]的协议，host，端口配置...
2020-05-27 09:13:38,301 global_function.py[line: 84] INFO: 成功读取配置信息：{"protocol":"http","host":"192.168.6.27","port":6030}
2020-05-27 09:13:38,301 global_function.py[line: 98] INFO: 正在构建项目的http对象
2020-05-27 09:13:38,301 main.py[line: 112] INFO: 正在执行测试项目[id：3, project：长庆项目演示]
2020-05-27 09:13:38,301 testproject.py[line: 23] INFO: 正在获取测试项目[id：3, name：长庆项目演示]对应对应的测试计划名称列表
2020-05-27 09:13:38,443 testproject.py[line: 28] INFO: 成功获取项目测试计划名称列表[list=['pan1_of_cq']]
2020-05-27 09:13:38,586 testproject.py[line: 38] INFO: 正在执行项目测试计划[project：长庆项目演示，testplan：pan1_of_cq]
2020-05-27 09:13:38,586 testplan.py[line: 29] INFO: 正在获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例
2020-05-27 09:13:38,725 testplan.py[line: 35] INFO: 成功获取测试计划[project=长庆项目演示，name=pan1_of_cq]的测试用例id：dict_keys(['9', '15', '19', '17', '6', '11', '13'])
2020-05-27 09:13:38,877 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '2', 'status': '1', 'steps': [{'id': '21', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '9', 'modification_ts': '2020-05-20 09:09:50', 'node_order': '2', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-2', 'name': '作业预约', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '10', 'creation_ts': '2020-05-20 09:06:43', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:39,015 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:39,015 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 9, '作业预约', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-2')
2020-05-27 09:13:39,066 testplan.py[line: 76] INFO: 开始执行测试用例[id=9，name=作业预约]
2020-05-27 09:13:39,067 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:39,067 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:39,068 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:39,068 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091339', 9, '作业预约', 'pan1_of_cq', '长庆项目演示', 21, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:39,099 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:39,099 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:39,100 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:39,100 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:39,100 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:39,101 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:39,101 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:39,102 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:39,479 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:39,482 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-47-r2uVyahxtuxLSTO9K7rZ3IsYc4L1Ff-passport.51gxc.com" />
            <input type="hidden" name="execution" value="d65050b3-8048-4eb9-aa67-23928e2ecdae_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuZFhjeFZVczVTMjl2UWxaR1VrWmpZMlJ6TTIxMWFIZFZXVFEyYzJ4WFRta3ZlbFlyTldocFNISjJVV3MzUkd4dFdVZHRPRWxCTDBWak1uRTVMMU13YVZScGNVeFFaSE0yVTFCekwyZHlNRE4wUVVaTFlVdDRialYzZWtsR2FUUktVREo1YlhwWU5XVnpla2x4YmtKNmRXNHhRVlJ5UzBsaVYxVkxkMUlyVlM5MlNYZE9RVFpKYWxSdmVXVjFhelkxYVhWbVRIaDZUVWxQWkdGSGNtZHpXR2x2Y1RKNE9HZDRLekZ6TUc4eFVFZzBUVUZPZEdSTmRrcG5NbEoxT1dkeWRUQXhUV3B1TXpSWlJtTkpjMFI2WW5KME9UbGtUMVE1WW5FdmVFTlhkMUZaWm1oVlNWUndPWEpoWkVSdVRYaDRVSE5uT1hNd2NtaFBabUlyTkdVdlZuUXhTRzUwYjFscFVrRXpURVJQVFZST1ExY3hjSFZrUkRCa1ZtMDVZMWxaU21KelMzRTViVEJuWm5kMk5sRnlTV2xCSzJ0Nkt6WkNWMjlvWmxaME0wSnlha1poVDBrMVMzYzNTWFJDZWt4TmJWUm9lSEZIZEZkNmRHVTFXRmszWWt4UWVFZFZjVGs1ZWpOR2VpOTJjMFp1VFhobWNqUXJZMGcyWTBzcksyRmhhbGxKTDFodWVDdE5VbGhhVlhaUUswdDJia1F5VDA4MFlqSXJWekpOYzNGNVJGVTRXa2sxYWtOM01pOU5hVUpqWjJ0bVlXWlRlSEJwY1VReVNETlNhWHBXU1VNNWRqRklURTk0U3k5NGRGUkNVbkJLZG5wcVVHdGtkM1kzVjBKdFVrVktZMGhuY25CNk5VTkpaR05JZHpoemEwNVVTbkpzWldkd1RIRlJVREpVUzBFek9HVlFkbU5PVURaTVdGcHFUM0E1T1ZGRVpqTkVTbXhzVm5WS1MyVXJORXBxYkhFelVXTnRjVkZxTmxselF6ZHlTRUo0TlV4VVIyeDJMMEpUWjFodFJYcExTemh4V0RGelJVZFBPSEJrWjNkbEx6TjJWVXBJV0c1VVdXczJTa1J6Tkc1cVVFWlJTVFJuVFhBeWNVVjNWMWRUTjNod00zQnRZM1J2Umt4aGIxZFZkbTUxTWtsTFRrOVphMFozVVV4TFZFbzVUV1pKYWk4NGFqTlJNMmxpU2xjeGRHUkhRemhXU21kNVFtZFVWbFJEZDJObFREVkZPVUpVWkVOb1NUUkJSRmcyTjNJdlMxUjJVbUpVUnpFdksyWmhhSE5KVFV4R1FYWXZRMlJhY2taUlIzWkZZWHBQWm1jdlIwTndRVzU0Y1ZKMVQwbExXRWN6VERCbE9ISXJRV2cwYlVOWFNXZG1OSEZ1VW1sTU0yOWxjRVpTZVVKdEswazVWbk56T1RkUlNqTkxla3BMUTBwcVRHMXFjRWhYZFZGUmMzZDViMFkyU0cxamNqSnZSMVpyUm1KbWJUY3plVWhSWW5wc2NsWldPVUZHVDB0TlRFSjFSbU5HWVU5S2JGcFhSVkprVUdSelRFNVdUVEp2U1UxalluRmtZalE1V21GTk56SjFUbWxCU2tkcFowWkVNV1l2WlZsMVRsb3lTRWxOTm0xaGEzVnNZMDlLVlcxUGNrVlpTamx0UW5odk9FVnBUMU5JWm5nNGNrUkJSbFZFTW5OMGFsVjNhRGxCUWxOTFdHSk9XV3hzZDB0cGR6WXlha1V6VlV3cllWVkxaVXRzT1U1blRGSlJOV2R5VkVaVVEwVlNZWGRFV25CbWNEVkNjblppTVRZM2QxcFRSbkpSTDJKVU9FdFRXR1ZIVTFwRGVDdEhTSFpCTDJaaFFVRTJla1JvTlc1dFJVTlFUa0l6VWpSUlFrZExNRGRGU1UxME1GRjBhamg2YjFKd1pWQklRWE4zV25JMWREUm9kME5TTURreVptNWpkWGg0WjBwWVQxVXJSazlJYzFscWJuQjFVMU0zWmtKM1QwMVZNbWN6YjNkUlJ6ZFNhWEJqWkdoVE1VRjBNMGhaUzIxdk5reFRNVlJDUjJOSFNuZENVWE40UmxoUVEwUnBXV2RwTjJaVU0yTklOVmMzYzJaQ2JHZHFVRlEyY20xRlYyWnJSVU5pVFc1TWRrUjBXV1Y0WkdSWlJUQjBPV2x0Y2psSGJXbFFhakpYY21GcmNVZFdaamhXUTA0dldGWkZjbVZNZW1KWFVFczBWMEpoYVRWS2IxaHFaRmt2Wm5vMWJYWlNObGx0UjNndlJWSkdSVXB0WmxOS2NESnNVR1I1YjNSWFdUQmhiV1ZwUzBWMFNGZGhjVFU1UVRSRVVWQm9ZM0Y0Wm14RFJVNHlha1ZvY25FeGJqSXplU3MwZFRnNFJXcFZUbmgwVUdaNE1WVk9NV3RxVW14S1VHTnZPSEJxTTFaUU4wTkpaelF5WW5sNFp6TnVMMGxRZWpVNU1HbHFTVmwzYkVveFlVaGhkV1pIY0haTGFFcHZPVU5GTXpKd1ZqUnpaVzlXYm1KdGRreE1jakp1YWxSaGRYbGpXVWx3WkVoS2VqRnNjemgyYjBWQ01VZFpLMnRHYmxGalIySnJWR3RrWVU1cFFWcFRTMWxsTW01Vk5EQnBZalZPUkZGUGJqTkdRakpvY2xOWk0wUnhURWhSZUd4a1ZXSnVObHBIUjA5VWFWSm1RMkUzZFRCQ1JqUmhZMDlOT1RaNFpuVXhheXRqUW5BMU0yWndOVzlJV1haclpYZFRVRk01VkdVMlN6RTRiM0ZzWVRWVVFrcDNPSGxFUm5jeFpGbFVRemczVGxOT05Gb3hiemsyT0UxdGJteElkQzlvUjFBcmMxbFJRMEZJUlRoRGJ6VjNSbU5JZW1OWWNUY3JNRGszVVhwSlpEQnRRM2c0U205WlMzZ3JZa295YWxZdk5YWmtiMjFrTTB4TGNGQnZhVlEwTUVocFUxVktMMmhRT1VoVFZXZDROazVpY1U5Q1UxbHJXWHBQY0N0SWJDc3JXR3BIY1ROek9YcHZLMmRzVG1sYVNUbEdjVVZNZVVVclprNW1PRmxWYkVkdU9VUTBjR2QxYnpORWNYa3JXSGRSYjJ0NVNHZFRVMGxuWlV4RVpISkNSMVJhT1hwTmRqUk1WSFpKTTFGMmNGVnZhbTVZWVhrdlMxSkpaRTVHWkRGU05IUnpNVTlCUjA0dmQxVlJkbGN4YjNKNlZqZFFkVkl2YkhkSmRGZ3dZMUZRV2tsSVdqTTRkamRNVTJGelMxSnRkR1ZxWlVKNFpYZFdTRE5VUVdwMVVreDFVemhxU0ZoVE5HRlZkVkoyZVhoYVJuTlNWbEZTZEd4eVdHdGlVMGRSVEZJeGJsSnJha3haWW1WUlpWZG1VRUkzYldKYVIwTnBhWGRqZWtFMVNtZFJSaTlZTjBVMFUzVnNZMjk1U0U5eFZUVkpjV3czVjA1bU5TOUlUbEJEZVZkd00yMTNibTlvTUdwWWFFZFRVa3d2T0dOaFNpdDVZbTFEV1ZjMFVtaGpWVTR6Y0hSYU16VlZaRzR5YzNGUFIwbEpWRmhvUW5NeVpXbGhSbXh6V2pGUE1YTlBZVFpSWjBKRFRGbGlhRE0wUW5sRFpWZGtkVUpMVlhjclZVRXJWVlJxWkZKM0x6VnRXbnBIVkRsdWFFOUtka1JJVFhkVFVVNXhhVTFKY21OcE1ISklLMU50YVRGNk5IaHpSWE5zUkZOYUwySjBlbnBNVW05TlNWcG9XSFp6VFZodGMzQnRVRzU1VmtGRlpuWTBhazFKYkZwcE9VWnpkQ3RQWmtwWFpsaDBXbFZyZHpkWVZDdENTRXRTUmxsU016TXdWRWRzYVZoMFNYQm5RUzlyY0daUmVXTlVUR2RLZUdWdU0zYzFVa3AyTlZoclIyOVBUV00xUmpNeE5sZFlTMlZFU2xoQlpHMUhVREIxVGxwek1sSkxZbmRKYTJoSVZsQndXVEIxVFRoSmJtY3pWalZTYzNkSVowcEZjMnhTVTFaWU0wMUpTblJHYlhGblZtUllWMEpLYTJadFdVOVpNR3hXY0c1RVlVOXBlbk5YUm10Nkt6ZzJNMk0xWVhaV2IweDNURE5sTjFSaVVHRlROMkoxTnpRdk4zcE9SM05qUjBOVVVFaDVSMjFCUTA1dFdHcG5RVkJZTlM5blFrTldaWGxhT1V0NVRuUlVNM1JZUWt4dFlUbDNVWFpwVkdaMGRXNTFhMmRJUzNwNFl6ZHdXVmRXYjNaSEsycEpLMDVVVFcwMFNqTnRValZCVFdZcmFtSjNXV0pTVVVocU5XOURWVUZsUkVkYVIyTlpOMGQ1Y25wUk1FRkNTbTlTVTJ4Q1lrcEtiMUpTVUZsVlJtTjFNR0ZNYkUwMmFtSjNVVGx6YzNJNU5qVmFPR0pTV0hsRVJYUXdRMVYyTlhOcUt6aHhUVXBhVUhSTVFVcFNTbGxRYmpaSFdsazVkaXROVVdkWk15OXdja2hCV0N0NVRFcE5WME0yZEV3cmQwZEVXRTlLYTI0d2EwdDVhREJDTUhBd2EyODNWM2wwWW01V1ZsUnFhMHg0YW5selQwWm5kRzQ0YmpkSk5XSnpRamQxZEVoNGJVVmpiams1VlZJNFdWRndUbkUzWkdSRVlXdzFUMmxaVkcxVlRTOVdSVWxoVEZsd1RFcHRUSGxNYjNScVltTXhWSFpyZVRsbk5YWnJiVVFyTUVKdFNHOXlUVUppY1dsQ2FXOVBVRkF5YVRJcksxazFjVXcwU0cxS2VqQk9jSFJTWldOQ2VrdzNkV0ZCYzJGeVdXMU1OMjFSVFROdldFUjRiVXhaTDFoWU0yaEtObEJ1YUhwVVJFd3JTV1JtUW1sM2RuSnRWRlpXY2tOaFYyMUxNRTAwUlZoblFqaElVRGwyUmpnNU0wRTVUM1ZRVm5SSFJFazNkM2x6VkhGVmVGbHlXVkl3VGtocFRWUmpUMU15VlNzeWJESnVjRkZVT1VaeFFrMW5iMWx6U2xOWWNEbEJSMGN3U1ZWMU9YTjNkbGRKY0ZZeFdIRkpUMGcyWkZGcFQwTjBlRzltUlVWWVpsTnJlV2RoVDNwQ2VEVXlZVlJYUVdsU2FFaEZkM1k1WVZKNVkzZFNjbUZ1VVdZMllWVkpOMjh3VVdGRGNHdGxjM0Z6VFUwclJUaDJiakIxVUVsbGNHZzNMMVkzUlhwRlMwbHlOVEl2ZVZSelFtSjNVVEZuUm5VeFNXMXdNVFJaZUdOQldtMWlibEJvV1c1MVFVbGtTR3BQTW1JdmNETmlja1JTYTJWV01HZzFNekYxUWxaWU1qa3JWalZDZHpkcGMyMVJha0ZyTlRCc1VVaG9lamR2Y2pSRU9UQmpNVVZFTlhodmMyZ3djMVJDY2xSUlZWRmxhM05NUlVKR1ZuUktWMjQyVG5KUE5FSnVhVXhVTjB4aVJEQnFTRzVJTlVORVNtb3laRlo2WTFJMGJVUndTakZwZEUxQ1FWUlpjbHBLTTFweGFUbHRibTk0ZWpZdk1VUnBiazVSZUVkbVJ6WlZZbXh6VG05SmNXZGtjbTB5Um1WME4xWXJiRE5WU1V0M1UzaFdla1phZFN0a1UxTTJObWhMY0hSUVFuSXpVbVp5WVZSUlVtNXBjVUZVWkUwOS5zNWR5M2tGdzY4LXBCV3ZrUFcyR0ZlOHhHaTNZRENXMnF2RFFxZExaSFlQcGNpbExhWEYtZHZmUkNfZ1lxeTBMbGtQVVdKbHloS29fZjlSQWtvSnY3dw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:39,483 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:03 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:03 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:03 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=FD655474C5B0E7EDA94CB7D98A94F43D; Path=/; HttpOnly')]
2020-05-27 09:13:39,483 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:39,483 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:39,484 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:39",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091339 AND testcase_id = 9 AND step_id = 21 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:39,513 testcase.py[line: 205] INFO: 测试用例[id=9, name=作业预约]执行成功
2020-05-27 09:13:39,513 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:39,513 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:39", case_exec_history_id="20200527091339" WHERE executed_history_id = 20200527091336 AND testcase_id = 9 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:39,663 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=9]的执行结果
2020-05-27 09:13:39,967 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '5', 'status': '1', 'steps': [{'id': '24', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '15', 'modification_ts': '2020-05-20 09:10:10', 'node_order': '5', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-5', 'name': '作业统计', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '16', 'creation_ts': '2020-05-20 09:08:17', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:40,105 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:40,105 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 15, '作业统计', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-5')
2020-05-27 09:13:40,291 testplan.py[line: 76] INFO: 开始执行测试用例[id=15，name=作业统计]
2020-05-27 09:13:40,291 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:40,292 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:40,292 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:40,293 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091340', 15, '作业统计', 'pan1_of_cq', '长庆项目演示', 24, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:40,330 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:40,331 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:40,331 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:40,332 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:40,332 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:40,333 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:40,333 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:40,334 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:40,617 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:40,617 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-48-LetZToFKmFSSbGcYVue7XemcIb1TYg-passport.51gxc.com" />
            <input type="hidden" name="execution" value="a34a4e3f-8f56-4ac7-9159-2edc8cd8b0b6_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuUlVFNVFtNVpiR1pxTUhnNFMwbFlSVzFWTWs5c1ZrbElWWE5NY0ZaSVF6QlpMMGxRTW5kRE5VeEpXbE5VUTIwM1p6a3libWR2Tm1oR2N6YzJRM1YxU2pKS1FTOXRTVkozYm1GTWJHdEdNbU5QYkZOTlYwUTFkRnB3TDBOdGJVTllPR2d3VjBOdk1DOWFObTUwV0ZwVllVMVZWVFJTUlRCTlJqRktlVWMwY1RBeU16Qk5NRTlGSzFWU1dHMDFaMlZ3VDFkNFEwSldPVWR4WkdKdFVUUklRVXR3TjFVMmFHVkxjbWhJZUdSUmJEUldRMVZGTlRGNVkyMDNWMUJZVVdFMGMwZ3pRMUF2YWtnclZpOXZaVWd3ZUdkTWNERkVWaXRLVWl0MloyVkNLMmhaWTFwT1ZuUnZZMGh6VEc4eGJGWkZLMjlIY3paaFJVSnVhVnBOVVhCVlVWRTJRbkpRZFdoNGEyRjRla1pTYzA5TlkyUldPR2wzT1VrdlZ6RkJTWHBqUlc4MEwzQTJiRzFPWVhoMlFsWmFlVFY0V1dwUmFEVTRWWGRvZUc1UVduTjZlV1pCVlVGR2NVRlJiM2RNYlZKVGRsQkdaMWg1UVVNdlMwd3hWSFpQY2s5dWVGQlVWMU5FYUVaaldsRkRjbU5OZEVvMVNVOVNSRmRtWkhaeGJEZGlXVWt5ZFN0VWFuTmlaVk5aVW5kRVZFdGlOVXA1VTJoV2NVRlhlbUozTVNzdlpVUnFkMGQ0Y1ZsYVZHMTRSMWx5ZFU0MUsxbEtSWEpqYTNWc1VtUXdZMlZhUkZKdVEwMXBaREIxTDI5MFZrWmtkVlowWTJwRFJISTNkVXBsYURoT2NHVndRV1Y2YW1wbmRUWlBVMUpuTVdoRGRETnhOWGQxVDBab1oxVktlbWhoTjNkSUt6WXliMHRvVUVaNVIwcFZZbVpUYlhwVWNWSTBibUpTZERadWRteElWWEJaYjA1QmMwZHBSVGx4U0haTloyVXpiM0ZyVm1kdFRrbFhUemhJUjI5akwwbDRkM0JJTjFGWWJXeGpNVFZzZFdFMGFVUnZZalZqTVRKaE1HNWxTbXN5TVV4SlMzcHFZa3M1ZFZOYU4wRjZhVEI2VDBKbkszcFpZV28zZEdWSlpFc3dNVXBpY0U0MVNpOTZlWFJ1WWxaUE1IQkxSeXRUUVRGWVZuWmxNV296ZWxjMFRsWm5kSGRMYXpSWWIwNUtkREpIYjNKRWNYVjZjSEExVTNob00zUnJibUZNTUhWVlNVWm9lV1ZtVjBaWGRuUjBVMlV3Y21wVmVYTlJVakpqVVhkdWIwcDNUVGhXZVcxa01YRXpUV0prVEVNMWNrUnZOR2xJYm01NE4zQlZPQzl4YUVsamRrZE9jVWxPTUdGTVRtWlNURmRzU2xWVFZIRlRiV1l6UmpJMFluRkVZWGhKUTBJMFNYWm5LMFZOY0V0aFl6VTNiV0Y2VjNaS2FrUjBTMnBTZWxWdGRtSXZWbWsyVmxJMk9HbHZOR1JXVjBGU1ozVkZPV0U1VEdWM2JVWTJURGRWYUU1TU1XdEdPVEE1VFVKeWJXSnhNbTh6VFdGRlIweHlNRU5yTDNsdFlpOXhiRkZuZEVkUlVuWk1RM0oxY1hwTEwyVXhZM2g0WkRSUVVHUXZTbVp5V2xKVVlVcEVhaTg1YTFKSWJtaFRlWE0zY2pZcllrWTNUWFl5U0hvNFdWQkthRWhhZVd0TGFDdEpiMkphYXpSVllqbE5NalV5WXpsalVVb3laRGxyVTNReGJFTlhXbEpCWjB0aGFVMUJha0p2TUhVME1HUlhlR1ZXU1VReGRXMTBXbUp2YVhCVlpUQjBSekp2VXpKU1pIZDZOMlZ0Y0ZZclJFdEVia014TTNrM1oxVm1hbWw0WlhSMmVFbEVVRkIyU0drdmVERnFXbFUyYW14WldEQXdRbnBGY0dSQmQxVkhhbTFEV0hKaFZreHpjMmQwU2tjMlVHNW9UMjh3ZDJGSWMwRk5UbEI2Ykd4WWVWVm9jMWRyVEhacVJUazBXV3czZUVzcllrWXpRMlZGYlZKRVJreFlOWEo0Y1hCd05ucGlUMDFKWkU5RWNWWkliRTVPT0VaVlkyZFZiRTB4VmpjclV6aFRkemx1ZUd4UldYbERVVEJoWTJsQ2NFVldXR1ZZWmxJMVExaE1lbGRPWldwQ05rUjFVVEJNSzFkeVNHWlFUVlZ6U21wRlVVa3hhQ3ROZVVGTGFEWlNXblZFWWxNclZVcHBUVkpSY3pCMlQxSlJaMHRIWkdFeWJpOUNlbEF6T1RseWVVWTFZbGxTUkdsU05YcHVWbVJsU2tabFVqTkRhUzlYUTFORWNXUm1lbFJQUjNWdFZ6WkNiREZtUW5CWVlrODRWbk42Uld4WGNHZEdabmcwU210dGNFdzBkMXBWV1hNeFVHNHlaMlZTVDAxVlMyMHJaRXAwU0VwSVZtOUtZbkJFVTNjeFdWRmpNMFJxYlVWR1QyOUdWSGhGZG1sdloxVlNTRUkwYURWMFltMUVSbVJ3TnpNeFpISXJTbkZrTm5KM0swZFFTVFV6T0ZoU09VZE1VbXhrVFVOdk5rTTRhMnAxZUV0VWREQTVjbUUyWkRob2FHY3dNVXN6YWk5TFdVODNNbEZVTjNsV2FTOWxZbmxRU0hwd1MxUTJZMmR5ZWxKaVoxZFphMDV5VDA4MU1IWXpaM3BMZW05TVRsQkhkM1J2VTFoUk9HVmtjbTlMWkVONmVFMXFWVXBDVlRkV2Ntd3habFphTVM5dVYyNVpiazlIU0hGSFVHSkllazlZUWpaVU1uYzVkRGRhVWpsM00wd3pVMmN4Wm1GUk5YbFFNRTF2UkVwQlpIRnRNemxoWjFFcmFqSkVOaTlIV201alRtUnliME5xTlhkV01FdzVjM2h6U0daQ2FrdEdXRGxCSzFoT1NHMWhUbEpSYTFCMllrVlRRVzlHTDNsMVpWVlBabWx1U201eE9VVldVQ3RKY20xWE9GSlFVMmRZVFZBeVVTOHJUbk5yYVRsNFJYbFpZa1ZCYzBrdk1qTkZTVzUzUWxWNloyUkdkRVpPVFRCaWEwOVJNVm93ZWs5YVYyRnVjMFZhTnpoQlowcHdhbUkyYldFeGRWTTBZMmRYVDBWUk5rRkhLMVl3UjJwbFNuZzJjVzlJZG5SUmFqSlNlazlSZWtkMEswRk9UbXgyYmtoQmQzUjNXSGREU1hOUVlrWlFkVE5rVlhSbWNXdEdkSGR0VDFZNEwyVnZURTlFVG5kdE1GQjVZa3BDVnlzNVNuVnViMnBTTUZKeFIyazFMM1V4Wkdnd1lWVkJjRTl3WkU0MlVtNU1ObkphYWtKVWVtNUVaWGRRYTI5SlFYbHpMMkZJZUZOelJuRnBNM2t3WVZaSlRVMHZOelpxYVVoTFRsRnVOM0ZVVjNkdFNHSkVTMVZ0ZWxwQ1NubExjSFJVT1RjNWRqZGhjMUZ1TXpoaEwxQTNRalZKYnpKNVNUbEVjU3R6VlhSblNHWnBOM2xNVUZWTE0waFBPSEp2ZVVGQmIxaHBkMVIyY2xaalExcDRWalp5UjA4M2JVUlpRVmRoVTJKVVJsQlNNSEJDYzBrMWRrOTRRWGg1U1hWVVRXWnFSRWswWjJ4SWFIWkhVRTVRYUM5VGNYTXlMeTlOVURWbmVXSnZPVVpJVkhSMk1WQjZiMGRzVEVsVk5FMUlWSEprTUVvd2RXb3JOMVZMS3pKRWVEZFlZMjFuUlhWelQzTm9TVUU1VEdKWFdqTXpNRWRPTDJOQ05IbFZTU3RFWm1Ka1ZUY3ZNemhJWjJWQ01qRmxXVmxtZG01RVQyc3JjbkpLUVVGMU0zVXhSM1pqUzFkcU1ucFpabEJXZGtwa1Z6bEdWM0IxYTNsUk5DOU5OR3N3TTJoTFdXTjJkMlJRUzFSWVR6ZEVUMDFCWW5ONWFsTTBWWGtyVURSNWJXVXJjVVJXYVc1c1JrcDVZMnBwWjJ4RlZ6WTVSVkZZZVVabWFFMHhRUzlYYlVacFVXWlZUVkpJTUhjeVdVdFBjelpsV2xWUFIxVmxSMWRFZEZCaFJsb3pWR2xQYTNoa1dsZFpXbEZsYjJKRVVqUlNWWEV2ZGxGaVZUQktiMHR4VTNVdlMwRTRRWGQ0V1U5M1pqbDBUbkF3WTJSaWVFVmFTWGQ1ZWpFM2NrUkZhazlPUzNNdlNtdFBUek5qYURFMlNITktZWEo1UTAxU1VUSnNMM05sYWpORGQwaGhjbFkyTWpWT1kwRk5TV0pTZHpWeFkySjBURGsyVUZRMmFFVkdlbmxuYUhwTlNtWllWRWcxVGxoMlZWcFVUbkpUUm01YVFUTk5NV2hQZW5ONk5EbEVOMWhUWm1aak4wWkpRbVIwZUdoWlN6WTJSWHBuVG5KWlZFRmlUSFpXVDBGR1ZVNXBaVGRIVFdkWFluWmhUREpOWkVoTlVtcFBNMWRVTjJwbmJVaHRaaXRvUVN0RlNXNVdWV3h1Y210S2FYbEJOa1pFYkVkSFRYVkVhVXMxVHpaUGJUazJkMDlOVEV4alJUWTVkUzlZVmxsSFFWQnFaRFpuVVc1dFptb3ZSVll6VnpCeFdHWlRPQzlpTm5GU2MyVnliQ3RqY25sdU9IbDRUVUlyVlZob2MyTmFaMWRTVDJKMldXTjRjbE5WTVV3eGJtWkdOR1l3ZFdoM2NXWjZRVUprWTNkNFdXSTBPVXRCUnpsMVpXSlJiVUZuYlVsM1RuWktTa2hRZWtGdlIwdHRXVFprYkRaUWIxQktLMGxXYVVrclEyTk1ZbTAzUWxsUFFVbHVTRFZYTWpOa1NVOUJNVmRHVGs0clp6TlBSV2t4VFUwMU5tZG1ZVnBOU2xwa1YzaFFlVlZzVVcxc1RqbGFUbkYwZVZZclNETlhZVkptV0hCcmFWWjVVMDUzTkRkbVNGbDJZMWhwWVd0cVptWndRekJJYW5Zd2JVNTBjbVZISzJ4aE1FUjNPRkJCVVdoUmJHUnhVMGd4V1hsS1p5dFBVbXg0VGpoRlZHOVdhbEZwZVhRemVFeHlXbkpXUzI4MVVreFBhMXB4YTFWTVEyTlFUVlJQY1Vkck5UWnhTSGhYWW1KalkybE1ibWs1TjBKMFkwWjZaVU5RVFc5b1JIRnVTSE41TVZJMU1XdEJUSEJyU2twbVNrWmpWa3gxZUVOQ01HMVdXV3BuTDJsd2NEWnlkV2t5ZG1Kb2NsUlNWVTlsU0dGdVNXUkVaMnRuYm5Sd1kwUklSbXA2THpsMVZEQkZZVkpKT0ZBeFpqWmFTekEzZW14NlltY3dlVXg1YTJrMVNETnNPV2swTUZRME5uTXpXa2hDTUdOc05TdEZlRGg2WTBKQlYyUldabUl5VTFsTlZFMHJZMDVKZWxwblJHSmpUWHBYU25sV01uSkNibXRSSzNkWWNEQXdUMWtyWVhkUlptSmFRMWhZTjJ0SldXcEdaVWN6YzFwS2FHNURTVlZtT1dweGQxTkxiRFJYWmxWMmNYbENRM05hY1ROSE9VTnJlbUpvWkhnMWNFVm1NakZMUjJobVRYVjFhelZoWjFsSE1tSkJURlJNUzNFck5reENSRkJNZFRadUsweFVTRkZ6YkZWM1ZEQmhUUzk1Y0VFOS53d3VmSXVGNDlwWkQwMFlDd2ZHQmNTZFVZYmhBR0I3LUhidkdSM05oYlZQWTd4Z3BiTVZCLS1WTHZpcS10TWZYd1pkZ2VodjJCVlN3SjV3UjI3OXlwQQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:40,618 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:04 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:04 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:04 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=2D6FA50CB8A782F33A0E2C4EF8742BD3; Path=/; HttpOnly')]
2020-05-27 09:13:40,618 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:40,619 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:40,619 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:40",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091340 AND testcase_id = 15 AND step_id = 24 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:40,666 testcase.py[line: 205] INFO: 测试用例[id=15, name=作业统计]执行成功
2020-05-27 09:13:40,666 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:40,667 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:40", case_exec_history_id="20200527091340" WHERE executed_history_id = 20200527091336 AND testcase_id = 15 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:40,869 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=15]的执行结果
2020-05-27 09:13:41,492 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '7', 'status': '1', 'steps': [{'id': '26', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '<div>\n\t{</div>\n<div>\n\t&quot;检查&quot;:&quot;body&quot;,</div>\n<div>\n\t&quot;匹配规则&quot;:&quot;包含成员&quot;,</div>\n<div>\n\t&quot;条件&quot;:[{&quot;模式&quot;:&quot;\\&quot;success\\&quot;&quot;}]</div>\n<div>\n\t}</div>\n', 'active': '1', 'execution_type': '1'}], 'testcase_id': '19', 'modification_ts': '2020-05-20 09:12:43', 'node_order': '7', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-7', 'name': '盲板管理', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '20', 'creation_ts': '2020-05-20 09:08:47', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:41,658 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:41,658 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 19, '盲板管理', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-7')
2020-05-27 09:13:41,717 testplan.py[line: 76] INFO: 开始执行测试用例[id=19，name=盲板管理]
2020-05-27 09:13:41,718 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:41,718 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\"success\""}]}
2020-05-27 09:13:41,719 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:41,719 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091341', 19, '盲板管理', 'pan1_of_cq', '长庆项目演示', 26, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '{"检查":"body","匹配规则":"包含成员","条件":[{"模式":"\\"success\\""}]}', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:41,749 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:41,749 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:41,750 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:41,750 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:41,751 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:41,751 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:41,752 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:41,752 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:41,753 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:42,187 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:42,188 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-49-VkNIr6LZgDT2ZfghicTSYQnDaiqaDJ-passport.51gxc.com" />
            <input type="hidden" name="execution" value="6ebe15cf-e6a5-4314-9fe9-52450f10f2e0_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuVEROS1NWWXliWFV3ZDAxNk4yc3phR05qYXk5WlVESTRNMHR3THpWU2NTdExkVXhVYVZBeVFXTkdkSFIyYVRJeU5tUk5XVFJMTDBsTVJqVTJTbTlXUWxsT2VIRkRVekkyTVVSVmVWUmhOWFZWZVVoSWQwNDBOMU5DZW1ob2FFdE1iRGhVTjNJMldXWXhkamRzV1U5bWQweGtRakZ3TkRsTU0zVnRVREV2TkdkU2JVdFJWblpuWTNGNE0za3JVRTFrTTJNdlYwUnFaWFpYWW5OMVpsZGxTazk1YjBGYWFuYzNjVEJ1YlhOd2FTdDViRnBpVG1ORmR6aG9UVnBxT1hkUFVVaHlUWFpFY0ZWSmFuRlVhQ3RqWmxKSVpGSm9ZM2xVY1hnNFRTOTVka0pvTTBaTk1tOUtVRU5JYTBZelZWZENZazFQVDBoVmVtWTFjazlLU21GcGNHUnRRMXB6ZDJ0UWFtUTNXVGhhVEhreVdWVk1jVlIyUVRnMlREUmpZbFpNTlRaeFlqQnllVFJ2YUdaak4zbDNlRGRwTmxBMlEzSkNjblZFUjAxUmNuQmhkVmRXZVZwTWRXaHNOMjAwZEU5bFZFb3JWbTAzY3pCWFpreG1kazVNUlc5eFNVWkJNMXBYWlRoUVpuZDNiREJ5Vm14NFkzTk1kbEZtWmpacmIwOWtLemxsVTA1SUsxaHFRelF4T1RjNWNsWlZNVkF3ZDJzeU5sRkdSMlpoTVZWSU9IQlVUV05WUVU0eEszcHFNalZGTlZjck5ua3lkR2sxY2taa1VHTkpUMnRqU0ZGdmIwaDNOM1JHWkZNM2VIQlNZVEpRSzBscE9HUk5RbTAwZUVzNFlubHZSMmxWWTNNd2FsazVlQzlWTXpoRldHWnJkbUpVUm1SdmVUTkRSaTl3Vlc5eWVGUXJVbGhrV1M5b1pVcE5WVlJPU1ZGRlEwUlJOWFozYTJaNk5rTktlSFU0V1ZwR2VXNDBiVlZOT1dGU2NuRjNTeTlaVG5GalUyMXdNVFJMV20xU00yZHlWRnBpTVdkVlZXUlNhRk5xVURaaWRETnRTa01yVTJwQk5XWnZTbFJaUW5waVIzUm9NbFp1VDFKQ01VMHlVREJqVmtkTlMyaG9Ra2hVV0hoU1kyOVFNM0pEVW05bEwyRktkMDVpUTFwNlpHcFBWVXhwTkRKcFFsTTFaMEZRTWtkM2VUSnBSMXBEVjBOdVVuaFlPVUZxZWpka2RFWk9XbEZIY1V4VlRWZEJkbGx2UkdFeU0xZFRWV2cyTTFOb2RGVnlkMlkzUkdGaFVraDBNelYyTkN0aVNHWjZkbTF6YldkQkwycHNlRkl5UVRkT1NITnBMMHB0YmpsNFZtWlpTbWh3YlVoUVJXRTNUMlJ0YmtOUlpHaFdVa1V4WVUxTVFsRmpaRVJNVTA1ak1GVk9MMEZ3U3k5SFoxcE1NVWxFY2t0RmVFZzVabmRyZG1SSGFtTkdhMjQ0UlVNM09XNXhaMjlSY1ZWRk9ETm1jemxTU0ZkMVJIVmtTbTgyVlRkaVJpdGlNVTFxVG1OVE5WZE5NMGgwVDFWb1JsWnpUV1pOYVZneGQzZ3hVSE56UVM5UVdsazBhekJQTW5VME1XWTBUV3M0VFhka1VqTk5iV2M1VWpCUGFtVmFjRE56Vm1kQlpsbHBZMDVNTldsdlZtcEZVa04xV0hNM2RGSk9kbmN4VERKSWVUZE5ZelZVS3prMU1HTlBVelJCYVVNeE9XaEdLM1ZtZWpobVdVNUZNU3RoTlZOVGJEUjZVMGRpVG5rM2VrZDJabXRxWldSSk1GY3diWGRNTVZScFJscGxha1pIYmxKd1VYVkNVV1JuTDFoSVlsUjRiSGxIWlZkUGVEQm1iMW95TkZORlIwUm5WRnBhUzNWelJVMXpUQ3RqZUc1V1dXOVJOek50YXpkVU1VTlNZVmhVV25WT2VFbEZZVE5TUzI0MlNYQnlWakY0YkROQk56RjNiM0JGZUVweVpWbFFhRUU0WVhWd2FrVXhOVEZLVG01WllYTnRXVXRKTkhaTk5EaE9UV00xYWtKNU1tOUlaRGQ1Ymxkblkwb3lNRWhRU0VoTGFITndXVE13UTNwelVXdFRXWGx1U3pOemRuSjZUMWRSYUU5WlVFUXpaMmg1WmpadU1tTkhPV2hOUTBRclVUZzVjVTFEV1djM09HUlJVM2RUTlVGWlYwbElOVlUyU0drNVZuTjVaMmxxTDNGVU1sbFZaWEJxSzI5U1JUWXhabnBIYlN0Q01tVk5TSGhPTkU5M1ZDOTBkRFZoVFZGVWRsRTFTM1FyV0VSTWIzTXlRM3B2Yml0WGVHbzBUbVZoUzI1QlR6UldSRFJoWjBVNU5WaHFTbWxETjFsd04zTlZaMHRJYkRFMlIyVTBUbUZZUjFKWGIxVm1jWGcyVEd4cmNFUkRZamsxVEhCVFltTjFMMkV3ZG1kNlREbHJlVlpRZFdvME5WSTFVRFJTTUVKSlNuWTJNRlJLVlc0eVIxVTViWGwzSzNKVFN6VkJZblZHTWs5alZEWkxLekp6YTFwU1MwOTBNRFZZUkM5RU5YQTBRbTkyUzBRNVdqaDZRbVJxY3k4clUweHZWbFZ6TkhOT1RtSm1ZMnNyWkdoMVYwZFlOV2hMY0N0NlVXTjVSMnhpV1haNGNUZ3phM1UyYzFsWFVtRnlXVk5WYm1rMmJWZEdhVlpJUm1SUlVGRlRRbUV4U2xWM2FGQlpkVmxqTlZKMldHTjNiekUxZFZBeFowSlBiVnBxWkVsTlZqaHRXRzVWWm1reFVIQlljV2R1UlVWSmRsaDBkbEJEYnk5SmNXWlFReXRxUVVoNFVWSXJOVmxhU2tWQloxcEtkREJMZVdFME5FUlRMMnBvY0ZWdlEwMXhjMmxOWnpoMWNqWndPVWhTZERacVJsRmhRVmx3ZVhScUsyUTFla2t5T0habmN5dGtRbmt3TWpCVmJIcEhjazV6T1dvd1YyZDJTVkZ4SzJsbWNtd3dZM2xKYVVKdFJGQm1hRTFWWTFwS00zbEhNMUpMYXpWeWFVTTNOVGhuTDJ3NVF6VmpWRE51YkRrM1NIWllkMlUwUlVJMU1sbHpMMm8zUVUwemRtdFlaazV5Y1cxSGVHeFRNVTR2VXl0aVVUaEdWSGRHUkRsbGQwbHBWbFpUZEVobFJFUkpRMjVLYzBvMWF5OVlNbFl5V2pSelNISndkMVJQVFU4MVNXSnFaVmt3Wm1GQmVEQklZWFpxWlZaRFJpODBZMVZUY0d0SVRuRk5WR3czVFZrelZXcHlaVkJPTHpBM0wzVnpiRzFDUzFnd1REZElTVTFOV0RVNVJFRmhZaTlhV1VsWFJVTkZjMlJHZGtsTVpFSklSbkJ6UTA5bVduZDFVWEZoUzNONGVuVXZRMkpZTTFCMWRYVk5TRnAxUTNKNFNDOWFSbk51WlVKM04yNXZVV040ZDNoWVdrOVpLME13YW10WlZtNDVMM1oyVm1JMVVTOURPRmh0YUhGWFJrUnZUVWgwVlM5MlNWZzRZVnBCUjAweldreGlXVWR5ZGtWWU1FOUVWMmhQVVZORVJrSXZjRGRQVDNweVJITm1kMDFtYlVvM2EwRnpVSHBNYWpSSFkwRnlUVVJ4UVdWNlkzZHpZMnA0UlZwWlMzRmlaM0UzUldscE5uaFVlbWRETkZaVVNFbENVbkI1TVVaeFpIVXdkbU5TTVc0eU1VMTNja2d5VFc1bFRXOURaQzloUW14WmNtUlZiRmN5VVdZeFVHNXlabWhtWWxSS00wODBOVXQyUXk5M01XaHpXa0pDZERSaVlrZzFLM0ZZT1cxM2FEUXpWbEFyTURSc2VtcFRRMGt5T1VSMlEzaGpRblk0Y2xsWWJEVXlja2hTT0cxWFRtTlhTMGhTVkdaa1RYSndlSEI0Unk5NlpDdHJhelpMTTA5cU1HaDBlVEptTVV0NlVXZDBUVTFITDNVeGFUWkhaVVI2ZVRoc1ZIVmxNV2xJU25wdE5FZHNjblJZTUc1NVZGSkxUM1V5Vm01WFYyWkxlbU12TjBnd1MySkdkV0Z5WW1KNU4zTnplVlUxVVZwNE1DODVTbEJ3TjJSclJsUnhSREpDV1V0b2IxZFZOamhoTkZGYWJXMDFiVE5MVTFkT1JtaGpUMUJ0Y1VoME4yUTVlbG9yTVhsb1RVUnNSWFJpVTBWTU5VbHhjMlpTTjNkWWVXSjRjMkVyVjJGM05HdFVaRWhWV1c5WGRISkZUMk5UVmtobk1FbGhVbEVyUm0xQ2FsaERjRTUxWmpjd1VHUk1iemhUZG1obVdsRXhiVXRFTlhwc2FGbDZkeTlQYzFjMk9IRktMMHRzTDFNelMxUmpRbmRhZVZad1RHTnZhM0pHVFcxbGEwcDNUVU5NWVdFMFJtWjBjbGhNYWswdk5GSTBRVXBtVldoWVdsZFJkbEJFYkVsbVZIRnNXVkF3YzNwWlZsbzRlVmh4Tm5sS1JqSlBLM0oxVW04MFlUVjVZamc0ZEVRMVlXRjZVeXM0YW10elNtd3ZiMEV2U0hSd1RDOUlSREYyVVVjclN6UllORTR6WTFGM1pIWkdMMUJUU0V3MGVFeFRiRWRDVGpCaFVHNUtWRU5uYjJOVk1rWjZUalpDYjIxd05tdzRTMU40UVdWeE5Vd3JRa3RKYzFGblIyOHdOek5OTVU5bFl6TXlWblZVYldKTlRIcDJkelEyVUROaFRFcEZiMlpyTjJFek5tdEZkbVZLU1VSSVNuaGtOR1JLTUc0MVVHSXlZbVp4YTBReWRWRmlWamcwYWpkUFluWmtVMGxqTURoR1VIVlhVM1JQVUNzNWREaE1hRTF1ZWxCSlVqUmhNMnBTYXpCRWJub3piREZxWkd0c2MwTTNjR2t6V0ZwcU9GTnhOMU4yT1M5d056WkJZME16YlUwNGVqTlZhRVkyTnl0V2NsZDBNR28yZGt0MlYycEVkRTlKV1ZKUVlWTnlXRlV5VUhSdmFHbzVSWHBRTkVsaVRqSm9WbnBTYm10WmVuTjRhakJvUkRaelpIUkRNSFJ3TkU5aFluZFRWM2RFYm5aRFlqa3lVRWw1TlVKU2MxRldiRFZSYlVOQmEyaGpVM012VFZJNVkzRmhVMFp2VFRsT05IUkhVWHBvT0dwemIxVlpTbWsyYkZwTVpYRjZWamNyUkRFd2NEVlFhM1JOYTBKNlkwRm5ha3QwYkhoV01rcHZha015Y1ZSeVUwRjRPV1pKWVhGNWRXZzJkbTlYUVdONmJucFViWFZyTDFKMWRuUnBjRWRTTlRkbk9YVjZTMlpKV1hCRFVIZE9MMnRtU0VoNlIwUkdhMnh2YzNCbmFIRnRWMU5ZTlc1WVZGSndhRGt6T1RGbmFpdGliR050WVM5WldWTmhjM2RsUjB4bWFtUjNRemxuYldndmF5dEdSVk15TnpKWFN6UXhZbGxpYlhZdlVYbHBiRnB3U21GM2FHRmxVSE01YWpSNWFsQnlVRTFqU1c5cWRVcDZLeXM1V1haVGJqWkxjazlKTjNoTWFHSjJVa3BIU0ZJMWFFeGlVV0ZpY1hWbWVGZDVkV3AxUkVZMFNHZFRXSFpPUlVaUFNGRXdPSGt5Ym5JNFMySjJXbFV6TmswOS5tTDMzT2lLQ1YxMUUxQ0R4Q3MwRWFHQy10OE9QOTVKVTByMmc1bm9nREIzR1lOZ04wWFRKSWZDdnEtVlgtbmZib2xvYlhpZFRkeEdRMVAwQVpvc0RSZw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:42,188 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:06 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:06 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:06 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=581A4D7DB2732EE2C651780DDA5A7C29; Path=/; HttpOnly')]
2020-05-27 09:13:42,188 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:42,189 unittesttestcase.py[line: 46] INFO: 要匹配的模式（成员）为："success"
2020-05-27 09:13:42,191 testcase.py[line: 158] ERROR: 步骤[1]执行出错,停止执行用例[id=19, name=盲板管理]
2020-05-27 09:13:42,191 testcase.py[line: 165] INFO: 正在更新步骤执行结果
2020-05-27 09:13:42,191 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Error",reason="Traceback (most recent call last):  File E:\project\interface_project_for_dev\interface\InterfaceUnittestTestCase.py, line 74, in test_interface_of_urlencode    self.assert_result(body)  File E:\project\interface_project_for_dev\unittesttestcase.py, line 47, in assert_result    self.assertIn (member, response_to_check,msg=item[消息])KeyError: 消息", protocol_method="get", runtime="2020-05-27 09:13:41",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="{'匹配规则': '包含成员', '条件': [{'模式': ''success''}], '检查': 'body'}" WHERE executed_history_id = 20200527091341 AND testcase_id = 19 AND step_id = 26 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00' 
2020-05-27 09:13:42,231 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:42,231 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Error", runtime="2020-05-27 09:13:41", case_exec_history_id="20200527091341" WHERE executed_history_id = 20200527091336 AND testcase_id = 19 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:42,407 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=19]的执行结果
2020-05-27 09:13:42,771 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '6', 'status': '1', 'steps': [{'id': '25', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '17', 'modification_ts': '2020-05-20 09:10:17', 'node_order': '6', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-6', 'name': '安全分析', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '18', 'creation_ts': '2020-05-20 09:08:30', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:42,908 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:42,909 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 17, '安全分析', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-6')
2020-05-27 09:13:42,925 testplan.py[line: 76] INFO: 开始执行测试用例[id=17，name=安全分析]
2020-05-27 09:13:42,925 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:42,925 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:42,925 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:42,926 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091342', 17, '安全分析', 'pan1_of_cq', '长庆项目演示', 25, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:42,938 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:42,938 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:42,938 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:42,938 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:42,939 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:42,939 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:42,939 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:42,939 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:43,289 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:43,290 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-50-o0mz2itaDSbdPal10LzNkixjkBfLQC-passport.51gxc.com" />
            <input type="hidden" name="execution" value="d7a0bbc1-f37e-4abc-8873-0fdf0533ecf7_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuWVdkT1EyeEtkVVo1YnpsalltUTRUR2xtV1daMFdHMVRZMDlrZW1Kbk9WbHlTbFJFYVZGUUsxZG9hbWxWYzI5cU1XSnZkbGRDYkZKSE5sUm1RWHBvVTBKbU1tWTBObWxaUjFab1V6Sm1PQzlCU1ROT05YRnlSVFZ1U2pReE0xSmxXR2xOZUM5NmNrUmxlSEJ5UjFJM0t6VkZVRzVQZEM5RVYxVkhUV0V6TkRNNVRuSkdVbmgxYUVFMU56Z3lVQ3RyWVhZd1JVcDZRaTlGWnpWU1pERm5kR3RaVEhGTWEySnRWeTl1UlZOR04wVlNlalVyYW5FclpUUnpNa2MzVlZORk1sZGlhMWR6UWtwbVRYb3ZkWE53U0daMllrRXpZVWxLYjJoU2FrUlJXbXBIUTFocmNFOW5XQzkzWm5ObFlVOTRUMkl4YVVaT2VuTnJiWEZqZVd0dldUQlJiVlVyUjA0MFp6WXdNSFJWTmtkRGJHazVlWE4zUmpBd0szQmpaVVJyU0V4b09WVlhhME52UkZZeVFsUjFSV0o2Y1ROSlUyaE9aa3BWTWk5cGIzZHZWV05LY25KNFUzRkhZVmhSVTNOR1pqSlNibUZtVFVGU2Rrd3lWRGRLU0cxQmRGSlNTVVprZUdWTE1XbFZZWEZQTmpWb1RURktVMncyV0hCQlVFeE5RaXRqZEVWUVkwcE5UR0oxZDJKRmFuWjVWRXBqYkVVNVVWUkVXRXh2V1VkWVJuTm5TM1ZqZVZRek1IUklUbUZ1Wkdjdk1WWjJTbmd5WkVWak9DODBRMVozTVRGRE0zSjBRVkJFYTNOWVR5OUxNMjFtTUhZM1ZtOXdRVFY1V1c5UFpFOTNTMmt4WVM5NWJYTjJWMWhTV1ZKYVZrVnRTazVrVEU1RmJFUTVaa0ZHZWtGeGVsTm9URUZISzBOT1drSnZkM1ZyYUUxMVUwZzRVRlkzUzJKU1QwdFJPR1ZGSzFScFJubEZWVmhuTWxwR0t6azVWekZvTmprd1pWRkZaMFJPTjBKS2RtNU9NRzlwUkVoeE1IY3ZTRE52YUc1S2RtRXdhWFJwTW01b2FXWndhVkZxVERrd2QyMUVZMEkwV1RSNlpHSk1XVkJCWTFKTlJHcEZORGx3ZVRWNlFVeERPWFZDU0ZkM1YxTnFibVkxWTFsc1drRXJjM2hHTURNMFRGSXJZblZNZEhSTFJWVlBWVUZZT0ZvM2FYcFBhVXcwZVRsVUx6ZFpSVGRsWmxwclJGaE1aRmRUYm5sNWFtMVljMHBYUWk4NFFsbGxOMHczU21KQ1JtSm1ZM2xrUTFodFVtMURlVVE1UzJKSlYzb3JkbnBKUjB0UGNXeHBWa1I0ZVZJM1VHTnFaRk50Vm5NeFRqbFFWWFJzUjNwck1FeFBaakZ2Ym1OQ05teFBjRkYzYkhkVFpFVnBRM0V2ZVdrMFlYWlpRemROYmpCeFdqTjBaM0JtZEVSb2VEZHdXR2xuV0RWQlRHSXdXVWRVZG1vM2RWQnJLelpRZW10RVJrZGFSakZJVjFoQlRURkNWbFZhVVc1WU1tTkZNWFV2V0N0eFdXSkJNelZ6TURsV1VHMW5RWHB4VlRaelIwNHlTa0o2U2tZd04zRmFRbmd5Y25STGMwcHFka055WjFkaFMycFNlRGRoTUNzMGQzRmxNRE5tVWs0emJHcEZRa2N4ZDJkTFNGQnFSMGM0V2l0cmIwaDNSVVpyVWk5aU5XWkRiVTlvZHpsMVUzZE1iM0ozVUVwc2NteHdUa2xPU0M5WVVXUlNhVFkyS3pONFptOXVVbGxuWjI1VVEwaHNkWEo1YkRKSmVXSXpiMjk0Y0ZjNVJXMHdURVk0UlVoTmNVUlFSVVpMWjJSSmRYWlhVaXN4TWtkWmRVcHpaMUp5YUhGUU1tbHJZMlIxTDNNelRVTm5iMW93YXpGMFZEUllXRU5XUkhGNE5XSnFkRWw0UjNKQkwxZG1OWHBXZW0weldUVnJhamxCV1VwcFRXdHNNekZQT0dkTVVqRllPRU5CYURkbVpuVkZRM0ZSYzNsRlFYRjFVbkJpTmtWVlpsQkVTMDVHV21sRWRuWTNVM1p5T0hSaE0xRTVURWRqTXpWMVUzTnJhSFZ1UTA5NFZWbHFaVTFpVkdWTVl6SmpaQzg1ZEV0MmJuRkJOVzlQYkhCQ2JTOU9VRmwzVVZKUU56aDJhRWxDTVZJMGNEbDJPRUZZTkVkWmRqVlpaazAzYkhCNldXeEhTbE5uTlNzNGRVMUNTelpDY25kS1R6Vk5LMFk0Y0VFdkwyMXROM1kzUkRsNU1tMUdWM1JHYnpCcU1qTXhhMVJLVnpJMVFtMVdWV2hCVGxOQmJGZFdTWFp5ZDBOalJtWlRZWFJyUlVaUFVHNXdWa2xqTkRabVUwVlphak00V0d4dloxcDBUV1FyY1ZOTGJXMXVjMUJSTDFSSFluazRUV1YzUjFseGNXNUtlVlp4VEZsb1luQkhjMEl4VWxOWlZGSnVabmh1YkZWRUsyZFZLMDAxY2pKSWFIcEhiaXRuUlZnMlFtMTBRVUZLZW1sMU4xcEVWV2hzVVhSdU5qSXlTRUk1TmtReVlVTnpiemt2V2xOcWQydzJRbk55V1VoUE9IbFlTVGMxUm5OR09GTjBjVWRGZEdGellYSjBabWxDYWtSaFZFRXpRazlLZWtaaU9FMXNVRTlxZEd0TlNHSTBVRXhxUkhoeFQwZDNObVJJU25WUk9FZDFPWHBLWjBjeFNUSlBZVmwzUTBSdGFWZDRZVWRrVVVoamJTc3dOMjh4WjBGcFRqUnVlV2RNYTA4d1QwdENZV2xZZDBWWFJFa3pjbGxEVUZkdldEbG5UVGg1VkRSc1RXeHlOSEUxV2tJemRWbDZNRVZaVmpJeU55dFlZalZUT1hkbmVsWTNhMEkyTkdwM01YWndhMFZOVHpoSVJqRkNUbTF5WTAxRE5ITktjMFF2ZVdScWRUQTROMDloUlRSelNHWktTbk5HTW5sa05WaE1OMWhzYVVod05VaHBabGRqUmtVNFNIcFNNaXRSY2psVFIwb3lObVZHZVZWSE5HMXhOMU5RVlVselRHVkJVV1pxUjBKWVIxRkNlRzgyZVdReWJtNUZNMUF5WlVGRVdqaE9NSFZRUjIxdWNXdHpaWEp0WTNCNlQwVmhTbVZIVDFCUk1GRnNWM0UzTlZoV2RFRlpNakkxYWt0R0wzVkhhRlpIVlhaNlQwNTFMMFEzZEN0T1MyaHhTakJ4Y2tSS1NuWmlTMUZ3ZWpRMWRsTndVa3BHYlcxNFVtMUVibWtyVTBsVVpuSTJNRTlwUlhsc1VGSlRlVk4yV2pBMlVtOVZNbTVsU0ZkdVNFMUNha2hsVjJ0R2VreGFWMlY1YUc1NVpHUTRTbHB4U0d0SVVWTk9WM0Z6VTFWSVQyaG5XREZRUmxJdlMwVkZNVTQyTDNkQ09VRXdha0ZxYlVsaVRHcEpkVGxEYWxCa2IzSmxkRFpzYTFGVU1YSXdVV05CT1c4d2RsZG5USFV6UW1wdlMyTTBVVTAxWTJZd1FWYzJNazVVV25Wc1kyd3pUMUF5SzBRMWRqWm5UV3BHYkdOSWR6Y3ZWM2w2T0Zsa1dHZG1lVlZsYUdoeEt6VXpkMWRYY1hBelNUTkhSQ3RDVlVaNlUwNVpTV1pUYVRobVNrZzRSR2NyV0Zoa1RVSlNaWEJJUlhjNU5qWmFUV3hNZDI5TFNITlViakJETURVeFZsbHpOMHcyYTFac1EydHlibTA1ZDJoT1pqbFdRMlJ6YzNZeFYwSlRiemx5TlRGNFFXSk1RazVvV1ZsNE9Hb3haM0o1U0ZkblpXdG9iblZ1UWxabGJXNDJOVEZtTVhWc1kySTVSRVpOUXprck1VVnlkekJVVjFONlRYZE1VSFUzTkdkTlZWb3JXR0ZtVFVaU2RqTk9RVk5JVTBscmFGa3pSWGhhUW5WaVJYY3pWa1pIT0dkM1JEQjRkbFJJTmxvM1RVcENNSFJsY1hKMWJERkhLeThyVG1nclVtRkpiVEpPYlhsT1dXVXdjbVZLVG5KVksweE9XbHBaT1NzNWRFaGlhbW8xUTA4elJGRktaVXhKU0hST1dHWTRVR2w0YVZOUVZ6ZDJNalF4SzBNMGJ6TlZOMFZhUm5sa1FYbEdhbUoxUjBKNmNXRllWVWxMVW1oSVowMDFXVTl5Tm1sVlEwUk5iV0p3WVdwbk1TOHlkbFJxYlVwWlRqZzNValF3WmxwWGRVbEZNekZFY1dOdFpUWmFaR1pDVUZKMVYzaDZkbk5DVUZSVFppdFJkMVJOYVc5a2RIcHNWakJQZGpWdmVWVjVka2wyUldSaWFYTXpaMGRxVFhsTFYySk9ZbFpxUjFSWVQycG1iRGRSV1ZwWk5FTlJaRWRuVTBvMFkxVlpWVWhxZUZsUVZXRXJObWxVVjNsaFNGaGFUemxrTWxCdVoxcG9WVEpqYkdjeU5FOTVWSGxUZG01Uk1WWmlZWFpTZEZwTFdVWktla1V4YzB4NE1GQlJWR0pHUWpNMVREWm1RMnBhYjFkbFduWkRjMlZMTjJGR1IxUm5hRXBWTWt3d1lqWlBjemwyT0ZCNEwwNXRlRGs1TUZGU2FUSXJVRXN5YlRsaVJXVTNTV1ZNVmxVek1GZHBTVzFWZFVOUlVreGhUVE5VVTFWQlJYWmhaVlJuVDFZeFJWQXlOalpHZURGNE9HOWhLMUV3WlVadlYwdHVXVE5VWVRkMk16VkVWWEV5U0ZOd2RqWkZSa2RQYnpWVk5VUTBTVlJNTm1sR2NrVndVMDVNU1hwaU56QTJLMFp6Y2tSSVEyNHZSMVZxYjNCWVpIaDRZWEJTTm5oQ1pIbHBlVEZuWmxaMllVSm5ZbW93Ums1YVIyUTRRMWxIZDBNcmVEWmlhV3BsVlRoTU1IUnJWR3cwY0dkV2JrbG5TWHBUTjBSR2NHVXZNVTlwYm1wNk5tOU9LMEUzWTNCNFUwdDRXa1ZMVjNkTEx6ZFRURk5YTUZsVWFVWjJjRU5tUnpZNWIzZG1OWGRKZHpodk9GbE1MeTlNUm1VMldYQm5ZbWR4UTFGdmFXMWpWekJoVGtWa1NuTlNVbXRIVUZoNVFua3lRVkpaYTFjelFsQXpVMnBaUmtaemRXWXZXR2sxY0dsRFJsRm9VRE5FUmtsaWVrVlVhVkFyVDBwMVRFdE9NVkJHT1c1bWVrTkVWbGxpUzFGTk9IUlBlRlZEV0ZBNFFXdFVhR0pIWTBVNVIyNUJUM1JWYlZaRE5sZFhaMGhQSzBsS1dsVnNVamRtZUZOeVJtTlVjeXRNT1UwclNrNTRWbUpoZEVrMVRsZ3liVXNyY0hockwxRnpXRlprT1d4MWJtbERhbFpqYlc1T2NHSm1TMVZuYURVd1FYcDRSWFZHZUc1TGNUWlRTVUpCTjNoSE5taG5UbE00TWl0YVprMHlRM1Z6VW5sMmVtMVZSMDgyT0hJclNsZDRWRk0zT0cxQ1lrZEJUVXhZTmtzd1lsZHllazUwVVdwMVZFWkxNaXRCZHpkRWQzbHlkRVZIT1RGWU9YRXJPV1EzZGpGb05taDNaMWwyY0U5V2Fqa3Zabk0zUlRrM1NYYzBObmcyZGpKUE1WaEpaV2hIWkRROS5iMDJFLWVObGJYMmhsazB5R0FRa08zbU1lTjdoWU1ld1huQVRkNWpwbUpiQXhVdmpRU0lIbE53dFFhdi1RSnQ3Tk9XN2p1MmNucElORXM2RnhDcEtNdw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:43,290 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:07 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:07 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:07 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=7A77FF9BAE3CBB44D65F6B072447CCAE; Path=/; HttpOnly')]
2020-05-27 09:13:43,291 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:43,291 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:43,291 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:42",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091342 AND testcase_id = 17 AND step_id = 25 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:43,324 testcase.py[line: 205] INFO: 测试用例[id=17, name=安全分析]执行成功
2020-05-27 09:13:43,324 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:43,324 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:42", case_exec_history_id="20200527091342" WHERE executed_history_id = 20200527091336 AND testcase_id = 17 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:43,540 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=17]的执行结果
2020-05-27 09:13:43,844 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '<div>\n\t{</div>\n<div>\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div>\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div>\n\t&quot;请求头&quot;:{&quot;Content-Type&quot;:&quot;application/x-www-form-urlencoded&quot;,&quot;charset&quot;:&quot;utf-8&quot;},</div>\n<div>\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div>\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div>\n\t&quot;参数&quot;:{}</div>\n<div>\n\t}</div>\n', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '1', 'status': '1', 'steps': [{'id': '8', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '6', 'modification_ts': '2020-05-20 09:06:57', 'node_order': '1', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-1', 'name': '作业配置', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '7', 'creation_ts': '2020-05-15 08:13:20', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:44,052 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:44,052 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 6, '作业配置', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-1')
2020-05-27 09:13:44,118 testplan.py[line: 76] INFO: 开始执行测试用例[id=6，name=作业配置]
2020-05-27 09:13:44,119 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:44,119 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:44,119 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:44,120 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091344', 6, '作业配置', 'pan1_of_cq', '长庆项目演示', 8, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:44,139 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:44,140 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:44,140 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:44,141 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:44,141 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:44,142 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:44,142 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:44,142 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:44,481 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:44,481 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-51-giMf7dRya4rZZF5s4fH1a7wP4UnRd2-passport.51gxc.com" />
            <input type="hidden" name="execution" value="93c759f6-6648-4020-aebf-927a74d57bf6_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuT1VSS09XOHZhbVZ3TVcxV1duZzRUa2s1ZFZCTWFXbzVkamxSZFVSNFJHdHFNQzl2V0RONFkyeHpPSEJKVFcxa2J6ZEpkeXRWYVhaUFQxUjRlSFZRWVVNMmNHbHpSakU0T0VGVmRXaE9ZbTFzZDJSa05VMUpLMFJ2WW5acVdWUlBVR3BRYmxZeU5YVXlXRkJyWlhjNUsxZERNWGhHT1dOMWFYa3lZVUV4VTFaT2FVUXdSV0ZvVUhkVVFXZ3hTWElyTld4blRtMVNXakY2VmpGVlFsRkNjMjB4WjBsVU9XeEdiMEpzYzJKVk5HSkhNRmg2WWtsek5HbHdlR1ZSYVV4Q2RsZHFTR05FU1VWNWRqSjNWbEl3WWxoNFIzZERkR2xhWTBacGREUkRNV1ZpWVc1R1ZsRnlPRXQ2TTJOeGFHTkRValJKUTNaRGVWWlJlV0ZOV2pGMWEzVmxjRlUwUlhOTU9IWTVRV2RwY1c4dlYyRnlWREZYYWl0eksyVjZSVlY2VW5KWldraEdjWFp3TmtsWE5rY3ZiRUprWmtkd2FGSnlVRXhwTWxWWk4yaGlVWEZXVFZwNVNFZHhVSEp6Y2xwblRFeE9ORTgxVkVkS1NsSXJhR3RRVldWV09HdFVXa00yY1VaWWJsb3ZhUzlUY1RBM1RGZEpXRFIyU2tsVGN6WnZZbGxEUVhSS1FURXZjRkJHUVVwelZsaEJjV0puYTIxQ1ExZ3lWR2R4UkRVM1lrZzRZVlpGZHpWMVlYRkJWUzgwZDNKVllYVXhRM2RUTVM4dldtTTRWMGRKVlZwc2VXOVVWSGhvVDBaRGRUbDJhM05oU1ZGUlRtMXRXR052YzJwcE1VUlNTME5TVlhKd2FGTlpZV1p2TWpKeEx5dFZZVkIxVEVReU1VMTZhVWRSY0RSRlRuRlBRa1paSzJJNVVVWk1abEoyUkRobU5YZEVhRlpaUTFsU2QxZ3dNU3NyZURsTmRWQlFUV3RNYWxoU0wwRnhVV012VDFaR2REbEVNVloxWTNKeU1FZzVSbllyTTJNMFRFWlRiM1IyVldFMlp6Uk5ZM0IzYUZwcFpqTklVVmxOV1hKeVRUZDZNa3g0Wnk5bVVESkpTWGN2UkdvM1JsbEJUMXBUTmxCd1FuTmpXazlKZVdKbVEwdE1UVEZHWkdaSFl5ODJkVXQ2UTFreGFWQmhORXRYT1dScWFYUTNaR1pXTVVSRWVFSkhVMkpKWm1GUlpuWnVZMUpVWlc1UVRGVlhkSGhyTURGb09XNXZkRTl6WW1KblIxUnlUa1JJVnpsRGVGVkJXRUpXWTNwcWN6ZERSWGc0ZGxCak9HcHdXbXBOT1VWSk0zcE9ZV1pPVW5Sb1MxbFhObkZJYTAxR2NtcFJUSE5hV1UxMWJ6bFBhalIxV2pBeFZrUm9VSGxtZFhWdlozWkROMmhtYTNkWlJ6SmpkV293Wm5OYVRWcDBaVXhXV0VsT1VtNXZNazl5YVUxNFdEQjNhVmhwTUd4WmNHNWFUWGg0TjJSNE5XUnBZUzlyYkRFcmFpODFhamR4WkV0bllWZE1USEZLYlVNd1ExUnBWSEUxTDFWdlpXbHdWeXQ0YUdzNWRFbHNjMVEwTnpFNU0wRTRNa3h4U1V4eFpHd3dXbkYzZWpoeGFrNVFlazgwUjFJeWJIRkpjbWh0YTB0c1dIcHZNVE5uWkZKSVUzY3JkVTlKV0RnMFptSmhkSFptV2xOdlZIaGFaVWgzV21WWFZ5OTRlUzk1YW1oRVJqTllkMlpzUTFoMk1FSTJkVm96V0dWa05USnFTa0Z0UmpNelMzcGpTVGxzU1Zad2VtTlhOR0pQV2xaR2JWUkRaMVZMYmxSVlNFNDBhWEZ4UWpsVVFVYzVia2hGWlVvd2RtRlplbVZEZFhSb2RIVllkR1JpTjJ4NFFuWXhjR3BzY25sUWFDdFRUSEJ4ZDNGT1JUYzVOa2RyZUVRd04yeHJZVzAxVTJaSlQwMVlZMHc1ZW1wWFNFY3pjRU51UkRSUFowUm5OM2d3VUcxNk1XdEdLM0ZXWkV4b05IWjZLM2w1Vm5VeFNqbERORW92TVV0RlRHSkJRV1J3WW1jMlJ6WkpOR1UxYjNacVRGQlZTR0p3VjJoRGVtdFVNMjFQVVVOM1pHMUdSV3hYT0ZoTFdGQjFkVEYwZFZVM2NIZGFRVzloWVVWU1pHRk5aRVppY0U1ck4xQlJSM2hHV1ZKV1oyOXBhV0ZSUWtob2NucGllRUZCZWpsM2JHcHhaV1pRTmxKWGFVUkVUR2hZTlhZNE5EWTBkRUo1WWpOamRGWk9aVkphTlV0aFRXRkhNSEo0WjFaSVFXUkZSemRwWW1OQlVXRlNVVmt3VjI0eVdFaEdkSGRDUXl0S2JUTXpTVEpKZWxCek1teG5SR2hqTkZSUFFXYzBkbWhEU1VoQllXVjZPVFpGZERoM2RUWXZiWGQxU0VkQ2VURTNTa3hFYkZsSFUyMUhXakk1WWpCQ2VpdGtjbmhXU2pacFZFWXZSWEJMYmtGSGJYTjVkbTlLZFZReWIweHBVbGxXYXpGYWVrcDFOa1pMVVhscmJFcFBNa2RNWVhaYWMxWnhVVXRSUTNGUlRFdFlTbmxFWWpGcFR6STNXaXRpYnpWUGVtYzFSRkJTTkhOUlJsb3hVMll3Y1RSc0x6aHpXWG8xTW1kaGNpdEJaSGhOYWtFdk5HVlRUa1JqZEdaQlJFVkJOMWt6VTNGbFVsUkxXbTh5UkZKbllrMVRMMHAyTkcxU1NUQkpTVWxSVFhWck56WlBjVkJoVmt4elNXTTNiMmxxUzJwTlRFcDBjMDVhYmpGMFpFRXZWbHBvWkZsd1dVUXJaMmhFZDJKaE1VeDJhazlJTVVwb2NqWjZOVlpETVZSMmRIWm1RekJaTW5aRlp5OTBlRWd2Wm1sc1Z6bFpUbGMzU2xKdVFVTlNkRGsyUlcxRVpWQkJRVFZQYURkNldHRkRNR1pJTm5KMFpYTXhVemgyYlZjclJWRklVbE5LYkhKVUwwNXNhbGxJZG5Sbk1VeHROM041TUdoNmVscE1iV016VjFFeGNITjNaRnBvUkRKalJVVkZNRVl3ZFVreGRVUlRaVUYzVjBzMWVsaFRXbHBHVW1OSEwzUjJZVk5JTVZoTWVVSlFWV2xXWm5jMGJtdFZkMnd4UVZVMU1VOUJRMGhvU0RJeVQydFpUVVpRWVVJclZtaGliemRVTnpkMVJUQXhhV3QzYlRsMFYySlRiemRtYkhScmRVVjNZbXRuY21WSVkxbHhRazVRY1djck9HcFBTMGRMVm01WGIxUXdTMGQ1U1RSNFNqUTNLekJOVjFSTWJEUlhiVGRXTmpKVmRteGFTVEZuVDJsdmVHNHJiSE53T0hGb2JqaFNTaXRJVjFoeE1FcHFjaXRtV20xMk1ucE1PSEJhTVhseVZsWk1XQzkxVGpsM1VucHdSM0pYVUV3MU0ySlBkMk5zWkVVeGNIZEVSM05ZUms1S1ZtRlFhVTk2WVRacUwxSlZTa0kxWTJGc2FrVlZNekJ4ZG5wTWVHeEpURlZNWTBKSk5UaG5lVTVGY1hKRlppc3JUVW8wY1ZOT1YwdzNTMmxFWjI1SFZYcEtWVUZXU1hkVlQybzFSRGxaU0U5eFdFNHpSRUU1TlZBMmMyWkNTWFpaVFVScGFHZElVa2RQTWs1dk1sVnVZVEY1ZG5GbmFYQnFlSGxyTWpnMFlVWlhTV2htUjBFd1NsWklNM2QyVFRJMVRYZ3hlU3R6VEhBMmNuZGhVelptVkRGbFEyNUhieXR3UVhSNE1WaFFOV0ZvY1ZJNE5XaHlVRU50TTA0eFkxSjJNQ3RpUkdoSU16UlpVVnBTTTFSdlJFcHliMlptTDNkRlZUWTNhalpKZFhaT05VcDROeXREU1ZkbmJITmhLMFp5UWxoNmJVTm9heXRPUkVneFl6STVXWGQyVVhGakswbzBiV2hNYkdFNEswbFdNMlJ3Vkc5NmVFNTFZVzlSVDNWdFlqSnVUV0UwWWxkcVp5OWlZbHBwVTIxUWVFcE1OVEZVYkRJd1drRnpTWFF2VUUwNFlsZzJTM2h0WWxST2NXeEpVMk42Um5ndmJHd3pWRGtyZERWcVJsRllUbFo2V0c0clRqVlNSMFJ4WmpJclRFTmpiRGczVWxWRFRXSlFRbnBaVms1NlJpdGlZVlJVYzA0cmFsSlVPVW80VlZobWJsWnZRV1ZIYkVSc1MwMWpZMFF4VlUxaldsWmxZM2RqWjFJeE9Fb3lXWGRIUTFwaloyeE9lRVVyVjJneFFrbFpMMGhhZVRGMU1YWnZTemh6Umt4S1MzWjZiakJEYkhOVVRtRXpkbXB5WTNKd1MzcE1iV1I1U0dacGRWUnVaMVV4U1cxdVFtUndkVU5xTDJjMlRVSkNPV0YwVUZoQmNIQmpZemx3Y3pJcmVGSkpUVzltZWxKaGFUZHVSelJpYzBOaVYxbFNSRkZXUVhRcmJVVndkRVZ6TVVwa2RVTm1TRzVGY1VJME9XbEtkMFF3WTA0elZsaHhZbGxSSzFGNmVrZExVRnBET0dOYWJESkhTMWRLWjBWNlIxcHJOVmxJWldKWlNETlJWM3A1ZGtOeFUyUmpkbGg2Vmxad2JtZDBOVXBWU1hSNlNEUkxiVTlLTmpaUFpIcFZNbkF6Y21wSlYwRlFhakE0WldaM04xUjBUMll4Y25aS1NEZ3hPVkJxYldWT1pTOVlSa2R5ZENzMlJ6ZDBiMk0xUlhaSGQwdFZSRE54YjNGS2JGSlpiMjUxUkZkSWRGSTVORGx2Ym5aNlJFazRjekUzVkZoMFUxTmpabFZDTUROQlZYUmFhR3hJYWxnMlZFOHpRMjV6Vm01UlFVczBOekIyU2tsRGRtRjVOelZvUlRFMWFuWmpWM1ZqVUc5RFZVOXZNM2hyYUhKcWVrUmllbTVtTTFGd04xcEdPRGhrWmtjMFVGUjBUbWsyVjFWcVpIVnpiMGczYjNSWWFuWklUMDFNT0VjMGFWbFpiM1l5TlRGd1dFWkxWREp0UjI5Wlp5dEVialYwYUZOUlVsaDJiVE13T0hwU1lXaGhibVF6ZFVGU1ZraG5kalprWXpaWWQxQlVPWEpHTUU1T01ERkNNWEZ6Y0RjMVJtZGxWMEZTYzNvMWVIcFdXVzk0ZVc5b1NVRTVZbEJLVVhwMk5YbEZlbXQwVXpSaVFsQnJVV0pGUldJemMwNUlMMmMxYTNWS00yc3hWamhaVTFGMVVVRTVaMk16VkhKak56QnBOWE50VVhobEx6TjZjemN2YjB0QlEyRjVjVk5ITVZWUVZqZFBNWHA1WVdSbGFGSldWbWRTTDNvMGMyNW1UVEl4U20wdk9XaDVaa0ozYUhCUWJsWXhWelU0UlhwQk9IRlpTWEoxZFZwWllYSTBWbGROZDJWUWRUQlNhazVCY25wTFpVZElSWGRZWm5WRk5HRnhjM2RLVEhoaU5EWjFkbUp4ZVhob2FEaEphemxRZFZOYVNWQk9jMmRQUjJ4NU1tVmtMekpCVWtremNrSnZTV3h0VDJOV1RtMHZaWGRpU0daVE9XWmFNbWxFZFZkdkx5czFXSEF5TlV0TVpqVjBWVFF4WkhreGQzaHZlVVUzYzFVOS53TW1PODJ5UFR5U1FtT3FQOEdjZWY3dnVzdlluc09HM1I1bWxSTXB1dlZETHZveHFvTlFMeU43eWhTamdFSk1HVWtDUEUzOGtvMFN4RkJBc25mNTctUQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:44,482 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:08 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:08 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:08 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=365AE20C798FAE8B37F91B13445A0E26; Path=/; HttpOnly')]
2020-05-27 09:13:44,482 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:44,483 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:44,483 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:44",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091344 AND testcase_id = 6 AND step_id = 8 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:44,669 testcase.py[line: 205] INFO: 测试用例[id=6, name=作业配置]执行成功
2020-05-27 09:13:44,670 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:44,670 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:44", case_exec_history_id="20200527091344" WHERE executed_history_id = 20200527091336 AND testcase_id = 6 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:44,881 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=6]的执行结果
2020-05-27 09:13:45,179 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '3', 'status': '1', 'steps': [{'id': '22', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '11', 'modification_ts': '2020-05-20 09:09:57', 'node_order': '3', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-3', 'name': '气体检测录入', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '12', 'creation_ts': '2020-05-20 09:07:32', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:45,316 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:45,316 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 11, '气体检测录入', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-3')
2020-05-27 09:13:45,327 testplan.py[line: 76] INFO: 开始执行测试用例[id=11，name=气体检测录入]
2020-05-27 09:13:45,327 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:45,327 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:45,328 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:45,328 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091345', 11, '气体检测录入', 'pan1_of_cq', '长庆项目演示', 22, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:45,340 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:45,340 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:45,340 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:45,341 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:45,341 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:45,341 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:45,341 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:45,341 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:45,738 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:45,739 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-52-bd2cSdJ71H1cxeLqx9CiTPbXWdkhhD-passport.51gxc.com" />
            <input type="hidden" name="execution" value="196d39e7-bab4-41fb-be12-b9b3cbce6da8_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuZHk5bGVWVmlRMFZFTlhCWlJpOUlkakIwUmpKWlVsWmxPVkpSWWpsRmNuQXlWV3R5UTB3MFdrWjJTRXQ1T1hWVlJIazROa2d5TmxCVlZHVjFMMmN3WW5KaE5rVk5SbkJWVTFWRkwzVTBkRlZZTlRKQ2VHMDFRVzFsVldOVE5rSktXRVZ4Vm1SVmF6RTVWamt4VkZoUE4wbDFlRkZDU2tZd1pscDFUa3AwZEhOcFpVSldWWHBJVlhoNU4yRnJUM1YwT0dGU1RqTTJhVUpvYzNGSlJ6TXhVVnBPTXpsRVJteEZVVzFsU1VwVGJFdzFVMnhST0dwcWFIbDVOVFZhYWtkdVVFUlVjR3hDWmxweWJXVlNjRVZVUmt4NU5XbFViMGxrZVM5SGRsZzJiVmhoYzNSUlIyMHlWQ3QyWWpOd1RXbFJUVE40UWt0eVoxVnNSRGw2U0hkTWNtSkZXWEkwVjI1bU56Um9SQzk0WmxacmQyZHNVVXQwVmxKU1lYWkpiRmt6YjA1U1IxQTRkR0ZIUkRCRmJWWnFUbVZ2VG5aelFrdHhkMHBVTm1GbGNVWnVVU3RQVGxaQk1UbElOM0ZtTm5reE5WQmFUWEJoU0VoRVpVTlVOVnBPVURBdlpHZHZiVUlyVTJkS01rZzVTRVEwU1hCMU9DOW9aV05PZEZaeFVWZE5RMnBOWkRCaFVHUnZkVll6VTFKd2MwOWpPVkZLUVRkR2JGUm9PRW8wYjJoV2JuSjRNVU01WTFOekx6ZE9kR3haZFVaVk9VNW5NU3RyVDFoVmJIWXZiRkZ3WkZvMFZHUjJhVGxrY25sbVNsUnNSVXRPUVV3M1pXOWxhRWhtT0hnME0zSnRNazlMUzFoTGVVcExVVlJYWTFBNWIxQktWSFpJVkhGSVRUSXZWMnd2WW1sRlJXVnBVRkoxY3pGVFJsbFZkQzlWWm1sRFFVUk1XV1l4Y3k5WFp6ZHFUVkpsWWt3eVpHVkZTbU5FYkVaTVNEWndXbmhHTmtOTVYxTkdjSGt2UzBoMFVrWnRNMVZ0WVRCQ2RtVTNRM1ZqWjFwWFVqZEtNV3RqT1ZoaldGQXhkbFV6VDFGUWVHVlFTVmcwUjNCaFNVUlphazltZG1JcmRISmtOWGhKYUdWcFVXMVFVWFVyZDBGc1VGbElMMDVEZVVGQlVUbHdWbmRvUkZKQ1RqQkpZa2hWV1VSUGNYRjJhRWd3WTBJemFXSnpSMWxGVkVReWVrNWlZak5SYkdnMGEwTlRTMHgxYjFaYU1tWlNjVTVhWld0SFEyMUViRU5uZFdNMk0ycDRjVnB0WlZwWk9XTkNNVVF2Vm14QlEyaElXREJYWWtOaWNrVlFabHAyTldoek1pc3ZablJFYlUxMVMxcHBOa2xpTjBGdFNHeHZURGxsV1ZkTVVuRk1jekpzUml0bGRuZHdOSEl2V0ZKVGQySlVUM0l2T0RGQ1VsZFNTMHRQU1RkNFJFOXBUamw2YVVGS1JFdE5kMlZQVWpOTlNIQm9jbmxET1dGdlpuaG9kbGRJYlZWT2FXcFNZV1F4U0RaWVJpdFpibVpPVjNKU1JHdEZhRmRDWWpSWVR6WnBLM0ZJTDFsRE5rUjJUR3RsWW14Qk16QnJWV3hVUm5sTFRUVnJTVWR2TDFSVVdHTlZVR2t6TlNzeGJuTkxMMlJHWnlzclExcFNPV2RoWW01R1NWQllTWFpNU1daUU5VVXZjbTlYT1RndlRtOHZSRzl3WTFWNU1XRjNlRFJ4T0Rodk9WSlpLMnBDTlVad1dGZzRhWFZ1ZW1OeE1YbG9OMnRCVEM5MGVWWnNMMFZyYlRGamIwUnFSM1FyZEN0bVFtWlZaVGQwWkRWdWQyTjNUVzVTTTJFd2VEWlZZMlF5U0d4UmRtVldZblpRTDBaaWFteFVjbk5RU1VSbVVsUmxNbUV5TkhSUlRXNVdhVlZEVEZoUE5tRTFiSGt4YVdoYU1EQmpiVFozVVVGemFWTnhiVUZFZUhGUVpHTk9PU3RKTUhwSmRVOWxPR0pSZG1jd09UTjZSMjl2VlRkd00zaGFMMWN2Vkc5YVN6UnhVM05UVDFNMlVsVktLelF4Vmk5MWEzWjJSWEV5WlhSaFFsaFdTaXNyWVRkWE9HRkRXRXhOTjAxcVZFaFRSVGhUUTNnM1NtbzBZMVYyYXprclYwcEpNVlUzZG1wT2ExUXhVSFpTTjNoQmJXdGtOV1ExWkhKWFRVbE1Vemx4VWtSSGNHWnhiMFpCWWs1TFkzRnNlR2hQUmxvMk1Wb3JTa1E1VlM5WFF6ZHRXbU5rT1RKcFp6Wk1kblY0T1hnemFEbERVVTUzY1hsdGVrbE1RMGhzUTNjeGVIVkZOa3BDTlVJcmJqQkJUbTl1Vm1vcmNFMUhaamh2V1U1b1NIZHFkbVZzYTBSc1ZVWkNhRWxNYm5GcWJXOVVjRGh4WmpWSFZTOVlZMFZuTVc4MmExcDZkbkExTlc1YWFWUndNbGgwTDBadVlqWkJla3BYWVRkUFdWQklMMmRUT1ZVelJFTndUVVl5TTNZdldVMWpibmxETkdkdWNucElhbk5SU1hOaU1YbEZTbkZRT1Vwd1pHbE1VbE16YTFoRmJtWjRSRTl5ZEhCVVlYSnZNV1V4UkdZeVIxaHdNa3htWjBNM1JIbHRSbVpUVVc1MFVXaHFhazVOTUhCU2FVTXdkalF2VmswMFdURnlRMkZ3Y0hkb2NHMVBSek5PYTBoUU0wbExSbFZGTUN0MFpEWlNLMkZ6WWpjNVlrSjNiamxKWTI1bVRIUkNVbXBWVW1sak5tZERielZpTldsT1NGWmFRMFpPT1ZZME0zUjBURWd6ZWtOeFQzcDJhWFZOTDJOTVNscDVLM2RxWm1vemQzZzJaMDV5YVZKSE1tRm9TRnBDVEU5Q1ZVdDVMMUpoY1Uxd1VHSkJURmxxUmpoSWNqRmxNMFV4YlZkd2N6TlJhVVpuUjBrNE5FUllaVEo0YWtSblFXY3pkM1paYWpKSlVrVmxlSEpWUm5VeGRHMXJRMEkwTVhocE1FVmtaMGx1UkhNelNYQlVaMUJNT0ZaNWRXcDFZM2R3ZGxKVWMwa3paM1Z4ZG1STlFTOXpNVkpVYUZKclZuVm1VSE51VVZSaGRtRkdRM1ZuY0ZweWMwZ3JSVU5RZDI0MWNXaDVXSGhVT0RGb1QxRTBSbHBFVTJOeFNUbHhNVTFrYkZGa1NrNVBiV0ZJU0ZaelQyTnViRUpuZFZoQ1RqUklkMVJHZEdsSGRsbHFjVk5OTkZWSFJrWjVRV2RYVVhCNlVsaEZSRVJaTkZFNFRXVmlaMDlOZUZwMk1pODJiMEZ0UjJJMlVGbG1VMDFRY0hWdmJrWXlWbGRYVlVkSmJuQmxZV3B4TjBWVlNIbFVWVWw0YW05NlREVmljak4zZFdNNVlVVnBXVEJvWm5vM2RGbHJlVUpEYzFKV1JXbHhNREpwZEUxS2RrMTVOREpHZDA1dFRVUk1kamhPYkRacFJubDNkRnBzTVM5cVJISk5VR3B4YTB4bE5ISlNUMHRpWVhGWE5tbEJjRTR6YzBocUwzVndPVVY0WkdaSGNIcGlWRWxyTlRSd1oxTmFOMGsyWTA5Vk5VWnJXRGx1UWtKaFFYcERNVlEzUkhWMFVrcHBieXQyY20wMlEwSXdVWFpXTVZKV2VrODNkWGhsZERKRVZHOXliSFEwYjNORlVrNHlSRlIzT1VaM05tZ3dWWE5UY25kV1FqRTBkRnBvTVhoMVFVeFJiVU5rTHpoT2VGVnZkMnhQWlRCVU5HTndTbGxGVmtoVlMwRkNhR05qTlZsRldVbDRNV2sxTm5adFJETktiR3MwTTJONk5rRnNlVzlaWVVSbk0wZHdWRzF1TjJwVVpXUm5aemxLUjJ0M1VFdHRWVmN2Y2xCb1ZsbEhVek5xWVhCNFlsUllaVE5tTVRoTFFsVjZiRFpZTTBWbU56aFZNRzlXTldWRmJtbHZaMFppYXpoaVZ6SnVaVVYyY0c1NWFYUkhlRWRDZEhSbU5pc3hUMjVJWkZGbVUwWnhkemtyUW01R1JqbFlieko1VG1wWkt6SjBUV3RQUTAxSlRrb3JkMnhWT0RGRmVHNVRXVWhvZVVsTU5HdG5PV0oxUmxaS1ZFZFFkV1JpYVNzdlJGRTVRbmxRZVRNclJUaE1Ra2RNVTBOWFVucDVXVk50YUhReWNGRjZaMHN2YVRkaFlra3pjblZEUlhoeFoxYzVXbFZOVnpCd2JUVjJTVk5EVVhwT1lUQnhRWE5EVEV4cGNqUk5MMFZNTTIxYVppOTNNRXQyWjFKRVoyZEtOVXh6WkdaTk5UQXJiVXhKZFhWSGVYbGtObmRoYUN0YVEyeFNjMHRwY1ZGcmRHdGxTMnREV21acE0wSmFNMnRJVkdjMVRXeFhTazl3YTNFelJVOU1OMU56VW1sUmNGTmxXRzVxVEc5V0swaHJlbmwyV21jd1pHMXZibTB3VFhVck9FRlBXa05OV0VWa00xbFFUblJvTW5OUk5XUmFUblZ2YWtKNFkwRXZSSEZHYjFOQ1dFOTZibUZJUjJOd1ZIWjJka05rTDJvMGEzWkVRVWR0VkVkVmIxSjRhVlk1UVRWaWRYbGhVRFJ2TmtOV1ptbHlZbnBvTkVKeE0zUktSM0kwZDBrck5ITkxUMkpPYVZsVWRrWllTRWRKUTJNMVlVNUVLMlUxY21KTFN5dHlRVE56ZGk5cVFYTnZabG92TjI5R1JFRm9WREpJZUc5VVprdFZlbk5qUkRWRGNXTlNVRXQ0T0ZSc2JteGlORlYzZFRSd1JXTkJRa3hRUm5WTU5VdG1lSFZsV0c5VVQyaHJVVTVtT0ZoaFduazJXSFJNT0ZSM2FGaG5NbFpWWlZJeVdubzBPVkZNU1dZNE1IWmxiM3BLZFVSaE0xQnhNMVkxZGtsaWNrZFliamhKUjJKbFEwNHZWMWRPWTJOeE5YTllUbVIyTm1ab1JHUjRXa2M1ZVhKUFFURTNWVUl4ZEd4dU9XTlBSVXg2U0V3cmIwbFZZMDVCYUhGWlRYaDJNWE16ZHpkTU1qQlpUemc0YUdwSlVUVlZWbHA0ZWpObVVVWk1aVkF6TkhBeVQxaHVVVEZwT1hsc1kwWkZhbE5EWmxNdlFXRk1PRlJKUjBOTlJsQnNUekJsUkdwT2NuSXhTM0ZuTTFWVlVYRXdORlZOWlhOWmQybDFla1pzU0VGV2VIRnVkRVpyVDFKaU5UWjFPSHBoT1VWWE9YZHhSRFp1VkRNNU1raEpXSFZsTVdKM00ybDJVMkZrTUROS1JUSm1LMFk0SzFOMFNHd3JaV05PWkhsWFMwVjNMMk5xUmpodlJ5OW5ibkZGVlUxS1RWVXlPSGN4ZDJweE5tVXJNV0ZTUVU0cmMyNHJablJYUWtWcGFEVkNhRUZ5ZEN0R1FsSTJaMlpGV2pSRFJrczRUMkpHWlRFM1lsUTVOSG93YURaSWIyUlFRMlpKV2pkNWFucDNXVVJ0Tm5wU04zVlhhMDF3T1ZGc2FrOXVjWE15VG0xTGJsRmpNMjU1VkV4UVduWm5ZMFpyZFZsWVkyVjBLM1ZXUVROWWNEQldUMWRrWnpkWE9UbGhUaXMwUkdaYVdtaGphemhLUTFFOS5fQXBXQTYxSFo3MGJaN21hb3JBSGdVVWFhcWNmcGRaMGh5R2NrSGZwWWloUF9zTjlvTXB5THN1b2Q3U2ttOWRUZS1ObjRSVnhDQTlFaUc0dHlKcFl4Zw==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:45,740 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:09 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:09 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:09 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=20DCE57737C8489EB554E5618A0D4C34; Path=/; HttpOnly')]
2020-05-27 09:13:45,740 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:45,740 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:45,741 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:45",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091345 AND testcase_id = 11 AND step_id = 22 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:45,751 testcase.py[line: 205] INFO: 测试用例[id=11, name=气体检测录入]执行成功
2020-05-27 09:13:45,751 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:45,751 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:45", case_exec_history_id="20200527091345" WHERE executed_history_id = 20200527091336 AND testcase_id = 11 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:45,920 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=11]的执行结果
2020-05-27 09:13:46,261 testplan.py[line: 46] INFO: 获取测试用例信息 [{'testsuite_id': '5', 'version': '1', 'preconditions': '', 'summary': '', 'is_open': '1', 'author_last_name': 'Administrator', 'execution_type': '1', 'tc_external_id': '4', 'status': '1', 'steps': [{'id': '23', 'actions': '<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t{</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;类名&quot;:&quot;InterfaceUnittestTestCase&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;函数&quot;:&quot;test_interface_of_urlencode&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;请求头&quot;:{},</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;方法&quot;:&quot;get&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;url&quot;:&quot;/portals&quot;,</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t&quot;参数&quot;:{}</div>\n<div style="margin: 0px; padding: 0px; font-family: &quot;Trebuchet MS&quot;, Arial, Verdana, sans-serif; font-size: 11.7px; background-color: rgb(238, 238, 238);">\n\t}</div>\n', 'step_number': '1', 'expected_results': '', 'active': '1', 'execution_type': '1'}], 'testcase_id': '13', 'modification_ts': '2020-05-20 09:10:03', 'node_order': '4', 'updater_login': 'admin', 'author_first_name': 'Testlink', 'estimated_exec_duration': '', 'author_login': 'admin', 'updater_id': '1', 'full_tc_external_id': 'cq-4', 'name': '作业票授权', 'layout': '1', 'importance': '2', 'author_id': '1', 'id': '14', 'creation_ts': '2020-05-20 09:08:03', 'updater_last_name': 'Administrator', 'updater_first_name': 'Testlink', 'active': '1'}]
2020-05-27 09:13:46,399 testplan.py[line: 73] INFO: 记录测试用例到测试用例报表
2020-05-27 09:13:46,399 mydb.py[line: 58] INFO: query：INSERT INTO testcase_report_tb(executed_history_id, testcase_id, testcase_name, testsuit, testplan, project, runresult, runtime, tc_external_id) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091336', 13, '作业票授权', '作业许可', 'pan1_of_cq', '长庆项目演示', 'Block', '0000-00-00 00:00:00', 'cq-4')
2020-05-27 09:13:46,411 testplan.py[line: 76] INFO: 开始执行测试用例[id=13，name=作业票授权]
2020-05-27 09:13:46,412 testcase.py[line: 75] INFO: 转换来自test_link 的step_action值为：{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}
2020-05-27 09:13:46,412 testcase.py[line: 77] INFO: 转换来自test_link 的expected_results值为：
2020-05-27 09:13:46,412 testcase.py[line: 96] INFO: 记录测试步骤到测试步骤报告表
2020-05-27 09:13:46,412 mydb.py[line: 58] INFO: query：INSERT INTO case_step_report_tb(executed_history_id, testcase_id, testcase_name, testplan, project, step_id, step_num, protocol_method, protocol, host, port, step_action, expected_results, runresult, reason, runtime) VALUES(%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)  data：('20200527091346', 13, '作业票授权', 'pan1_of_cq', '长庆项目演示', 23, 1, '', 'http', '192.168.6.27', 6030, '{"类名":"InterfaceUnittestTestCase","函数":"test_interface_of_urlencode","请求头":{},"方法":"get","url":"/portals","参数":{}}', '', 'Block', '', '0000-00-00 00:00:00')
2020-05-27 09:13:46,425 testcase.py[line: 123] INFO: 开始执行步骤操作[第1步]
2020-05-27 09:13:46,425 casestep.py[line: 190] INFO: 调用的方法为：InterfaceUnittestTestCase.test_interface_of_urlencode
2020-05-27 09:13:46,425 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:46,425 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:46,425 casestep.py[line: 124] INFO: 没找到需要替换的动态参数
2020-05-27 09:13:46,426 InterfaceUnittestTestCase.py[line: 35] INFO: 正在发起GET请求...
2020-05-27 09:13:46,426 httpprotocol.py[line: 72] INFO: 发起的请求为：http://192.168.6.27:6030/portals
2020-05-27 09:13:46,426 httpprotocol.py[line: 73] INFO: 请求头为：{}
2020-05-27 09:13:46,783 InterfaceUnittestTestCase.py[line: 44] INFO: 正在对服务器返回body进行解码
2020-05-27 09:13:46,783 InterfaceUnittestTestCase.py[line: 63] INFO: 服务器返回结果"响应体(body)": 	






<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>现场安全受控平台-欢迎您</title>
		<link rel="shortcut icon" href="/favicon.ico?id=1">
		<link rel="stylesheet" type="text/css" href="/themes/cqsh/css/login.css?v=2.0.3">
		<link rel="icon" href="/favicon.ico?id=2" type="image/x-icon" />
		<script type="text/javascript">window._downloadurl={oldversion:"http://192.168.6.27:6030/portals/static/download/common/browser/49.0.2623.112_Chrome_x86.exe",
		newversion:"http://192.168.6.27:6030/portals/static/download/common/browser/62.0.3202.94_Chrome_x64.exe"}</script>
	</head>
	
	<body>
		<form id="loginForm" onkeydown="if (event.keyCode == 13) $(':button.justUse').trigger('click');" action="//login?service=http%3A%2F%2F192.168.6.27%3A6030%2Fportals%2Fcas&tenantCode=cqsh&trial=false" method="post">
			<input type="hidden" id="rememberMe" name="rememberMe" value="false" />
			<input type="hidden" name="lt" value="LT-53-usIPKMbqso39sRLtT1qRAhYqBZIbI3-passport.51gxc.com" />
            <input type="hidden" name="execution" value="0d856413-fed6-40a7-a67b-82076f7f5031_ZXlKaGJHY2lPaUpJVXpVeE1pSjkuTmxkbFRIUXlPVFZ4UzBvdmNWRjVTRUZHZHpaeFlVbG1ja2R2Y2taUVNqWTBTMHBSZDJoaWVFNXFRbEZzVG1GNFdrY3paeXRRVFhOdU5VVmlUVlV5TWtaTGRGWm9TWGQxY2tWSGFUWTJPRXBtV21oaE9GTnZha2hZUzJ4cWRYRmtUR2hHTjJsUk5IZ3hVM2gxVm1aa1lsWXlWME5UYUZFNE1sZFNhVkpZUjFwc2MwNDJaMUpDUzFkS1IwUnhhemh1YUVGT1EyZzNPRVpPU0ZkNFVHeEVjR3hTTVdsMVNucEZTRkF5VEZONVNXRjFRblpwYTBGV1NtUXdWMFYzSzNoQlV6VldUWG8yWm1FM1lXTnJibFJyUzJGRlNUSk5kRGxaYkZKSVVVNUxUVnBHY1V0NU1VaDBhMWROTm5sdGQyVmFlbFoxWmk5eWVIbzNTV2RIT1hseVowUnBTbGRLUW0xdU9FNXpOR00yTlU5RFkwVXhNbGxGUTFGT01tUjVMMGhITUZwVFVXVlNjRlZHVjA1TVJHeHFaV3gwZFZOVWRWRXpZV2xCZUhCeFlrSnBOVTVDYjFnMmR6Tk5LMEp4Um1Zd1VIbFVXRUUyZFRZclluaFRPREl6Y0RGUE5YSmxTamhYTkVOeFkybGtUM1J4UTJNMFlqbHhaa3BMZFVnM1pGRnhTRlEzT0VkS1RtUnlabXRZZW5kRlRuZGFZM0l5UzJKMFdIQlFMMDlaVkdaalFUWlZVVlpvTVRSMVp6STJUMXBGUldkWEx6UlFiWEV3WkZOUFEyZHJObVJFUjNWMWFrUktWRmN2ZVRZMFdVOUJZUzg0U0hOaFQwaEVTVWw0ZFVrclVHSk5aMVJNYVd0MmRuQkljRzlPY3pGTE9YWlZSM1pOZVZocWEzbFVPR3BZU1RkWmRIaHBialpETkhkSFNqUm9lamQyU0drclVtVldWRkZOWlRFcmVsUXdUV2QzVG0xc2NtMURMMkZuZEN0NVVqaFJhMGt6TlhGVFJrTTViSHB2WW5SYU56WTFTMWRRZEdRNWFqSmhUa3B1YWpNM1VIZzFPV2h0Yms0elNVTXpZMnBZV1VKWU5tbFFVekY2WWxaS2NHbEthMkYzVUhGM1N6bDJaWEZxT0dORFMwRnlXa28yVVRGa1RrZEZVSHB3UkhOcU9YbEtNMUp3U0RrdlQydGtPUzhyUWtWc1VHWnVNMVYwUzA1TlRIWmpNMFJMUzBKUFVGTlVja0ZTWXpJdlVFOVRjazlZY1RkQ1FsUm5Va1pMYVZkaE9EUkpWVGN2TkVGU1VWRkpkVFp1TDI4cmEweElRVFpYVEdSQ05sUXhNbmxKVVhVemMyNDBSMVEyZW5GS05XTndkR052U1c5YVRsTnhVMUl4YldadVVIb3ZhRWN5UTJsclIyWjFPVWsxU0ZOemFsTmFObHBET0dNNVNITlNNVGhrWVdNdmFWSjRiak5OTjI5RlRUSllWbWh0Y1V0NWJtSkxSMHBGTkZGS1kxTm1NRzR5ZGt0U2RIbEJUVU1yVEVablRVWjJla292TW1NclNWQjBOV3BIWVZKTk5taEdiRWs0VUdONmQybHlWVkZvUlhsc2RHSlVPREpISzFCdWJrNXJZMlZFU21wRFQzQnFTREpKUjJWTFZtODJRMnRYUmtremFsQjNibTVEYUhZd0szbFFSVGh5V2xOV01VSnlTbmRUU1dobWRUQlJTbmcxWVcxQ01uRktXVzFwZFhRd1UyWjVXV2hJYVVnMFIxcHZkRWhTUVhkMk1sVjZjaTlEVjJoSkx6TkpWR05QV1ROaldFTnFLMWhTV1ZWSFF5OUxWRE5NVTFaalVXbFpOMDgwYXpoRFRHbElTVWxoZDBGSkswTjFSMVJyYURadmEwWlpka3RSUTFBeVNrVmlNbTFsZDNOYVJWVkxiakZQYVdSWFZpdGlhSFkyZWxkMlFYTmtOR1JZZEdORE5uQTJaa2R5WWpkNlNsaHZNRGh6WmxSWWJqSkxhakJITVM5bGVsWmphbUZvUWt4VmRYWTJjMWw1TTNCdVNTdFJVazR6T0dOTmIwdDNURmxvWWtOVlEwaFFSMG94WkVFeVZqZHJRbkpEU0ZoVVlsUmxRbVJNVTIxU1dFTklNMUZJWkdWc09TOHZaR1pCU3pBMmNEWjZPSFJEUWt4clNGSklMMU5UVWtOeFRFb3hjRWg0VkZsNkt6SnNNa1kwVkZKdVJFNTJTWGsxTVVVMGMzTmFjV1JZVnpCdFRqZHNSbHBzUW1WVU4xUnhSVWswTWl0blZFWXpZVXBYUVZacloxRk9RVlUxYWxsclFraHBTbkZIV0RWT1VtTk9kVnA0Y0dONGVEQlFXVTFPT1hsbmRrRkRkWGRLVG1SbVdESXlSU3RLZUM5emFXUnhURkEyTHpad1JGbDJOM0phVTJSTFpFeEVhVFJST1U5Q2RqZGpiM1o0Y0VOdU1YSlBlazloU2xsTGNFMXFXall3T0ZOeFduSlVWVTVKU0dVNVYySTFaek0xZG5Bck9FMDBjbmxWWWtkNFpYaEhhVmRUTjFOdFFVTk5OMmhLZDFCdUwxaFhXbmwxUld0NlVIWnBOSEZHVTFsVFJWcGlkamxoVEZwMVUwTjZTekp4UjBVeVRrVm9RemM1ZVVwUk9XOTNjbFZyVFRkcE0yYzRaR1Z3ZWt4eVJXZHFNek5wVkRoUVFtNTRlRzlDUmt3NE5sZDBjR3BMTWpncllUWnVjR3QzTjFJMFVXaFpNelJTVkhSdE5HVlRlVmRsYVdGeWVsRkJjamh1YjBwM2FXWkNjamhaWVRaT1oxQkVOVTR3VW5WNmMzZE5SMFpOTDJkRGVYVkNZMU0yS3poclZXVkphelZ5VUdWdVZXYzNRVGMyUjBseWNuRnFXVVZYTkd0NFVERnVhMWNyWm05c1VURjJVSHBDYW1wVWIweHpaVU54TUhKMk5VWk9SME5vWlZFNWRHcDZObEJTUVhwek4waDVNVk5RTVROSVZGaGxUV1JOUkhOUVpFNDFhWEJJWm10VVRWbzJabWhKUTBJd1ZVdElVVXBQVVVnM1VXSkdhbThySzFWSk1XcFNkR2xrU2t4VFZqaEVORWcyVDJWeVExbFlkMlpHTVU1QmRISm9TbFJYTm05cFlucFhlWFU1VDNSSlYxVm9jRlZ0VUZadldYQTRjMlYyTkZSVGJHbzFjazFSU0VGelJFSlBXRFp2U1N0YVpYQjFLekp5WVdaNFYyNW1MMVF6VkM5MGJEUXdlazFPU0V4YVUxVldaMnRZV2tjMlQwTkdWbXd2VWpoUWFWTkxXSGhpZGpKUWJHeGtTVEZRVmtkTWNHcEZNR1EwTTNWaEwwSkdTVXQ0VkRrdloyeFRTVGRpWTJoSldVUnlVM1JKWVZCT1FYUXphMjlITkRWdU5qWTNUWG80TUU1d1ZsSlBTVk16VEdKa2FFWkZTbFV4YW1wdk1HaDRUR0pSZVZrNEwxZGhXRUpOT0VwT1QybzJORGh0TWs1MmExVXhVMHQ0VG0xWE16RTFhM2xHYmtseVR6RnZSVTF4VGpSbUwwaGliek40YkVGcFpsYzRVMlZpU20xeWFrUlNWekZXVG5wSmNVSXJOV2xyWkc1aFYyMU1aMlJvVlU5UFNuWk5TRkJrU0VaTk1IZ3ZkRWhuTlVneU5FcHBRbEJUYjNnMFIycEpSRmMyWTFKV2QwRmpOM000Y2xWbGJYcEpLMnRMVG1Wbk1IRkRhbWxyUlU0eVlrazBSMHRtT1RWQ1JIUXJkRnBVY1cxVlRtaG9VMmxxWVdwdUx6UlhTalJtUmxOVE16bHFiVXh3V25CS1l6SnlkV2hFVERoWWRWRmFWa2hWVldsdFVIaEpMMkpDWldWemFtazFOMUozUjBNeVdUVlJaVTB2VUdOcWRFcDBkV0p5WlV4UFpYRndOVlJGUVZaUlQycHdNMlYzVldKeVRrNHhSSE1yU20weFJ6bGhaM2h1ZVVKQmR6ZE1NbkV5Y1daR1JGaHpjbE0zYUdSVVdWWnVaakZOZG1scWEybHJMMHQzTVhSTFREaGxabUpNUVRkalQyb3JZMHB1ZUZGa1Z5dElXV1FyYzBSRWRsYzNObGh6TjA5S2FVTllSbFkyV2t3emVERlpjRzFzVFRCR1ZuVlZiVUpEWVdGTmVrRTBiM1J5TVhBck5tUnBORm8xVTNReFdVdHJPVXBrVkdKc05HUXdaR0V2ZEU1YWNsSlRUbk5aY0hGTGNuWTFOblpyTm5SUmVXZG9lR3BYT1RKQlJuVkNVRFpEYm5rMlF6aDJXRloyTm1WVFZXMURjM2xVUVdwRVNXVlNiRE5GWTNKbGJrTmpjamxuVXpOc2J6WXlOV0o0WVhWamRrRkhRazVhYWk5WFUxSjBjaTlHUVhOR1dqTXdlRkJ4TTJGS1ZYQlhiekJtYTJrMFZUbFVPWGxaUmlzdmRqRkJPR3hJYzFkU2IxTnNaRUZuT0hkRU5WUTJWREZwY1ROblprVTJVVmhrWTJoUFpXeDJiVmhpVld3elJEZHpSa2g1U0dadFdHaHpjVEJ3YXpjNGJVRjZMMUJ6VkhNM0x6WXZWa3d6WkRsWGJFZHZNSGhPTWxsUk5sSTNZM2hrTjJkTmFHMDJOMHhVVG14eGNXbEJlbVV2YUVaTldHTmxRa2RVU3poV05XNW1UVk12VDJwQ1lYUmhZbVJ6ZEU5bmVUVTJhbXBzVFhkTWNHOXFNVVJFY0dJdmRuRjBWMVpYVDBKTFozQnRkVFZSZVhCSVozSkdibFpPWWtJNGVFRkZNMHRYY2sxc1UycFBSR0ZZVG5GNWNGVjZNRVpsY0Vrd1dtdE9SRkJ6WlhKdmJXcDNhRE0wZG5keFdtTXJlVGxOZERKdmVUaHllRnBuWXpaUVRYZHZNMVpIVEZBMFVVZENkVmhxUlV4VVlYSmFkMWRTYW00elVtSTNlVFo1ZEhJNEswUlBkR2hoZHpaR1UwUmtkak16VlVaNFlVdGtOVVF2VGpaaVptUnNZV0Z0V0hSSlFVcHZkakJZYTJKRE5WSk9kVVFyVjFwcldXTnBkVTVZY0dsVVYyRm5WRzlvYlZSaWN6a3ZZVGRsUjJRd2NFSlJkMGczV0VSS2VIWTVabFJIVlVGWmMxQk5jbXMwVUhwVEsyeFVZMUJ6VXpSME1GVlBTMWx2TmtaVVpIWjBOQzh2V2pNME1VbEVNVGg1VUVoQ1ZqWnNjbkJhUm5CaldrTlFjVGxDY1ZCaFltdFFWa05wZFZab1VUaDVjRFJWT0hwbE1YTnZhMFp3Tm1GekwwNVdhRzFxYlhGdE5HNXJLMHhxVFZwSE4xSlNaWGxwUjFWWGNHRkxjRTEzTDJvMlN6SklkRGh4WVVNMFdURlVRVVUxYUdSNWFUVmlObFJKU1VNNFMyUkNkUzkwVkVZMVJYbEhWbE5tZUdSQ1RrMTRZMjAwZERWSlZXVk1hVFF5YXpsRUsxWkpOV0lyTUU5U01qRlpRV294Vld4WFZHSkRZbE5MYUhwRVVYaGpUbFprU1VKbmVIUjRXVkJDZG5aNE1FOVdiazVHTkRkNlRUbFZaeTgxYjFsaVZIbEJZVmt3VXpVeU1FRXlabXRHVXpCVWJFTkhORFJEZHpnOS5LMEo2ZXE4emNsMElSUGMwc2E4Qmt2bGExR1FHdVlIakdEUkt0ZEUwNXMtSHVWc2ZKekFlU0JjdG5kcDBVZTY2UkJVS2FWSFEtbU90OVlRaHpPcEg5QQ==" />
            <input type="hidden" name="_eventId" value="submit" />
            <input type="hidden" name="module" value="UNKNOWN" />
            <input type="hidden" id="pwd" name="password">
			<table>
				<tr>
					<td>
				 		<div class="header">
				 			<img src="/themes/cqsh/images/login/logo.png">
			 				<p>中石油长庆石化公司</p>
			 			</div>
				 		<div class="wrap-bg">
				 			<div class="wrap clearfix">
						 		<div class="passport-login-pop">
							 		<div class="title">账号登录</div>
									<div class="user-name">
										
						                	
						                	
						                    	
						                    	<input id="username" name="username" class="required name" placeholder="用户编码" accesskey="n" type="text" value="" size="25" autocomplete="off"/>
						                	
						            	
									</div>
									<div class="pwd">
										<input type="password" placeholder="密码" accesskey="" name="pwd1" id="pwd1"/>
									</div>
									<div class="img-code">
										<input type="text" placeholder="图片验证码" class="textcode" name="captcha" maxlength="4"/>
										<img src="">
									</div>
									<div class="login_button clearfix">
										<input type="button" value="立即登录" class="justUse"/>
									</div>
									<div class="ruleslogin">
										<div class="auto-login">
											<label class="rememberMe">
												<img src="/themes/cqsh/images/login/kuang.png"/>
											</label>
											<b>下次自动登录</b>
										</div>
									</div>
									<div class="m-nerror clearfix" id="nerror">
											<div class="ferrortail"></div>
											<div class="ferrorhead"></div>
									</div>
									<p class="register comm-footer">
										<span>没有账号？</span>
										<span>注册</span>
									</p>
					 			</div>

								<!--注册开始-->
								<div class="register-area">
									<div class="title">账号注册</div>
									<div class="cbs-type">
										<label>承包商类型</label>
										<select name="">
										<!--<option value="施工及检测">施工及检测</option>-->
										<!--<option value="监理">监理</option>-->
										<!--<option value="服务类">服务类</option>-->
										</select>
									</div>
									<div class="depart-name">
										<label>单位名称</label>
										<input type="text" class="comm-text">
									</div>
									<div class="card-type">
										<label>证件类型</label>
										<select name="">
										<!--<option value="普通营业注册号">普通营业注册号</option>-->
										<!--<option value="社会信用代码">社会信用代码</option>-->
										</select>
									</div>
									<div class="card-num">
										<label>证件号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="person-name">
										<label>申请人姓名</label>
										<input type="text" class="comm-text">
									</div>
									<div class="phone-num">
										<label>手机号码</label>
										<input type="text" class="comm-text">
									</div>
									<div class="register-password">
										<label>密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="register-confirm">
										<label>确认密码</label>
										<input type="password" class="comm-text">
									</div>
									<div class="ver-code">
										<label>验证码</label>
										<input type="text" class="comm-text"><span class="get-code">请输入：8888</span>
									</div>
									<div class="register_button clearfix">
										<input type="button" value="注册" class="justRegist">
									</div>
									<div class="m-nerror clearfix" id="r-nerror">
										<div class="ferrortail"></div>
										<div class="ferrorhead"></div>
									</div>
									<p class="login-footer comm-footer"><span>已有账号？</span><span>登录</span></p>
									<div class="success-info">
										
										<img class="icon-success" src="/themes/cqsh/images/login/icon_success.png" alt="成功"/>
										<p class="success-tip">注册申请成功</p>
										<p class="success-item">您的注册申请已送交相应的引入单位审批，请耐心等待。或直接与引入单位联系，加速审批。</p>
										<div class="confirm-btn">确定</div>
									</div>
								</div>
								<!--注册结束-->

					 		</div>
					 		<div class="prompt">
								<div class="pcontent">
									<img src="/themes/cqsh/images/login/computer.png"/>
									<div>系统检测到您的浏览器版本过低，推荐下载<a id="download_chrome">chrome浏览器</a>或升级浏览器至IE8以上继续访问系统。</div>
								</div>
							</div>
				 		</div>
				 		<div class="image">
							<span class="title">
							    <ul>
									<li>
										<a>现场总管APP<img class="img" src="/themes/cqsh/images/login/xczg.png"/></a>

									</li>
						            
									
										

									
									
									
										

									
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li class="one" id="download">下载<span></span>chrome</li>
									<li class="shu" style="padding: 0 0.1em; color:#777;">|</li>
									<li><a href="http://192.168.6.27:6030/portals/static/download/common/manual/培训资料.pdf" target="_blank">下载操作手册</a></li>


						            
							            
							            	
							                
					                            
					                                
					                                
					                                
					                                
													
													
													
													
													
													
													
													
													
					                            
							       			
							                
							             
							         
							   </ul>
						     </span>
						</div>
					    <div class="certification">
							
						</div>
			 		</td>
			 	</tr>
	 		</table>
		 <div>
</div></form>
		 <script type="text/javascript">
		 	 var contextPath = "";
			 document.getElementById("loginForm").removeAttribute('action');
			 function getclassnodes(classname, tagname) {
	            tagname = tagname || "*";
	            var nodes = document.getElementsByTagName(tagname);
	            var finds = [];
	            for (var i = 0; i < nodes.length; i++) {
	                var classes = nodes[i].getAttribute("class");
	                if (classes && classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                    finds.push(nodes[i]);
	                }
	            }
	            return finds;
	        }
	        function addclass(node, classname) {
	            var classes = node.getAttribute("class");
	            if (!classes) classes = "";
	            if (!classes.match(eval("/\\s?" + classname + "\\s?/ig"))) {
	                node.setAttribute("class", classes + " " + classname)
	            }
	        }
	        function removeclass(node, classname) {
	            var classes = node.getAttribute("class");
	            var reg = eval("/\\s?" + classname + "\\s?/gi");
	            node.setAttribute("class", classes.replace(eval("/\\s?" + classname + "\\s?/gi"), ""))
	        }
	        function changeclass(node, classname) {
	            node.setAttribute("class", classname);
	        }

	        function init(){
		        var getPubkeyFlag=true;
		        var captchashowing = false;
		        var errorMsg=$(".m-nerror").find("div.ferrorhead").html();
		        $(function(){

				$(".image .title ul li a").mouseover(function(){
					$(this).find(".img").css("display","block");
					
				});

				$(".image .title ul li a").mouseout(function(){
					$(this).find(".img").css("display","none");
				})
				if($.trim(errorMsg)!="")
				{
					$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html(errorMsg);
				}
				$(".img-code").css("display",captchashowing ? "block" : "none").find("img").click(function(){
					if(!$(".img-code").is(":hidden"))
					{
						$(".img-code img").attr("src","/preLogin/captcha.jpg?t=" + new Date().getTime());
					}
				}).trigger("click");
				$(".auto-login img").click(function(){
					$(":hidden[name='rememberMe']").val($(":hidden[name='rememberMe']").val()=="false");
					$(this).attr("src","/themes/cqsh/images"+"/login/kuang"+($(":hidden[name='rememberMe']").val()=="true" ? "_xz.png" : ".png"));
				});

				document.getElementById("download").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				document.getElementById("download_chrome").onclick = function(e){
					if(window._sysinfo.oldsystem) {
						window.open(window._downloadurl.oldversion);
					} else {
						window.open(window._downloadurl.newversion);
					}
				};

				$(':button.justUse').click(function(){
					$(".m-nerror").hide();
					if($.trim($(":input[name='username']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='username']").focus().position().top}).find("div.ferrorhead").html("请输入用户名");
						return;
					}
					if($.trim($(":password[name='pwd1']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":password[name='pwd1']").focus().position().top}).find("div.ferrorhead").html("请输入密码");
						return;
					}
					if(!$(".img-code").is(":hidden")&&$.trim($(":input[name='captcha']").val())=="")
					{
						$(".m-nerror").css({'display':'block','top':$(":input[name='captcha']").focus().position().top}).find("div.ferrorhead").html("请输入验证码");
						return;
					}
					$(this).val('登录中...' ).attr("disabled",true);
					if(!getPubkeyFlag){
						password = hdsec.sha256Encrypt($("#pwd1").val());
						$("#pwd").val(password);
						$("#pwd1").attr("disabled",true);
						$('#loginForm').submit();
						return ;
					}

					$.ajax({
						type: "get",
						dataType: "json",
						url: "/preLogin/getPubKey",
						error:function(){
							$(this).val('立即登录' ).attr("disabled",false);
						},
						context:this,
						success: function(data) {
							if(data.success){
								var resultData = data.data;
								password = hdsec.sha256Encrypt($("#pwd1").val());
								//公钥指数、系数、ts时间戳、stokenKey、
								var modulus = resultData["modulus"];
								var publicExponent = resultData["publicExponent"];
								password = hdsec.rsaSecurity(modulus, publicExponent, password);
								$("#pwd").val(password);
								$("#pwd1").attr("disabled",true);
								$('#loginForm').submit();
							}else{
								$(".m-nerror").css({'display':'block','top':$(":button.justUse").position().top}).find("div.ferrorhead").html("获取公钥出错，登录失败");
								$(this).val('立即登录' ).attr("disabled",false);
							}
						}
					});
				});

				// 注册模块开始
				var tiptoken = -1;
				function hidetip() {
					$(".m-nerror").hide();
				}

				$(".register").click(function () {
					$(".passport-login-pop").hide();
					$(".register-area").show();
					$(".success-info").hide();
					$(".register-area .comm-text").val("");
					$(".register-area select").empty();

					// 获取注册页面相关字典项
					$.ajax({
						type: "get",
						dataType: "json",
						url: "/outerReq/cbs/register/querydict",
						success: function (data) {
							var status = data.status;
							if (status == 3200) {
								var certificatestype = data.data.certificatestype;
								var contractortype = data.data.contractortype;
								var cbsType = "";
								var cardType = "";
								for (var i = 0; i < contractortype.length; i++) {
									cbsType += '<option code="'+ contractortype[i].code +'">'+ contractortype[i].name +'</option>';
								}
								for (var j = 0; j < certificatestype.length; j++) {
									cardType += '<option code="'+ certificatestype[j].code +'">'+ certificatestype[j].name +'</option>';
								}
								$(".cbs-type select").append(cbsType);
								$(".card-type select").append(cardType);
							}
						},
						error: function () {
							
						}
					})
				})

				$(".login-footer").click(function () {
					$(".passport-login-pop").show();
					$(".register-area").hide();
				})
				$(".success-info .success-close").click(function () {
					$(".success-info").hide();
				})
				$(".success-info .confirm-btn").click(function () {
					$(".register-area").hide();
					$(".passport-login-pop").show();
				})

				// 单位名称不能超过20个字
				$(".depart-name input").blur(function () {
					var namelen = $(".depart-name input").val().length;
					if (namelen > 20) {
						$(".m-nerror").css({'display':'block','top':$(".depart-name").focus().position().top}).find("div.ferrorhead").html("单位名称不能超过20个字！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 验证手机号码格式 （只支持内地+86格式手机注册）
				$(".phone-num input").blur(function () {
					var personname = $(".phone-num input").val().trim();
					var validateReg = /^((\+?86)|(\(\+86\)))?1\d{10}$/;
					var test = validateReg.test(personname);
					if (test != true) {
						$(".m-nerror").css({'display':'block','top':$(".phone-num").focus().position().top}).find("div.ferrorhead").html("请输入正确的手机号码格式！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);

						return;
					} else {
						$(".m-nerror").css({'display':'none'});
					}
				})

				// 点击注册
				$(".justRegist").click(function () {
					var cbstypecode = $(".cbs-type select option:selected").attr("code");
					var departname = $(".depart-name input").val();
					var cardtypecode = $(".card-type select option:selected").attr("code");
					var cardnum = $(".card-num input").val();
					var personname = $(".person-name input").val();
					var phonenum = $(".phone-num input").val();
					var regispass = $(".register-password input").val();
					var regisconfirm = $(".register-confirm input").val();
					var vercode = $(".ver-code input").val();

					if (cbstypecode == "" || departname == "" || cardtypecode == "" || cardnum == "" || personname == "" || phonenum == "" || regispass == "" || regisconfirm == "" || vercode == "") {
						$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("注册信息不能为空，请输入！");
						
						clearTimeout(tiptoken);  // 清空上一次，不让它关闭
						tiptoken = setTimeout(function() {
							hidetip();
						}, 5000);
						return;
					} else if (cbstypecode != "" && departname != "" && cardtypecode != "" && cardnum != "" && personname != "" && phonenum != "" && regispass != "" && regisconfirm != "" && vercode != "") {

					$(".m-nerror").css({'display':'none'});
					if (regispass == regisconfirm) {
						if (vercode == "8888") {
							var hdsecpwd = hdsec.sha256Encrypt($.trim(regispass));
							var hdseccfirmpwd = hdsec.sha256Encrypt($.trim(regisconfirm));
							var tenantid = 1;
							var data = {"contractortype":cbstypecode, "unitname":departname, "certificatestype":cardtypecode, "certificatesnum":cardnum, "username":personname,
							"mobile":phonenum, "vercode":vercode, "password":hdsecpwd, "confirmpassword":hdseccfirmpwd, "tenantid":tenantid};
							var jstring = JSON.stringify(data) ;


							// ajax 请求
							$.ajax({
								type: "post",
								dataType: "json",
								contentType: "application/json",
								async: true,
								data: jstring,
								url: "/outerReq/cbs/register/complete",
								success: function (data) {
									var status = data.status;
									if (status == 3200) {
										// 注册申请成功
										$(".success-info").show();
										} else {
										var messages = data.messages;
										for (var i = 0; i < messages.length; i++) {
											$(".m-nerror").css({'display':'block','top':$(".register_button input").focus().position().top}).find("div.ferrorhead").html(messages[i].message);
											
											clearTimeout(tiptoken);  // 清空上一次，不让它关闭
											tiptoken = setTimeout(function() {
												hidetip();
											}, 5000);
											return;
										}
									}
								},
								error: function () {
									
								}
							})
							} else {
								$(".m-nerror").css({'display':'block','top':$(".ver-code").focus().position().top}).find("div.ferrorhead").html("请输入8888！");
								
								clearTimeout(tiptoken);  // 清空上一次，不让它关闭
								tiptoken = setTimeout(function() {
									hidetip();
								}, 5000);
								return;
							}
						} else {
							$(".m-nerror").css({'display':'block','top':$(".register-password").focus().position().top}).find("div.ferrorhead").html("密码不一致，请重新输入！");
							
							clearTimeout(tiptoken);  // 清空上一次，不让它关闭
							tiptoken = setTimeout(function() {
								hidetip();
							}, 5000);
							return;
						}
					}
				})
				// 注册模块结束
			});

		var b = "unknown";
		var bv = "unknown";
		var c = true;
		var ua = navigator.userAgent;
		var s = "unknown";
		var sv = "unknown";
		var browser = ua.match(/MS(IE)\s([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Firefox)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(OPR)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Chrome)\/([^\s\;]*)/i);
		if (!browser) browser = ua.match(/(Safari)\/([^\s\;]*)/i);
		if (browser) {
		b = RegExp.$1;
		bv = RegExp.$2;
		c = true;
		if (b == "OPR") b = "Opera";
		if (b == "IE") {
		bv.match(/(\d+)/);
		if (7 >= parseInt(RegExp.$1)) c = false;
		}
		}
		var system = ua.match(/(Windows\sNT)\s([^\s\;]*)/);
		if (!system) system = ua.match(/(Windows)\s([^\s\;]*)/i);
		if (!system) system = ua.match(/(Mac\sOS\sX)\s([^\s\;]*)/i);
		if (system) {
		s = RegExp.$1;
		sv = RegExp.$2;
		o = false;
		if (s == "Windows" || (s == "windows NT" && (6.0 >= parseFloat(sv)))) {
		o = true;
		}
		}

		window._sysinfo = {browser: b, browserversion: bv, compitable: c, system:s, systemversion:sv, oldsystem:o};

		if (!window._sysinfo.compitable) {
		
// 		window.location.href = "http://192.168.6.27:6030/portals/static/common/update.html";
		$(".prompt").css("display","block");
	      document.getElementById("loginbtn").disabled = true;
	      $("#loginbtn").css({'background':'#eee', 'color':'#ccc', 'border':'1px #ccc solid'});
		}

	        }
		</script>

		<script type="text/javascript" src="/js/head.min.js"></script>
		
		<script type="text/javascript" src="/themes/cqsh/js/login.js"></script>
	</body>
</html>

	
	
	
	
	
	
	
	
	
	
	
	
	
	


2020-05-27 09:13:46,784 InterfaceUnittestTestCase.py[line: 64] INFO: 服务器返回结果"请求头(headers)": [('Server', 'nginx'), ('Date', 'Wed, 27 May 2020 01:15:10 GMT'), ('Content-Type', 'text/html;charset=UTF-8'), ('Transfer-Encoding', 'chunked'), ('Connection', 'close'), ('Pragma', 'no-cache'), ('Expires', 'Thu, 01 Jan 1970 00:00:00 GMT'), ('Cache-Control', 'no-cache'), ('Cache-Control', 'no-store'), ('Set-Cookie', 'TENANTCODE=cqsh; Expires=Thu, 27-May-2021 01:15:10 GMT; Path=/; HttpOnly'), ('Set-Cookie', 'module=passports; Expires=Thu, 27-May-2021 01:15:10 GMT; Path=/'), ('Set-Cookie', 'JSESSIONID=CF5BFB12D1561126959D3677DE0EC734; Path=/; HttpOnly')]
2020-05-27 09:13:46,784 InterfaceUnittestTestCase.py[line: 65] INFO: 服务器返回结果"状态码(code)": 200
2020-05-27 09:13:46,785 testcase.py[line: 202] INFO: 正在更新步骤执行结果
2020-05-27 09:13:46,785 mydb.py[line: 73] INFO: query：UPDATE case_step_report_tb SET runresult="Pass",reason="", protocol_method="get", runtime="2020-05-27 09:13:46",step_action="{'类名': 'InterfaceUnittestTestCase', '函数': 'test_interface_of_urlencode', '请求头': {}, '方法': 'get', 'url': '/portals', '参数': {}}", expected_results="" WHERE executed_history_id = 20200527091346 AND testcase_id = 13 AND step_id = 23 AND project='长庆项目演示' AND testplan='pan1_of_cq'  AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:46,811 testcase.py[line: 205] INFO: 测试用例[id=13, name=作业票授权]执行成功
2020-05-27 09:13:46,811 testplan.py[line: 81] INFO: 正在更新用例执行结果
2020-05-27 09:13:46,811 mydb.py[line: 73] INFO: query：UPDATE testcase_report_tb SET runresult="Pass", runtime="2020-05-27 09:13:46", case_exec_history_id="20200527091346" WHERE executed_history_id = 20200527091336 AND testcase_id = 13 AND project='长庆项目演示' AND testplan='pan1_of_cq' AND runtime='0000-00-00 00:00:00'
2020-05-27 09:13:47,032 testplan.py[line: 94] INFO: 正在更新testlink上测试计划[testplan_id=4, bulid_version=1],对应用例[testcase_id=13]的执行结果
2020-05-27 09:13:47,194 testplan.py[line: 104] INFO: 测试计划[project=长庆项目演示 ,testplan=pan1_of_cq]已执行完
2020-05-27 09:13:47,195 main.py[line: 210] INFO: 接口测试已执行完成，正在关闭数据库连接
2020-05-27 09:13:47,196 htmlreporter.py[line: 37] INFO: 正在查询测试用例总数
2020-05-27 09:13:47,196 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE executed_history_id = %s  data：('20200527091336',)
2020-05-27 09:13:47,197 htmlreporter.py[line: 43] INFO: 正在查询执行通过的用例数
2020-05-27 09:13:47,197 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Pass', '20200527091336')
2020-05-27 09:13:47,198 htmlreporter.py[line: 49] INFO: 正在查询执行失败的用例数
2020-05-27 09:13:47,198 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Fail', '20200527091336')
2020-05-27 09:13:47,199 htmlreporter.py[line: 55] INFO: 正在查询执行出错的用例数
2020-05-27 09:13:47,200 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Error', '20200527091336')
2020-05-27 09:13:47,201 htmlreporter.py[line: 61] INFO: 正在查询未执行的用例数
2020-05-27 09:13:47,201 mydb.py[line: 88] INFO: query：SELECT count(testcase_id) FROM testcase_report_tb WHERE runresult = %s AND executed_history_id = %s  data：('Block', '20200527091336')
2020-05-27 09:13:47,202 htmlreporter.py[line: 87] INFO: 正在查询已运的测试计划
2020-05-27 09:13:47,202 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527091336',)
2020-05-27 09:13:47,203 htmlreporter.py[line: 114] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例执行结果
2020-05-27 09:13:47,203 mydb.py[line: 106] INFO: query：SELECT id, executed_history_id, testcase_id,tc_external_id, testcase_name,testsuit, runresult, runtime FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s GROUP BY testcase_id, runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527091336')
2020-05-27 09:13:47,205 htmlreporter.py[line: 124] INFO: 正在记录测试测试计划[project：长庆项目演示, testplan：pan1_of_cq]的测试用例运行结果到测试报告
2020-05-27 09:13:47,206 htmlreporter.py[line: 138] INFO: 正在查询已运的测试计划
2020-05-27 09:13:47,206 mydb.py[line: 106] INFO: query：SELECT project, testplan FROM testcase_report_tb WHERE executed_history_id = %s GROUP BY project, testplan ORDER BY id ASC  data：('20200527091336',)
2020-05-27 09:13:47,207 htmlreporter.py[line: 150] INFO: 正在查询测试计划[project：长庆项目演示, testplan：pan1_of_cq]已运行的测试用例
2020-05-27 09:13:47,207 mydb.py[line: 106] INFO: query：SELECT tc_external_id, testcase_name, project, testplan, case_exec_history_id, testcase_id FROM testcase_report_tb WHERE project=%s AND testplan=%s AND executed_history_id = %s  GROUP BY testcase_id,runtime ORDER BY id ASC  data：('长庆项目演示', 'pan1_of_cq', '20200527091336')
2020-05-27 09:13:47,209 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=9]步骤运行结果
2020-05-27 09:13:47,209 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 9, '20200527091339')
2020-05-27 09:13:47,211 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=15]步骤运行结果
2020-05-27 09:13:47,211 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 15, '20200527091340')
2020-05-27 09:13:47,213 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=19]步骤运行结果
2020-05-27 09:13:47,213 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 19, '20200527091341')
2020-05-27 09:13:47,215 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=17]步骤运行结果
2020-05-27 09:13:47,215 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 17, '20200527091342')
2020-05-27 09:13:47,216 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=6]步骤运行结果
2020-05-27 09:13:47,217 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 6, '20200527091344')
2020-05-27 09:13:47,218 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=11]步骤运行结果
2020-05-27 09:13:47,218 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 11, '20200527091345')
2020-05-27 09:13:47,220 htmlreporter.py[line: 182] INFO: 正在查询测试用例[id=13]步骤运行结果
2020-05-27 09:13:47,220 mydb.py[line: 106] INFO: query：SELECT step_num, protocol_method, protocol, HOST, PORT, step_action, expected_results, runresult, reason, runtime FROM case_step_report_tb WHERE project= %s AND testplan= %s AND testcase_id = %s AND executed_history_id = %sGROUP BY step_num ORDER BY step_num ASC  data：('长庆项目演示', 'pan1_of_cq', 13, '20200527091346')
2020-05-27 09:13:47,222 htmlreporter.py[line: 203] INFO: 正在设置测试报告结果文件名
2020-05-27 09:13:47,222 htmlreporter.py[line: 213] INFO: 测试报告文件名所在路径为：E:\\project\\report\\test_report20200527091336.html
2020-05-27 09:13:47,222 htmlreporter.py[line: 206] INFO: 正在生成测试报告
2020-05-27 09:13:47,224 main.py[line: 235] INFO: 生成测试报告成功
2020-05-27 09:13:47,911 main.py[line: 242] INFO: E:\\project\\report\\test_report20200527091336.html
2020-05-27 09:13:47,912 main.py[line: 245] INFO: 正在发送测试报告邮件...
2020-05-27 09:13:49,045 main.py[line: 249] INFO: 发送邮件成功
